digraph "state transitions" {
  fontname="Helvetica" fontsize=12 penwidth=2.0 splines=true ordering=out compound=true overlap=scale nodesep=0.3 ranksep=0.1
  node [shape=plaintext style=filled fillcolor="#FFFFFF01" fontname=Helvetica fontsize=12 penwidth=2.0]
  edge [fontname=Helvetica fontsize=10]

    "unset" [margin=0 label= < 
      <table align="center" cellborder="0" border="2" style="rounded" width="48">
        <tr><td width="48" cellpadding="7">alarm not set</td></tr>
      </table>
    >]
    subgraph "cluster_set" {
      label= <
      <table cellborder="0" border="0">
        <tr><td>alarm set</td></tr>
          <hr/>
          <tr><td align="left">show a bell</td></tr>
      </table>
      > style=rounded penwidth=2.0
      "set" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
        "silent" [margin=0 label= < 
      <table align="center" cellborder="0" border="2" style="rounded" width="48">
        <tr><td width="48" cellpadding="7">silent</td></tr>
      </table>
    >]
    "ringing" [margin=0 label= < 
      <table align="center" cellborder="0" border="2" style="rounded" width="48">
        <tr><td width="48" cellpadding="7">bzzzz!</td></tr>
      </table>
    >]
    "snoozing" [margin=0 label= < 
      <table align="center" cellborder="0" border="2" style="rounded" width="48">
        <tr><td width="48" cellpadding="2">snoozing</td></tr>
          <hr/>
          <tr><td align="left" cellpadding="2">show a plus behind the bell</td></tr>
      </table>
    >]
  
    }

    "unset" -> "set" [label="time entered   \l" lhead="cluster_set"]
    "silent" -> "ringing" [label="time >= alarm time   \l"]
    "ringing" -> "silent" [label="off   \l"]
    "ringing" -> "snoozing" [label="snooze time := time + 9 min   \l"]
    "snoozing" -> "ringing" [label="time >= snooze time   \l"]
    "snoozing" -> "silent" [label="off   \l"]
}
