{
  "version": 3,
  "sources": ["../sitesrc/svg-to-uri.js"],
  "sourcesContent": ["const MAX_SIGNED_SHORT = 32767;\n\nexport function toRasterURI(pSVG, pCallback) {\n  const lImg = document.createElement(\"img\");\n\n  lImg.src =\n    \"data:image/svg+xml;charset=utf-8,\" +\n    encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp \"&#160;\">]>'.concat(pSVG));\n  lImg.addEventListener(\"load\", function(pEvent) {\n    const lCanvas = document.createElement(\"canvas\");\n    const lCanvasContext = lCanvas.getContext(\"2d\");\n    const lImage = pEvent.target;\n\n    /*\n     * When the passed image is too big for the browser to handle\n     * return an error string\n     *\n     * See https://github.com/sverweij/mscgen_js/issues/248 for\n     * an overview of the practical limits in various browsers and\n     * pointers for further research.\n     */\n    if (lImage.width > MAX_SIGNED_SHORT || lImage.height > MAX_SIGNED_SHORT) {\n      pCallback(null, \"image-too-big\");\n    } else {\n      lCanvas.width = lImage.width;\n      lCanvas.height = lImage.height;\n\n      lCanvasContext.drawImage(lImage, 0, 0);\n      pCallback(lCanvas.toDataURL(\"image/png\", 0.8));\n    }\n  });\n};\n\nexport function toVectorURI(pSVGSource) {\n  return (\n    \"data:image/svg+xml;charset=utf-8,\" +\n    encodeURIComponent(\n      '<!DOCTYPE svg [<!ENTITY nbsp \"&#160;\">]>'.concat(pSVGSource),\n    )\n  );\n}\n"],
  "mappings": "4BAEO,SAASA,EAAYC,EAAMC,EAAW,CAC3C,IAAMC,EAAO,SAAS,cAAc,KAAK,EAEzCA,EAAK,IACH,oCACA,mBAAmB,2CAA2C,OAAOF,CAAI,CAAC,EAC5EE,EAAK,iBAAiB,OAAQ,SAASC,EAAQ,CAC7C,IAAMC,EAAU,SAAS,cAAc,QAAQ,EACzCC,EAAiBD,EAAQ,WAAW,IAAI,EACxCE,EAASH,EAAO,OAUlBG,EAAO,MAAQ,OAAoBA,EAAO,OAAS,MACrDL,EAAU,KAAM,eAAe,GAE/BG,EAAQ,MAAQE,EAAO,MACvBF,EAAQ,OAASE,EAAO,OAExBD,EAAe,UAAUC,EAAQ,EAAG,CAAC,EACrCL,EAAUG,EAAQ,UAAU,YAAa,EAAG,CAAC,EAEjD,CAAC,CACH,CAEO,SAASG,EAAYC,EAAY,CACtC,MACE,oCACA,mBACE,2CAA2C,OAAOA,CAAU,CAC9D,CAEJ",
  "names": ["toRasterURI", "pSVG", "pCallback", "lImg", "pEvent", "lCanvas", "lCanvasContext", "lImage", "toVectorURI", "pSVGSource"]
}
