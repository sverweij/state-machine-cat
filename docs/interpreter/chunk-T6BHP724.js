import{a as s}from"./chunk-SHDKREUK.js";var I=/[\u0000-\u002C\u002F\u003B-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u0300-\u036F\u037E\u2000-\u200B\u200E-\u206F\u2190-\u2BFF\u2FF0-\u3000\uD800-\uF8FF\uFDD0-\uFDEF\uFFFE-\uFFFF]/g,S=/[-.0-9\u00B7\u0300-\u036F\u203F-\u2040]/g;function l(t){return t.replaceAll(I,"_")}function g(t){let n=l(t);return n.match(S)&&(n=`_${t}`),n}function y(t){return t=t||"",t.length===0?"__empty":g(t[0]).concat(l(t.slice(1)))}var u=y;var E=/[\u00B7\u0300-\u036F\u203F-\u2040\u0000-\u0029\u002B-\u002C\u002F\u003B-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u0300-\u036F\u037E\u2000-\u200B\u200E-\u206F\u2190-\u2BFF\u2FF0-\u3000\uD800-\uF8FF\uFDD0-\uFDEF\uFFFE-\uFFFF]/g,T=/[.]/g;function c(t){return t.replaceAll(E,"_")}function d(t){let n=c(t);return n.match(T)&&(n=`_${t}`),n}function _(t){return t=t.replaceAll(/\s+/g," ").trim(),d(t[0]).concat(c(t.slice(1)))}function N(t){let n=t??"";return n.length===0?"empty":n.split(/[\n\r]+/).filter(i=>i.length>0).map(_).join(" ")}var f=N;var h=new Map([["regular","state"],["initial","initial"],["final","final"],["terminate","final"],["parallel","parallel"],["history","history"],["deephistory","history"]]);function A(t){return h.get(t)||"state"}function O(t){let n={target:u(t.to)};return t.event&&(n.event=f(t.event)),t.cond&&(n.cond=t.cond),t.action&&(n.action=t.action),t.type&&(n.type=t.type),n}function R(t,n){return t.filter(i=>i.type===n).map(i=>i.body)}function o(t,n,i,e){let r=R(i,e);r.length>0&&(t[n]=(t[n]||[]).concat(r))}function B(t,n){n.actions&&(o(t,"onentries",n.actions,"entry"),o(t,"onentries",n.actions,"activity"),o(t,"onexits",n.actions,"exit"))}function D(t,n,i){let e=i.filter(r=>r.from===n.name).map(O);e.length>0&&(t.transitions=e)}function C(t,n,i){if(n.statemachine){let e=F(n.statemachine,void 0,i);t.states=(t.states||[]).concat(e.states),e.initial&&(t.initial=e.initial)}}function J(t){return t=t||[],n=>{let i={kind:A(n.type),id:u(n.name)};return n.type==="deephistory"&&(i.type="deep"),B(i,n),D(i,n,t),C(i,n,t),i}}function M(t){let n=t.states.filter(i=>i.type==="initial");if(n.length>0)return n[0].name}function p(t,n){let i=n;if(n&&t.transitions){let e=t.transitions.filter(r=>r.from===n);e.length>0&&!e[0].action&&(i=e[0].to)}return i}function F(t,n,i){let e=M(t),r=p(t,e),a={states:t.states.filter(m=>r&&r!==e?m.type!=="initial":!0).map(J(i||new s(t).flattenedTransitions))};return r&&(a.initial=u(r)),a}export{F as a};
//# sourceMappingURL=chunk-T6BHP724.js.map
