import{a as s}from"./chunk-SHDKREUK.js";function o(t,n){return t.includes(n)}var g=[{re:/initial/,stateType:"initial"},{re:/final/,stateType:"final"},{re:/parallel/,stateType:"parallel"},{re:/(deep.*history)|(history.*deep)/,stateType:"deephistory"},{re:/history/,stateType:"history"},{re:/^\^.*/,stateType:"choice"},{re:/^].*/,stateType:"forkjoin"}];function f(t){return n=>n.re.test(t)}function l(t){return(g.find(f(t))||{stateType:"regular"}).stateType}function a(t){return{name:t,type:l(t)}}function c(t){return!!t.statemachine}function y(t){let n=t?.states??[];return n.filter(c).reduce((e,r)=>e.concat(y(r.statemachine)),n.map(({name:e})=>e))}function p(t,n){n=n??y(t),t.states=t?.states??[];let e=t?.transitions??[];for(let r of t.states.filter(c))r.statemachine.states=p(r.statemachine,n);for(let r of e)o(n,r.from)||(n.push(r.from),t.states.push(a(r.from))),o(n,r.to)||(n.push(r.to),t.states.push(a(r.to)));return t.states}function m(t,n){let e="junction";return t<=1&&n>1&&(e="fork"),t>1&&n<=1&&(e="join"),e}function T(t,n=new s(t)){return t.states=t.states.map(e=>{if(e.type==="forkjoin"&&!e.typeExplicitlySet){let r=n.findTransitionsByTo(e.name).length,i=n.findTransitionsByFrom(e.name).length;e.type=m(r,i)}return e.statemachine&&(e.statemachine=T(e.statemachine,n)),e}),t}function R(t,n){return t.name===n.name}function b(t,n){return t.reduce((e,r)=>{let i=e.findIndex(u=>n(u,r));return i>-1?(e[i]=r,e):e.concat(r)},[])}var x=/(?<event>[^[/]{1,256})?(?<condition>\[[^\]]{1,256}\])?[^/]{0,100}(?<action>\/.{1,2048})?/;function S(t){let n={},e=x.exec(t);return e?.groups&&(e.groups.event&&(n.event=e.groups.event.trim()),e.groups.condition&&(n.cond=e.groups.condition.slice(1,-1).trim()),e.groups.action&&(n.action=e.groups.action.slice(1,e.groups.action.length).trim())),n}function d(t,n,e,r=Boolean){r(e)&&(t[n]=e)}function A(t,n,e){d(t,n,e,r=>r&&r.length>0)}var h=/^(?<triggerType>entry|activity|exit)\s{0,100}\/\s{0,100}(?<triggerBody>[^\n$]{0,2048})(?:\n|$)/;function I(t){let n={type:"activity",body:t},e=h.exec(t);return e?.groups&&(n.type=e.groups.triggerType,n.body=e.groups.triggerBody),n}function v(t){return t.split(/\n\s*/g).map(n=>n.trim()).map(I)}export{l as a,a as b,p as c,T as d,R as e,b as f,S as g,d as h,A as i,v as j};
//# sourceMappingURL=chunk-DCU2SGZ6.js.map
