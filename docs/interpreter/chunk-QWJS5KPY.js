import{a as m}from"./chunk-PWCD3LMQ.js";import{a as R}from"./chunk-WFFSAAHR.js";import{a as T}from"./chunk-DSGGCMS6.js";import{b as P}from"./chunk-FW4363Y4.js";var N=P(R(),1);var G=[{name:"fontname",value:'"Helvetica"'},{name:"fontsize",value:"12"},{name:"penwidth",value:"2.0"}],U={dot:[{name:"splines",value:"true"},{name:"ordering",value:"out"},{name:"compound",value:"true"},{name:"overlap",value:"scale"},{name:"nodesep",value:"0.3"},{name:"ranksep",value:"0.1"}],fdp:[{name:"K",value:"0.9"}],osage:[{name:"pack",value:"42"}],neato:[{name:"epsilon",value:"0.9"}]},W={"bottom-top":[{name:"rankdir",value:"BT"}],"left-right":[{name:"rankdir",value:"LR"}],"right-left":[{name:"rankdir",value:"RL"}]},K=[{name:"shape",value:"plaintext"},{name:"style",value:"filled"},{name:"fillcolor",value:'"#FFFFFF01"'},{name:"fontname",value:"Helvetica"},{name:"fontsize",value:12},{name:"penwidth",value:"2.0"}],X=[{name:"fontname",value:"Helvetica"},{name:"fontsize",value:10}];function x(e){return`${e.name}=${e.value}`}function j(e,t,o){let r=[];for(let l of G)r.push(l);for(let l of U[e]||[])r.push(l);for(let l of W[t]||[])r.push(l);for(let l of o||[])r.push(l);return r.map(x).join(" ")}function V(e){return K.concat(e||[]).map(x).join(" ")}function M(e){return X.concat(e||[]).map(x).join(" ")}var C=P(R(),1);function Y(e,t){let o=(t||[]).find(r=>r.name==="color")?.value;return o&&!e.color&&["initial","fork","join","junction","forkjoin","terminate","final"].includes(e.type)?o:e.color??"black"}function q(e){return e.replace(/\\/g,"\\\\").replace(/\n\s*/g,"\\l").replace(/"/g,'\\"').concat("\\l")}function E(e){return e.replace(/\\/g,"\\\\").replace(/\n\s*/g,"   \\l").replace(/"/g,'\\"').concat("   \\l")}function z(e){let t=e||"top-down";return t==="top-down"||t==="bottom-top"}function k(e,t){return t.from===t.to&&(e.findStateByName(t.from)?.statemachine??!1)&&t.type!=="internal"}function b(e){return e.map(q).join("")}function I(e,t){if(e.note){let o=`note_${e.name}`,r=`
${t}  "${o}" [color=black fontcolor=black label="${b(e.note)}" shape=note fontsize=10 fillcolor="#ffffcc" penwidth=1.0]`;return r+=`
${t}  "${e.name}" -> "${o}" [style=dashed arrowtail=none arrowhead=none]`,r}return""}function L(e,t,o){let r=structuredClone(e);return r.colorAttribute=e.color?` color="${e.color}"`:"",r.fontColorAttribute=e.color?` fontcolor="${e.color}"`:"",r.color=Y(e,t.dotNodeAttrs),r.class=e.class?`state ${e.type} ${e.class}`:`state ${e.type}`,r.label=C.default.escape(e.label??e.name),r.noteText=I(e,o),!e.isParallelArea&&e.type==="parallel"&&(e.statemachine?.states??[]).length>0&&(r.statemachine.states=e.statemachine.states.map(l=>({...l,isParallelArea:l.type==="regular"}))),r}function A(e){return e==="activity"?"":`${e}/ `}function F(e,t,o){let r=' tailport="n" headport="n"',l=' tailport="n"',n=m(e,"direction");return z(n)?(r=' tailport="e" headport="e"',l=' tailport="w"'):(t.findStateByName(o.from)?.parent??!1)&&(r=' tailport="n" headport="n"',l=' tailport="s"'),{lTailPorts:r,lHeadPorts:l}}function J(e,t){let o=e.active?" penwidth=3.0":"";return`${t}  "${e.name}" [shape=circle style=filled class="${e.class}" color="${e.color}" fillcolor="${e.color}" fixedsize=true height=0.15 label=""${o}]${e.noteText}`}function Q(e,t){return e.map(o=>N.default.escape(`${A(o.type)}${o.body}`)).map((o,r)=>{let l=`<tr><td align="left" cellpadding="2">${o}</td></tr>`;return r===0&&(l=`<hr/>${l}`),`
${t}        ${l}`}).join("")}function Z(e,t){return e.map(o=>N.default.escape(`${A(o.type)}${o.body}`)).map((o,r)=>{let l=`<tr><td align="left">${o}</td></tr>`;return r===0&&(l=`<hr/>${l}`),`
${t}        ${l}`}).join("")}function p(e,t){let o=e.active?" peripheries=1 style=rounded":"",r=(e.actions?.length??0)>0?2:7,l=Q(e?.actions??[],t),n=e.active?`<i>${e.label}</i>`:e.label,i=`
${t}    <table align="center" cellborder="0" border="2" style="rounded" width="48">
${t}      <tr><td width="48" cellpadding="${r}">${n}</td></tr>${l}
${t}    </table>`;return`${t}  "${e.name}" [margin=0 class="${e.class}" label= <${i}
${t}  >${e.colorAttribute}${e.fontColorAttribute}${o}]${e.noteText}`}function S(e,t,o,r,l){let n=e.isParallelArea?"1.0":e.active?"3.0":"2.0",i=e.isParallelArea?"dashed":"rounded",a=Z(e?.actions??[],t),s=e.active?`<i>${e.label}</i>`:e.label,c=`${t}    <table cellborder="0" border="0">
${t}      <tr><td>${s}</td></tr>${a}
${t}    </table>`;return`${r.findExternalSelfTransitions(e.name).map(u=>`${t}  "self_tr_${u.from}_${u.to}_${u.id}" [shape=point style=invis width=0 height=0 fixedsize=true]
`).join("")}${t}  subgraph "cluster_${e.name}" {
${t}    class="${e.class}" label= <
${c}
${t}    > style=${i} penwidth=${n}${e.colorAttribute}${e.fontColorAttribute}
${t}    "${e.name}" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
${O(e?.statemachine?.states??[],`${t}    `,o,r,l)}
${t}  }${e.noteText}`}function H(e,t,o,r,l){return e.statemachine?S(e,t,o,r,l):p(e,t)}function ee(e,t){let o=e.active?" peripheries=2 penwidth=3.0":"";return`${t}  "${e.name}" [shape=circle class="${e.class}" label="H"${e.colorAttribute}${e.fontColorAttribute}${o}]${e.noteText}`}function te(e,t){let o=e.active?" peripheries=2 penwidth=3.0":"";return`${t}  "${e.name}" [shape=circle class="${e.class}" label="H*"${e.colorAttribute}${e.fontColorAttribute}${o}]${e.noteText}`}function oe(e,t){return e.map(o=>{let r=N.default.escape(`${A(o.type)}${o.body}`);return t&&(r=`<i>${r}</i>`),r}).join("\\n")}function re(e,t){let o=e.active?"penwidth=3.0 ":"",l=oe(e?.actions??[],e?.active??!1),n=`${t}  "${e.name}" [shape=diamond fixedsize=true width=0.35 height=0.35 fontsize=10 label=" " class="${e.class}"${e.colorAttribute}${o}]`,i=`${t}  "${e.name}" -> "${e.name}" [color="#FFFFFF01" fontcolor="${e.color}" class="${e.class}" label=<${l}>]`;return`${n}
${i}${e.noteText}`}function _(e,t,o){let r=e.active?"penwidth=3.0 ":"",l=m(o,"direction"),n=z(l)?" height=0.1":" width=0.1";return`${t}  "${e.name}" [shape=rect fixedsize=true label=" " style=filled class="${e.class}" color="${e.color}" fillcolor="${e.color}"${r}${n}]${e.noteText}`}function le(e,t){let o=e.active?" penwidth=3.0":"",r=I(e,t);return`${t}  "${e.name}" [shape=circle fixedsize=true height=0.15 label="" style=filled class="${e.class}" color="${e.color}" fillcolor="${e.color}"${o}]${r}`}function ne(e,t){let o=`
${t}      <table align="center" cellborder="0" border="0">
${t}        <tr><td cellpadding="0"><font color="${e.color}" point-size="20">X</font></td></tr>
${t}        <tr><td cellpadding="0"><font color="${e.color}">${e.label}</font></td></tr>
${t}      </table>`;return`${t}  "${e.name}" [label= <${o}
${t}    > class="${e.class}"]${e.noteText}`}function ie(e,t){let o=e.active?" peripheries=2 penwidth=3.0":"";return`${t}  "${e.name}" [shape=circle style=filled class="${e.class}" color="${e.color}" fillcolor="${e.color}" fixedsize=true height=0.15 peripheries=2 label=""${o}]${e.noteText}`}var ae=new Map([["initial",J],["regular",H],["history",ee],["deephistory",te],["choice",re],["fork",_],["forkjoin",_],["join",_],["junction",le],["terminate",ne],["final",ie]]);function se(e,t,o,r,l){let n=L(e,o,t),i=r.findTransitionsToSiblings(e.name,l);for(let s of i)l.add(s.id);let a=B(i,t,o,r);return(ae.get(e.type)??H)(n,t,o,r,l)+a+`
`}function O(e,t,o,r,l){return e.map(n=>se(n,t,o,r,l)).join("")}function ce(e,t,o,r){let l=`${E(e.label??" ")}`,n=e.color?` color="${e.color}"`:"",i=e.color?` fontcolor="${e.color}"`:"",a=e.width?` penwidth=${e.width}`:"",s=e.class?`transition${e.type?" "+e.type+" ":" "}${e.class}`:`transition${e.type?" "+e.type:""}`,c=r.findStateByName(e.from)?.statemachine?` ltail="cluster_${e.from}"`:"",$=r.findStateByName(e.to)?.statemachine?` lhead="cluster_${e.to}"`:"",u=`tr_${e.from}_${e.to}_${e.id}`;if(k(r,e)){let{lTailPorts:d,lHeadPorts:f}=F(o,r,e),g="";if(e.note){let h=`note_${u}`,w=`
${t}  "${h}" -> "self_tr_${e.from}_${e.to}_${e.id}" [style=dashed arrowtail=none arrowhead=none weight=0]`,D=`
${t}  "${h}" [label="${b(e.note)}" shape=note fontsize=10 color=black fontcolor=black fillcolor="#ffffcc" penwidth=1.0]`;g=w+D}let y=`
${t}  "${e.from}" -> "self_tr_${e.from}_${e.to}_${e.id}" [label="${l}" arrowhead=none class="${s}"${d}${c}${n}${i}${a}]`,v=`
${t}  "self_tr_${e.from}_${e.to}_${e.id}" -> "${e.to}" [class="${s}"${$}${f}${n}${a}]`;return y+v+g}if(e.note){let d=`note_${u}`,f=`i_${d}`,g=`
${t}  "${f}" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]`,y=`
${t}  "${e.from}" -> "${f}" [arrowhead=none${c}${n}${a}]`,v=`
${t}  "${f}" -> "${e.to}" [label="${l}"${$}${n}${i}${a}]`,h=`
${t}  "${f}" -> "${d}" [style=dashed arrowtail=none arrowhead=none weight=0]`,w=`
${t}  "${d}" [label="${b(e.note)}" shape=note fontsize=10 color=black fontcolor=black fillcolor="#ffffcc" penwidth=1.0]`;return g+y+v+h+w}return`
${t}  "${e.from}" -> "${e.to}" [label="${l}" class="${s}"${c}${$}${n}${i}${a}]`}function B(e,t,o,r){return e.map(l=>ce(l,t,o,r)).join("")}function $e(e,t={},o=""){let r=j(m(t,"engine"),m(t,"direction"),t?.dotGraphAttrs||[]),l=V(t.dotNodeAttrs||[]),n=M(t.dotEdgeAttrs||[]),i=new T(e),a=new Set,s=O(e.states,o,t,i,a),c=B(i.flattenedTransitions.filter($=>!a.has($.id)),o,t,i);return`digraph "state transitions" {
  ${r}
  node [${l}]
  edge [${n}]

${s}${c}
}
`}export{$e as a};
//# sourceMappingURL=chunk-QWJS5KPY.js.map
