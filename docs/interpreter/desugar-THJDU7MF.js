import{a as l}from"./chunk-RSLXVH2O.js";import{a as f}from"./chunk-QBCC6J4V.js";import{a as u}from"./chunk-SHDKREUK.js";import"./chunk-FW4363Y4.js";function h(i,e,n){return i?`${i}${n}${e}`:e}function I(i,e,n){let t={...i,...e,from:i.from,to:e.to,id:n.next()};return e.action&&(t.action=h(i.action,e.action,`
`)),(t.event||t.cond||t.action)&&(t.label=l(t.event,t.cond,t.action)),t}function M(i,e,n,t){let s=[];for(let o of i){let a=!1;for(let r of e)if(r===o.to&&n[r]){for(let c of n[r])s.push(I(o,c,t));a=!0}a||s.push(o)}return s}function m(i,e,n,t){let s=structuredClone(i);return s.transitions&&e.length>0&&(s.transitions=M(s.transitions,e,n,t)),s.states=s.states.map(o=>o.statemachine?{...o,statemachine:m(o.statemachine,e,n,t)}:o),s}function d(i,e){let n=structuredClone(i);return n.transitions&&(n.transitions=n.transitions.filter(t=>!e.some(s=>s===t.from||s===t.to))),n.states=n.states.filter(t=>!e.includes(t.name)).map(t=>t.statemachine?{...t,statemachine:d(t.statemachine,e)}:t),n}function T(i,e=["fork","junction","choice"]){let n=new u(i),t=n.findStatesByTypes(e).map(({name:r})=>r),s=t.reduce((r,c)=>(r[c]=n.findTransitionsByFrom(c),r),{}),o=n.getMaximumTransitionId(),a=m(i,t,s,new f(o));return d(a,t)}export{T as default};
//# sourceMappingURL=desugar-THJDU7MF.js.map
