import{a as l}from"./chunk-SHDKREUK.js";var I=/[\u0000-\u002C\u002F\u003B-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u0300-\u036F\u037E\u2000-\u200B\u200E-\u206F\u2190-\u2BFF\u2FF0-\u3000\uD800-\uF8FF\uFDD0-\uFDEF\uFFFE-\uFFFF]/g,S=/[-.0-9\u00B7\u0300-\u036F\u203F-\u2040]/g;function c(t){return t.replaceAll(I,"_")}function g(t){let n=c(t);return n.match(S)&&(n=`_${t}`),n}function u(t){return t=t||"",t.length===0?"__empty":g(t[0]).concat(c(t.slice(1)))}var y=/[\u00B7\u0300-\u036F\u203F-\u2040\u0000-\u0029\u002B-\u002C\u002F\u003B-\u0040\u005B-\u0060\u007B-\u00BF\u00D7\u00F7\u0300-\u036F\u037E\u2000-\u200B\u200E-\u206F\u2190-\u2BFF\u2FF0-\u3000\uD800-\uF8FF\uFDD0-\uFDEF\uFFFE-\uFFFF]/g,E=/[.]/g;function f(t){return t.replaceAll(y,"_")}function T(t){let n=f(t);return n.match(E)&&(n=`_${t}`),n}function d(t){return t=t.replaceAll(/\s+/g," ").trim(),T(t[0]).concat(f(t.slice(1)))}function o(t){let n=t??"";return n.length===0?"empty":n.split(/[\n\r]+/).filter(i=>i.length>0).map(d).join(" ")}var _=new Map([["regular","state"],["initial","initial"],["final","final"],["terminate","final"],["parallel","parallel"],["history","history"],["deephistory","history"]]);function N(t){return _.get(t)||"state"}function h(t){let n={target:u(t.to)};return t.event&&(n.event=o(t.event)),t.cond&&(n.cond=t.cond),t.action&&(n.action=t.action),t.type&&(n.type=t.type),n}function A(t,n){return t.filter(i=>i.type===n).map(i=>i.body)}function a(t,n,i,e){let r=A(i,e);r.length>0&&(t[n]=(t[n]||[]).concat(r))}function O(t,n){n.actions&&(a(t,"onentries",n.actions,"entry"),a(t,"onentries",n.actions,"activity"),a(t,"onexits",n.actions,"exit"))}function R(t,n,i){let e=i.filter(r=>r.from===n.name).map(h);e.length>0&&(t.transitions=e)}function B(t,n,i){if(n.statemachine){let e=F(n.statemachine,void 0,i);t.states=(t.states||[]).concat(e.states),e.initial&&(t.initial=e.initial)}}function D(t){return t=t||[],n=>{let i={kind:N(n.type),id:u(n.name)};return n.type==="deephistory"&&(i.type="deep"),O(i,n),R(i,n,t),B(i,n,t),i}}function C(t){let n=t.states.filter(i=>i.type==="initial");if(n.length>0)return n[0].name}function J(t,n){let i=n;if(n&&t.transitions){let e=t.transitions.filter(r=>r.from===n);e.length>0&&!e[0].action&&(i=e[0].to)}return i}function F(t,n,i){let e=C(t),r=J(t,e),s={states:t.states.filter(m=>r&&r!==e?m.type!=="initial":!0).map(D(i||new l(t).flattenedTransitions))};return r&&(s.initial=u(r)),s}export{F as a};
//# sourceMappingURL=chunk-Q3DFRE4O.js.map
