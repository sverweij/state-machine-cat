import{b as Dt,c as Mt,d as Ft,e as qt,f as Bt,g as Gt,h as ge,i as ve,j as Vt}from"./chunk-34DTPQC7.js";import{a as de}from"./chunk-PWCD3LMQ.js";import{a as Ot}from"./chunk-QBCC6J4V.js";import"./chunk-DSGGCMS6.js";import"./chunk-FW4363Y4.js";var we=class extends SyntaxError{constructor(l,t,A,E){super(l),this.expected=t,this.found=A,this.location=E,this.name="SyntaxError"}format(l){let t="Error: "+this.message;if(this.location){let A=null,E=l.find(v=>v.source===this.location.source);E&&(A=E.text.split(/\r\n|\n|\r/g));let x=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(x):x,j=this.location.source+":"+c.line+":"+c.column;if(A){let v=this.location.end,B="".padEnd(c.line.toString().length," "),C=A[x.line-1],d=(x.line===v.line?v.column:C.length+1)-x.column||1;t+=`
 --> `+j+`
`+B+` |
`+c.line+" | "+C+`
`+B+" | "+"".padEnd(x.column-1," ")+"".padEnd(d,"^")}else t+=`
 at `+j}return t}static buildMessage(l,t){function A(d){return d.codePointAt(0).toString(16).toUpperCase()}let E=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function x(d){return E?d.replace(E,P=>"\\u{"+A(P)+"}"):d}function c(d){return x(d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+A(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+A(P)))}function j(d){return x(d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+A(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+A(P)))}let v={literal(d){return'"'+c(d.text)+'"'},class(d){let P=d.parts.map(N=>Array.isArray(N)?j(N[0])+"-"+j(N[1]):j(N));return"["+(d.inverted?"^":"")+P.join("")+"]"+(d.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(d){return d.description}};function B(d){return v[d.type](d)}function C(d){let P=d.map(B);if(P.sort(),P.length>0){let N=1;for(let G=1;G<P.length;G++)P[G-1]!==P[G]&&(P[N]=P[G],N++);P.length=N}switch(P.length){case 1:return P[0];case 2:return P[0]+" or "+P[1];default:return P.slice(0,-1).join(", ")+", or "+P[P.length-1]}}function Z(d){return d?'"'+c(d)+'"':"end of input"}return"Expected "+C(l)+" but "+Z(t)+" found."}};function zt(n,l){l=l!==void 0?l:{};let t={},A=l.grammarSource,E={program:At},x=At,c=",",j=";",v="[",B="]",C=":",Z="{",d="}",P="=",N="label",G="color",Ce="class",O="active",X="type",Je="regular",oe="initial",y="terminate",u="final",Y="parallel",We="history",D="deephistory",le="choice",M="forkjoin",S="fork",K="join",ce="junction",fe="width",Q="external",pe="internal",ee="->",z="=>>",I="=>",R=">>",F=":>",V="--",J="==",be="<-",Xe="<<=",Ye="<=",Ke="<<",Qe="<:",as="#",os=".",te='"',Pe='\\"',et="/*",Ae="*/",tt="//",st=/^[0-9]/,rt=/^[a-zA-Z0-9_\- ]/,nt=/^[,;{]/,it=/^[;{]/,at=/^[^;, "\t\n\r=\-><:{[]/,ls=/^[ \t]/,cs=/^[\r\n]/,fs=/^[^\r\n]/,ot=$(",",!1),lt=$(";",!1),ps=T("state"),ct=$("[",!1),ft=$("]",!1),pt=$(":",!1),us=$("{",!1),ds=$("}",!1),gs=T("extended state attribute"),ne=$("=",!1),ms=T("state attribute name"),hs=$("label",!0),ut=$("color",!0),ys=T("class attribute"),$s=$("class",!0),vs=T("state flag"),ws=$("active",!0),bs=T("state type"),dt=$("type",!0),Ps=T("state type type"),As=$("regular",!1),xs=$("initial",!1),Es=$("terminate",!1),ks=$("final",!1),Ts=$("parallel",!1),Cs=$("history",!1),Ss=$("deephistory",!1),_s=$("choice",!1),Is=$("forkjoin",!1),js=$("fork",!1),Ls=$("join",!1),Rs=$("junction",!1),Ns=T("transition"),Os=T("extended transition attribute"),Ds=T("transition attribute name"),Ms=T("transition type name"),Fs=T("numeric transition attribute name"),qs=$("width",!0),Bs=T("transition type value"),Gs=$("external",!1),Vs=$("internal",!1),zs=T("left to right arrow"),Us=$("->",!1),Hs=$("=>>",!1),Zs=$("=>",!1),Js=$(">>",!1),Ws=$(":>",!1),Xs=$("--",!1),Ys=$("==",!1),Ks=T("right to left arrow"),Qs=$("<-",!1),er=$("<<=",!1),tr=$("<=",!1),sr=$("<<",!1),rr=$("<:",!1),nr=$("#",!1),ir=$(".",!1),gt=re([["0","9"]],!1,!1,!1),ar=T("double quoted string"),se=$('"',!1),mt=$('\\"',!1),ie=Kr(),or=T("valid class string"),ht=re([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1,!1),yt=re([",",";","{"],!1,!1,!1),$t=re([";","{"],!1,!1,!1),lr=T("identifier"),vt=re([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1,!1),cr=T("whitespace"),fr=re([" ","	"],!1,!1,!1),pr=T("line end"),ur=re(["\r",`
`],!1,!1,!1),dr=$("/*",!1),wt=$("*/",!1),gr=$("//",!1),mr=re(["\r",`
`],!0,!1,!1),hr=T("comment");function yr(e){return e.states=Mt(e),Ft(e)}function $r(e,s){let i={};return ge(i,"states",e),ve(i,"transitions",s),i}function Zn(e){return e}function Jn(e){return e}function vr(e){return Bt(e[0].concat(e[1]),qt)}function wr(e,s,i){return i}function br(e,s,i,a){return a}function Pr(e,s,i,a,p){return p}function Ar(e,s,i,a,p){let g=Dt(s);for(let b of i||[])ge(g,b.name,b.value);return ge(g,"typeExplicitlySet",(i||[]).some(b=>b.typeExplicitlySet)),ge(g,"statemachine",p),ve(g,"note",e),a&&ve(g,"actions",Vt(a)),g}function xr(e,s){return{name:e,value:s}}function Er(e,s){return{name:e,value:s}}function kr(e){return{name:e,value:!0}}function Tr(e,s){return{name:e,value:s,typeExplicitlySet:!0}}function Cr(e){return e.toLowerCase()}function Sr(e){return e.toLowerCase()}function _r(e){return e.toLowerCase()}function Ir(e){return e.toLowerCase()}function jr(e,s,i){return i}function Lr(e,s,i,a){return a}function Rr(e,s,i,a){a&&(s.label=a,s=Object.assign(s,Gt(a)));for(let p of i||[])ge(s,p.name,p.value);return ve(s,"note",e),s.id=l.counter.next(),s}function Nr(e,s){return{from:e,to:s}}function Or(e,s){return{from:s,to:e}}function Dr(e,s){return{name:e,value:s}}function Mr(e,s){return{name:e,value:s}}function Fr(e,s){return{name:e,value:s}}function qr(e,s){return{name:e,value:s}}function Br(e){return e.toLowerCase()}function Gr(e){return e.toLowerCase()}function Wn(e){return e}function Vr(e){return e.join("").trim()}function zr(e){return parseFloat(e.join(""))}function Ur(e){return parseInt(e.join(""),10)}function Hr(e){return e.join("").replace(/\\\"/g,'"')}function Xn(e){return e}function Zr(e){return e.join("")}function Yn(e){return e}function Jr(e){return e.join("").trim()}function Wr(e){return e.join("").trim()}function Kn(e){return e}function Qn(e){return e}function Xr(e){return e.join("")}let r=l.peg$currPos|0,m=r,ue=[{line:1,column:1}],U=r,xe=l.peg$maxFailExpected||[],o=l.peg$silentFails|0,me;if(l.startRule){if(!(l.startRule in E))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');x=E[l.startRule]}function ei(){return n.substring(m,r)}function ti(){return m}function si(){return{source:A,start:m,end:r}}function ri(){return he(m,r)}function ni(e,s){throw s=s!==void 0?s:he(m,r),Pt([T(e)],n.substring(m,r),s)}function ii(e,s){throw s=s!==void 0?s:he(m,r),en(e,s)}function Yr(e=r){let s=n.codePointAt(e);return s===void 0?"":String.fromCodePoint(s)}function $(e,s){return{type:"literal",text:e,ignoreCase:s}}function re(e,s,i,a){return{type:"class",parts:e,inverted:s,ignoreCase:i,unicode:a}}function Kr(){return{type:"any"}}function Qr(){return{type:"end"}}function T(e){return{type:"other",description:e}}function bt(e){let s=ue[e],i;if(s)return s;if(e>=ue.length)i=ue.length-1;else for(i=e;!ue[--i];);for(s=ue[i],s={line:s.line,column:s.column};i<e;)n.charCodeAt(i)===10?(s.line++,s.column=1):s.column++,i++;return ue[e]=s,s}function he(e,s,i){let a=bt(e),p=bt(s),g={source:A,start:{offset:e,line:a.line,column:a.column},end:{offset:s,line:p.line,column:p.column}};return i&&A&&typeof A.offset=="function"&&(g.start=A.offset(g.start),g.end=A.offset(g.end)),g}function f(e){r<U||(r>U&&(U=r,xe=[]),xe.push(e))}function en(e,s){return new we(e,null,null,s)}function Pt(e,s,i){return new we(we.buildMessage(e,s),e,s,i)}function At(){let e,s,i,a;return e=r,s=h(),i=xt(),a=h(),m=e,e=yr(i),e}function xt(){let e,s,i,a;for(o++,e=r,s=tn(),s===t&&(s=null),i=[],a=Tt();a!==t;)i.push(a),a=Tt();return m=e,e=$r(s,i),o--,e}function tn(){let e,s,i,a,p,g;for(e=r,s=r,i=[],a=r,p=Se(),p!==t?(n.charCodeAt(r)===44?(g=c,r++):(g=t,o===0&&f(ot)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,p=Se(),p!==t?(n.charCodeAt(r)===44?(g=c,r++):(g=t,o===0&&f(ot)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t);return a=r,p=Se(),p!==t?(n.charCodeAt(r)===59?(g=j,r++):(g=t,o===0&&f(lt)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t),a!==t?(i=[i,a],s=i):(r=s,s=t),s!==t&&(m=e,s=vr(s)),e=s,e}function Se(){let e,s,i,a,p,g,b,k,W,q,ae,Nt,je,In,Le;for(o++,e=r,s=[],i=Ee();i!==t;)s.push(i),i=Ee();return i=h(),a=$e(),a!==t?(p=h(),g=r,n.charCodeAt(r)===91?(b=v,r++):(b=t,o===0&&f(ct)),b!==t?(k=sn(),n.charCodeAt(r)===93?(W=B,r++):(W=t,o===0&&f(ft)),W!==t?(m=g,g=wr(s,a,k)):(r=g,g=t)):(r=g,g=t),g===t&&(g=null),b=h(),k=r,n.charCodeAt(r)===58?(W=C,r++):(W=t,o===0&&f(pt)),W!==t?(q=h(),ae=vn(),ae!==t?(Nt=h(),m=k,k=br(s,a,g,ae)):(r=k,k=t)):(r=k,k=t),k===t&&(k=null),W=h(),q=r,n.charCodeAt(r)===123?(ae=Z,r++):(ae=t,o===0&&f(us)),ae!==t?(Nt=h(),je=xt(),je!==t?(In=h(),n.charCodeAt(r)===125?(Le=d,r++):(Le=t,o===0&&f(ds)),Le!==t?(m=q,q=Pr(s,a,g,k,je)):(r=q,q=t)):(r=q,q=t)):(r=q,q=t),q===t&&(q=null),ae=h(),m=e,e=Ar(s,a,g,k,q)):(r=e,e=t),o--,e===t&&(s=t,o===0&&f(ps)),e}function sn(){let e,s;for(o++,e=[],s=Et();s!==t;)e.push(s),s=Et();return o--,e}function Et(){let e,s,i,a,p,g,b,k;return o++,e=r,s=h(),i=rn(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=ye(),b!==t?(k=h(),m=e,e=xr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=kt(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=St(),b!==t?(k=h(),m=e,e=Er(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=nn(),i!==t?(a=h(),m=e,e=kr(i)):(r=e,e=t),e===t&&(e=r,s=h(),i=an(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=on(),b!==t?(k=h(),m=e,e=Tr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))),o--,e===t&&(s=t,o===0&&f(gs)),e}function rn(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===N?r+=5:(s=t,o===0&&f(hs)),s===t&&(s=n.substr(r,5),s.toLowerCase()===G?r+=5:(s=t,o===0&&f(ut))),s!==t&&(m=e,s=Cr(s)),e=s,o--,e===t&&(s=t,o===0&&f(ms)),e}function kt(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===Ce?r+=5:(s=t,o===0&&f($s)),s!==t&&(m=e,s=Sr(s)),e=s,o--,e===t&&(s=t,o===0&&f(ys)),e}function nn(){let e,s;return o++,e=r,s=n.substr(r,6),s.toLowerCase()===O?r+=6:(s=t,o===0&&f(ws)),s!==t&&(m=e,s=_r(s)),e=s,o--,e===t&&(s=t,o===0&&f(vs)),e}function an(){let e,s;return o++,e=r,s=n.substr(r,4),s.toLowerCase()===X?r+=4:(s=t,o===0&&f(dt)),s!==t&&(m=e,s=Ir(s)),e=s,o--,e===t&&(s=t,o===0&&f(bs)),e}function on(){let e,s;return o++,n.substr(r,7)===Je?(e=Je,r+=7):(e=t,o===0&&f(As)),e===t&&(n.substr(r,7)===oe?(e=oe,r+=7):(e=t,o===0&&f(xs)),e===t&&(n.substr(r,9)===y?(e=y,r+=9):(e=t,o===0&&f(Es)),e===t&&(n.substr(r,5)===u?(e=u,r+=5):(e=t,o===0&&f(ks)),e===t&&(n.substr(r,8)===Y?(e=Y,r+=8):(e=t,o===0&&f(Ts)),e===t&&(n.substr(r,7)===We?(e=We,r+=7):(e=t,o===0&&f(Cs)),e===t&&(n.substr(r,11)===D?(e=D,r+=11):(e=t,o===0&&f(Ss)),e===t&&(n.substr(r,6)===le?(e=le,r+=6):(e=t,o===0&&f(_s)),e===t&&(n.substr(r,8)===M?(e=M,r+=8):(e=t,o===0&&f(Is)),e===t&&(n.substr(r,4)===S?(e=S,r+=4):(e=t,o===0&&f(js)),e===t&&(n.substr(r,4)===K?(e=K,r+=4):(e=t,o===0&&f(Ls)),e===t&&(n.substr(r,8)===ce?(e=ce,r+=8):(e=t,o===0&&f(Rs))))))))))))),o--,e===t&&(s=t,o===0&&f(Ps)),e}function Tt(){let e,s,i,a,p,g,b,k,W;for(o++,e=r,s=[],i=Ee();i!==t;)s.push(i),i=Ee();return i=ln(),i!==t?(a=r,n.charCodeAt(r)===91?(p=v,r++):(p=t,o===0&&f(ct)),p!==t?(g=cn(),n.charCodeAt(r)===93?(b=B,r++):(b=t,o===0&&f(ft)),b!==t?(k=h(),m=a,a=jr(s,i,g)):(r=a,a=t)):(r=a,a=t),a===t&&(a=null),p=r,n.charCodeAt(r)===58?(g=C,r++):(g=t,o===0&&f(pt)),g!==t?(b=h(),k=$n(),k!==t?(W=h(),m=p,p=Lr(s,i,a,k)):(r=p,p=t)):(r=p,p=t),p===t&&(p=null),n.charCodeAt(r)===59?(g=j,r++):(g=t,o===0&&f(lt)),g!==t?(m=e,e=Rr(s,i,a,p)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&f(Ns)),e}function ln(){let e,s,i,a,p,g,b,k;return e=r,s=h(),i=$e(),i!==t?(a=h(),p=gn(),p!==t?(g=h(),b=$e(),b!==t?(k=h(),m=e,e=Nr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=$e(),i!==t?(a=h(),p=mn(),p!==t?(g=h(),b=$e(),b!==t?(k=h(),m=e,e=Or(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function cn(){let e,s;for(o++,e=[],s=Ct();s!==t;)e.push(s),s=Ct();return o--,e}function Ct(){let e,s,i,a,p,g,b,k;return o++,e=r,s=h(),i=fn(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=ye(),b!==t?(k=h(),m=e,e=Dr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=kt(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=St(),b!==t?(k=h(),m=e,e=Mr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=pn(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=dn(),b!==t?(k=h(),m=e,e=Fr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=h(),i=un(),i!==t?(a=h(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&f(ne)),p!==t?(g=h(),b=hn(),b!==t?(k=h(),m=e,e=qr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))),o--,e===t&&(s=t,o===0&&f(Os)),e}function fn(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===G?r+=5:(s=t,o===0&&f(ut)),s!==t&&(m=e,s=Br(s)),e=s,o--,e===t&&(s=t,o===0&&f(Ds)),e}function pn(){let e,s;return o++,e=r,s=n.substr(r,4),s.toLowerCase()===X?r+=4:(s=t,o===0&&f(dt)),s!==t&&(m=e,s=Gr(s)),e=s,o--,e===t&&(s=t,o===0&&f(Ms)),e}function un(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===fe?r+=5:(s=t,o===0&&f(qs)),s!==t&&(m=e,s=s),e=s,o--,e===t&&(s=t,o===0&&f(Fs)),e}function dn(){let e,s;return o++,n.substr(r,8)===Q?(e=Q,r+=8):(e=t,o===0&&f(Gs)),e===t&&(n.substr(r,8)===pe?(e=pe,r+=8):(e=t,o===0&&f(Vs))),o--,e===t&&(s=t,o===0&&f(Bs)),e}function gn(){let e,s;return o++,n.substr(r,2)===ee?(e=ee,r+=2):(e=t,o===0&&f(Us)),e===t&&(n.substr(r,3)===z?(e=z,r+=3):(e=t,o===0&&f(Hs)),e===t&&(n.substr(r,2)===I?(e=I,r+=2):(e=t,o===0&&f(Zs)),e===t&&(n.substr(r,2)===R?(e=R,r+=2):(e=t,o===0&&f(Js)),e===t&&(n.substr(r,2)===F?(e=F,r+=2):(e=t,o===0&&f(Ws)),e===t&&(n.substr(r,2)===V?(e=V,r+=2):(e=t,o===0&&f(Xs)),e===t&&(n.substr(r,2)===J?(e=J,r+=2):(e=t,o===0&&f(Ys)))))))),o--,e===t&&(s=t,o===0&&f(zs)),e}function mn(){let e,s;return o++,n.substr(r,2)===be?(e=be,r+=2):(e=t,o===0&&f(Qs)),e===t&&(n.substr(r,3)===Xe?(e=Xe,r+=3):(e=t,o===0&&f(er)),e===t&&(n.substr(r,2)===Ye?(e=Ye,r+=2):(e=t,o===0&&f(tr)),e===t&&(n.substr(r,2)===Ke?(e=Ke,r+=2):(e=t,o===0&&f(sr)),e===t&&(n.substr(r,2)===Qe?(e=Qe,r+=2):(e=t,o===0&&f(rr)))))),o--,e===t&&(s=t,o===0&&f(Ks)),e}function Ee(){let e,s,i,a,p;if(e=r,s=h(),n.charCodeAt(r)===35?(i=as,r++):(i=t,o===0&&f(nr)),i!==t){for(a=[],p=ke();p!==t;)a.push(p),p=ke();m=e,e=Vr(a)}else r=e,e=t;return e}function hn(){let e;return e=yn(),e===t&&(e=_e()),e}function yn(){let e,s,i,a,p;return e=r,s=r,i=_e(),i!==t?(n.charCodeAt(r)===46?(a=os,r++):(a=t,o===0&&f(ir)),a!==t?(p=_e(),p!==t?(i=[i,a,p],s=i):(r=s,s=t)):(r=s,s=t)):(r=s,s=t),s!==t&&(m=e,s=zr(s)),e=s,e}function _e(){let e,s,i;if(e=r,s=[],i=n.charAt(r),st.test(i)?r++:(i=t,o===0&&f(gt)),i!==t)for(;i!==t;)s.push(i),i=n.charAt(r),st.test(i)?r++:(i=t,o===0&&f(gt));else s=t;return s!==t&&(m=e,s=Ur(s)),e=s,e}function $n(){let e;return e=ye(),e===t&&(e=Pn()),e}function vn(){let e;return e=ye(),e===t&&(e=An()),e}function ye(){let e,s,i,a;return o++,e=r,n.charCodeAt(r)===34?(s=te,r++):(s=t,o===0&&f(se)),s!==t?(i=wn(),n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),a!==t?(m=e,e=Hr(i)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&f(ar)),e}function wn(){let e,s,i,a;for(e=[],s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.substr(r,2)===Pe?(a=Pe,r+=2):(a=t,o===0&&f(mt)),a===t&&(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie))),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.substr(r,2)===Pe?(a=Pe,r+=2):(a=t,o===0&&f(mt)),a===t&&(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie))),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function St(){let e,s,i,a;return o++,e=r,n.charCodeAt(r)===34?(s=te,r++):(s=t,o===0&&f(se)),s!==t?(i=bn(),n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),a!==t?(m=e,e=Zr(i)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&f(or)),e}function bn(){let e,s,i,a;for(e=[],s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(a=n.charAt(r),rt.test(a)?r++:(a=t,o===0&&f(ht)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&f(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(a=n.charAt(r),rt.test(a)?r++:(a=t,o===0&&f(ht)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function Pn(){let e,s;return e=r,s=En(),m=e,s=Jr(s),e=s,e}function An(){let e,s;return e=r,s=xn(),m=e,s=Wr(s),e=s,e}function xn(){let e,s,i,a;for(e=[],s=r,i=r,o++,a=n.charAt(r),nt.test(a)?r++:(a=t,o===0&&f(yt)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,a=n.charAt(r),nt.test(a)?r++:(a=t,o===0&&f(yt)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function En(){let e,s,i,a;for(e=[],s=r,i=r,o++,a=n.charAt(r),it.test(a)?r++:(a=t,o===0&&f($t)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,a=n.charAt(r),it.test(a)?r++:(a=t,o===0&&f($t)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&f(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function $e(){let e,s,i;if(o++,e=r,s=[],i=n.charAt(r),at.test(i)?r++:(i=t,o===0&&f(vt)),i!==t)for(;i!==t;)s.push(i),i=n.charAt(r),at.test(i)?r++:(i=t,o===0&&f(vt));else s=t;return s!==t&&(m=e,s=Xr(s)),e=s,e===t&&(e=ye()),o--,e===t&&(s=t,o===0&&f(lr)),e}function _t(){let e,s;return o++,e=n.charAt(r),ls.test(e)?r++:(e=t,o===0&&f(fr)),o--,e===t&&(s=t,o===0&&f(cr)),e}function It(){let e,s;return o++,e=n.charAt(r),cs.test(e)?r++:(e=t,o===0&&f(ur)),o--,e===t&&(s=t,o===0&&f(pr)),e}function kn(){let e;return n.substr(r,2)===et?(e=et,r+=2):(e=t,o===0&&f(dr)),e}function Tn(){let e;return n.substr(r,2)===Ae?(e=Ae,r+=2):(e=t,o===0&&f(wt)),e}function jt(){let e,s,i;return e=r,s=r,o++,n.substr(r,2)===Ae?(i=Ae,r+=2):(i=t,o===0&&f(wt)),o--,i===t?s=void 0:(r=s,s=t),s!==t?(n.length>r?(i=n.charAt(r),r++):(i=t,o===0&&f(ie)),i!==t?(s=[s,i],e=s):(r=e,e=t)):(r=e,e=t),e}function Cn(){let e,s,i,a;if(e=r,s=kn(),s!==t){for(i=[],a=jt();a!==t;)i.push(a),a=jt();a=Tn(),a!==t?(s=[s,i,a],e=s):(r=e,e=t)}else r=e,e=t;return e}function Sn(){let e;return n.substr(r,2)===tt?(e=tt,r+=2):(e=t,o===0&&f(gr)),e}function ke(){let e;return e=n.charAt(r),fs.test(e)?r++:(e=t,o===0&&f(mr)),e}function _n(){let e,s,i,a;if(e=r,s=Sn(),s!==t){for(i=[],a=ke();a!==t;)i.push(a),a=ke();s=[s,i],e=s}else r=e,e=t;return e}function Lt(){let e,s;return o++,e=_n(),e===t&&(e=Cn()),o--,e===t&&(s=t,o===0&&f(hr)),e}function h(){let e,s;for(e=[],s=_t(),s===t&&(s=It(),s===t&&(s=Lt()));s!==t;)e.push(s),s=_t(),s===t&&(s=It(),s===t&&(s=Lt()));return e}me=x();let Ie=me!==t&&r===n.length;function Rt(){throw me!==t&&r<n.length&&f(Qr()),Pt(xe,U<n.length?Yr(U):null,U<n.length?he(U,U+1):he(U,U))}if(l.peg$library)return{peg$result:me,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:xe,peg$maxFailPos:U,peg$success:Ie,peg$throw:Ie?void 0:Rt};if(Ie)return me;Rt()}function Ut(n){return zt(n,{counter:new Ot})}var Ne=Wt;var Ht={type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{type:"string"},type:{$ref:"#/definitions/StateType"},label:{type:"string"},color:{type:"string"},class:{$ref:"#/definitions/ClassType"},active:{type:"boolean"},typeExplicitlySet:{type:"boolean"},isComposite:{type:"boolean"},actions:{type:"array",items:{$ref:"#/definitions/ActionType"}},note:{$ref:"#/definitions/NoteType"},statemachine:{$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["id","from","to"],additionalProperties:!1,properties:{id:{type:"number"},from:{type:"string"},to:{type:"string"},label:{type:"string"},event:{type:"string"},cond:{type:"string"},action:{type:"string"},note:{$ref:"#/definitions/NoteType"},color:{type:"string"},width:{type:"number",minimum:0,maximum:30},class:{$ref:"#/definitions/ClassType"},type:{$ref:"#/definitions/TransitionType"}}}}}},jn={type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},Ln={type:"string",enum:["internal","external"]},Zt=Object.prototype.hasOwnProperty,Jt=new RegExp("^[a-zA-Z0-9_\\- ]*$","u"),Rn={type:"string",enum:["entry","activity","exit"]};function H(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,c=0;if(c===0)if(n&&typeof n=="object"&&!Array.isArray(n)){let v;if(n.type===void 0&&(v="type")||n.body===void 0&&(v="body"))return H.errors=[{instancePath:l,schemaPath:"#/required",keyword:"required",params:{missingProperty:v},message:"must have required property '"+v+"'"}],!1;{let B=c;for(let C in n)if(!(C==="type"||C==="body"))return H.errors=[{instancePath:l,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:C},message:"must NOT have additional properties"}],!1;if(B===c){if(n.type!==void 0){let C=n.type,Z=c;if(typeof C!="string")return H.errors=[{instancePath:l+"/type",schemaPath:"#/definitions/ActionTypeType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(C==="entry"||C==="activity"||C==="exit"))return H.errors=[{instancePath:l+"/type",schemaPath:"#/definitions/ActionTypeType/enum",keyword:"enum",params:{allowedValues:Rn.enum},message:"must be equal to one of the allowed values"}],!1;var j=Z===c}else var j=!0;if(j)if(n.body!==void 0){let C=c;if(typeof n.body!="string")return H.errors=[{instancePath:l+"/body",schemaPath:"#/properties/body/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var j=C===c}else var j=!0}}}else return H.errors=[{instancePath:l,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return H.errors=x,c===0}var Re={validate:w};function w(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,c=0;if(c===0)if(n&&typeof n=="object"&&!Array.isArray(n)){let G;if(n.states===void 0&&(G="states"))return w.errors=[{instancePath:l,schemaPath:"#/required",keyword:"required",params:{missingProperty:G},message:"must have required property '"+G+"'"}],!1;{let Ce=c;for(let O in n)if(!(O==="states"||O==="transitions"))return w.errors=[{instancePath:l,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:O},message:"must NOT have additional properties"}],!1;if(Ce===c){if(n.states!==void 0){let O=n.states,X=c;if(c===X)if(Array.isArray(O)){var j=!0;let oe=O.length;for(let y=0;y<oe;y++){let u=O[y],Y=c;if(c===Y)if(u&&typeof u=="object"&&!Array.isArray(u)){let D;if(u.name===void 0&&(D="name")||u.type===void 0&&(D="type"))return w.errors=[{instancePath:l+"/states/"+y,schemaPath:"#/properties/states/items/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"}],!1;{let le=c;for(let M in u)if(!Zt.call(Ht.properties.states.items.properties,M))return w.errors=[{instancePath:l+"/states/"+y,schemaPath:"#/properties/states/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;if(le===c){if(u.name!==void 0){let M=c;if(typeof u.name!="string")return w.errors=[{instancePath:l+"/states/"+y+"/name",schemaPath:"#/properties/states/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=M===c}else var v=!0;if(v){if(u.type!==void 0){let S=u.type,K=c;if(typeof S!="string")return w.errors=[{instancePath:l+"/states/"+y+"/type",schemaPath:"#/definitions/StateType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(S==="regular"||S==="initial"||S==="terminate"||S==="final"||S==="parallel"||S==="history"||S==="deephistory"||S==="choice"||S==="forkjoin"||S==="fork"||S==="join"||S==="junction"))return w.errors=[{instancePath:l+"/states/"+y+"/type",schemaPath:"#/definitions/StateType/enum",keyword:"enum",params:{allowedValues:jn.enum},message:"must be equal to one of the allowed values"}],!1;var v=K===c}else var v=!0;if(v){if(u.label!==void 0){let K=c;if(typeof u.label!="string")return w.errors=[{instancePath:l+"/states/"+y+"/label",schemaPath:"#/properties/states/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=K===c}else var v=!0;if(v){if(u.color!==void 0){let ce=c;if(typeof u.color!="string")return w.errors=[{instancePath:l+"/states/"+y+"/color",schemaPath:"#/properties/states/items/properties/color/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=ce===c}else var v=!0;if(v){if(u.class!==void 0){let fe=u.class,Q=c;if(c===c)if(typeof fe=="string"){if(!Jt.test(fe))return w.errors=[{instancePath:l+"/states/"+y+"/class",schemaPath:"#/definitions/ClassType/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9_\\- ]*$"},message:'must match pattern "^[a-zA-Z0-9_\\- ]*$"'}],!1}else return w.errors=[{instancePath:l+"/states/"+y+"/class",schemaPath:"#/definitions/ClassType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var v=Q===c}else var v=!0;if(v){if(u.active!==void 0){let Q=c;if(typeof u.active!="boolean")return w.errors=[{instancePath:l+"/states/"+y+"/active",schemaPath:"#/properties/states/items/properties/active/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var v=Q===c}else var v=!0;if(v){if(u.typeExplicitlySet!==void 0){let pe=c;if(typeof u.typeExplicitlySet!="boolean")return w.errors=[{instancePath:l+"/states/"+y+"/typeExplicitlySet",schemaPath:"#/properties/states/items/properties/typeExplicitlySet/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var v=pe===c}else var v=!0;if(v){if(u.isComposite!==void 0){let ee=c;if(typeof u.isComposite!="boolean")return w.errors=[{instancePath:l+"/states/"+y+"/isComposite",schemaPath:"#/properties/states/items/properties/isComposite/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var v=ee===c}else var v=!0;if(v){if(u.actions!==void 0){let z=u.actions,I=c;if(c===I)if(Array.isArray(z)){var B=!0;let F=z.length;for(let V=0;V<F;V++){let J=c;H(z[V],{instancePath:l+"/states/"+y+"/actions/"+V,parentData:z,parentDataProperty:V,rootData:E})||(x=x===null?H.errors:x.concat(H.errors),c=x.length);var B=J===c;if(!B)break}}else return w.errors=[{instancePath:l+"/states/"+y+"/actions",schemaPath:"#/properties/states/items/properties/actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var v=I===c}else var v=!0;if(v){if(u.note!==void 0){let I=u.note,R=c;if(c===c)if(Array.isArray(I)){var C=!0;let V=I.length;for(let J=0;J<V;J++){let be=c;if(typeof I[J]!="string")return w.errors=[{instancePath:l+"/states/"+y+"/note/"+J,schemaPath:"#/definitions/NoteType/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=be===c;if(!C)break}}else return w.errors=[{instancePath:l+"/states/"+y+"/note",schemaPath:"#/definitions/NoteType/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var v=R===c}else var v=!0;if(v)if(u.statemachine!==void 0){let I=c;Re.validate(u.statemachine,{instancePath:l+"/states/"+y+"/statemachine",parentData:u,parentDataProperty:"statemachine",rootData:E})||(x=x===null?Re.validate.errors:x.concat(Re.validate.errors),c=x.length);var v=I===c}else var v=!0}}}}}}}}}}}}else return w.errors=[{instancePath:l+"/states/"+y,schemaPath:"#/properties/states/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var j=Y===c;if(!j)break}}else return w.errors=[{instancePath:l+"/states",schemaPath:"#/properties/states/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var N=X===c}else var N=!0;if(N)if(n.transitions!==void 0){let O=n.transitions,X=c;if(c===X)if(Array.isArray(O)){var Z=!0;let oe=O.length;for(let y=0;y<oe;y++){let u=O[y],Y=c;if(c===Y)if(u&&typeof u=="object"&&!Array.isArray(u)){let D;if(u.id===void 0&&(D="id")||u.from===void 0&&(D="from")||u.to===void 0&&(D="to"))return w.errors=[{instancePath:l+"/transitions/"+y,schemaPath:"#/properties/transitions/items/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"}],!1;{let le=c;for(let M in u)if(!Zt.call(Ht.properties.transitions.items.properties,M))return w.errors=[{instancePath:l+"/transitions/"+y,schemaPath:"#/properties/transitions/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:M},message:"must NOT have additional properties"}],!1;if(le===c){if(u.id!==void 0){let M=u.id,S=c;if(!(typeof M=="number"&&isFinite(M)))return w.errors=[{instancePath:l+"/transitions/"+y+"/id",schemaPath:"#/properties/transitions/items/properties/id/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=S===c}else var d=!0;if(d){if(u.from!==void 0){let S=c;if(typeof u.from!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/from",schemaPath:"#/properties/transitions/items/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=S===c}else var d=!0;if(d){if(u.to!==void 0){let K=c;if(typeof u.to!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/to",schemaPath:"#/properties/transitions/items/properties/to/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=K===c}else var d=!0;if(d){if(u.label!==void 0){let ce=c;if(typeof u.label!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/label",schemaPath:"#/properties/transitions/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=ce===c}else var d=!0;if(d){if(u.event!==void 0){let fe=c;if(typeof u.event!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/event",schemaPath:"#/properties/transitions/items/properties/event/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=fe===c}else var d=!0;if(d){if(u.cond!==void 0){let Q=c;if(typeof u.cond!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/cond",schemaPath:"#/properties/transitions/items/properties/cond/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=Q===c}else var d=!0;if(d){if(u.action!==void 0){let pe=c;if(typeof u.action!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/action",schemaPath:"#/properties/transitions/items/properties/action/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=pe===c}else var d=!0;if(d){if(u.note!==void 0){let ee=u.note,z=c;if(c===c)if(Array.isArray(ee)){var P=!0;let R=ee.length;for(let F=0;F<R;F++){let V=c;if(typeof ee[F]!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/note/"+F,schemaPath:"#/definitions/NoteType/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var P=V===c;if(!P)break}}else return w.errors=[{instancePath:l+"/transitions/"+y+"/note",schemaPath:"#/definitions/NoteType/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=z===c}else var d=!0;if(d){if(u.color!==void 0){let z=c;if(typeof u.color!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/color",schemaPath:"#/properties/transitions/items/properties/color/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=z===c}else var d=!0;if(d){if(u.width!==void 0){let I=u.width,R=c;if(c===R)if(typeof I=="number"&&isFinite(I)){if(I>30||isNaN(I))return w.errors=[{instancePath:l+"/transitions/"+y+"/width",schemaPath:"#/properties/transitions/items/properties/width/maximum",keyword:"maximum",params:{comparison:"<=",limit:30},message:"must be <= 30"}],!1;if(I<0||isNaN(I))return w.errors=[{instancePath:l+"/transitions/"+y+"/width",schemaPath:"#/properties/transitions/items/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return w.errors=[{instancePath:l+"/transitions/"+y+"/width",schemaPath:"#/properties/transitions/items/properties/width/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=R===c}else var d=!0;if(d){if(u.class!==void 0){let R=u.class,F=c;if(c===c)if(typeof R=="string"){if(!Jt.test(R))return w.errors=[{instancePath:l+"/transitions/"+y+"/class",schemaPath:"#/definitions/ClassType/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9_\\- ]*$"},message:'must match pattern "^[a-zA-Z0-9_\\- ]*$"'}],!1}else return w.errors=[{instancePath:l+"/transitions/"+y+"/class",schemaPath:"#/definitions/ClassType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=F===c}else var d=!0;if(d)if(u.type!==void 0){let R=u.type,F=c;if(typeof R!="string")return w.errors=[{instancePath:l+"/transitions/"+y+"/type",schemaPath:"#/definitions/TransitionType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(R==="internal"||R==="external"))return w.errors=[{instancePath:l+"/transitions/"+y+"/type",schemaPath:"#/definitions/TransitionType/enum",keyword:"enum",params:{allowedValues:Ln.enum},message:"must be equal to one of the allowed values"}],!1;var d=F===c}else var d=!0}}}}}}}}}}}}}else return w.errors=[{instancePath:l+"/transitions/"+y,schemaPath:"#/properties/transitions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var Z=Y===c;if(!Z)break}}else return w.errors=[{instancePath:l+"/transitions",schemaPath:"#/properties/transitions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var N=X===c}else var N=!0}}}else return w.errors=[{instancePath:l,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return w.errors=x,c===0}function Wt(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,c=0;return w(n,{instancePath:l,parentData:t,parentDataProperty:A,rootData:E})||(x=x===null?w.errors:x.concat(w.errors),c=x.length),Wt.errors=x,c===0}var Nn=async n=>{let{parse:l}=await import("./scxml-FIGR732E.js");return l(n)};function On(n){return(n||[]).map(l=>`data${l.instancePath} ${l.message}`).join(", ")}async function Xt(n,l){let t=n;if(de(l,"inputType")==="smcat"?t=Ut(n):de(l,"inputType")==="scxml"?t=await Nn(n):typeof n=="string"&&(t=JSON.parse(n)),!Ne(t))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${On(Ne.errors)}.
`);return t}var Oe=null,De=null,Me=null,Fe=null,qe=null;async function Be(n){switch(n){case"smcat":return Oe||(Oe=await import("./smcat-VDXHMLA6.js")),Oe.default;case"dot":return De||(De=await import("./dot-YFYDXNNQ.js")),De.default;case"svg":case"oldsvg":return Me||(Me=await import("./vector-with-wasm-UJP7VBPF.js")),Me.default;case"scjson":return Fe||(Fe=await import("./scjson-XD7SVYRX.js")),Fe.default;case"scxml":return qe||(qe=await import("./scxml-G3R7NVLX.js")),qe.default;default:return l=>l}}var Yt="14.0.1";var Ge=null;async function Dn(n){Ge||(Ge=await import("./desugar-NAXVOZJI.js"));let l=Ge.default;return l(n)}async function Kt(n,l){let t=l??{},A=await Xt(n,t),E=de(t,"desugar");return(await Be(de(t,"outputType")))(E?await Dn(A):A,t)}var Ve=Yt;var Qt=(n,l)=>{let t=document.createElement("img");t.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(n)),t.addEventListener("load",function(A){let E=document.createElement("canvas"),x=E.getContext("2d"),c=A.target;c.width>32767||c.height>32767?l(null,"image-too-big"):(E.width=c.width,E.height=c.height,x.drawImage(c,0,0),l(E.toDataURL("image/png",.8)))})};var es={engineering:{dotGraphAttrs:[{name:"bgcolor",value:"dodgerblue"},{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}]},reverse:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}]},contrast:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotNodeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotEdgeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}]},policetape:{dotGraphAttrs:[{name:"bgcolor",value:"yellow"}],dotNodeAttrs:[],dotEdgeAttrs:[]},transparent:{dotGraphAttrs:[{name:"bgcolor",value:"transparent"}],dotNodeAttrs:[],dotEdgeAttrs:[]},zany:{dotGraphAttrs:[{name:"bgcolor",value:"deeppink"},{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"},{name:"nslimit",value:"0"},{name:"nslimit1",value:"1"}],dotNodeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}],dotEdgeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}]}};var He=`state-machine-cat-${Ve.split(".")[0]}`,Mn=`initial,
"media player off",

"media player on" {
  stopped, playing, paused;

  stopped => playing : play;
  playing => stopped : stop;
  playing => paused  : pause;
  paused  => playing : pause;
  paused  => stopped : stop;
};

initial            => "media player off";
"media player off" => stopped           : power;
"media player on"  => "media player off" : power;`,_={outputType:"svg",inputType:"smcat",engine:"dot",theme:"vanilla",direction:"top-down",fitToWidth:!1,desugar:!1,autoRender:!0,inputscript:Mn,sample:"/samples/mediaplayer.smcat"};function ze(n){return l=>l.substr(0,1)===n}function Ue(n){return l=>({name:l.substr(1),value:n[l]})}function ss(n,l){typeof localStorage<"u"&&localStorage.setItem(n,JSON.stringify(l))}function Fn(n,l){let t=l;if(typeof localStorage<"u")try{t=JSON.parse(localStorage.getItem(n))||l}catch{}return t}function qn(n){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(n))}function L(n){return l=>{_[n||l.target.id]=l.target.type==="checkbox"?l.target.checked:l.target.value,ss(He,_),Ze(_)}}function rs(){return window.output.getElementsByTagName("svg").length>0}function Ze(n){if(document.getElementById("autoRender").checked=n.autoRender,document.getElementById("fitToWidth").checked=n.fitToWidth,document.getElementById("desugar").checked=n.desugar,document.getElementById("engine").value=n.engine,document.getElementById("theme").value=n.theme,document.getElementById("direction").value=n.direction,document.getElementById("sample").value=n.sample,document.getElementById("inputscript").value=n.inputscript,document.getElementById(n.outputType).checked=!0,document.getElementById(`input_${n.inputType}`).checked=!0,_.autoRender?(document.getElementById("render").style="display : none",ns()):document.getElementById("render").style="",rs()){let l=window.output.getElementsByTagName("svg"),t=new Date().toISOString();document.getElementById("save-svg").href=qn(l[0].outerHTML),document.getElementById("save-svg").download=`state-machine-${t}.svg`,Qt(l[0].outerHTML,A=>{document.getElementById("save-png").href=A,document.getElementById("save-png").download=`state-machine-${t}.png`})}}function Bn(n){let l=Object.keys(n).filter(ze("G")).map(Ue(n)),t=Object.keys(n).filter(ze("N")).map(Ue(n)),A=Object.keys(n).filter(ze("E")).map(Ue(n)),E={};return l.length>0&&(E.dotGraphAttrs=l),t.length>0&&(E.dotNodeAttrs=t),A.length>0&&(E.dotEdgeAttrs=A),E}function Gn(n){let l=new URLSearchParams(n),t={};for(let[A,E]of l.entries())t[A]=E;return t}function Vn(n,l){return n[l]||{dotGraphAttrs:[],dotNodeAttrs:[],dotEdgeAttrs:[]}}function zn(n){return n.slice(0,1024).replace(/</g,"&lt;")}async function ns(){window.output.textContent="Loading ...";try{let n=zn(location.search),l=Object.assign({inputType:_.inputType,outputType:_.outputType,engine:_.engine,direction:_.direction,desugar:_.desugar},Vn(es,_.theme),Bn(Gn(n))),t=await Kt(_.inputscript,l);window.output.style=`background-color: ${(l.dotGraphAttrs.find(A=>A.name==="bgcolor")||{value:"transparent"}).value}`,window.output.innerHTML=Un(t,_.outputType,_.fitToWidth)}catch(n){window.output.textContent=n}}function Un(n,l,t){switch(l){case"json":case"scjson":return`<pre>${JSON.stringify(n,null,"    ").replace(/</g,"&lt;")}</pre>`;case"svg":return t?n.replace(/svg width="[^"]+"/g,'svg width="100%"'):n;default:return`<pre>${n.replace(/</g,"&lt;")}</pre>`}}function is(){window.inputscript.style.height="${height}px".replace("${height}",window.innerHeight-120)}function Hn(n,l){window.contextmenu.style=`display: block; position: absolute; z-index: 2; left: ${n}px; top: ${l-70}px`}function Te(){window.contextmenu.style="display : none"}function ts(n){LOG}_=Fn(He,_);window.svg.addEventListener("click",L("outputType"),!1);window.dot.addEventListener("click",L("outputType"),!1);window.json.addEventListener("click",L("outputType"),!1);window.smcat.addEventListener("click",L("outputType"),!1);window.scjson.addEventListener("click",L("outputType"),!1);window.scxml.addEventListener("click",L("outputType"),!1);window.svg.addEventListener("click",L("outputType"),!1);window.inputscript.addEventListener("input",L());window.direction.addEventListener("change",L());window.engine.addEventListener("change",L());window.theme.addEventListener("change",L());window.input_json.addEventListener("click",L("inputType"),!1);window.input_smcat.addEventListener("click",L("inputType"),!1);window.input_scxml.addEventListener("click",L("inputType"),!1);window.fitToWidth.addEventListener("click",L(),!1);window.autoRender.addEventListener("click",L(),!1);window.desugar.addEventListener("click",L(),!1);window.render.addEventListener("click",async()=>await ns(),!1);window.addEventListener("resize",is);window.output.addEventListener("contextmenu",n=>{rs()&&(n.preventDefault(),Hn(n.clientX,n.clientY))});document.getElementById("save-svg").addEventListener("click",Te);document.getElementById("save-png").addEventListener("click",Te);window.output.addEventListener("click",Te);window.addEventListener("keyup",n=>{n.code==="Escape"&&Te()});window.sample.addEventListener("change",n=>{n.target.value&&(_.sample=n.target.value,fetch(n.target.value).then(l=>{if(l.status===200)return l.text();ts(l)}).then(l=>{l&&(_.inputscript=l,ss(He,_),Ze(_))}).catch(ts))});window.version.innerHTML="state machine cat ${version}".replace("${version}",Ve);is();Ze(_);
//# sourceMappingURL=smcat-online-interpreter.js.map
