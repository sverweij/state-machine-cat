import{a as ee}from"./chunk-6QSL3ECV.js";import{a as ut}from"./chunk-PWCD3LMQ.js";import{a as zi}from"./chunk-QBCC6J4V.js";import"./chunk-DSGGCMS6.js";import{a as T,b as df}from"./chunk-FW4363Y4.js";var qt=T(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.regexpCode=U.getEsmExportName=U.getProperty=U.safeStringify=U.stringify=U.strConcat=U.addCodeArg=U.str=U._=U.nil=U._Code=U.Name=U.IDENTIFIER=U._CodeOrName=void 0;var It=class{};U._CodeOrName=It;U.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var We=class extends It{constructor(t){if(super(),!U.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};U.Name=We;var ge=class extends It{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,s)=>(s instanceof We&&(r[s.str]=(r[s.str]||0)+1),r),{})}};U._Code=ge;U.nil=new ge("");function Ui(e,...t){let r=[e[0]],s=0;for(;s<t.length;)Zr(r,t[s]),r.push(e[++s]);return new ge(r)}U._=Ui;var Yr=new ge("+");function Ki(e,...t){let r=[Ot(e[0])],s=0;for(;s<t.length;)r.push(Yr),Zr(r,t[s]),r.push(Yr,Ot(e[++s]));return pf(r),new ge(r)}U.str=Ki;function Zr(e,t){t instanceof ge?e.push(...t._items):t instanceof We?e.push(t):e.push(gf(t))}U.addCodeArg=Zr;function pf(e){let t=1;for(;t<e.length-1;){if(e[t]===Yr){let r=hf(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function hf(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof We||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof We))return`"${e}${t.slice(1)}`}function mf(e,t){return t.emptyStr()?e:e.emptyStr()?t:Ki`${e}${t}`}U.strConcat=mf;function gf(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Ot(Array.isArray(e)?e.join(","):e)}function yf(e){return new ge(Ot(e))}U.stringify=yf;function Ot(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}U.safeStringify=Ot;function $f(e){return typeof e=="string"&&U.IDENTIFIER.test(e)?new ge(`.${e}`):Ui`[${e}]`}U.getProperty=$f;function _f(e){if(typeof e=="string"&&U.IDENTIFIER.test(e))return new ge(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}U.getEsmExportName=_f;function vf(e){return new ge(e.toString())}U.regexpCode=vf});var ts=T(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.ValueScope=le.ValueScopeName=le.Scope=le.varKinds=le.UsedValueState=void 0;var ue=qt(),Qr=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},fr;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(fr||(le.UsedValueState=fr={}));le.varKinds={const:new ue.Name("const"),let:new ue.Name("let"),var:new ue.Name("var")};var dr=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof ue.Name?t:this.name(t)}name(t){return new ue.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};le.Scope=dr;var pr=class extends ue.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:s}){this.value=t,this.scopePath=(0,ue._)`.${new ue.Name(r)}[${s}]`}};le.ValueScopeName=pr;var wf=(0,ue._)`\n`,es=class extends dr{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?wf:ue.nil}}get(){return this._scope}name(t){return new pr(t,this._newName(t))}value(t,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:o}=i,u=(s=r.key)!==null&&s!==void 0?s:r.ref,l=this._values[o];if(l){let m=l.get(u);if(m)return m}else l=this._values[o]=new Map;l.set(u,i);let h=this._scope[o]||(this._scope[o]=[]),g=h.length;return h[g]=r.ref,i.setValue(r,{property:o,itemIndex:g}),i}getValue(t,r){let s=this._values[t];if(s)return s.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,ue._)`${t}${s.scopePath}`})}scopeCode(t=this._values,r,s){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,s)}_reduceValues(t,r,s={},i){let o=ue.nil;for(let u in t){let l=t[u];if(!l)continue;let h=s[u]=s[u]||new Map;l.forEach(g=>{if(h.has(g))return;h.set(g,fr.Started);let m=r(g);if(m){let y=this.opts.es5?le.varKinds.var:le.varKinds.const;o=(0,ue._)`${o}${y} ${g} = ${m};${this.opts._n}`}else if(m=i?.(g))o=(0,ue._)`${o}${m}${this.opts._n}`;else throw new Qr(g);h.set(g,fr.Completed)})}return o}};le.ValueScope=es});var D=T(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.or=x.and=x.not=x.CodeGen=x.operators=x.varKinds=x.ValueScopeName=x.ValueScope=x.Scope=x.Name=x.regexpCode=x.stringify=x.getProperty=x.nil=x.strConcat=x.str=x._=void 0;var F=qt(),we=ts(),Ve=qt();Object.defineProperty(x,"_",{enumerable:!0,get:function(){return Ve._}});Object.defineProperty(x,"str",{enumerable:!0,get:function(){return Ve.str}});Object.defineProperty(x,"strConcat",{enumerable:!0,get:function(){return Ve.strConcat}});Object.defineProperty(x,"nil",{enumerable:!0,get:function(){return Ve.nil}});Object.defineProperty(x,"getProperty",{enumerable:!0,get:function(){return Ve.getProperty}});Object.defineProperty(x,"stringify",{enumerable:!0,get:function(){return Ve.stringify}});Object.defineProperty(x,"regexpCode",{enumerable:!0,get:function(){return Ve.regexpCode}});Object.defineProperty(x,"Name",{enumerable:!0,get:function(){return Ve.Name}});var yr=ts();Object.defineProperty(x,"Scope",{enumerable:!0,get:function(){return yr.Scope}});Object.defineProperty(x,"ValueScope",{enumerable:!0,get:function(){return yr.ValueScope}});Object.defineProperty(x,"ValueScopeName",{enumerable:!0,get:function(){return yr.ValueScopeName}});Object.defineProperty(x,"varKinds",{enumerable:!0,get:function(){return yr.varKinds}});x.operators={GT:new F._Code(">"),GTE:new F._Code(">="),LT:new F._Code("<"),LTE:new F._Code("<="),EQ:new F._Code("==="),NEQ:new F._Code("!=="),NOT:new F._Code("!"),OR:new F._Code("||"),AND:new F._Code("&&"),ADD:new F._Code("+")};var Ie=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},rs=class extends Ie{constructor(t,r,s){super(),this.varKind=t,this.name=r,this.rhs=s}render({es5:t,_n:r}){let s=t?we.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=ft(this.rhs,t,r)),this}get names(){return this.rhs instanceof F._CodeOrName?this.rhs.names:{}}},hr=class extends Ie{constructor(t,r,s){super(),this.lhs=t,this.rhs=r,this.sideEffects=s}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof F.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=ft(this.rhs,t,r),this}get names(){let t=this.lhs instanceof F.Name?{}:{...this.lhs.names};return gr(t,this.rhs)}},ss=class extends hr{constructor(t,r,s,i){super(t,s,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},ns=class extends Ie{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},is=class extends Ie{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},os=class extends Ie{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},as=class extends Ie{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=ft(this.code,t,r),this}get names(){return this.code instanceof F._CodeOrName?this.code.names:{}}},Rt=class extends Ie{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,s)=>r+s.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let s=t[r].optimizeNodes();Array.isArray(s)?t.splice(r,1,...s):s?t[r]=s:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:s}=this,i=s.length;for(;i--;){let o=s[i];o.optimizeNames(t,r)||(bf(t,o.names),s.splice(i,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Ze(t,r.names),{})}},Oe=class extends Rt{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},cs=class extends Rt{},lt=class extends Oe{};lt.kind="else";var Xe=class e extends Oe{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new lt(s):s}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Gi(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=ft(this.condition,t,r),this}get names(){let t=super.names;return gr(t,this.condition),this.else&&Ze(t,this.else.names),t}};Xe.kind="if";var Ye=class extends Oe{};Ye.kind="for";var us=class extends Ye{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=ft(this.iteration,t,r),this}get names(){return Ze(super.names,this.iteration.names)}},ls=class extends Ye{constructor(t,r,s,i){super(),this.varKind=t,this.name=r,this.from=s,this.to=i}render(t){let r=t.es5?we.varKinds.var:this.varKind,{name:s,from:i,to:o}=this;return`for(${r} ${s}=${i}; ${s}<${o}; ${s}++)`+super.render(t)}get names(){let t=gr(super.names,this.from);return gr(t,this.to)}},mr=class extends Ye{constructor(t,r,s,i){super(),this.loop=t,this.varKind=r,this.name=s,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=ft(this.iterable,t,r),this}get names(){return Ze(super.names,this.iterable.names)}},At=class extends Oe{constructor(t,r,s){super(),this.name=t,this.args=r,this.async=s}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};At.kind="func";var Ct=class extends Rt{render(t){return"return "+super.render(t)}};Ct.kind="return";var fs=class extends Oe{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var s,i;return super.optimizeNames(t,r),(s=this.catch)===null||s===void 0||s.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Ze(t,this.catch.names),this.finally&&Ze(t,this.finally.names),t}},Mt=class extends Oe{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};Mt.kind="catch";var xt=class extends Oe{render(t){return"finally"+super.render(t)}};xt.kind="finally";var ds=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new we.Scope({parent:t}),this._nodes=[new cs]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let s=this._extScope.value(t,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,s,i){let o=this._scope.toName(r);return s!==void 0&&i&&(this._constants[o.str]=s),this._leafNode(new rs(t,o,s)),o}const(t,r,s){return this._def(we.varKinds.const,t,r,s)}let(t,r,s){return this._def(we.varKinds.let,t,r,s)}var(t,r,s){return this._def(we.varKinds.var,t,r,s)}assign(t,r,s){return this._leafNode(new hr(t,r,s))}add(t,r){return this._leafNode(new ss(t,x.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==F.nil&&this._leafNode(new as(t)),this}object(...t){let r=["{"];for(let[s,i]of t)r.length>1&&r.push(","),r.push(s),(s!==i||this.opts.es5)&&(r.push(":"),(0,F.addCodeArg)(r,i));return r.push("}"),new F._Code(r)}if(t,r,s){if(this._blockNode(new Xe(t)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Xe(t))}else(){return this._elseNode(new lt)}endIf(){return this._endBlockNode(Xe,lt)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new us(t),r)}forRange(t,r,s,i,o=this.opts.es5?we.varKinds.var:we.varKinds.let){let u=this._scope.toName(t);return this._for(new ls(o,u,r,s),()=>i(u))}forOf(t,r,s,i=we.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let u=r instanceof F.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,F._)`${u}.length`,l=>{this.var(o,(0,F._)`${u}[${l}]`),s(o)})}return this._for(new mr("of",i,o,r),()=>s(o))}forIn(t,r,s,i=this.opts.es5?we.varKinds.var:we.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,F._)`Object.keys(${r})`,s);let o=this._scope.toName(t);return this._for(new mr("in",i,o,r),()=>s(o))}endFor(){return this._endBlockNode(Ye)}label(t){return this._leafNode(new ns(t))}break(t){return this._leafNode(new is(t))}return(t){let r=new Ct;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Ct)}try(t,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new fs;if(this._blockNode(i),this.code(t),r){let o=this.name("e");this._currNode=i.catch=new Mt(o),r(o)}return s&&(this._currNode=i.finally=new xt,this.code(s)),this._endBlockNode(Mt,xt)}throw(t){return this._leafNode(new os(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||t!==void 0&&s!==t)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=F.nil,s,i){return this._blockNode(new At(t,r,s)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(At)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let s=this._currNode;if(s instanceof t||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof Xe))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};x.CodeGen=ds;function Ze(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function gr(e,t){return t instanceof F._CodeOrName?Ze(e,t.names):e}function ft(e,t,r){if(e instanceof F.Name)return s(e);if(!i(e))return e;return new F._Code(e._items.reduce((o,u)=>(u instanceof F.Name&&(u=s(u)),u instanceof F._Code?o.push(...u._items):o.push(u),o),[]));function s(o){let u=r[o.str];return u===void 0||t[o.str]!==1?o:(delete t[o.str],u)}function i(o){return o instanceof F._Code&&o._items.some(u=>u instanceof F.Name&&t[u.str]===1&&r[u.str]!==void 0)}}function bf(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Gi(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,F._)`!${ps(e)}`}x.not=Gi;var Ef=Hi(x.operators.AND);function Sf(...e){return e.reduce(Ef)}x.and=Sf;var Pf=Hi(x.operators.OR);function Tf(...e){return e.reduce(Pf)}x.or=Tf;function Hi(e){return(t,r)=>t===F.nil?r:r===F.nil?t:(0,F._)`${ps(t)} ${e} ${ps(r)}`}function ps(e){return e instanceof F.Name?e:(0,F._)`(${e})`}});var K=T(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.checkStrictMode=V.getErrorPath=V.Type=V.useFunc=V.setEvaluated=V.evaluatedPropsToName=V.mergeEvaluated=V.eachItem=V.unescapeJsonPointer=V.escapeJsonPointer=V.escapeFragment=V.unescapeFragment=V.schemaRefOrVal=V.schemaHasRulesButRef=V.schemaHasRules=V.checkUnknownRules=V.alwaysValidSchema=V.toHash=void 0;var B=D(),kf=qt();function Nf(e){let t={};for(let r of e)t[r]=!0;return t}V.toHash=Nf;function jf(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Wi(e,t),!Xi(t,e.self.RULES.all))}V.alwaysValidSchema=jf;function Wi(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=s.RULES.keywords;for(let o in t)i[o]||Qi(e,`unknown keyword: "${o}"`)}V.checkUnknownRules=Wi;function Xi(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}V.schemaHasRules=Xi;function If(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}V.schemaHasRulesButRef=If;function Of({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,B._)`${r}`}return(0,B._)`${e}${t}${(0,B.getProperty)(s)}`}V.schemaRefOrVal=Of;function qf(e){return Yi(decodeURIComponent(e))}V.unescapeFragment=qf;function Rf(e){return encodeURIComponent(ms(e))}V.escapeFragment=Rf;function ms(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}V.escapeJsonPointer=ms;function Yi(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}V.unescapeJsonPointer=Yi;function Af(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}V.eachItem=Af;function Ji({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,u,l)=>{let h=u===void 0?o:u instanceof B.Name?(o instanceof B.Name?e(i,o,u):t(i,o,u),u):o instanceof B.Name?(t(i,u,o),o):r(o,u);return l===B.Name&&!(h instanceof B.Name)?s(i,h):h}}V.mergeEvaluated={props:Ji({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,B._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,B._)`${r} || {}`).code((0,B._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,B._)`${r} || {}`),gs(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Zi}),items:Ji({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,B._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,B._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Zi(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,B._)`{}`);return t!==void 0&&gs(e,r,t),r}V.evaluatedPropsToName=Zi;function gs(e,t,r){Object.keys(r).forEach(s=>e.assign((0,B._)`${t}${(0,B.getProperty)(s)}`,!0))}V.setEvaluated=gs;var Bi={};function Cf(e,t){return e.scopeValue("func",{ref:t,code:Bi[t.code]||(Bi[t.code]=new kf._Code(t.code))})}V.useFunc=Cf;var hs;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(hs||(V.Type=hs={}));function Mf(e,t,r){if(e instanceof B.Name){let s=t===hs.Num;return r?s?(0,B._)`"[" + ${e} + "]"`:(0,B._)`"['" + ${e} + "']"`:s?(0,B._)`"/" + ${e}`:(0,B._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,B.getProperty)(e).toString():"/"+ms(e)}V.getErrorPath=Mf;function Qi(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}V.checkStrictMode=Qi});var qe=T(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var ne=D(),xf={data:new ne.Name("data"),valCxt:new ne.Name("valCxt"),instancePath:new ne.Name("instancePath"),parentData:new ne.Name("parentData"),parentDataProperty:new ne.Name("parentDataProperty"),rootData:new ne.Name("rootData"),dynamicAnchors:new ne.Name("dynamicAnchors"),vErrors:new ne.Name("vErrors"),errors:new ne.Name("errors"),this:new ne.Name("this"),self:new ne.Name("self"),scope:new ne.Name("scope"),json:new ne.Name("json"),jsonPos:new ne.Name("jsonPos"),jsonLen:new ne.Name("jsonLen"),jsonPart:new ne.Name("jsonPart")};ys.default=xf});var Dt=T(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.extendErrors=ie.resetErrorsCount=ie.reportExtraError=ie.reportError=ie.keyword$DataError=ie.keywordError=void 0;var z=D(),$r=K(),ae=qe();ie.keywordError={message:({keyword:e})=>(0,z.str)`must pass "${e}" keyword validation`};ie.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,z.str)`"${e}" keyword must be ${t} ($data)`:(0,z.str)`"${e}" keyword is invalid ($data)`};function Df(e,t=ie.keywordError,r,s){let{it:i}=e,{gen:o,compositeRule:u,allErrors:l}=i,h=ro(e,t,r);s??(u||l)?eo(o,h):to(i,(0,z._)`[${h}]`)}ie.reportError=Df;function Vf(e,t=ie.keywordError,r){let{it:s}=e,{gen:i,compositeRule:o,allErrors:u}=s,l=ro(e,t,r);eo(i,l),o||u||to(s,ae.default.vErrors)}ie.reportExtraError=Vf;function Lf(e,t){e.assign(ae.default.errors,t),e.if((0,z._)`${ae.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,z._)`${ae.default.vErrors}.length`,t),()=>e.assign(ae.default.vErrors,null)))}ie.resetErrorsCount=Lf;function Ff({gen:e,keyword:t,schemaValue:r,data:s,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let u=e.name("err");e.forRange("i",i,ae.default.errors,l=>{e.const(u,(0,z._)`${ae.default.vErrors}[${l}]`),e.if((0,z._)`${u}.instancePath === undefined`,()=>e.assign((0,z._)`${u}.instancePath`,(0,z.strConcat)(ae.default.instancePath,o.errorPath))),e.assign((0,z._)`${u}.schemaPath`,(0,z.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,z._)`${u}.schema`,r),e.assign((0,z._)`${u}.data`,s))})}ie.extendErrors=Ff;function eo(e,t){let r=e.const("err",t);e.if((0,z._)`${ae.default.vErrors} === null`,()=>e.assign(ae.default.vErrors,(0,z._)`[${r}]`),(0,z._)`${ae.default.vErrors}.push(${r})`),e.code((0,z._)`${ae.default.errors}++`)}function to(e,t){let{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw((0,z._)`new ${e.ValidationError}(${t})`):(r.assign((0,z._)`${s}.errors`,t),r.return(!1))}var Qe={keyword:new z.Name("keyword"),schemaPath:new z.Name("schemaPath"),params:new z.Name("params"),propertyName:new z.Name("propertyName"),message:new z.Name("message"),schema:new z.Name("schema"),parentSchema:new z.Name("parentSchema")};function ro(e,t,r){let{createErrors:s}=e.it;return s===!1?(0,z._)`{}`:zf(e,t,r)}function zf(e,t,r={}){let{gen:s,it:i}=e,o=[Uf(i,r),Kf(e,r)];return Gf(e,t,o),s.object(...o)}function Uf({errorPath:e},{instancePath:t}){let r=t?(0,z.str)`${e}${(0,$r.getErrorPath)(t,$r.Type.Str)}`:e;return[ae.default.instancePath,(0,z.strConcat)(ae.default.instancePath,r)]}function Kf({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:s}){let i=s?t:(0,z.str)`${t}/${e}`;return r&&(i=(0,z.str)`${i}${(0,$r.getErrorPath)(r,$r.Type.Str)}`),[Qe.schemaPath,i]}function Gf(e,{params:t,message:r},s){let{keyword:i,data:o,schemaValue:u,it:l}=e,{opts:h,propertyName:g,topSchemaRef:m,schemaPath:y}=l;s.push([Qe.keyword,i],[Qe.params,typeof t=="function"?t(e):t||(0,z._)`{}`]),h.messages&&s.push([Qe.message,typeof r=="function"?r(e):r]),h.verbose&&s.push([Qe.schema,u],[Qe.parentSchema,(0,z._)`${m}${y}`],[ae.default.data,o]),g&&s.push([Qe.propertyName,g])}});var no=T(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.boolOrEmptySchema=dt.topBoolOrEmptySchema=void 0;var Hf=Dt(),Jf=D(),Bf=qe(),Wf={message:"boolean schema is false"};function Xf(e){let{gen:t,schema:r,validateName:s}=e;r===!1?so(e,!1):typeof r=="object"&&r.$async===!0?t.return(Bf.default.data):(t.assign((0,Jf._)`${s}.errors`,null),t.return(!0))}dt.topBoolOrEmptySchema=Xf;function Yf(e,t){let{gen:r,schema:s}=e;s===!1?(r.var(t,!1),so(e)):r.var(t,!0)}dt.boolOrEmptySchema=Yf;function so(e,t){let{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Hf.reportError)(i,Wf,void 0,t)}});var $s=T(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.getRules=pt.isJSONType=void 0;var Zf=["string","number","integer","boolean","null","object","array"],Qf=new Set(Zf);function ed(e){return typeof e=="string"&&Qf.has(e)}pt.isJSONType=ed;function td(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}pt.getRules=td});var _s=T(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.shouldUseRule=Le.shouldUseGroup=Le.schemaHasRulesForType=void 0;function rd({schema:e,self:t},r){let s=t.RULES.types[r];return s&&s!==!0&&io(e,s)}Le.schemaHasRulesForType=rd;function io(e,t){return t.rules.some(r=>oo(e,r))}Le.shouldUseGroup=io;function oo(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}Le.shouldUseRule=oo});var Vt=T(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.reportTypeError=oe.checkDataTypes=oe.checkDataType=oe.coerceAndCheckDataType=oe.getJSONTypes=oe.getSchemaTypes=oe.DataType=void 0;var sd=$s(),nd=_s(),id=Dt(),C=D(),ao=K(),ht;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ht||(oe.DataType=ht={}));function od(e){let t=co(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}oe.getSchemaTypes=od;function co(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(sd.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}oe.getJSONTypes=co;function ad(e,t){let{gen:r,data:s,opts:i}=e,o=cd(t,i.coerceTypes),u=t.length>0&&!(o.length===0&&t.length===1&&(0,nd.schemaHasRulesForType)(e,t[0]));if(u){let l=ws(t,s,i.strictNumbers,ht.Wrong);r.if(l,()=>{o.length?ud(e,t,o):bs(e)})}return u}oe.coerceAndCheckDataType=ad;var uo=new Set(["string","number","integer","boolean","null"]);function cd(e,t){return t?e.filter(r=>uo.has(r)||t==="array"&&r==="array"):[]}function ud(e,t,r){let{gen:s,data:i,opts:o}=e,u=s.let("dataType",(0,C._)`typeof ${i}`),l=s.let("coerced",(0,C._)`undefined`);o.coerceTypes==="array"&&s.if((0,C._)`${u} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>s.assign(i,(0,C._)`${i}[0]`).assign(u,(0,C._)`typeof ${i}`).if(ws(t,i,o.strictNumbers),()=>s.assign(l,i))),s.if((0,C._)`${l} !== undefined`);for(let g of r)(uo.has(g)||g==="array"&&o.coerceTypes==="array")&&h(g);s.else(),bs(e),s.endIf(),s.if((0,C._)`${l} !== undefined`,()=>{s.assign(i,l),ld(e,l)});function h(g){switch(g){case"string":s.elseIf((0,C._)`${u} == "number" || ${u} == "boolean"`).assign(l,(0,C._)`"" + ${i}`).elseIf((0,C._)`${i} === null`).assign(l,(0,C._)`""`);return;case"number":s.elseIf((0,C._)`${u} == "boolean" || ${i} === null
              || (${u} == "string" && ${i} && ${i} == +${i})`).assign(l,(0,C._)`+${i}`);return;case"integer":s.elseIf((0,C._)`${u} === "boolean" || ${i} === null
              || (${u} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,(0,C._)`+${i}`);return;case"boolean":s.elseIf((0,C._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf((0,C._)`${i} === "true" || ${i} === 1`).assign(l,!0);return;case"null":s.elseIf((0,C._)`${i} === "" || ${i} === 0 || ${i} === false`),s.assign(l,null);return;case"array":s.elseIf((0,C._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${i} === null`).assign(l,(0,C._)`[${i}]`)}}}function ld({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,C._)`${t} !== undefined`,()=>e.assign((0,C._)`${t}[${r}]`,s))}function vs(e,t,r,s=ht.Correct){let i=s===ht.Correct?C.operators.EQ:C.operators.NEQ,o;switch(e){case"null":return(0,C._)`${t} ${i} null`;case"array":o=(0,C._)`Array.isArray(${t})`;break;case"object":o=(0,C._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=u((0,C._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=u();break;default:return(0,C._)`typeof ${t} ${i} ${e}`}return s===ht.Correct?o:(0,C.not)(o);function u(l=C.nil){return(0,C.and)((0,C._)`typeof ${t} == "number"`,l,r?(0,C._)`isFinite(${t})`:C.nil)}}oe.checkDataType=vs;function ws(e,t,r,s){if(e.length===1)return vs(e[0],t,r,s);let i,o=(0,ao.toHash)(e);if(o.array&&o.object){let u=(0,C._)`typeof ${t} != "object"`;i=o.null?u:(0,C._)`!${t} || ${u}`,delete o.null,delete o.array,delete o.object}else i=C.nil;o.number&&delete o.integer;for(let u in o)i=(0,C.and)(i,vs(u,t,r,s));return i}oe.checkDataTypes=ws;var fd={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,C._)`{type: ${e}}`:(0,C._)`{type: ${t}}`};function bs(e){let t=dd(e);(0,id.reportError)(t,fd)}oe.reportTypeError=bs;function dd(e){let{gen:t,data:r,schema:s}=e,i=(0,ao.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:i,schemaValue:i,parentSchema:s,params:{},it:e}}});var fo=T(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.assignDefaults=void 0;var mt=D(),pd=K();function hd(e,t){let{properties:r,items:s}=e.schema;if(t==="object"&&r)for(let i in r)lo(e,i,r[i].default);else t==="array"&&Array.isArray(s)&&s.forEach((i,o)=>lo(e,o,i.default))}_r.assignDefaults=hd;function lo(e,t,r){let{gen:s,compositeRule:i,data:o,opts:u}=e;if(r===void 0)return;let l=(0,mt._)`${o}${(0,mt.getProperty)(t)}`;if(i){(0,pd.checkStrictMode)(e,`default is ignored for: ${l}`);return}let h=(0,mt._)`${l} === undefined`;u.useDefaults==="empty"&&(h=(0,mt._)`${h} || ${l} === null || ${l} === ""`),s.if(h,(0,mt._)`${l} = ${(0,mt.stringify)(r)}`)}});var ye=T(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.validateUnion=J.validateArray=J.usePattern=J.callValidateCode=J.schemaProperties=J.allSchemaProperties=J.noPropertyInData=J.propertyInData=J.isOwnProperty=J.hasPropFunc=J.reportMissingProp=J.checkMissingProp=J.checkReportMissingProp=void 0;var W=D(),Es=K(),Fe=qe(),md=K();function gd(e,t){let{gen:r,data:s,it:i}=e;r.if(Ps(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,W._)`${t}`},!0),e.error()})}J.checkReportMissingProp=gd;function yd({gen:e,data:t,it:{opts:r}},s,i){return(0,W.or)(...s.map(o=>(0,W.and)(Ps(e,t,o,r.ownProperties),(0,W._)`${i} = ${o}`)))}J.checkMissingProp=yd;function $d(e,t){e.setParams({missingProperty:t},!0),e.error()}J.reportMissingProp=$d;function po(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,W._)`Object.prototype.hasOwnProperty`})}J.hasPropFunc=po;function Ss(e,t,r){return(0,W._)`${po(e)}.call(${t}, ${r})`}J.isOwnProperty=Ss;function _d(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} !== undefined`;return s?(0,W._)`${i} && ${Ss(e,t,r)}`:i}J.propertyInData=_d;function Ps(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} === undefined`;return s?(0,W.or)(i,(0,W.not)(Ss(e,t,r))):i}J.noPropertyInData=Ps;function ho(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}J.allSchemaProperties=ho;function vd(e,t){return ho(t).filter(r=>!(0,Es.alwaysValidSchema)(e,t[r]))}J.schemaProperties=vd;function wd({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:i,errorPath:o},it:u},l,h,g){let m=g?(0,W._)`${e}, ${t}, ${s}${i}`:t,y=[[Fe.default.instancePath,(0,W.strConcat)(Fe.default.instancePath,o)],[Fe.default.parentData,u.parentData],[Fe.default.parentDataProperty,u.parentDataProperty],[Fe.default.rootData,Fe.default.rootData]];u.opts.dynamicRef&&y.push([Fe.default.dynamicAnchors,Fe.default.dynamicAnchors]);let b=(0,W._)`${m}, ${r.object(...y)}`;return h!==W.nil?(0,W._)`${l}.call(${h}, ${b})`:(0,W._)`${l}(${b})`}J.callValidateCode=wd;var bd=(0,W._)`new RegExp`;function Ed({gen:e,it:{opts:t}},r){let s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,W._)`${i.code==="new RegExp"?bd:(0,md.useFunc)(e,i)}(${r}, ${s})`})}J.usePattern=Ed;function Sd(e){let{gen:t,data:r,keyword:s,it:i}=e,o=t.name("valid");if(i.allErrors){let l=t.let("valid",!0);return u(()=>t.assign(l,!1)),l}return t.var(o,!0),u(()=>t.break()),o;function u(l){let h=t.const("len",(0,W._)`${r}.length`);t.forRange("i",0,h,g=>{e.subschema({keyword:s,dataProp:g,dataPropType:Es.Type.Num},o),t.if((0,W.not)(o),l)})}}J.validateArray=Sd;function Pd(e){let{gen:t,schema:r,keyword:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(h=>(0,Es.alwaysValidSchema)(i,h))&&!i.opts.unevaluated)return;let u=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((h,g)=>{let m=e.subschema({keyword:s,schemaProp:g,compositeRule:!0},l);t.assign(u,(0,W._)`${u} || ${l}`),e.mergeValidEvaluated(m,l)||t.if((0,W.not)(u))})),e.result(u,()=>e.reset(),()=>e.error(!0))}J.validateUnion=Pd});var yo=T(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateKeywordUsage=Pe.validSchemaType=Pe.funcKeywordCode=Pe.macroKeywordCode=void 0;var ce=D(),et=qe(),Td=ye(),kd=Dt();function Nd(e,t){let{gen:r,keyword:s,schema:i,parentSchema:o,it:u}=e,l=t.macro.call(u.self,i,o,u),h=go(r,s,l);u.opts.validateSchema!==!1&&u.self.validateSchema(l,!0);let g=r.name("valid");e.subschema({schema:l,schemaPath:ce.nil,errSchemaPath:`${u.errSchemaPath}/${s}`,topSchemaRef:h,compositeRule:!0},g),e.pass(g,()=>e.error(!0))}Pe.macroKeywordCode=Nd;function jd(e,t){var r;let{gen:s,keyword:i,schema:o,parentSchema:u,$data:l,it:h}=e;Od(h,t);let g=!l&&t.compile?t.compile.call(h.self,o,u,h):t.validate,m=go(s,i,g),y=s.let("valid");e.block$data(y,b),e.ok((r=t.valid)!==null&&r!==void 0?r:y);function b(){if(t.errors===!1)w(),t.modifying&&mo(e),E(()=>e.error());else{let P=t.async?$():v();t.modifying&&mo(e),E(()=>Id(e,P))}}function $(){let P=s.let("ruleErrs",null);return s.try(()=>w((0,ce._)`await `),L=>s.assign(y,!1).if((0,ce._)`${L} instanceof ${h.ValidationError}`,()=>s.assign(P,(0,ce._)`${L}.errors`),()=>s.throw(L))),P}function v(){let P=(0,ce._)`${m}.errors`;return s.assign(P,null),w(ce.nil),P}function w(P=t.async?(0,ce._)`await `:ce.nil){let L=h.opts.passContext?et.default.this:et.default.self,M=!("compile"in t&&!l||t.schema===!1);s.assign(y,(0,ce._)`${P}${(0,Td.callValidateCode)(e,m,L,M)}`,t.modifying)}function E(P){var L;s.if((0,ce.not)((L=t.valid)!==null&&L!==void 0?L:y),P)}}Pe.funcKeywordCode=jd;function mo(e){let{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,(0,ce._)`${s.parentData}[${s.parentDataProperty}]`))}function Id(e,t){let{gen:r}=e;r.if((0,ce._)`Array.isArray(${t})`,()=>{r.assign(et.default.vErrors,(0,ce._)`${et.default.vErrors} === null ? ${t} : ${et.default.vErrors}.concat(${t})`).assign(et.default.errors,(0,ce._)`${et.default.vErrors}.length`),(0,kd.extendErrors)(e)},()=>e.error())}function Od({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function go(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ce.stringify)(r)})}function qd(e,t,r=!1){return!t.length||t.some(s=>s==="array"?Array.isArray(e):s==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==s||r&&typeof e>"u")}Pe.validSchemaType=qd;function Rd({schema:e,opts:t,self:r,errSchemaPath:s},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let u=i.dependencies;if(u?.some(l=>!Object.prototype.hasOwnProperty.call(e,l)))throw new Error(`parent schema must have dependencies of ${o}: ${u.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){let h=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(h);else throw new Error(h)}}Pe.validateKeywordUsage=Rd});var _o=T(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.extendSubschemaMode=ze.extendSubschemaData=ze.getSubschema=void 0;var Te=D(),$o=K();function Ad(e,{keyword:t,schemaProp:r,schema:s,schemaPath:i,errSchemaPath:o,topSchemaRef:u}){if(t!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let l=e.schema[t];return r===void 0?{schema:l,schemaPath:(0,Te._)`${e.schemaPath}${(0,Te.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:l[r],schemaPath:(0,Te._)`${e.schemaPath}${(0,Te.getProperty)(t)}${(0,Te.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,$o.escapeFragment)(r)}`}}if(s!==void 0){if(i===void 0||o===void 0||u===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:i,topSchemaRef:u,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}ze.getSubschema=Ad;function Cd(e,t,{dataProp:r,dataPropType:s,data:i,dataTypes:o,propertyName:u}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:l}=t;if(r!==void 0){let{errorPath:g,dataPathArr:m,opts:y}=t,b=l.let("data",(0,Te._)`${t.data}${(0,Te.getProperty)(r)}`,!0);h(b),e.errorPath=(0,Te.str)`${g}${(0,$o.getErrorPath)(r,s,y.jsPropertySyntax)}`,e.parentDataProperty=(0,Te._)`${r}`,e.dataPathArr=[...m,e.parentDataProperty]}if(i!==void 0){let g=i instanceof Te.Name?i:l.let("data",i,!0);h(g),u!==void 0&&(e.propertyName=u)}o&&(e.dataTypes=o);function h(g){e.data=g,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,g]}}ze.extendSubschemaData=Cd;function Md(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:i,allErrors:o}){s!==void 0&&(e.compositeRule=s),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}ze.extendSubschemaMode=Md});var Ts=T((by,vo)=>{"use strict";vo.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,i,o;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=s;i--!==0;){var u=o[i];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r}});var bo=T((Ey,wo)=>{"use strict";var Ue=wo.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var s=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};vr(t,s,i,e,"",e)};Ue.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ue.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ue.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ue.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function vr(e,t,r,s,i,o,u,l,h,g){if(s&&typeof s=="object"&&!Array.isArray(s)){t(s,i,o,u,l,h,g);for(var m in s){var y=s[m];if(Array.isArray(y)){if(m in Ue.arrayKeywords)for(var b=0;b<y.length;b++)vr(e,t,r,y[b],i+"/"+m+"/"+b,o,i,m,s,b)}else if(m in Ue.propsKeywords){if(y&&typeof y=="object")for(var $ in y)vr(e,t,r,y[$],i+"/"+m+"/"+xd($),o,i,m,s,$)}else(m in Ue.keywords||e.allKeys&&!(m in Ue.skipKeywords))&&vr(e,t,r,y,i+"/"+m,o,i,m,s)}r(s,i,o,u,l,h,g)}}function xd(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Lt=T(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.getSchemaRefs=fe.resolveUrl=fe.normalizeId=fe._getFullPath=fe.getFullPath=fe.inlineRef=void 0;var Dd=K(),Vd=Ts(),Ld=bo(),Fd=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function zd(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ks(e):t?Eo(e)<=t:!1}fe.inlineRef=zd;var Ud=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ks(e){for(let t in e){if(Ud.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(ks)||typeof r=="object"&&ks(r))return!0}return!1}function Eo(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Fd.has(r)&&(typeof e[r]=="object"&&(0,Dd.eachItem)(e[r],s=>t+=Eo(s)),t===1/0))return 1/0}return t}function So(e,t="",r){r!==!1&&(t=gt(t));let s=e.parse(t);return Po(e,s)}fe.getFullPath=So;function Po(e,t){return e.serialize(t).split("#")[0]+"#"}fe._getFullPath=Po;var Kd=/#\/?$/;function gt(e){return e?e.replace(Kd,""):""}fe.normalizeId=gt;function Gd(e,t,r){return r=gt(r),e.resolve(t,r)}fe.resolveUrl=Gd;var Hd=/^[a-z_][-a-z0-9._]*$/i;function Jd(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,i=gt(e[r]||t),o={"":i},u=So(s,i,!1),l={},h=new Set;return Ld(e,{allKeys:!0},(y,b,$,v)=>{if(v===void 0)return;let w=u+b,E=o[v];typeof y[r]=="string"&&(E=P.call(this,y[r])),L.call(this,y.$anchor),L.call(this,y.$dynamicAnchor),o[b]=E;function P(M){let H=this.opts.uriResolver.resolve;if(M=gt(E?H(E,M):M),h.has(M))throw m(M);h.add(M);let q=this.refs[M];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?g(y,q.schema,M):M!==gt(w)&&(M[0]==="#"?(g(y,l[M],M),l[M]=y):this.refs[M]=w),M}function L(M){if(typeof M=="string"){if(!Hd.test(M))throw new Error(`invalid anchor "${M}"`);P.call(this,`#${M}`)}}}),l;function g(y,b,$){if(b!==void 0&&!Vd(y,b))throw m($)}function m(y){return new Error(`reference "${y}" resolves to more than one schema`)}}fe.getSchemaRefs=Jd});var Ut=T(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.getData=Ke.KeywordCxt=Ke.validateFunctionCode=void 0;var Io=no(),To=Vt(),js=_s(),wr=Vt(),Bd=fo(),zt=yo(),Ns=_o(),k=D(),R=qe(),Wd=Lt(),Re=K(),Ft=Dt();function Xd(e){if(Ro(e)&&(Ao(e),qo(e))){Qd(e);return}Oo(e,()=>(0,Io.topBoolOrEmptySchema)(e))}Ke.validateFunctionCode=Xd;function Oo({gen:e,validateName:t,schema:r,schemaEnv:s,opts:i},o){i.code.es5?e.func(t,(0,k._)`${R.default.data}, ${R.default.valCxt}`,s.$async,()=>{e.code((0,k._)`"use strict"; ${ko(r,i)}`),Zd(e,i),e.code(o)}):e.func(t,(0,k._)`${R.default.data}, ${Yd(i)}`,s.$async,()=>e.code(ko(r,i)).code(o))}function Yd(e){return(0,k._)`{${R.default.instancePath}="", ${R.default.parentData}, ${R.default.parentDataProperty}, ${R.default.rootData}=${R.default.data}${e.dynamicRef?(0,k._)`, ${R.default.dynamicAnchors}={}`:k.nil}}={}`}function Zd(e,t){e.if(R.default.valCxt,()=>{e.var(R.default.instancePath,(0,k._)`${R.default.valCxt}.${R.default.instancePath}`),e.var(R.default.parentData,(0,k._)`${R.default.valCxt}.${R.default.parentData}`),e.var(R.default.parentDataProperty,(0,k._)`${R.default.valCxt}.${R.default.parentDataProperty}`),e.var(R.default.rootData,(0,k._)`${R.default.valCxt}.${R.default.rootData}`),t.dynamicRef&&e.var(R.default.dynamicAnchors,(0,k._)`${R.default.valCxt}.${R.default.dynamicAnchors}`)},()=>{e.var(R.default.instancePath,(0,k._)`""`),e.var(R.default.parentData,(0,k._)`undefined`),e.var(R.default.parentDataProperty,(0,k._)`undefined`),e.var(R.default.rootData,R.default.data),t.dynamicRef&&e.var(R.default.dynamicAnchors,(0,k._)`{}`)})}function Qd(e){let{schema:t,opts:r,gen:s}=e;Oo(e,()=>{r.$comment&&t.$comment&&Mo(e),np(e),s.let(R.default.vErrors,null),s.let(R.default.errors,0),r.unevaluated&&ep(e),Co(e),ap(e)})}function ep(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,k._)`${r}.evaluated`),t.if((0,k._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,k._)`${e.evaluated}.props`,(0,k._)`undefined`)),t.if((0,k._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,k._)`${e.evaluated}.items`,(0,k._)`undefined`))}function ko(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,k._)`/*# sourceURL=${r} */`:k.nil}function tp(e,t){if(Ro(e)&&(Ao(e),qo(e))){rp(e,t);return}(0,Io.boolOrEmptySchema)(e,t)}function qo({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function Ro(e){return typeof e.schema!="boolean"}function rp(e,t){let{schema:r,gen:s,opts:i}=e;i.$comment&&r.$comment&&Mo(e),ip(e),op(e);let o=s.const("_errs",R.default.errors);Co(e,o),s.var(t,(0,k._)`${o} === ${R.default.errors}`)}function Ao(e){(0,Re.checkUnknownRules)(e),sp(e)}function Co(e,t){if(e.opts.jtd)return No(e,[],!1,t);let r=(0,To.getSchemaTypes)(e.schema),s=(0,To.coerceAndCheckDataType)(e,r);No(e,r,!s,t)}function sp(e){let{schema:t,errSchemaPath:r,opts:s,self:i}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,Re.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function np(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Re.checkStrictMode)(e,"default is ignored in the schema root")}function ip(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Wd.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function op(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Mo({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:i}){let o=r.$comment;if(i.$comment===!0)e.code((0,k._)`${R.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let u=(0,k.str)`${s}/$comment`,l=e.scopeValue("root",{ref:t.root});e.code((0,k._)`${R.default.self}.opts.$comment(${o}, ${u}, ${l}.schema)`)}}function ap(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:i,opts:o}=e;r.$async?t.if((0,k._)`${R.default.errors} === 0`,()=>t.return(R.default.data),()=>t.throw((0,k._)`new ${i}(${R.default.vErrors})`)):(t.assign((0,k._)`${s}.errors`,R.default.vErrors),o.unevaluated&&cp(e),t.return((0,k._)`${R.default.errors} === 0`))}function cp({gen:e,evaluated:t,props:r,items:s}){r instanceof k.Name&&e.assign((0,k._)`${t}.props`,r),s instanceof k.Name&&e.assign((0,k._)`${t}.items`,s)}function No(e,t,r,s){let{gen:i,schema:o,data:u,allErrors:l,opts:h,self:g}=e,{RULES:m}=g;if(o.$ref&&(h.ignoreKeywordsWithRef||!(0,Re.schemaHasRulesButRef)(o,m))){i.block(()=>Do(e,"$ref",m.all.$ref.definition));return}h.jtd||up(e,t),i.block(()=>{for(let b of m.rules)y(b);y(m.post)});function y(b){(0,js.shouldUseGroup)(o,b)&&(b.type?(i.if((0,wr.checkDataType)(b.type,u,h.strictNumbers)),jo(e,b),t.length===1&&t[0]===b.type&&r&&(i.else(),(0,wr.reportTypeError)(e)),i.endIf()):jo(e,b),l||i.if((0,k._)`${R.default.errors} === ${s||0}`))}}function jo(e,t){let{gen:r,schema:s,opts:{useDefaults:i}}=e;i&&(0,Bd.assignDefaults)(e,t.type),r.block(()=>{for(let o of t.rules)(0,js.shouldUseRule)(s,o)&&Do(e,o.keyword,o.definition,t.type)})}function up(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(lp(e,t),e.opts.allowUnionTypes||fp(e,t),dp(e,e.dataTypes))}function lp(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{xo(e.dataTypes,r)||Is(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),hp(e,t)}}function fp(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Is(e,"use allowUnionTypes to allow union type keyword")}function dp(e,t){let r=e.self.RULES.all;for(let s in r){let i=r[s];if(typeof i=="object"&&(0,js.shouldUseRule)(e.schema,i)){let{type:o}=i.definition;o.length&&!o.some(u=>pp(t,u))&&Is(e,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function pp(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function xo(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function hp(e,t){let r=[];for(let s of e.dataTypes)xo(t,s)?r.push(s):t.includes("integer")&&s==="number"&&r.push("integer");e.dataTypes=r}function Is(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Re.checkStrictMode)(e,t,e.opts.strictTypes)}var br=class{constructor(t,r,s){if((0,zt.validateKeywordUsage)(t,r,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Re.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Vo(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,zt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",R.default.errors))}result(t,r,s){this.failResult((0,k.not)(t),r,s)}failResult(t,r,s){this.gen.if(t),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,k.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,k._)`${r} !== undefined && (${(0,k.or)(this.invalid$data(),t)})`)}error(t,r,s){if(r){this.setParams(r),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,r){(t?Ft.reportExtraError:Ft.reportError)(this,this.def.error,r)}$dataError(){(0,Ft.reportError)(this,this.def.$dataError||Ft.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ft.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,s=k.nil){this.gen.block(()=>{this.check$data(t,s),r()})}check$data(t=k.nil,r=k.nil){if(!this.$data)return;let{gen:s,schemaCode:i,schemaType:o,def:u}=this;s.if((0,k.or)((0,k._)`${i} === undefined`,r)),t!==k.nil&&s.assign(t,!0),(o.length||u.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==k.nil&&s.assign(t,!1)),s.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:s,def:i,it:o}=this;return(0,k.or)(u(),l());function u(){if(s.length){if(!(r instanceof k.Name))throw new Error("ajv implementation error");let h=Array.isArray(s)?s:[s];return(0,k._)`${(0,wr.checkDataTypes)(h,r,o.opts.strictNumbers,wr.DataType.Wrong)}`}return k.nil}function l(){if(i.validateSchema){let h=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,k._)`!${h}(${r})`}return k.nil}}subschema(t,r){let s=(0,Ns.getSubschema)(this.it,t);(0,Ns.extendSubschemaData)(s,this.it,t),(0,Ns.extendSubschemaMode)(s,t);let i={...this.it,...s,items:void 0,props:void 0};return tp(i,r),i}mergeEvaluated(t,r){let{it:s,gen:i}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=Re.mergeEvaluated.props(i,t.props,s.props,r)),s.items!==!0&&t.items!==void 0&&(s.items=Re.mergeEvaluated.items(i,t.items,s.items,r)))}mergeValidEvaluated(t,r){let{it:s,gen:i}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,k.Name)),!0}};Ke.KeywordCxt=br;function Do(e,t,r,s){let i=new br(e,r,t);"code"in r?r.code(i,s):i.$data&&r.validate?(0,zt.funcKeywordCode)(i,r):"macro"in r?(0,zt.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,zt.funcKeywordCode)(i,r)}var mp=/^\/(?:[^~]|~0|~1)*$/,gp=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Vo(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let i,o;if(e==="")return R.default.rootData;if(e[0]==="/"){if(!mp.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=R.default.rootData}else{let g=gp.exec(e);if(!g)throw new Error(`Invalid JSON-pointer: ${e}`);let m=+g[1];if(i=g[2],i==="#"){if(m>=t)throw new Error(h("property/index",m));return s[t-m]}if(m>t)throw new Error(h("data",m));if(o=r[t-m],!i)return o}let u=o,l=i.split("/");for(let g of l)g&&(o=(0,k._)`${o}${(0,k.getProperty)((0,Re.unescapeJsonPointer)(g))}`,u=(0,k._)`${u} && ${o}`);return u;function h(g,m){return`Cannot access ${g} ${m} levels up, current level is ${t}`}}Ke.getData=Vo});var Er=T(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var Os=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};qs.default=Os});var Kt=T(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var Rs=Lt(),As=class extends Error{constructor(t,r,s,i){super(i||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Rs.resolveUrl)(t,r,s),this.missingSchema=(0,Rs.normalizeId)((0,Rs.getFullPath)(t,this.missingRef))}};Cs.default=As});var Pr=T($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.resolveSchema=$e.getCompilingSchema=$e.resolveRef=$e.compileSchema=$e.SchemaEnv=void 0;var be=D(),yp=Er(),tt=qe(),Ee=Lt(),Lo=K(),$p=Ut(),yt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ee.normalizeId)(s?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s?.$async,this.refs={}}};$e.SchemaEnv=yt;function xs(e){let t=Fo.call(this,e);if(t)return t;let r=(0,Ee.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:i}=this.opts.code,{ownProperties:o}=this.opts,u=new be.CodeGen(this.scope,{es5:s,lines:i,ownProperties:o}),l;e.$async&&(l=u.scopeValue("Error",{ref:yp.default,code:(0,be._)`require("ajv/dist/runtime/validation_error").default`}));let h=u.scopeName("validate");e.validateName=h;let g={gen:u,allErrors:this.opts.allErrors,data:tt.default.data,parentData:tt.default.parentData,parentDataProperty:tt.default.parentDataProperty,dataNames:[tt.default.data],dataPathArr:[be.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,be.stringify)(e.schema)}:{ref:e.schema}),validateName:h,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:be.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,be._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(e),(0,$p.validateFunctionCode)(g),u.optimize(this.opts.code.optimize);let y=u.toString();m=`${u.scopeRefs(tt.default.scope)}return ${y}`,this.opts.code.process&&(m=this.opts.code.process(m,e));let $=new Function(`${tt.default.self}`,`${tt.default.scope}`,m)(this,this.scope.get());if(this.scope.value(h,{ref:$}),$.errors=null,$.schema=e.schema,$.schemaEnv=e,e.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:h,validateCode:y,scopeValues:u._values}),this.opts.unevaluated){let{props:v,items:w}=g;$.evaluated={props:v instanceof be.Name?void 0:v,items:w instanceof be.Name?void 0:w,dynamicProps:v instanceof be.Name,dynamicItems:w instanceof be.Name},$.source&&($.source.evaluated=(0,be.stringify)($.evaluated))}return e.validate=$,e}catch(y){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),y}finally{this._compilations.delete(e)}}$e.compileSchema=xs;function _p(e,t,r){var s;r=(0,Ee.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let o=bp.call(this,e,r);if(o===void 0){let u=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:l}=this.opts;u&&(o=new yt({schema:u,schemaId:l,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=vp.call(this,o)}$e.resolveRef=_p;function vp(e){return(0,Ee.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:xs.call(this,e)}function Fo(e){for(let t of this._compilations)if(wp(t,e))return t}$e.getCompilingSchema=Fo;function wp(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function bp(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Sr.call(this,e,t)}function Sr(e,t){let r=this.opts.uriResolver.parse(t),s=(0,Ee._getFullPath)(this.opts.uriResolver,r),i=(0,Ee.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===i)return Ms.call(this,r,e);let o=(0,Ee.normalizeId)(s),u=this.refs[o]||this.schemas[o];if(typeof u=="string"){let l=Sr.call(this,e,u);return typeof l?.schema!="object"?void 0:Ms.call(this,r,l)}if(typeof u?.schema=="object"){if(u.validate||xs.call(this,u),o===(0,Ee.normalizeId)(t)){let{schema:l}=u,{schemaId:h}=this.opts,g=l[h];return g&&(i=(0,Ee.resolveUrl)(this.opts.uriResolver,i,g)),new yt({schema:l,schemaId:h,root:e,baseId:i})}return Ms.call(this,r,u)}}$e.resolveSchema=Sr;var Ep=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ms(e,{baseId:t,schema:r,root:s}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let l of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let h=r[(0,Lo.unescapeFragment)(l)];if(h===void 0)return;r=h;let g=typeof r=="object"&&r[this.opts.schemaId];!Ep.has(l)&&g&&(t=(0,Ee.resolveUrl)(this.opts.uriResolver,t,g))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Lo.schemaHasRulesButRef)(r,this.RULES)){let l=(0,Ee.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Sr.call(this,s,l)}let{schemaId:u}=this.opts;if(o=o||new yt({schema:r,schemaId:u,root:s,baseId:t}),o.schema!==o.root.schema)return o}});var zo=T((jy,Sp)=>{Sp.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Ko=T((Iy,Uo)=>{"use strict";var Pp={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Uo.exports={HEX:Pp}});var Zo=T((Oy,Yo)=>{"use strict";var{HEX:Tp}=Ko(),kp=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function Bo(e){if(Xo(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(kp)||[],[r]=t;return r?{host:jp(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Ds(e,t=!1){let r="",s=!0;for(let i of e){if(Tp[i]===void 0)return;i!=="0"&&s===!0&&(s=!1),s||(r+=i)}return t&&r.length===0&&(r="0"),r}function Np(e){let t=0,r={error:!1,address:"",zone:""},s=[],i=[],o=!1,u=!1,l=!1;function h(){if(i.length){if(o===!1){let g=Ds(i);if(g!==void 0)s.push(g);else return r.error=!0,!1}i.length=0}return!0}for(let g=0;g<e.length;g++){let m=e[g];if(!(m==="["||m==="]"))if(m===":"){if(u===!0&&(l=!0),!h())break;if(t++,s.push(":"),t>7){r.error=!0;break}g-1>=0&&e[g-1]===":"&&(u=!0);continue}else if(m==="%"){if(!h())break;o=!0}else{i.push(m);continue}}return i.length&&(o?r.zone=i.join(""):l?s.push(i.join("")):s.push(Ds(i))),r.address=s.join(""),r}function Wo(e){if(Xo(e,":")<2)return{host:e,isIPV6:!1};let t=Np(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,s=t.address;return t.zone&&(r+="%"+t.zone,s+="%25"+t.zone),{host:r,escapedHost:s,isIPV6:!0}}}function jp(e,t){let r="",s=!0,i=e.length;for(let o=0;o<i;o++){let u=e[o];u==="0"&&s?(o+1<=i&&e[o+1]===t||o+1===i)&&(r+=u,s=!1):(u===t?s=!0:s=!1,r+=u)}return r}function Xo(e,t){let r=0;for(let s=0;s<e.length;s++)e[s]===t&&r++;return r}var Go=/^\.\.?\//u,Ho=/^\/\.(?:\/|$)/u,Jo=/^\/\.\.(?:\/|$)/u,Ip=/^\/?(?:.|\n)*?(?=\/|$)/u;function Op(e){let t=[];for(;e.length;)if(e.match(Go))e=e.replace(Go,"");else if(e.match(Ho))e=e.replace(Ho,"/");else if(e.match(Jo))e=e.replace(Jo,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(Ip);if(r){let s=r[0];e=e.slice(s.length),t.push(s)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function qp(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Rp(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host),s=Bo(r);if(s.isIPV4)r=s.host;else{let i=Wo(s.host);i.isIPV6===!0?r=`[${i.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}Yo.exports={recomposeAuthority:Rp,normalizeComponentEncoding:qp,removeDotSegments:Op,normalizeIPv4:Bo,normalizeIPv6:Wo,stringArrayToHexStripped:Ds}});var na=T((qy,sa)=>{"use strict";var Ap=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,Cp=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Qo(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function ea(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function ta(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Mp(e){return e.secure=Qo(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function xp(e){if((e.port===(Qo(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Dp(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(Cp);if(r){let s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${s}:${t.nid||e.nid}`,o=Vs[i];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Vp(e,t){let r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),i=`${r}:${t.nid||s}`,o=Vs[i];o&&(e=o.serialize(e,t));let u=e,l=e.nss;return u.path=`${s||t.nid}:${l}`,t.skipEscape=!0,u}function Lp(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Ap.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Fp(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var ra={scheme:"http",domainHost:!0,parse:ea,serialize:ta},zp={scheme:"https",domainHost:ra.domainHost,parse:ea,serialize:ta},Tr={scheme:"ws",domainHost:!0,parse:Mp,serialize:xp},Up={scheme:"wss",domainHost:Tr.domainHost,parse:Tr.parse,serialize:Tr.serialize},Kp={scheme:"urn",parse:Dp,serialize:Vp,skipNormalize:!0},Gp={scheme:"urn:uuid",parse:Lp,serialize:Fp,skipNormalize:!0},Vs={http:ra,https:zp,ws:Tr,wss:Up,urn:Kp,"urn:uuid":Gp};sa.exports=Vs});var oa=T((Ry,Nr)=>{"use strict";var{normalizeIPv6:Hp,normalizeIPv4:Jp,removeDotSegments:Gt,recomposeAuthority:Bp,normalizeComponentEncoding:kr}=Zo(),Ls=na();function Wp(e,t){return typeof e=="string"?e=ke(Ae(e,t),t):typeof e=="object"&&(e=Ae(ke(e,t),t)),e}function Xp(e,t,r){let s=Object.assign({scheme:"null"},r),i=ia(Ae(e,s),Ae(t,s),s,!0);return ke(i,{...s,skipEscape:!0})}function ia(e,t,r,s){let i={};return s||(e=Ae(ke(e,r),r),t=Ae(ke(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Gt(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Gt(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=Gt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Gt(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function Yp(e,t,r){return typeof e=="string"?(e=unescape(e),e=ke(kr(Ae(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=ke(kr(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=ke(kr(Ae(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=ke(kr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function ke(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),i=[],o=Ls[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");let u=Bp(r);if(u!==void 0&&(s.reference!=="suffix"&&i.push("//"),i.push(u),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let l=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(l=Gt(l)),u===void 0&&(l=l.replace(/^\/\//u,"/%2F")),i.push(l)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}var Zp=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function Qp(e){let t=0;for(let r=0,s=e.length;r<s;++r)if(t=e.charCodeAt(r),t>126||Zp[t])return!0;return!1}var eh=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Ae(e,t){let r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let u=e.match(eh);if(u){if(s.scheme=u[1],s.userinfo=u[3],s.host=u[4],s.port=parseInt(u[5],10),s.path=u[6]||"",s.query=u[7],s.fragment=u[8],isNaN(s.port)&&(s.port=u[5]),s.host){let h=Jp(s.host);if(h.isIPV4===!1){let g=Hp(h.host);s.host=g.host.toLowerCase(),o=g.isIPV6}else s.host=h.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&s.query===void 0&&!s.path?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let l=Ls[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!l||!l.unicodeSupport)&&s.host&&(r.domainHost||l&&l.domainHost)&&o===!1&&Qp(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(h){s.error=s.error||"Host's domain name can not be converted to ASCII: "+h}(!l||l&&!l.skipNormalize)&&(i&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),i&&s.host!==void 0&&(s.host=unescape(s.host)),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),l&&l.parse&&l.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var Fs={SCHEMES:Ls,normalize:Wp,resolve:Xp,resolveComponents:ia,equal:Yp,serialize:ke,parse:Ae};Nr.exports=Fs;Nr.exports.default=Fs;Nr.exports.fastUri=Fs});var ca=T(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var aa=oa();aa.code='require("ajv/dist/runtime/uri").default';zs.default=aa});var ga=T(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.CodeGen=te.Name=te.nil=te.stringify=te.str=te._=te.KeywordCxt=void 0;var th=Ut();Object.defineProperty(te,"KeywordCxt",{enumerable:!0,get:function(){return th.KeywordCxt}});var $t=D();Object.defineProperty(te,"_",{enumerable:!0,get:function(){return $t._}});Object.defineProperty(te,"str",{enumerable:!0,get:function(){return $t.str}});Object.defineProperty(te,"stringify",{enumerable:!0,get:function(){return $t.stringify}});Object.defineProperty(te,"nil",{enumerable:!0,get:function(){return $t.nil}});Object.defineProperty(te,"Name",{enumerable:!0,get:function(){return $t.Name}});Object.defineProperty(te,"CodeGen",{enumerable:!0,get:function(){return $t.CodeGen}});var rh=Er(),pa=Kt(),sh=$s(),Ht=Pr(),nh=D(),Jt=Lt(),jr=Vt(),Ks=K(),ua=zo(),ih=ca(),ha=(e,t)=>new RegExp(e,t);ha.code="new RegExp";var oh=["removeAdditional","useDefaults","coerceTypes"],ah=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ch={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},uh={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},la=200;function lh(e){var t,r,s,i,o,u,l,h,g,m,y,b,$,v,w,E,P,L,M,H,q,pe,me,it,ot;let Ce=e.strict,at=(t=e.code)===null||t===void 0?void 0:t.optimize,St=at===!0||at===void 0?1:at||0,Pt=(s=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:ha,ir=(i=e.uriResolver)!==null&&i!==void 0?i:ih.default;return{strictSchema:(u=(o=e.strictSchema)!==null&&o!==void 0?o:Ce)!==null&&u!==void 0?u:!0,strictNumbers:(h=(l=e.strictNumbers)!==null&&l!==void 0?l:Ce)!==null&&h!==void 0?h:!0,strictTypes:(m=(g=e.strictTypes)!==null&&g!==void 0?g:Ce)!==null&&m!==void 0?m:"log",strictTuples:(b=(y=e.strictTuples)!==null&&y!==void 0?y:Ce)!==null&&b!==void 0?b:"log",strictRequired:(v=($=e.strictRequired)!==null&&$!==void 0?$:Ce)!==null&&v!==void 0?v:!1,code:e.code?{...e.code,optimize:St,regExp:Pt}:{optimize:St,regExp:Pt},loopRequired:(w=e.loopRequired)!==null&&w!==void 0?w:la,loopEnum:(E=e.loopEnum)!==null&&E!==void 0?E:la,meta:(P=e.meta)!==null&&P!==void 0?P:!0,messages:(L=e.messages)!==null&&L!==void 0?L:!0,inlineRefs:(M=e.inlineRefs)!==null&&M!==void 0?M:!0,schemaId:(H=e.schemaId)!==null&&H!==void 0?H:"$id",addUsedSchema:(q=e.addUsedSchema)!==null&&q!==void 0?q:!0,validateSchema:(pe=e.validateSchema)!==null&&pe!==void 0?pe:!0,validateFormats:(me=e.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(it=e.unicodeRegExp)!==null&&it!==void 0?it:!0,int32range:(ot=e.int32range)!==null&&ot!==void 0?ot:!0,uriResolver:ir}}var Bt=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...lh(t)};let{es5:r,lines:s}=this.opts.code;this.scope=new nh.ValueScope({scope:{},prefixes:ah,es5:r,lines:s}),this.logger=gh(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,sh.getRules)(),fa.call(this,ch,t,"NOT SUPPORTED"),fa.call(this,uh,t,"DEPRECATED","warn"),this._metaOpts=hh.call(this),t.formats&&dh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&ph.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),fh.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:s}=this.opts,i=ua;s==="id"&&(i={...ua},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[s],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let s;if(typeof t=="string"){if(s=this.getSchema(t),!s)throw new Error(`no schema with key or ref "${t}"`)}else s=this.compile(t);let i=s(r);return"$async"in s||(this.errors=s.errors),i}compile(t,r){let s=this._addSchema(t,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return i.call(this,t,r);async function i(m,y){await o.call(this,m.$schema);let b=this._addSchema(m,y);return b.validate||u.call(this,b)}async function o(m){m&&!this.getSchema(m)&&await i.call(this,{$ref:m},!0)}async function u(m){try{return this._compileSchemaEnv(m)}catch(y){if(!(y instanceof pa.default))throw y;return l.call(this,y),await h.call(this,y.missingSchema),u.call(this,m)}}function l({missingSchema:m,missingRef:y}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${y} cannot be resolved`)}async function h(m){let y=await g.call(this,m);this.refs[m]||await o.call(this,y.$schema),this.refs[m]||this.addSchema(y,m,r)}async function g(m){let y=this._loading[m];if(y)return y;try{return await(this._loading[m]=s(m))}finally{delete this._loading[m]}}}addSchema(t,r,s,i=this.opts.validateSchema){if(Array.isArray(t)){for(let u of t)this.addSchema(u,void 0,s,i);return this}let o;if(typeof t=="object"){let{schemaId:u}=this.opts;if(o=t[u],o!==void 0&&typeof o!="string")throw new Error(`schema ${u} must be string`)}return r=(0,Jt.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(t,s,r,i,!0),this}addMetaSchema(t,r,s=this.opts.validateSchema){return this.addSchema(t,r,!0,s),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let s;if(s=t.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(s,t);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(t){let r;for(;typeof(r=da.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:s}=this.opts,i=new Ht.SchemaEnv({schema:{},schemaId:s});if(r=Ht.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=da.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let s=t[this.opts.schemaId];return s&&(s=(0,Jt.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let s;if(typeof t=="string")s=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof t=="object"&&r===void 0){if(r=t,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($h.call(this,s,r),!r)return(0,Ks.eachItem)(s,o=>Us.call(this,o)),this;vh.call(this,r);let i={...r,type:(0,jr.getJSONTypes)(r.type),schemaType:(0,jr.getJSONTypes)(r.schemaType)};return(0,Ks.eachItem)(s,i.type.length===0?o=>Us.call(this,o,i):o=>i.type.forEach(u=>Us.call(this,o,i,u))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let s of r.rules){let i=s.rules.findIndex(o=>o.keyword===t);i>=0&&s.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${s}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(t,r){let s=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let o=i.split("/").slice(1),u=t;for(let l of o)u=u[l];for(let l in s){let h=s[l];if(typeof h!="object")continue;let{$data:g}=h.definition,m=u[l];g&&m&&(u[l]=ma(m))}}return t}_removeAllSchemas(t,r){for(let s in t){let i=t[s];(!r||r.test(s))&&(typeof i=="string"?delete t[s]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[s]))}}_addSchema(t,r,s,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let u,{schemaId:l}=this.opts;if(typeof t=="object")u=t[l];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let h=this._cache.get(t);if(h!==void 0)return h;s=(0,Jt.normalizeId)(u||s);let g=Jt.getSchemaRefs.call(this,t,s);return h=new Ht.SchemaEnv({schema:t,schemaId:l,meta:r,baseId:s,localRefs:g}),this._cache.set(h.schema,h),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=h),i&&this.validateSchema(t,!0),h}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Ht.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Ht.compileSchema.call(this,t)}finally{this.opts=r}}};Bt.ValidationError=rh.default;Bt.MissingRefError=pa.default;te.default=Bt;function fa(e,t,r,s="error"){for(let i in e){let o=i;o in t&&this.logger[s](`${r}: option ${i}. ${e[o]}`)}}function da(e){return e=(0,Jt.normalizeId)(e),this.schemas[e]||this.refs[e]}function fh(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function dh(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function ph(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function hh(){let e={...this.opts};for(let t of oh)delete e[t];return e}var mh={log(){},warn(){},error(){}};function gh(e){if(e===!1)return mh;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var yh=/^[a-z_$][a-z0-9_$:-]*$/i;function $h(e,t){let{RULES:r}=this;if((0,Ks.eachItem)(e,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!yh.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Us(e,t,r){var s;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,u=i?o.post:o.rules.find(({type:h})=>h===r);if(u||(u={type:r,rules:[]},o.rules.push(u)),o.keywords[e]=!0,!t)return;let l={keyword:e,definition:{...t,type:(0,jr.getJSONTypes)(t.type),schemaType:(0,jr.getJSONTypes)(t.schemaType)}};t.before?_h.call(this,u,l,t.before):u.rules.push(l),o.all[e]=l,(s=t.implements)===null||s===void 0||s.forEach(h=>this.addKeyword(h))}function _h(e,t,r){let s=e.rules.findIndex(i=>i.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function vh(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=ma(t)),e.validateSchema=this.compile(t,!0))}var wh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ma(e){return{anyOf:[e,wh]}}});var ya=T(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var bh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Gs.default=bh});var wa=T(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.callRef=rt.getValidate=void 0;var Eh=Kt(),$a=ye(),de=D(),_t=qe(),_a=Pr(),Ir=K(),Sh={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:s}=e,{baseId:i,schemaEnv:o,validateName:u,opts:l,self:h}=s,{root:g}=o;if((r==="#"||r==="#/")&&i===g.baseId)return y();let m=_a.resolveRef.call(h,g,i,r);if(m===void 0)throw new Eh.default(s.opts.uriResolver,i,r);if(m instanceof _a.SchemaEnv)return b(m);return $(m);function y(){if(o===g)return Or(e,u,o,o.$async);let v=t.scopeValue("root",{ref:g});return Or(e,(0,de._)`${v}.validate`,g,g.$async)}function b(v){let w=va(e,v);Or(e,w,v,v.$async)}function $(v){let w=t.scopeValue("schema",l.code.source===!0?{ref:v,code:(0,de.stringify)(v)}:{ref:v}),E=t.name("valid"),P=e.subschema({schema:v,dataTypes:[],schemaPath:de.nil,topSchemaRef:w,errSchemaPath:r},E);e.mergeEvaluated(P),e.ok(E)}}};function va(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,de._)`${r.scopeValue("wrapper",{ref:t})}.validate`}rt.getValidate=va;function Or(e,t,r,s){let{gen:i,it:o}=e,{allErrors:u,schemaEnv:l,opts:h}=o,g=h.passContext?_t.default.this:de.nil;s?m():y();function m(){if(!l.$async)throw new Error("async schema referenced by sync schema");let v=i.let("valid");i.try(()=>{i.code((0,de._)`await ${(0,$a.callValidateCode)(e,t,g)}`),$(t),u||i.assign(v,!0)},w=>{i.if((0,de._)`!(${w} instanceof ${o.ValidationError})`,()=>i.throw(w)),b(w),u||i.assign(v,!1)}),e.ok(v)}function y(){e.result((0,$a.callValidateCode)(e,t,g),()=>$(t),()=>b(t))}function b(v){let w=(0,de._)`${v}.errors`;i.assign(_t.default.vErrors,(0,de._)`${_t.default.vErrors} === null ? ${w} : ${_t.default.vErrors}.concat(${w})`),i.assign(_t.default.errors,(0,de._)`${_t.default.vErrors}.length`)}function $(v){var w;if(!o.opts.unevaluated)return;let E=(w=r?.validate)===null||w===void 0?void 0:w.evaluated;if(o.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(o.props=Ir.mergeEvaluated.props(i,E.props,o.props));else{let P=i.var("props",(0,de._)`${v}.evaluated.props`);o.props=Ir.mergeEvaluated.props(i,P,o.props,de.Name)}if(o.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(o.items=Ir.mergeEvaluated.items(i,E.items,o.items));else{let P=i.var("items",(0,de._)`${v}.evaluated.items`);o.items=Ir.mergeEvaluated.items(i,P,o.items,de.Name)}}}rt.callRef=Or;rt.default=Sh});var ba=T(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var Ph=ya(),Th=wa(),kh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Ph.default,Th.default];Hs.default=kh});var Ea=T(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var qr=D(),Ge=qr.operators,Rr={maximum:{okStr:"<=",ok:Ge.LTE,fail:Ge.GT},minimum:{okStr:">=",ok:Ge.GTE,fail:Ge.LT},exclusiveMaximum:{okStr:"<",ok:Ge.LT,fail:Ge.GTE},exclusiveMinimum:{okStr:">",ok:Ge.GT,fail:Ge.LTE}},Nh={message:({keyword:e,schemaCode:t})=>(0,qr.str)`must be ${Rr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,qr._)`{comparison: ${Rr[e].okStr}, limit: ${t}}`},jh={keyword:Object.keys(Rr),type:"number",schemaType:"number",$data:!0,error:Nh,code(e){let{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,qr._)`${r} ${Rr[t].fail} ${s} || isNaN(${r})`)}};Js.default=jh});var Sa=T(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Wt=D(),Ih={message:({schemaCode:e})=>(0,Wt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Wt._)`{multipleOf: ${e}}`},Oh={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ih,code(e){let{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,u=t.let("res"),l=o?(0,Wt._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${o}`:(0,Wt._)`${u} !== parseInt(${u})`;e.fail$data((0,Wt._)`(${s} === 0 || (${u} = ${r}/${s}, ${l}))`)}};Bs.default=Oh});var Ta=T(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});function Pa(e){let t=e.length,r=0,s=0,i;for(;s<t;)r++,i=e.charCodeAt(s++),i>=55296&&i<=56319&&s<t&&(i=e.charCodeAt(s),(i&64512)===56320&&s++);return r}Ws.default=Pa;Pa.code='require("ajv/dist/runtime/ucs2length").default'});var ka=T(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var st=D(),qh=K(),Rh=Ta(),Ah={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,st.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,st._)`{limit: ${e}}`},Ch={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ah,code(e){let{keyword:t,data:r,schemaCode:s,it:i}=e,o=t==="maxLength"?st.operators.GT:st.operators.LT,u=i.opts.unicode===!1?(0,st._)`${r}.length`:(0,st._)`${(0,qh.useFunc)(e.gen,Rh.default)}(${r})`;e.fail$data((0,st._)`${u} ${o} ${s}`)}};Xs.default=Ch});var Na=T(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Mh=ye(),Ar=D(),xh={message:({schemaCode:e})=>(0,Ar.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Ar._)`{pattern: ${e}}`},Dh={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:xh,code(e){let{data:t,$data:r,schema:s,schemaCode:i,it:o}=e,u=o.opts.unicodeRegExp?"u":"",l=r?(0,Ar._)`(new RegExp(${i}, ${u}))`:(0,Mh.usePattern)(e,s);e.fail$data((0,Ar._)`!${l}.test(${t})`)}};Ys.default=Dh});var ja=T(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var Xt=D(),Vh={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Xt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Xt._)`{limit: ${e}}`},Lh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Vh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxProperties"?Xt.operators.GT:Xt.operators.LT;e.fail$data((0,Xt._)`Object.keys(${r}).length ${i} ${s}`)}};Zs.default=Lh});var Ia=T(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Yt=ye(),Zt=D(),Fh=K(),zh={message:({params:{missingProperty:e}})=>(0,Zt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Zt._)`{missingProperty: ${e}}`},Uh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:zh,code(e){let{gen:t,schema:r,schemaCode:s,data:i,$data:o,it:u}=e,{opts:l}=u;if(!o&&r.length===0)return;let h=r.length>=l.loopRequired;if(u.allErrors?g():m(),l.strictRequired){let $=e.parentSchema.properties,{definedProperties:v}=e.it;for(let w of r)if($?.[w]===void 0&&!v.has(w)){let E=u.schemaEnv.baseId+u.errSchemaPath,P=`required property "${w}" is not defined at "${E}" (strictRequired)`;(0,Fh.checkStrictMode)(u,P,u.opts.strictRequired)}}function g(){if(h||o)e.block$data(Zt.nil,y);else for(let $ of r)(0,Yt.checkReportMissingProp)(e,$)}function m(){let $=t.let("missing");if(h||o){let v=t.let("valid",!0);e.block$data(v,()=>b($,v)),e.ok(v)}else t.if((0,Yt.checkMissingProp)(e,r,$)),(0,Yt.reportMissingProp)(e,$),t.else()}function y(){t.forOf("prop",s,$=>{e.setParams({missingProperty:$}),t.if((0,Yt.noPropertyInData)(t,i,$,l.ownProperties),()=>e.error())})}function b($,v){e.setParams({missingProperty:$}),t.forOf($,s,()=>{t.assign(v,(0,Yt.propertyInData)(t,i,$,l.ownProperties)),t.if((0,Zt.not)(v),()=>{e.error(),t.break()})},Zt.nil)}}};Qs.default=Uh});var Oa=T(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var Qt=D(),Kh={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Qt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Qt._)`{limit: ${e}}`},Gh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Kh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxItems"?Qt.operators.GT:Qt.operators.LT;e.fail$data((0,Qt._)`${r}.length ${i} ${s}`)}};en.default=Gh});var Cr=T(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var qa=Ts();qa.code='require("ajv/dist/runtime/equal").default';tn.default=qa});var Ra=T(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var rn=Vt(),re=D(),Hh=K(),Jh=Cr(),Bh={message:({params:{i:e,j:t}})=>(0,re.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,re._)`{i: ${e}, j: ${t}}`},Wh={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Bh,code(e){let{gen:t,data:r,$data:s,schema:i,parentSchema:o,schemaCode:u,it:l}=e;if(!s&&!i)return;let h=t.let("valid"),g=o.items?(0,rn.getSchemaTypes)(o.items):[];e.block$data(h,m,(0,re._)`${u} === false`),e.ok(h);function m(){let v=t.let("i",(0,re._)`${r}.length`),w=t.let("j");e.setParams({i:v,j:w}),t.assign(h,!0),t.if((0,re._)`${v} > 1`,()=>(y()?b:$)(v,w))}function y(){return g.length>0&&!g.some(v=>v==="object"||v==="array")}function b(v,w){let E=t.name("item"),P=(0,rn.checkDataTypes)(g,E,l.opts.strictNumbers,rn.DataType.Wrong),L=t.const("indices",(0,re._)`{}`);t.for((0,re._)`;${v}--;`,()=>{t.let(E,(0,re._)`${r}[${v}]`),t.if(P,(0,re._)`continue`),g.length>1&&t.if((0,re._)`typeof ${E} == "string"`,(0,re._)`${E} += "_"`),t.if((0,re._)`typeof ${L}[${E}] == "number"`,()=>{t.assign(w,(0,re._)`${L}[${E}]`),e.error(),t.assign(h,!1).break()}).code((0,re._)`${L}[${E}] = ${v}`)})}function $(v,w){let E=(0,Hh.useFunc)(t,Jh.default),P=t.name("outer");t.label(P).for((0,re._)`;${v}--;`,()=>t.for((0,re._)`${w} = ${v}; ${w}--;`,()=>t.if((0,re._)`${E}(${r}[${v}], ${r}[${w}])`,()=>{e.error(),t.assign(h,!1).break(P)})))}}};sn.default=Wh});var Aa=T(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var nn=D(),Xh=K(),Yh=Cr(),Zh={message:"must be equal to constant",params:({schemaCode:e})=>(0,nn._)`{allowedValue: ${e}}`},Qh={keyword:"const",$data:!0,error:Zh,code(e){let{gen:t,data:r,$data:s,schemaCode:i,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,nn._)`!${(0,Xh.useFunc)(t,Yh.default)}(${r}, ${i})`):e.fail((0,nn._)`${o} !== ${r}`)}};on.default=Qh});var Ca=T(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var er=D(),em=K(),tm=Cr(),rm={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,er._)`{allowedValues: ${e}}`},sm={keyword:"enum",schemaType:"array",$data:!0,error:rm,code(e){let{gen:t,data:r,$data:s,schema:i,schemaCode:o,it:u}=e;if(!s&&i.length===0)throw new Error("enum must have non-empty array");let l=i.length>=u.opts.loopEnum,h,g=()=>h??(h=(0,em.useFunc)(t,tm.default)),m;if(l||s)m=t.let("valid"),e.block$data(m,y);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let $=t.const("vSchema",o);m=(0,er.or)(...i.map((v,w)=>b($,w)))}e.pass(m);function y(){t.assign(m,!1),t.forOf("v",o,$=>t.if((0,er._)`${g()}(${r}, ${$})`,()=>t.assign(m,!0).break()))}function b($,v){let w=i[v];return typeof w=="object"&&w!==null?(0,er._)`${g()}(${r}, ${$}[${v}])`:(0,er._)`${r} === ${w}`}}};an.default=sm});var Ma=T(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var nm=Ea(),im=Sa(),om=ka(),am=Na(),cm=ja(),um=Ia(),lm=Oa(),fm=Ra(),dm=Aa(),pm=Ca(),hm=[nm.default,im.default,om.default,am.default,cm.default,um.default,lm.default,fm.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},dm.default,pm.default];cn.default=hm});var ln=T(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.validateAdditionalItems=void 0;var nt=D(),un=K(),mm={message:({params:{len:e}})=>(0,nt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,nt._)`{limit: ${e}}`},gm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:mm,code(e){let{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,un.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}xa(e,s)}};function xa(e,t){let{gen:r,schema:s,data:i,keyword:o,it:u}=e;u.items=!0;let l=r.const("len",(0,nt._)`${i}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,nt._)`${l} <= ${t.length}`);else if(typeof s=="object"&&!(0,un.alwaysValidSchema)(u,s)){let g=r.var("valid",(0,nt._)`${l} <= ${t.length}`);r.if((0,nt.not)(g),()=>h(g)),e.ok(g)}function h(g){r.forRange("i",t.length,l,m=>{e.subschema({keyword:o,dataProp:m,dataPropType:un.Type.Num},g),u.allErrors||r.if((0,nt.not)(g),()=>r.break())})}}tr.validateAdditionalItems=xa;tr.default=gm});var fn=T(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.validateTuple=void 0;var Da=D(),Mr=K(),ym=ye(),$m={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Va(e,"additionalItems",t);r.items=!0,!(0,Mr.alwaysValidSchema)(r,t)&&e.ok((0,ym.validateArray)(e))}};function Va(e,t,r=e.schema){let{gen:s,parentSchema:i,data:o,keyword:u,it:l}=e;m(i),l.opts.unevaluated&&r.length&&l.items!==!0&&(l.items=Mr.mergeEvaluated.items(s,r.length,l.items));let h=s.name("valid"),g=s.const("len",(0,Da._)`${o}.length`);r.forEach((y,b)=>{(0,Mr.alwaysValidSchema)(l,y)||(s.if((0,Da._)`${g} > ${b}`,()=>e.subschema({keyword:u,schemaProp:b,dataProp:b},h)),e.ok(h))});function m(y){let{opts:b,errSchemaPath:$}=l,v=r.length,w=v===y.minItems&&(v===y.maxItems||y[t]===!1);if(b.strictTuples&&!w){let E=`"${u}" is ${v}-tuple, but minItems or maxItems/${t} are not specified or different at path "${$}"`;(0,Mr.checkStrictMode)(l,E,b.strictTuples)}}}rr.validateTuple=Va;rr.default=$m});var La=T(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var _m=fn(),vm={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,_m.validateTuple)(e,"items")};dn.default=vm});var za=T(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var Fa=D(),wm=K(),bm=ye(),Em=ln(),Sm={message:({params:{len:e}})=>(0,Fa.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Fa._)`{limit: ${e}}`},Pm={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Sm,code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:i}=r;s.items=!0,!(0,wm.alwaysValidSchema)(s,t)&&(i?(0,Em.validateAdditionalItems)(e,i):e.ok((0,bm.validateArray)(e)))}};pn.default=Pm});var Ua=T(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var _e=D(),xr=K(),Tm={message:({params:{min:e,max:t}})=>t===void 0?(0,_e.str)`must contain at least ${e} valid item(s)`:(0,_e.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,_e._)`{minContains: ${e}}`:(0,_e._)`{minContains: ${e}, maxContains: ${t}}`},km={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Tm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e,u,l,{minContains:h,maxContains:g}=s;o.opts.next?(u=h===void 0?1:h,l=g):u=1;let m=t.const("len",(0,_e._)`${i}.length`);if(e.setParams({min:u,max:l}),l===void 0&&u===0){(0,xr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&u>l){(0,xr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,xr.alwaysValidSchema)(o,r)){let w=(0,_e._)`${m} >= ${u}`;l!==void 0&&(w=(0,_e._)`${w} && ${m} <= ${l}`),e.pass(w);return}o.items=!0;let y=t.name("valid");l===void 0&&u===1?$(y,()=>t.if(y,()=>t.break())):u===0?(t.let(y,!0),l!==void 0&&t.if((0,_e._)`${i}.length > 0`,b)):(t.let(y,!1),b()),e.result(y,()=>e.reset());function b(){let w=t.name("_valid"),E=t.let("count",0);$(w,()=>t.if(w,()=>v(E)))}function $(w,E){t.forRange("i",0,m,P=>{e.subschema({keyword:"contains",dataProp:P,dataPropType:xr.Type.Num,compositeRule:!0},w),E()})}function v(w){t.code((0,_e._)`${w}++`),l===void 0?t.if((0,_e._)`${w} >= ${u}`,()=>t.assign(y,!0).break()):(t.if((0,_e._)`${w} > ${l}`,()=>t.assign(y,!1).break()),u===1?t.assign(y,!0):t.if((0,_e._)`${w} >= ${u}`,()=>t.assign(y,!0)))}}};hn.default=km});var Ha=T(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.validateSchemaDeps=Ne.validatePropertyDeps=Ne.error=void 0;var mn=D(),Nm=K(),sr=ye();Ne.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let s=t===1?"property":"properties";return(0,mn.str)`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>(0,mn._)`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};var jm={keyword:"dependencies",type:"object",schemaType:"object",error:Ne.error,code(e){let[t,r]=Im(e);Ka(e,t),Ga(e,r)}};function Im({schema:e}){let t={},r={};for(let s in e){if(s==="__proto__")continue;let i=Array.isArray(e[s])?t:r;i[s]=e[s]}return[t,r]}function Ka(e,t=e.schema){let{gen:r,data:s,it:i}=e;if(Object.keys(t).length===0)return;let o=r.let("missing");for(let u in t){let l=t[u];if(l.length===0)continue;let h=(0,sr.propertyInData)(r,s,u,i.opts.ownProperties);e.setParams({property:u,depsCount:l.length,deps:l.join(", ")}),i.allErrors?r.if(h,()=>{for(let g of l)(0,sr.checkReportMissingProp)(e,g)}):(r.if((0,mn._)`${h} && (${(0,sr.checkMissingProp)(e,l,o)})`),(0,sr.reportMissingProp)(e,o),r.else())}}Ne.validatePropertyDeps=Ka;function Ga(e,t=e.schema){let{gen:r,data:s,keyword:i,it:o}=e,u=r.name("valid");for(let l in t)(0,Nm.alwaysValidSchema)(o,t[l])||(r.if((0,sr.propertyInData)(r,s,l,o.opts.ownProperties),()=>{let h=e.subschema({keyword:i,schemaProp:l},u);e.mergeValidEvaluated(h,u)},()=>r.var(u,!0)),e.ok(u))}Ne.validateSchemaDeps=Ga;Ne.default=jm});var Ba=T(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Ja=D(),Om=K(),qm={message:"property name must be valid",params:({params:e})=>(0,Ja._)`{propertyName: ${e.propertyName}}`},Rm={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:qm,code(e){let{gen:t,schema:r,data:s,it:i}=e;if((0,Om.alwaysValidSchema)(i,r))return;let o=t.name("valid");t.forIn("key",s,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},o),t.if((0,Ja.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};gn.default=Rm});var $n=T(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var Dr=ye(),Se=D(),Am=qe(),Vr=K(),Cm={message:"must NOT have additional properties",params:({params:e})=>(0,Se._)`{additionalProperty: ${e.additionalProperty}}`},Mm={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Cm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,errsCount:o,it:u}=e;if(!o)throw new Error("ajv implementation error");let{allErrors:l,opts:h}=u;if(u.props=!0,h.removeAdditional!=="all"&&(0,Vr.alwaysValidSchema)(u,r))return;let g=(0,Dr.allSchemaProperties)(s.properties),m=(0,Dr.allSchemaProperties)(s.patternProperties);y(),e.ok((0,Se._)`${o} === ${Am.default.errors}`);function y(){t.forIn("key",i,E=>{!g.length&&!m.length?v(E):t.if(b(E),()=>v(E))})}function b(E){let P;if(g.length>8){let L=(0,Vr.schemaRefOrVal)(u,s.properties,"properties");P=(0,Dr.isOwnProperty)(t,L,E)}else g.length?P=(0,Se.or)(...g.map(L=>(0,Se._)`${E} === ${L}`)):P=Se.nil;return m.length&&(P=(0,Se.or)(P,...m.map(L=>(0,Se._)`${(0,Dr.usePattern)(e,L)}.test(${E})`))),(0,Se.not)(P)}function $(E){t.code((0,Se._)`delete ${i}[${E}]`)}function v(E){if(h.removeAdditional==="all"||h.removeAdditional&&r===!1){$(E);return}if(r===!1){e.setParams({additionalProperty:E}),e.error(),l||t.break();return}if(typeof r=="object"&&!(0,Vr.alwaysValidSchema)(u,r)){let P=t.name("valid");h.removeAdditional==="failing"?(w(E,P,!1),t.if((0,Se.not)(P),()=>{e.reset(),$(E)})):(w(E,P),l||t.if((0,Se.not)(P),()=>t.break()))}}function w(E,P,L){let M={keyword:"additionalProperties",dataProp:E,dataPropType:Vr.Type.Str};L===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(M,P)}}};yn.default=Mm});var Ya=T(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var xm=Ut(),Wa=ye(),_n=K(),Xa=$n(),Dm={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Xa.default.code(new xm.KeywordCxt(o,Xa.default,"additionalProperties"));let u=(0,Wa.allSchemaProperties)(r);for(let y of u)o.definedProperties.add(y);o.opts.unevaluated&&u.length&&o.props!==!0&&(o.props=_n.mergeEvaluated.props(t,(0,_n.toHash)(u),o.props));let l=u.filter(y=>!(0,_n.alwaysValidSchema)(o,r[y]));if(l.length===0)return;let h=t.name("valid");for(let y of l)g(y)?m(y):(t.if((0,Wa.propertyInData)(t,i,y,o.opts.ownProperties)),m(y),o.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(y),e.ok(h);function g(y){return o.opts.useDefaults&&!o.compositeRule&&r[y].default!==void 0}function m(y){e.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};vn.default=Dm});var tc=T(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Za=ye(),Lr=D(),Qa=K(),ec=K(),Vm={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:s,parentSchema:i,it:o}=e,{opts:u}=o,l=(0,Za.allSchemaProperties)(r),h=l.filter(w=>(0,Qa.alwaysValidSchema)(o,r[w]));if(l.length===0||h.length===l.length&&(!o.opts.unevaluated||o.props===!0))return;let g=u.strictSchema&&!u.allowMatchingProperties&&i.properties,m=t.name("valid");o.props!==!0&&!(o.props instanceof Lr.Name)&&(o.props=(0,ec.evaluatedPropsToName)(t,o.props));let{props:y}=o;b();function b(){for(let w of l)g&&$(w),o.allErrors?v(w):(t.var(m,!0),v(w),t.if(m))}function $(w){for(let E in g)new RegExp(w).test(E)&&(0,Qa.checkStrictMode)(o,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function v(w){t.forIn("key",s,E=>{t.if((0,Lr._)`${(0,Za.usePattern)(e,w)}.test(${E})`,()=>{let P=h.includes(w);P||e.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:ec.Type.Str},m),o.opts.unevaluated&&y!==!0?t.assign((0,Lr._)`${y}[${E}]`,!0):!P&&!o.allErrors&&t.if((0,Lr.not)(m),()=>t.break())})})}}};wn.default=Vm});var rc=T(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var Lm=K(),Fm={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:s}=e;if((0,Lm.alwaysValidSchema)(s,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};bn.default=Fm});var sc=T(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var zm=ye(),Um={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:zm.validateUnion,error:{message:"must match a schema in anyOf"}};En.default=Um});var nc=T(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var Fr=D(),Km=K(),Gm={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Fr._)`{passingSchemas: ${e.passing}}`},Hm={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Gm,code(e){let{gen:t,schema:r,parentSchema:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&s.discriminator)return;let o=r,u=t.let("valid",!1),l=t.let("passing",null),h=t.name("_valid");e.setParams({passing:l}),t.block(g),e.result(u,()=>e.reset(),()=>e.error(!0));function g(){o.forEach((m,y)=>{let b;(0,Km.alwaysValidSchema)(i,m)?t.var(h,!0):b=e.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},h),y>0&&t.if((0,Fr._)`${h} && ${u}`).assign(u,!1).assign(l,(0,Fr._)`[${l}, ${y}]`).else(),t.if(h,()=>{t.assign(u,!0),t.assign(l,y),b&&e.mergeEvaluated(b,Fr.Name)})})}}};Sn.default=Hm});var ic=T(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Jm=K(),Bm={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((o,u)=>{if((0,Jm.alwaysValidSchema)(s,o))return;let l=e.subschema({keyword:"allOf",schemaProp:u},i);e.ok(i),e.mergeEvaluated(l)})}};Pn.default=Bm});var cc=T(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var zr=D(),ac=K(),Wm={message:({params:e})=>(0,zr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,zr._)`{failingKeyword: ${e.ifClause}}`},Xm={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Wm,code(e){let{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,ac.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let i=oc(s,"then"),o=oc(s,"else");if(!i&&!o)return;let u=t.let("valid",!0),l=t.name("_valid");if(h(),e.reset(),i&&o){let m=t.let("ifClause");e.setParams({ifClause:m}),t.if(l,g("then",m),g("else",m))}else i?t.if(l,g("then")):t.if((0,zr.not)(l),g("else"));e.pass(u,()=>e.error(!0));function h(){let m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(m)}function g(m,y){return()=>{let b=e.subschema({keyword:m},l);t.assign(u,l),e.mergeValidEvaluated(b,u),y?t.assign(y,(0,zr._)`${m}`):e.setParams({ifClause:m})}}}};function oc(e,t){let r=e.schema[t];return r!==void 0&&!(0,ac.alwaysValidSchema)(e,r)}Tn.default=Xm});var uc=T(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var Ym=K(),Zm={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Ym.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};kn.default=Zm});var lc=T(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var Qm=ln(),eg=La(),tg=fn(),rg=za(),sg=Ua(),ng=Ha(),ig=Ba(),og=$n(),ag=Ya(),cg=tc(),ug=rc(),lg=sc(),fg=nc(),dg=ic(),pg=cc(),hg=uc();function mg(e=!1){let t=[ug.default,lg.default,fg.default,dg.default,pg.default,hg.default,ig.default,og.default,ng.default,ag.default,cg.default];return e?t.push(eg.default,rg.default):t.push(Qm.default,tg.default),t.push(sg.default),t}Nn.default=mg});var fc=T(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var Z=D(),gg={message:({schemaCode:e})=>(0,Z.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Z._)`{format: ${e}}`},yg={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:gg,code(e,t){let{gen:r,data:s,$data:i,schema:o,schemaCode:u,it:l}=e,{opts:h,errSchemaPath:g,schemaEnv:m,self:y}=l;if(!h.validateFormats)return;i?b():$();function b(){let v=r.scopeValue("formats",{ref:y.formats,code:h.code.formats}),w=r.const("fDef",(0,Z._)`${v}[${u}]`),E=r.let("fType"),P=r.let("format");r.if((0,Z._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(E,(0,Z._)`${w}.type || "string"`).assign(P,(0,Z._)`${w}.validate`),()=>r.assign(E,(0,Z._)`"string"`).assign(P,w)),e.fail$data((0,Z.or)(L(),M()));function L(){return h.strictSchema===!1?Z.nil:(0,Z._)`${u} && !${P}`}function M(){let H=m.$async?(0,Z._)`(${w}.async ? await ${P}(${s}) : ${P}(${s}))`:(0,Z._)`${P}(${s})`,q=(0,Z._)`(typeof ${P} == "function" ? ${H} : ${P}.test(${s}))`;return(0,Z._)`${P} && ${P} !== true && ${E} === ${t} && !${q}`}}function $(){let v=y.formats[o];if(!v){L();return}if(v===!0)return;let[w,E,P]=M(v);w===t&&e.pass(H());function L(){if(h.strictSchema===!1){y.logger.warn(q());return}throw new Error(q());function q(){return`unknown format "${o}" ignored in schema at path "${g}"`}}function M(q){let pe=q instanceof RegExp?(0,Z.regexpCode)(q):h.code.formats?(0,Z._)`${h.code.formats}${(0,Z.getProperty)(o)}`:void 0,me=r.scopeValue("formats",{key:o,ref:q,code:pe});return typeof q=="object"&&!(q instanceof RegExp)?[q.type||"string",q.validate,(0,Z._)`${me}.validate`]:["string",q,me]}function H(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!m.$async)throw new Error("async format in sync schema");return(0,Z._)`await ${P}(${s})`}return typeof E=="function"?(0,Z._)`${P}(${s})`:(0,Z._)`${P}.test(${s})`}}}};jn.default=yg});var dc=T(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var $g=fc(),_g=[$g.default];In.default=_g});var pc=T(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.contentVocabulary=vt.metadataVocabulary=void 0;vt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];vt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var mc=T(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var vg=ba(),wg=Ma(),bg=lc(),Eg=dc(),hc=pc(),Sg=[vg.default,wg.default,(0,bg.default)(),Eg.default,hc.metadataVocabulary,hc.contentVocabulary];On.default=Sg});var yc=T(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DiscrError=void 0;var gc;(function(e){e.Tag="tag",e.Mapping="mapping"})(gc||(Ur.DiscrError=gc={}))});var _c=T(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var wt=D(),qn=yc(),$c=Pr(),Pg=Kt(),Tg=K(),kg={message:({params:{discrError:e,tagName:t}})=>e===qn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,wt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Ng={keyword:"discriminator",type:"object",schemaType:"object",error:kg,code(e){let{gen:t,data:r,schema:s,parentSchema:i,it:o}=e,{oneOf:u}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let l=s.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");let h=t.let("valid",!1),g=t.const("tag",(0,wt._)`${r}${(0,wt.getProperty)(l)}`);t.if((0,wt._)`typeof ${g} == "string"`,()=>m(),()=>e.error(!1,{discrError:qn.DiscrError.Tag,tag:g,tagName:l})),e.ok(h);function m(){let $=b();t.if(!1);for(let v in $)t.elseIf((0,wt._)`${g} === ${v}`),t.assign(h,y($[v]));t.else(),e.error(!1,{discrError:qn.DiscrError.Mapping,tag:g,tagName:l}),t.endIf()}function y($){let v=t.name("valid"),w=e.subschema({keyword:"oneOf",schemaProp:$},v);return e.mergeEvaluated(w,wt.Name),v}function b(){var $;let v={},w=P(i),E=!0;for(let H=0;H<u.length;H++){let q=u[H];if(q?.$ref&&!(0,Tg.schemaHasRulesButRef)(q,o.self.RULES)){let me=q.$ref;if(q=$c.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,me),q instanceof $c.SchemaEnv&&(q=q.schema),q===void 0)throw new Pg.default(o.opts.uriResolver,o.baseId,me)}let pe=($=q?.properties)===null||$===void 0?void 0:$[l];if(typeof pe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);E=E&&(w||P(q)),L(pe,H)}if(!E)throw new Error(`discriminator: "${l}" must be required`);return v;function P({required:H}){return Array.isArray(H)&&H.includes(l)}function L(H,q){if(H.const)M(H.const,q);else if(H.enum)for(let pe of H.enum)M(pe,q);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function M(H,q){if(typeof H!="string"||H in v)throw new Error(`discriminator: "${l}" values must be unique strings`);v[H]=q}}}};Rn.default=Ng});var vc=T((w$,jg)=>{jg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var bc=T((X,An)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=X.Ajv=void 0;var Ig=ga(),Og=mc(),qg=_c(),wc=vc(),Rg=["/properties"],Kr="http://json-schema.org/draft-07/schema",bt=class extends Ig.default{_addVocabularies(){super._addVocabularies(),Og.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(qg.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(wc,Rg):wc;this.addMetaSchema(t,Kr,!1),this.refs["http://json-schema.org/schema"]=Kr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Kr)?Kr:void 0)}};X.Ajv=bt;An.exports=X=bt;An.exports.Ajv=bt;Object.defineProperty(X,"__esModule",{value:!0});X.default=bt;var Ag=Ut();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return Ag.KeywordCxt}});var Et=D();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Et._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Et.str}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Et.stringify}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Et.nil}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Et.Name}});Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return Et.CodeGen}});var Cg=Er();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return Cg.default}});var Mg=Kt();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return Mg.default}})});var Tc=df(bc(),1);var nr=class extends SyntaxError{constructor(t,r,s,i){super(t),this.expected=r,this.found=s,this.location=i,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let s=null,i=t.find(h=>h.source===this.location.source);i&&(s=i.text.split(/\r\n|\n|\r/g));let o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,l=this.location.source+":"+u.line+":"+u.column;if(s){let h=this.location.end,g="".padEnd(u.line.toString().length," "),m=s[o.line-1],b=(o.line===h.line?h.column:m.length+1)-o.column||1;r+=`
 --> `+l+`
`+g+` |
`+u.line+" | "+m+`
`+g+" | "+"".padEnd(o.column-1," ")+"".padEnd(b,"^")}else r+=`
 at `+l}return r}static buildMessage(t,r){function s(b){return b.codePointAt(0).toString(16).toUpperCase()}let i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(b){return i?b.replace(i,$=>"\\u{"+s($)+"}"):b}function u(b){return o(b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}function l(b){return o(b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}let h={literal(b){return'"'+u(b.text)+'"'},class(b){let $=b.parts.map(v=>Array.isArray(v)?l(v[0])+"-"+l(v[1]):l(v));return"["+(b.inverted?"^":"")+$.join("")+"]"+(b.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(b){return b.description}};function g(b){return h[b.type](b)}function m(b){let $=b.map(g);if($.sort(),$.length>0){let v=1;for(let w=1;w<$.length;w++)$[w-1]!==$[w]&&($[v]=$[w],v++);$.length=v}switch($.length){case 1:return $[0];case 2:return $[0]+" or "+$[1];default:return $.slice(0,-1).join(", ")+", or "+$[$.length-1]}}function y(b){return b?'"'+u(b)+'"':"end of input"}return"Expected "+m(t)+" but "+y(r)+" found."}};function Ec(e,t){t=t!==void 0?t:{};let r={},s=t.grammarSource,i={program:ji},o=ji,u=",",l=";",h="[",g="]",m=":",y="{",b="}",$="=",v="label",w="color",E="class",P="active",L="type",M="regular",H="initial",q="terminate",pe="final",me="parallel",it="history",ot="deephistory",Ce="choice",at="forkjoin",St="fork",Pt="join",ir="junction",Vc="width",Hn="external",Jn="internal",Bn="->",Wn="=>>",Xn="=>",Yn=">>",Zn=":>",Qn="--",ei="==",ti="<-",ri="<<=",si="<=",ni="<<",ii="<:",Lc="#",Fc=".",Me='"',or='\\"',oi="/*",ar="*/",ai="//",ci=/^[0-9]/,ui=/^[a-zA-Z0-9_\- ]/,li=/^[,;{]/,fi=/^[;{]/,di=/^[^;, "\t\n\r=\-><:{[]/,zc=/^[ \t]/,Uc=/^[\r\n]/,Kc=/^[^\r\n]/,pi=O(",",!1),hi=O(";",!1),Gc=Y("state"),mi=O("[",!1),gi=O("]",!1),yi=O(":",!1),Hc=O("{",!1),Jc=O("}",!1),Bc=Y("extended state attribute"),He=O("=",!1),Wc=Y("state attribute name"),Xc=O("label",!0),$i=O("color",!0),Yc=Y("class attribute"),Zc=O("class",!0),Qc=Y("state flag"),eu=O("active",!0),tu=Y("state type"),_i=O("type",!0),ru=Y("state type type"),su=O("regular",!1),nu=O("initial",!1),iu=O("terminate",!1),ou=O("final",!1),au=O("parallel",!1),cu=O("history",!1),uu=O("deephistory",!1),lu=O("choice",!1),fu=O("forkjoin",!1),du=O("fork",!1),pu=O("join",!1),hu=O("junction",!1),mu=Y("transition"),gu=Y("extended transition attribute"),yu=Y("transition attribute name"),$u=Y("transition type name"),_u=Y("numeric transition attribute name"),vu=O("width",!0),wu=Y("transition type value"),bu=O("external",!1),Eu=O("internal",!1),Su=Y("left to right arrow"),Pu=O("->",!1),Tu=O("=>>",!1),ku=O("=>",!1),Nu=O(">>",!1),ju=O(":>",!1),Iu=O("--",!1),Ou=O("==",!1),qu=Y("right to left arrow"),Ru=O("<-",!1),Au=O("<<=",!1),Cu=O("<=",!1),Mu=O("<<",!1),xu=O("<:",!1),Du=O("#",!1),Vu=O(".",!1),vi=De([["0","9"]],!1,!1,!1),Lu=Y("double quoted string"),xe=O('"',!1),wi=O('\\"',!1),Je=ql(),Fu=Y("valid class string"),bi=De([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1,!1),Ei=De([",",";","{"],!1,!1,!1),Si=De([";","{"],!1,!1,!1),zu=Y("identifier"),Pi=De([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1,!1),Uu=Y("whitespace"),Ku=De([" ","	"],!1,!1,!1),Gu=Y("line end"),Hu=De(["\r",`
`],!1,!1,!1),Ju=O("/*",!1),Ti=O("*/",!1),Bu=O("//",!1),Wu=De(["\r",`
`],!0,!1,!1),Xu=Y("comment");function Yu(n){return n.states=ee.extractUndeclaredStates(n),ee.classifyForkJoins(n)}function Zu(n,a){let f={};return ee.setIf(f,"states",n),ee.setIfNotEmpty(f,"transitions",a),f}function Wg(n){return n}function Xg(n){return n}function Qu(n){return ee.uniq(n[0].concat(n[1]),ee.stateEqual)}function el(n,a,f){return f}function tl(n,a,f,d){return d}function rl(n,a,f,d,S){return S}function sl(n,a,f,d,S){let N=ee.initState(a);for(let A of f||[])ee.setIf(N,A.name,A.value);return ee.setIf(N,"typeExplicitlySet",(f||[]).some(A=>A.typeExplicitlySet)),ee.setIf(N,"statemachine",S),ee.setIfNotEmpty(N,"note",n),d&&ee.setIfNotEmpty(N,"actions",ee.extractActions(d)),N}function nl(n,a){return{name:n,value:a}}function il(n,a){return{name:n,value:a}}function ol(n){return{name:n,value:!0}}function al(n,a){return{name:n,value:a,typeExplicitlySet:!0}}function cl(n){return n.toLowerCase()}function ul(n){return n.toLowerCase()}function ll(n){return n.toLowerCase()}function fl(n){return n.toLowerCase()}function dl(n,a,f){return f}function pl(n,a,f,d){return d}function hl(n,a,f,d){d&&(a.label=d,a=Object.assign(a,ee.parseTransitionExpression(d)));for(let S of f||[])ee.setIf(a,S.name,S.value);return ee.setIfNotEmpty(a,"note",n),a.id=t.counter.next(),a}function ml(n,a){return{from:n,to:a}}function gl(n,a){return{from:a,to:n}}function yl(n,a){return{name:n,value:a}}function $l(n,a){return{name:n,value:a}}function _l(n,a){return{name:n,value:a}}function vl(n,a){return{name:n,value:a}}function wl(n){return n.toLowerCase()}function bl(n){return n.toLowerCase()}function Yg(n){return n}function El(n){return n.join("").trim()}function Sl(n){return parseFloat(n.join(""))}function Pl(n){return parseInt(n.join(""),10)}function Tl(n){return n.join("").replace(/\\\"/g,'"')}function Zg(n){return n}function kl(n){return n.join("")}function Qg(n){return n}function Nl(n){return n.join("").trim()}function jl(n){return n.join("").trim()}function ey(n){return n}function ty(n){return n}function Il(n){return n.join("")}let c=t.peg$currPos|0,j=c,ct=[{line:1,column:1}],ve=c,cr=t.peg$maxFailExpected||[],p=t.peg$silentFails|0,Tt;if(t.startRule){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=i[t.startRule]}function ry(){return e.substring(j,c)}function sy(){return j}function ny(){return{source:s,start:j,end:c}}function iy(){return kt(j,c)}function oy(n,a){throw a=a!==void 0?a:kt(j,c),Ni([Y(n)],e.substring(j,c),a)}function ay(n,a){throw a=a!==void 0?a:kt(j,c),Al(n,a)}function Ol(n=c){let a=e.codePointAt(n);return a===void 0?"":String.fromCodePoint(a)}function O(n,a){return{type:"literal",text:n,ignoreCase:a}}function De(n,a,f,d){return{type:"class",parts:n,inverted:a,ignoreCase:f,unicode:d}}function ql(){return{type:"any"}}function Rl(){return{type:"end"}}function Y(n){return{type:"other",description:n}}function ki(n){let a=ct[n],f;if(a)return a;if(n>=ct.length)f=ct.length-1;else for(f=n;!ct[--f];);for(a=ct[f],a={line:a.line,column:a.column};f<n;)e.charCodeAt(f)===10?(a.line++,a.column=1):a.column++,f++;return ct[n]=a,a}function kt(n,a,f){let d=ki(n),S=ki(a),N={source:s,start:{offset:n,line:d.line,column:d.column},end:{offset:a,line:S.line,column:S.column}};return f&&s&&typeof s.offset=="function"&&(N.start=s.offset(N.start),N.end=s.offset(N.end)),N}function _(n){c<ve||(c>ve&&(ve=c,cr=[]),cr.push(n))}function Al(n,a){return new nr(n,null,null,a)}function Ni(n,a,f){return new nr(nr.buildMessage(n,a),n,a,f)}function ji(){let n,a,f,d;return n=c,a=I(),f=Ii(),d=I(),j=n,n=Yu(f),n}function Ii(){let n,a,f,d;for(p++,n=c,a=Cl(),a===r&&(a=null),f=[],d=Ri();d!==r;)f.push(d),d=Ri();return j=n,n=Zu(a,f),p--,n}function Cl(){let n,a,f,d,S,N;for(n=c,a=c,f=[],d=c,S=Hr(),S!==r?(e.charCodeAt(c)===44?(N=u,c++):(N=r,p===0&&_(pi)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);d!==r;)f.push(d),d=c,S=Hr(),S!==r?(e.charCodeAt(c)===44?(N=u,c++):(N=r,p===0&&_(pi)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);return d=c,S=Hr(),S!==r?(e.charCodeAt(c)===59?(N=l,c++):(N=r,p===0&&_(hi)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r),d!==r?(f=[f,d],a=f):(c=a,a=r),a!==r&&(j=n,a=Qu(a)),n=a,n}function Hr(){let n,a,f,d,S,N,A,G,je,he,Be,Fi,Wr,ff,Xr;for(p++,n=c,a=[],f=ur();f!==r;)a.push(f),f=ur();return f=I(),d=jt(),d!==r?(S=I(),N=c,e.charCodeAt(c)===91?(A=h,c++):(A=r,p===0&&_(mi)),A!==r?(G=Ml(),e.charCodeAt(c)===93?(je=g,c++):(je=r,p===0&&_(gi)),je!==r?(j=N,N=el(a,d,G)):(c=N,N=r)):(c=N,N=r),N===r&&(N=null),A=I(),G=c,e.charCodeAt(c)===58?(je=m,c++):(je=r,p===0&&_(yi)),je!==r?(he=I(),Be=Zl(),Be!==r?(Fi=I(),j=G,G=tl(a,d,N,Be)):(c=G,G=r)):(c=G,G=r),G===r&&(G=null),je=I(),he=c,e.charCodeAt(c)===123?(Be=y,c++):(Be=r,p===0&&_(Hc)),Be!==r?(Fi=I(),Wr=Ii(),Wr!==r?(ff=I(),e.charCodeAt(c)===125?(Xr=b,c++):(Xr=r,p===0&&_(Jc)),Xr!==r?(j=he,he=rl(a,d,N,G,Wr)):(c=he,he=r)):(c=he,he=r)):(c=he,he=r),he===r&&(he=null),Be=I(),j=n,n=sl(a,d,N,G,he)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Gc)),n}function Ml(){let n,a;for(p++,n=[],a=Oi();a!==r;)n.push(a),a=Oi();return p--,n}function Oi(){let n,a,f,d,S,N,A,G;return p++,n=c,a=I(),f=xl(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Nt(),A!==r?(G=I(),j=n,n=nl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=qi(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Ci(),A!==r?(G=I(),j=n,n=il(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=Dl(),f!==r?(d=I(),j=n,n=ol(f)):(c=n,n=r),n===r&&(n=c,a=I(),f=Vl(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Ll(),A!==r?(G=I(),j=n,n=al(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(Bc)),n}function xl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===v?c+=5:(a=r,p===0&&_(Xc)),a===r&&(a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_($i))),a!==r&&(j=n,a=cl(a)),n=a,p--,n===r&&(a=r,p===0&&_(Wc)),n}function qi(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===E?c+=5:(a=r,p===0&&_(Zc)),a!==r&&(j=n,a=ul(a)),n=a,p--,n===r&&(a=r,p===0&&_(Yc)),n}function Dl(){let n,a;return p++,n=c,a=e.substr(c,6),a.toLowerCase()===P?c+=6:(a=r,p===0&&_(eu)),a!==r&&(j=n,a=ll(a)),n=a,p--,n===r&&(a=r,p===0&&_(Qc)),n}function Vl(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(_i)),a!==r&&(j=n,a=fl(a)),n=a,p--,n===r&&(a=r,p===0&&_(tu)),n}function Ll(){let n,a;return p++,e.substr(c,7)===M?(n=M,c+=7):(n=r,p===0&&_(su)),n===r&&(e.substr(c,7)===H?(n=H,c+=7):(n=r,p===0&&_(nu)),n===r&&(e.substr(c,9)===q?(n=q,c+=9):(n=r,p===0&&_(iu)),n===r&&(e.substr(c,5)===pe?(n=pe,c+=5):(n=r,p===0&&_(ou)),n===r&&(e.substr(c,8)===me?(n=me,c+=8):(n=r,p===0&&_(au)),n===r&&(e.substr(c,7)===it?(n=it,c+=7):(n=r,p===0&&_(cu)),n===r&&(e.substr(c,11)===ot?(n=ot,c+=11):(n=r,p===0&&_(uu)),n===r&&(e.substr(c,6)===Ce?(n=Ce,c+=6):(n=r,p===0&&_(lu)),n===r&&(e.substr(c,8)===at?(n=at,c+=8):(n=r,p===0&&_(fu)),n===r&&(e.substr(c,4)===St?(n=St,c+=4):(n=r,p===0&&_(du)),n===r&&(e.substr(c,4)===Pt?(n=Pt,c+=4):(n=r,p===0&&_(pu)),n===r&&(e.substr(c,8)===ir?(n=ir,c+=8):(n=r,p===0&&_(hu))))))))))))),p--,n===r&&(a=r,p===0&&_(ru)),n}function Ri(){let n,a,f,d,S,N,A,G,je;for(p++,n=c,a=[],f=ur();f!==r;)a.push(f),f=ur();return f=Fl(),f!==r?(d=c,e.charCodeAt(c)===91?(S=h,c++):(S=r,p===0&&_(mi)),S!==r?(N=zl(),e.charCodeAt(c)===93?(A=g,c++):(A=r,p===0&&_(gi)),A!==r?(G=I(),j=d,d=dl(a,f,N)):(c=d,d=r)):(c=d,d=r),d===r&&(d=null),S=c,e.charCodeAt(c)===58?(N=m,c++):(N=r,p===0&&_(yi)),N!==r?(A=I(),G=Yl(),G!==r?(je=I(),j=S,S=pl(a,f,d,G)):(c=S,S=r)):(c=S,S=r),S===r&&(S=null),e.charCodeAt(c)===59?(N=l,c++):(N=r,p===0&&_(hi)),N!==r?(j=n,n=hl(a,f,d,S)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(mu)),n}function Fl(){let n,a,f,d,S,N,A,G;return n=c,a=I(),f=jt(),f!==r?(d=I(),S=Jl(),S!==r?(N=I(),A=jt(),A!==r?(G=I(),j=n,n=ml(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=jt(),f!==r?(d=I(),S=Bl(),S!==r?(N=I(),A=jt(),A!==r?(G=I(),j=n,n=gl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)),n}function zl(){let n,a;for(p++,n=[],a=Ai();a!==r;)n.push(a),a=Ai();return p--,n}function Ai(){let n,a,f,d,S,N,A,G;return p++,n=c,a=I(),f=Ul(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Nt(),A!==r?(G=I(),j=n,n=yl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=qi(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Ci(),A!==r?(G=I(),j=n,n=$l(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=Kl(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Hl(),A!==r?(G=I(),j=n,n=_l(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=I(),f=Gl(),f!==r?(d=I(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(N=I(),A=Wl(),A!==r?(G=I(),j=n,n=vl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(gu)),n}function Ul(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_($i)),a!==r&&(j=n,a=wl(a)),n=a,p--,n===r&&(a=r,p===0&&_(yu)),n}function Kl(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(_i)),a!==r&&(j=n,a=bl(a)),n=a,p--,n===r&&(a=r,p===0&&_($u)),n}function Gl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===Vc?c+=5:(a=r,p===0&&_(vu)),a!==r&&(j=n,a=a),n=a,p--,n===r&&(a=r,p===0&&_(_u)),n}function Hl(){let n,a;return p++,e.substr(c,8)===Hn?(n=Hn,c+=8):(n=r,p===0&&_(bu)),n===r&&(e.substr(c,8)===Jn?(n=Jn,c+=8):(n=r,p===0&&_(Eu))),p--,n===r&&(a=r,p===0&&_(wu)),n}function Jl(){let n,a;return p++,e.substr(c,2)===Bn?(n=Bn,c+=2):(n=r,p===0&&_(Pu)),n===r&&(e.substr(c,3)===Wn?(n=Wn,c+=3):(n=r,p===0&&_(Tu)),n===r&&(e.substr(c,2)===Xn?(n=Xn,c+=2):(n=r,p===0&&_(ku)),n===r&&(e.substr(c,2)===Yn?(n=Yn,c+=2):(n=r,p===0&&_(Nu)),n===r&&(e.substr(c,2)===Zn?(n=Zn,c+=2):(n=r,p===0&&_(ju)),n===r&&(e.substr(c,2)===Qn?(n=Qn,c+=2):(n=r,p===0&&_(Iu)),n===r&&(e.substr(c,2)===ei?(n=ei,c+=2):(n=r,p===0&&_(Ou)))))))),p--,n===r&&(a=r,p===0&&_(Su)),n}function Bl(){let n,a;return p++,e.substr(c,2)===ti?(n=ti,c+=2):(n=r,p===0&&_(Ru)),n===r&&(e.substr(c,3)===ri?(n=ri,c+=3):(n=r,p===0&&_(Au)),n===r&&(e.substr(c,2)===si?(n=si,c+=2):(n=r,p===0&&_(Cu)),n===r&&(e.substr(c,2)===ni?(n=ni,c+=2):(n=r,p===0&&_(Mu)),n===r&&(e.substr(c,2)===ii?(n=ii,c+=2):(n=r,p===0&&_(xu)))))),p--,n===r&&(a=r,p===0&&_(qu)),n}function ur(){let n,a,f,d,S;if(n=c,a=I(),e.charCodeAt(c)===35?(f=Lc,c++):(f=r,p===0&&_(Du)),f!==r){for(d=[],S=lr();S!==r;)d.push(S),S=lr();j=n,n=El(d)}else c=n,n=r;return n}function Wl(){let n;return n=Xl(),n===r&&(n=Jr()),n}function Xl(){let n,a,f,d,S;return n=c,a=c,f=Jr(),f!==r?(e.charCodeAt(c)===46?(d=Fc,c++):(d=r,p===0&&_(Vu)),d!==r?(S=Jr(),S!==r?(f=[f,d,S],a=f):(c=a,a=r)):(c=a,a=r)):(c=a,a=r),a!==r&&(j=n,a=Sl(a)),n=a,n}function Jr(){let n,a,f;if(n=c,a=[],f=e.charAt(c),ci.test(f)?c++:(f=r,p===0&&_(vi)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),ci.test(f)?c++:(f=r,p===0&&_(vi));else a=r;return a!==r&&(j=n,a=Pl(a)),n=a,n}function Yl(){let n;return n=Nt(),n===r&&(n=tf()),n}function Zl(){let n;return n=Nt(),n===r&&(n=rf()),n}function Nt(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Me,c++):(a=r,p===0&&_(xe)),a!==r?(f=Ql(),e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),d!==r?(j=n,n=Tl(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Lu)),n}function Ql(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===or?(d=or,c+=2):(d=r,p===0&&_(wi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===or?(d=or,c+=2):(d=r,p===0&&_(wi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function Ci(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Me,c++):(a=r,p===0&&_(xe)),a!==r?(f=ef(),e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),d!==r?(j=n,n=kl(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Fu)),n}function ef(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),ui.test(d)?c++:(d=r,p===0&&_(bi)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),ui.test(d)?c++:(d=r,p===0&&_(bi)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function tf(){let n,a;return n=c,a=nf(),j=n,a=Nl(a),n=a,n}function rf(){let n,a;return n=c,a=sf(),j=n,a=jl(a),n=a,n}function sf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),li.test(d)?c++:(d=r,p===0&&_(Ei)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),li.test(d)?c++:(d=r,p===0&&_(Ei)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function nf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),fi.test(d)?c++:(d=r,p===0&&_(Si)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),fi.test(d)?c++:(d=r,p===0&&_(Si)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function jt(){let n,a,f;if(p++,n=c,a=[],f=e.charAt(c),di.test(f)?c++:(f=r,p===0&&_(Pi)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),di.test(f)?c++:(f=r,p===0&&_(Pi));else a=r;return a!==r&&(j=n,a=Il(a)),n=a,n===r&&(n=Nt()),p--,n===r&&(a=r,p===0&&_(zu)),n}function Mi(){let n,a;return p++,n=e.charAt(c),zc.test(n)?c++:(n=r,p===0&&_(Ku)),p--,n===r&&(a=r,p===0&&_(Uu)),n}function xi(){let n,a;return p++,n=e.charAt(c),Uc.test(n)?c++:(n=r,p===0&&_(Hu)),p--,n===r&&(a=r,p===0&&_(Gu)),n}function of(){let n;return e.substr(c,2)===oi?(n=oi,c+=2):(n=r,p===0&&_(Ju)),n}function af(){let n;return e.substr(c,2)===ar?(n=ar,c+=2):(n=r,p===0&&_(Ti)),n}function Di(){let n,a,f;return n=c,a=c,p++,e.substr(c,2)===ar?(f=ar,c+=2):(f=r,p===0&&_(Ti)),p--,f===r?a=void 0:(c=a,a=r),a!==r?(e.length>c?(f=e.charAt(c),c++):(f=r,p===0&&_(Je)),f!==r?(a=[a,f],n=a):(c=n,n=r)):(c=n,n=r),n}function cf(){let n,a,f,d;if(n=c,a=of(),a!==r){for(f=[],d=Di();d!==r;)f.push(d),d=Di();d=af(),d!==r?(a=[a,f,d],n=a):(c=n,n=r)}else c=n,n=r;return n}function uf(){let n;return e.substr(c,2)===ai?(n=ai,c+=2):(n=r,p===0&&_(Bu)),n}function lr(){let n;return n=e.charAt(c),Kc.test(n)?c++:(n=r,p===0&&_(Wu)),n}function lf(){let n,a,f,d;if(n=c,a=uf(),a!==r){for(f=[],d=lr();d!==r;)f.push(d),d=lr();a=[a,f],n=a}else c=n,n=r;return n}function Vi(){let n,a;return p++,n=lf(),n===r&&(n=cf()),p--,n===r&&(a=r,p===0&&_(Xu)),n}function I(){let n,a;for(n=[],a=Mi(),a===r&&(a=xi(),a===r&&(a=Vi()));a!==r;)n.push(a),a=Mi(),a===r&&(a=xi(),a===r&&(a=Vi()));return n}Tt=o();let Br=Tt!==r&&c===e.length;function Li(){throw Tt!==r&&c<e.length&&_(Rl()),Ni(cr,ve<e.length?Ol(ve):null,ve<e.length?kt(ve,ve+1):kt(ve,ve))}if(t.peg$library)return{peg$result:Tt,peg$currPos:c,peg$FAILED:r,peg$maxFailExpected:cr,peg$maxFailPos:ve,peg$success:Br,peg$throw:Br?void 0:Li};if(Br)return Tt;Li()}function Sc(e){return Ec(e,{counter:new zi})}var Pc={$schema:"http://json-schema.org/draft-07/schema#",title:"state-machine-cat abstract syntax tree schema",$ref:"#/definitions/StateMachineType",$id:"org.js.state-machine-cat/v7.4.0",definitions:{StateType:{type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},TransitionType:{type:"string",enum:["internal","external"]},NoteType:{type:"array",items:{type:"string"}},ActionTypeType:{type:"string",enum:["entry","activity","exit"]},ActionType:{type:"object",required:["type","body"],additionalProperties:!1,properties:{type:{$ref:"#/definitions/ActionTypeType"},body:{type:"string"}}},ClassType:{type:"string",pattern:"^[a-zA-Z0-9_\\- ]*$"},StateMachineType:{type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{description:"The name and identifier of the state. Unique within the root state machine.",type:"string"},type:{description:"What kind of state (or pseudo state) this state is. E.g. 'regular' for normal states or 'initial', 'final', 'choice' etc for pseudo states. Most UML (pseudo-) states are supported.",$ref:"#/definitions/StateType"},label:{description:"The display label of the state. If it's not present, most renderers will use the states' name in stead.",type:"string"},color:{description:'Color to use for rendering the state. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},active:{description:"If true the state is considered to be active and rendered as such.",type:"boolean"},typeExplicitlySet:{description:"The default parser derives the `type` from the `name` with inband signaling. The user can override that behavior by explicitly setting the `type`. This attribute is there to express that (and make sure that on next parses & processing it doesn't get accidentily re-derived from the name again).",type:"boolean"},isComposite:{description:"convenience, derived attribute - set to true if there's a state machine inside the state; false in all other cases. For internal use - @deprecated",type:"boolean"},actions:{type:"array",description:"A series of actions and their types. The type describe when the action takes place (on entry, exit, or otherwise ('activity'))",items:{$ref:"#/definitions/ActionType"}},note:{description:"Comments related to this state. Some renderers will use the note attribute to render a note (i.e. as a post-it) attached to the state.",$ref:"#/definitions/NoteType"},statemachine:{description:"state machine nested within the state.",$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["id","from","to"],additionalProperties:!1,properties:{id:{type:"number"},from:{description:"The name of the state this transition transitions from",type:"string"},to:{description:"The name of the state this transition transitions to",type:"string"},label:{description:"A display label to represent this transition. Parsers can parse this label into events conditions and actions.",type:"string"},event:{description:"Event triggering the transition",type:"string"},cond:{description:"Condition for the transition to occur.",type:"string"},action:{description:"Action to execute when the transition occurs.",type:"string"},note:{description:"Comments related to this transition",$ref:"#/definitions/NoteType"},color:{description:'Color to use for rendering the transition. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},width:{description:"The line width to use for rendering the transition",type:"number",minimum:0,maximum:30},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},type:{description:"Whether the transition is external (default) or internal. See https://www.w3.org/TR/scxml/#transition for details.",$ref:"#/definitions/TransitionType"}}}}}}}};var kc=new Tc.default,xg=kc.compile(Pc),Dg=async e=>{let{parse:t}=await import("./scxml-R2W27J6G.js");return t(e)},Nc={async getAST(e,t){let r=e;if(ut(t,"inputType")==="smcat"?r=Sc(e):ut(t,"inputType")==="scxml"?r=await Dg(e):typeof e=="string"&&(r=JSON.parse(e)),!xg(r))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${kc.errorsText()}.
`);return r}};var Cn=null,Mn=null,xn=null,Dn=null,Vn=null;async function Ln(e){switch(e){case"smcat":return Cn||(Cn=await import("./smcat-VDXHMLA6.js")),Cn.default;case"dot":return Mn||(Mn=await import("./dot-LGF7FVX5.js")),Mn.default;case"svg":case"oldsvg":return xn||(xn=await import("./vector-with-wasm-TZCVK4LI.js")),xn.default;case"scjson":return Dn||(Dn=await import("./scjson-XD7SVYRX.js")),Dn.default;case"scxml":return Vn||(Vn=await import("./scxml-G3R7NVLX.js")),Vn.default;default:return t=>t}}var jc="13.0.3";var Fn=null;async function Vg(e){Fn||(Fn=await import("./desugar-VTQNQ7QN.js"));let t=Fn.default;return t(e)}async function Ic(e,t){let r=t??{},s=await Nc.getAST(e,r),i=ut(r,"desugar");return(await Ln(ut(r,"outputType")))(i?await Vg(s):s,r)}var Oc=jc;var qc=(e,t)=>{let r=document.createElement("img");r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e)),r.addEventListener("load",function(s){let i=document.createElement("canvas"),o=i.getContext("2d"),u=s.target;u.width>32767||u.height>32767?t(null,"image-too-big"):(i.width=u.width,i.height=u.height,o.drawImage(u,0,0),t(i.toDataURL("image/png",.8)))})};var Rc={engineering:{dotGraphAttrs:[{name:"bgcolor",value:"dodgerblue"},{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}]},reverse:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}]},contrast:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotNodeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotEdgeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}]},policetape:{dotGraphAttrs:[{name:"bgcolor",value:"yellow"}],dotNodeAttrs:[],dotEdgeAttrs:[]},transparent:{dotGraphAttrs:[{name:"bgcolor",value:"transparent"}],dotNodeAttrs:[],dotEdgeAttrs:[]},zany:{dotGraphAttrs:[{name:"bgcolor",value:"deeppink"},{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"},{name:"nslimit",value:"0"},{name:"nslimit1",value:"1"}],dotNodeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}],dotEdgeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}]}};var Kn=`state-machine-cat-${Oc.split(".")[0]}`,Lg=`initial,
"media player off",

"media player on" {
  stopped, playing, paused;

  stopped => playing : play;
  playing => stopped : stop;
  playing => paused  : pause;
  paused  => playing : pause;
  paused  => stopped : stop;
};

initial            => "media player off";
"media player off" => stopped           : power;
"media player on"  => "media player off" : power;`,Q={outputType:"svg",inputType:"smcat",engine:"dot",theme:"vanilla",direction:"top-down",fitToWidth:!1,desugar:!1,autoRender:!0,inputscript:Lg,sample:"/samples/mediaplayer.smcat"};function zn(e){return t=>t.substr(0,1)===e}function Un(e){return t=>({name:t.substr(1),value:e[t]})}function Cc(e,t){typeof localStorage<"u"&&localStorage.setItem(e,JSON.stringify(t))}function Fg(e,t){let r=t;if(typeof localStorage<"u")try{r=JSON.parse(localStorage.getItem(e))||t}catch{}return r}function zg(e){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e))}function se(e){return t=>{Q[e||t.target.id]=t.target.type==="checkbox"?t.target.checked:t.target.value,Cc(Kn,Q),Gn(Q)}}function Mc(){return window.output.getElementsByTagName("svg").length>0}function Gn(e){if(document.getElementById("autoRender").checked=e.autoRender,document.getElementById("fitToWidth").checked=e.fitToWidth,document.getElementById("desugar").checked=e.desugar,document.getElementById("engine").value=e.engine,document.getElementById("theme").value=e.theme,document.getElementById("direction").value=e.direction,document.getElementById("sample").value=e.sample,document.getElementById("inputscript").value=e.inputscript,document.getElementById(e.outputType).checked=!0,document.getElementById(`input_${e.inputType}`).checked=!0,Q.autoRender?(document.getElementById("render").style="display : none",xc()):document.getElementById("render").style="",Mc()){let t=window.output.getElementsByTagName("svg"),r=new Date().toISOString();document.getElementById("save-svg").href=zg(t[0].outerHTML),document.getElementById("save-svg").download=`state-machine-${r}.svg`,qc(t[0].outerHTML,s=>{document.getElementById("save-png").href=s,document.getElementById("save-png").download=`state-machine-${r}.png`})}}function Ug(e){let t=Object.keys(e).filter(zn("G")).map(Un(e)),r=Object.keys(e).filter(zn("N")).map(Un(e)),s=Object.keys(e).filter(zn("E")).map(Un(e)),i={};return t.length>0&&(i.dotGraphAttrs=t),r.length>0&&(i.dotNodeAttrs=r),s.length>0&&(i.dotEdgeAttrs=s),i}function Kg(e){let t=new URLSearchParams(e),r={};for(let[s,i]of t.entries())r[s]=i;return r}function Gg(e,t){return e[t]||{dotGraphAttrs:[],dotNodeAttrs:[],dotEdgeAttrs:[]}}function Hg(e){return e.slice(0,1024).replace(/</g,"&lt;")}async function xc(){window.output.textContent="Loading ...";try{let e=Hg(location.search),t=Object.assign({inputType:Q.inputType,outputType:Q.outputType,engine:Q.engine,direction:Q.direction,desugar:Q.desugar},Gg(Rc,Q.theme),Ug(Kg(e))),r=await Ic(Q.inputscript,t);window.output.style=`background-color: ${(t.dotGraphAttrs.find(s=>s.name==="bgcolor")||{value:"transparent"}).value}`,window.output.innerHTML=Jg(r,Q.outputType,Q.fitToWidth)}catch(e){window.output.textContent=e}}function Jg(e,t,r){switch(t){case"json":case"scjson":return`<pre>${JSON.stringify(e,null,"    ").replace(/</g,"&lt;")}</pre>`;case"svg":return r?e.replace(/svg width="[^"]+"/g,'svg width="100%"'):e;default:return`<pre>${e.replace(/</g,"&lt;")}</pre>`}}function Dc(){window.inputscript.style.height="${height}px".replace("${height}",window.innerHeight-120)}function Bg(e,t){window.contextmenu.style=`display: block; position: absolute; z-index: 2; left: ${e}px; top: ${t-70}px`}function Gr(){window.contextmenu.style="display : none"}function Ac(e){LOG}Q=Fg(Kn,Q);window.svg.addEventListener("click",se("outputType"),!1);window.dot.addEventListener("click",se("outputType"),!1);window.json.addEventListener("click",se("outputType"),!1);window.smcat.addEventListener("click",se("outputType"),!1);window.scjson.addEventListener("click",se("outputType"),!1);window.scxml.addEventListener("click",se("outputType"),!1);window.svg.addEventListener("click",se("outputType"),!1);window.inputscript.addEventListener("input",se());window.direction.addEventListener("change",se());window.engine.addEventListener("change",se());window.theme.addEventListener("change",se());window.input_json.addEventListener("click",se("inputType"),!1);window.input_smcat.addEventListener("click",se("inputType"),!1);window.input_scxml.addEventListener("click",se("inputType"),!1);window.fitToWidth.addEventListener("click",se(),!1);window.autoRender.addEventListener("click",se(),!1);window.desugar.addEventListener("click",se(),!1);window.render.addEventListener("click",async()=>await xc(),!1);window.addEventListener("resize",Dc);window.output.addEventListener("contextmenu",e=>{Mc()&&(e.preventDefault(),Bg(e.clientX,e.clientY))});document.getElementById("save-svg").addEventListener("click",Gr);document.getElementById("save-png").addEventListener("click",Gr);window.output.addEventListener("click",Gr);window.addEventListener("keyup",e=>{e.code==="Escape"&&Gr()});window.sample.addEventListener("change",e=>{e.target.value&&(Q.sample=e.target.value,fetch(e.target.value).then(t=>{if(t.status===200)return t.text();Ac(t)}).then(t=>{t&&(Q.inputscript=t,Cc(Kn,Q),Gn(Q))}).catch(Ac))});window.version.innerHTML="state machine cat ${version}".replace("${version}",smcat.version);Dc();Gn(Q);
//# sourceMappingURL=smcat-online-interpreter.js.map
