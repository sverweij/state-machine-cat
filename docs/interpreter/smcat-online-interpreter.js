import{b as Lt,c as It,d as Rt,e as Mt,f as Nt,g as Ot,h as ge,i as we,j as Dt}from"./chunk-DCU2SGZ6.js";import{a as de}from"./chunk-PWCD3LMQ.js";import{a as jt}from"./chunk-QBCC6J4V.js";import"./chunk-SHDKREUK.js";import"./chunk-FW4363Y4.js";var ve=class extends SyntaxError{constructor(l,t,A,E){super(l),this.expected=t,this.found=A,this.location=E,this.name="SyntaxError"}format(l){let t="Error: "+this.message;if(this.location){let A=null,E=l.find(w=>w.source===this.location.source);E&&(A=E.text.split(/\r\n|\n|\r/g));let x=this.location.start,f=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(x):x,L=this.location.source+":"+f.line+":"+f.column;if(A){let w=this.location.end,B="".padEnd(f.line.toString().length," "),C=A[x.line-1],d=(x.line===w.line?w.column:C.length+1)-x.column||1;t+=`
 --> `+L+`
`+B+` |
`+f.line+" | "+C+`
`+B+" | "+"".padEnd(x.column-1," ")+"".padEnd(d,"^")}else t+=`
 at `+L}return t}static buildMessage(l,t){function A(d){return d.codePointAt(0).toString(16).toUpperCase()}let E=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function x(d){return E?d.replace(E,P=>"\\u{"+A(P)+"}"):d}function f(d){return x(d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+A(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+A(P)))}function L(d){return x(d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,P=>"\\x0"+A(P)).replace(/[\x10-\x1F\x7F-\x9F]/g,P=>"\\x"+A(P)))}let w={literal(d){return'"'+f(d.text)+'"'},class(d){let P=d.parts.map(M=>Array.isArray(M)?L(M[0])+"-"+L(M[1]):L(M));return"["+(d.inverted?"^":"")+P.join("")+"]"+(d.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(d){return d.description}};function B(d){return w[d.type](d)}function C(d){let P=d.map(B);if(P.sort(),P.length>0){let M=1;for(let V=1;V<P.length;V++)P[V-1]!==P[V]&&(P[M]=P[V],M++);P.length=M}switch(P.length){case 1:return P[0];case 2:return P[0]+" or "+P[1];default:return P.slice(0,-1).join(", ")+", or "+P[P.length-1]}}function J(d){return d?'"'+f(d)+'"':"end of input"}return"Expected "+C(l)+" but "+J(t)+" found."}};function Ft(n,l){l=l!==void 0?l:{};let t={},A=l.grammarSource,E={program:$t},x=$t,f=",",L=";",w="[",B="]",C=":",J="{",d="}",P="=",M="label",V="color",Ce="class",N="active",X="type",Ge="regular",oe="initial",h="terminate",u="final",Y="parallel",ze="history",O="deephistory",le="choice",D="forkjoin",S="fork",K="join",ce="junction",fe="width",Q="external",pe="internal",ee="->",z="=>>",j="=>",R=">>",F=":>",G="--",W="==",be="<-",Ue="<<=",Ze="<=",Je="<<",We="<:",is="#",as=".",te='"',Pe='\\"',He="/*",Ae="*/",Xe="//",Ye=/^[0-9]/,Ke=/^[a-zA-Z0-9_\- ]/,Qe=/^[,;{]/,et=/^[;{]/,tt=/^[^;, "\t\n\r=\-><:{[]/,os=/^[ \t]/,ls=/^[\r\n]/,cs=/^[^\r\n]/,st=$(",",!1),rt=$(";",!1),fs=T("state"),nt=$("[",!1),it=$("]",!1),at=$(":",!1),ps=$("{",!1),us=$("}",!1),ds=T("extended state attribute"),ne=$("=",!1),gs=T("state attribute name"),ms=$("label",!0),ot=$("color",!0),ys=T("class attribute"),hs=$("class",!0),$s=T("state flag"),ws=$("active",!0),vs=T("state type"),lt=$("type",!0),bs=T("state type type"),Ps=$("regular",!1),As=$("initial",!1),xs=$("terminate",!1),ks=$("final",!1),Es=$("parallel",!1),Ts=$("history",!1),Cs=$("deephistory",!1),Ss=$("choice",!1),_s=$("forkjoin",!1),js=$("fork",!1),Ls=$("join",!1),Is=$("junction",!1),Rs=T("transition"),Ms=T("extended transition attribute"),Ns=T("transition attribute name"),Os=T("transition type name"),Ds=T("numeric transition attribute name"),Fs=$("width",!0),qs=T("transition type value"),Bs=$("external",!1),Vs=$("internal",!1),Gs=T("left to right arrow"),zs=$("->",!1),Us=$("=>>",!1),Zs=$("=>",!1),Js=$(">>",!1),Ws=$(":>",!1),Hs=$("--",!1),Xs=$("==",!1),Ys=T("right to left arrow"),Ks=$("<-",!1),Qs=$("<<=",!1),er=$("<=",!1),tr=$("<<",!1),sr=$("<:",!1),rr=$("#",!1),nr=$(".",!1),ct=re([["0","9"]],!1,!1,!1),ir=T("double quoted string"),se=$('"',!1),ft=$('\\"',!1),ie=Yr(),ar=T("valid class string"),pt=re([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1,!1),ut=re([",",";","{"],!1,!1,!1),dt=re([";","{"],!1,!1,!1),or=T("identifier"),gt=re([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1,!1),lr=T("whitespace"),cr=re([" ","	"],!1,!1,!1),fr=T("line end"),pr=re(["\r",`
`],!1,!1,!1),ur=$("/*",!1),mt=$("*/",!1),dr=$("//",!1),gr=re(["\r",`
`],!0,!1,!1),mr=T("comment");function yr(e){return e.states=It(e),Rt(e)}function hr(e,s){let i={};return ge(i,"states",e),we(i,"transitions",s),i}function Zn(e){return e}function Jn(e){return e}function $r(e){return Nt(e[0].concat(e[1]),Mt)}function wr(e,s,i){return i}function vr(e,s,i,a){return a}function br(e,s,i,a,p){return p}function Pr(e,s,i,a,p){let g=Lt(s);for(let b of i||[])ge(g,b.name,b.value);return ge(g,"typeExplicitlySet",(i||[]).some(b=>b.typeExplicitlySet)),ge(g,"statemachine",p),we(g,"note",e),a&&we(g,"actions",Dt(a)),g}function Ar(e,s){return{name:e,value:s}}function xr(e,s){return{name:e,value:s}}function kr(e){return{name:e,value:!0}}function Er(e,s){return{name:e,value:s,typeExplicitlySet:!0}}function Tr(e){return e.toLowerCase()}function Cr(e){return e.toLowerCase()}function Sr(e){return e.toLowerCase()}function _r(e){return e.toLowerCase()}function jr(e,s,i){return i}function Lr(e,s,i,a){return a}function Ir(e,s,i,a){a&&(s.label=a,s=Object.assign(s,Ot(a)));for(let p of i||[])ge(s,p.name,p.value);return we(s,"note",e),s.id=l.counter.next(),s}function Rr(e,s){return{from:e,to:s}}function Mr(e,s){return{from:s,to:e}}function Nr(e,s){return{name:e,value:s}}function Or(e,s){return{name:e,value:s}}function Dr(e,s){return{name:e,value:s}}function Fr(e,s){return{name:e,value:s}}function qr(e){return e.toLowerCase()}function Br(e){return e.toLowerCase()}function Wn(e){return e}function Vr(e){return e.join("").trim()}function Gr(e){return parseFloat(e.join(""))}function zr(e){return parseInt(e.join(""),10)}function Ur(e){return e.join("").replaceAll(/\\\"/g,'"')}function Hn(e){return e}function Zr(e){return e.join("")}function Xn(e){return e}function Jr(e){return e.join("").trim()}function Wr(e){return e.join("").trim()}function Yn(e){return e}function Kn(e){return e}function Hr(e){return e.join("")}let r=l.peg$currPos|0,m=r,ue=[{line:1,column:1}],U=r,xe=l.peg$maxFailExpected||[],o=l.peg$silentFails|0,me;if(l.startRule){if(!(l.startRule in E))throw new Error(`Can't start parsing from rule "`+l.startRule+'".');x=E[l.startRule]}function Qn(){return n.substring(m,r)}function ei(){return m}function ti(){return{source:A,start:m,end:r}}function si(){return ye(m,r)}function ri(e,s){throw s=s!==void 0?s:ye(m,r),ht([T(e)],n.substring(m,r),s)}function ni(e,s){throw s=s!==void 0?s:ye(m,r),Qr(e,s)}function Xr(e=r){let s=n.codePointAt(e);return s===void 0?"":String.fromCodePoint(s)}function $(e,s){return{type:"literal",text:e,ignoreCase:s}}function re(e,s,i,a){return{type:"class",parts:e,inverted:s,ignoreCase:i,unicode:a}}function Yr(){return{type:"any"}}function Kr(){return{type:"end"}}function T(e){return{type:"other",description:e}}function yt(e){let s=ue[e],i;if(s)return s;if(e>=ue.length)i=ue.length-1;else for(i=e;!ue[--i];);for(s=ue[i],s={line:s.line,column:s.column};i<e;)n.charCodeAt(i)===10?(s.line++,s.column=1):s.column++,i++;return ue[e]=s,s}function ye(e,s,i){let a=yt(e),p=yt(s),g={source:A,start:{offset:e,line:a.line,column:a.column},end:{offset:s,line:p.line,column:p.column}};return i&&A&&typeof A.offset=="function"&&(g.start=A.offset(g.start),g.end=A.offset(g.end)),g}function c(e){r<U||(r>U&&(U=r,xe=[]),xe.push(e))}function Qr(e,s){return new ve(e,null,null,s)}function ht(e,s,i){return new ve(ve.buildMessage(e,s),e,s,i)}function $t(){let e,s,i,a;return e=r,s=y(),i=wt(),a=y(),m=e,e=yr(i),e}function wt(){let e,s,i,a;for(o++,e=r,s=en(),s===t&&(s=null),i=[],a=Pt();a!==t;)i.push(a),a=Pt();return m=e,e=hr(s,i),o--,e}function en(){let e,s,i,a,p,g;for(e=r,s=r,i=[],a=r,p=Se(),p!==t?(n.charCodeAt(r)===44?(g=f,r++):(g=t,o===0&&c(st)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t);a!==t;)i.push(a),a=r,p=Se(),p!==t?(n.charCodeAt(r)===44?(g=f,r++):(g=t,o===0&&c(st)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t);return a=r,p=Se(),p!==t?(n.charCodeAt(r)===59?(g=L,r++):(g=t,o===0&&c(rt)),g!==t?(m=a,a=p):(r=a,a=t)):(r=a,a=t),a!==t?(i=[i,a],s=i):(r=s,s=t),s!==t&&(m=e,s=$r(s)),e=s,e}function Se(){let e,s,i,a,p,g,b,k,H,q,ae,_t,Le,_n,Ie;for(o++,e=r,s=[],i=ke();i!==t;)s.push(i),i=ke();return i=y(),a=$e(),a!==t?(p=y(),g=r,n.charCodeAt(r)===91?(b=w,r++):(b=t,o===0&&c(nt)),b!==t?(k=tn(),n.charCodeAt(r)===93?(H=B,r++):(H=t,o===0&&c(it)),H!==t?(m=g,g=wr(s,a,k)):(r=g,g=t)):(r=g,g=t),g===t&&(g=null),b=y(),k=r,n.charCodeAt(r)===58?(H=C,r++):(H=t,o===0&&c(at)),H!==t?(q=y(),ae=$n(),ae!==t?(_t=y(),m=k,k=vr(s,a,g,ae)):(r=k,k=t)):(r=k,k=t),k===t&&(k=null),H=y(),q=r,n.charCodeAt(r)===123?(ae=J,r++):(ae=t,o===0&&c(ps)),ae!==t?(_t=y(),Le=wt(),Le!==t?(_n=y(),n.charCodeAt(r)===125?(Ie=d,r++):(Ie=t,o===0&&c(us)),Ie!==t?(m=q,q=br(s,a,g,k,Le)):(r=q,q=t)):(r=q,q=t)):(r=q,q=t),q===t&&(q=null),ae=y(),m=e,e=Pr(s,a,g,k,q)):(r=e,e=t),o--,e===t&&(s=t,o===0&&c(fs)),e}function tn(){let e,s;for(o++,e=[],s=vt();s!==t;)e.push(s),s=vt();return o--,e}function vt(){let e,s,i,a,p,g,b,k;return o++,e=r,s=y(),i=sn(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=he(),b!==t?(k=y(),m=e,e=Ar(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=bt(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=xt(),b!==t?(k=y(),m=e,e=xr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=rn(),i!==t?(a=y(),m=e,e=kr(i)):(r=e,e=t),e===t&&(e=r,s=y(),i=nn(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=an(),b!==t?(k=y(),m=e,e=Er(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))),o--,e===t&&(s=t,o===0&&c(ds)),e}function sn(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===M?r+=5:(s=t,o===0&&c(ms)),s===t&&(s=n.substr(r,5),s.toLowerCase()===V?r+=5:(s=t,o===0&&c(ot))),s!==t&&(m=e,s=Tr(s)),e=s,o--,e===t&&(s=t,o===0&&c(gs)),e}function bt(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===Ce?r+=5:(s=t,o===0&&c(hs)),s!==t&&(m=e,s=Cr(s)),e=s,o--,e===t&&(s=t,o===0&&c(ys)),e}function rn(){let e,s;return o++,e=r,s=n.substr(r,6),s.toLowerCase()===N?r+=6:(s=t,o===0&&c(ws)),s!==t&&(m=e,s=Sr(s)),e=s,o--,e===t&&(s=t,o===0&&c($s)),e}function nn(){let e,s;return o++,e=r,s=n.substr(r,4),s.toLowerCase()===X?r+=4:(s=t,o===0&&c(lt)),s!==t&&(m=e,s=_r(s)),e=s,o--,e===t&&(s=t,o===0&&c(vs)),e}function an(){let e,s;return o++,n.substr(r,7)===Ge?(e=Ge,r+=7):(e=t,o===0&&c(Ps)),e===t&&(n.substr(r,7)===oe?(e=oe,r+=7):(e=t,o===0&&c(As)),e===t&&(n.substr(r,9)===h?(e=h,r+=9):(e=t,o===0&&c(xs)),e===t&&(n.substr(r,5)===u?(e=u,r+=5):(e=t,o===0&&c(ks)),e===t&&(n.substr(r,8)===Y?(e=Y,r+=8):(e=t,o===0&&c(Es)),e===t&&(n.substr(r,7)===ze?(e=ze,r+=7):(e=t,o===0&&c(Ts)),e===t&&(n.substr(r,11)===O?(e=O,r+=11):(e=t,o===0&&c(Cs)),e===t&&(n.substr(r,6)===le?(e=le,r+=6):(e=t,o===0&&c(Ss)),e===t&&(n.substr(r,8)===D?(e=D,r+=8):(e=t,o===0&&c(_s)),e===t&&(n.substr(r,4)===S?(e=S,r+=4):(e=t,o===0&&c(js)),e===t&&(n.substr(r,4)===K?(e=K,r+=4):(e=t,o===0&&c(Ls)),e===t&&(n.substr(r,8)===ce?(e=ce,r+=8):(e=t,o===0&&c(Is))))))))))))),o--,e===t&&(s=t,o===0&&c(bs)),e}function Pt(){let e,s,i,a,p,g,b,k,H;for(o++,e=r,s=[],i=ke();i!==t;)s.push(i),i=ke();return i=on(),i!==t?(a=r,n.charCodeAt(r)===91?(p=w,r++):(p=t,o===0&&c(nt)),p!==t?(g=ln(),n.charCodeAt(r)===93?(b=B,r++):(b=t,o===0&&c(it)),b!==t?(k=y(),m=a,a=jr(s,i,g)):(r=a,a=t)):(r=a,a=t),a===t&&(a=null),p=r,n.charCodeAt(r)===58?(g=C,r++):(g=t,o===0&&c(at)),g!==t?(b=y(),k=hn(),k!==t?(H=y(),m=p,p=Lr(s,i,a,k)):(r=p,p=t)):(r=p,p=t),p===t&&(p=null),n.charCodeAt(r)===59?(g=L,r++):(g=t,o===0&&c(rt)),g!==t?(m=e,e=Ir(s,i,a,p)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&c(Rs)),e}function on(){let e,s,i,a,p,g,b,k;return e=r,s=y(),i=$e(),i!==t?(a=y(),p=dn(),p!==t?(g=y(),b=$e(),b!==t?(k=y(),m=e,e=Rr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=$e(),i!==t?(a=y(),p=gn(),p!==t?(g=y(),b=$e(),b!==t?(k=y(),m=e,e=Mr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function ln(){let e,s;for(o++,e=[],s=At();s!==t;)e.push(s),s=At();return o--,e}function At(){let e,s,i,a,p,g,b,k;return o++,e=r,s=y(),i=cn(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=he(),b!==t?(k=y(),m=e,e=Nr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=bt(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=xt(),b!==t?(k=y(),m=e,e=Or(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=fn(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=un(),b!==t?(k=y(),m=e,e=Dr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,s=y(),i=pn(),i!==t?(a=y(),n.charCodeAt(r)===61?(p=P,r++):(p=t,o===0&&c(ne)),p!==t?(g=y(),b=mn(),b!==t?(k=y(),m=e,e=Fr(i,b)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))),o--,e===t&&(s=t,o===0&&c(Ms)),e}function cn(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===V?r+=5:(s=t,o===0&&c(ot)),s!==t&&(m=e,s=qr(s)),e=s,o--,e===t&&(s=t,o===0&&c(Ns)),e}function fn(){let e,s;return o++,e=r,s=n.substr(r,4),s.toLowerCase()===X?r+=4:(s=t,o===0&&c(lt)),s!==t&&(m=e,s=Br(s)),e=s,o--,e===t&&(s=t,o===0&&c(Os)),e}function pn(){let e,s;return o++,e=r,s=n.substr(r,5),s.toLowerCase()===fe?r+=5:(s=t,o===0&&c(Fs)),s!==t&&(m=e,s=s),e=s,o--,e===t&&(s=t,o===0&&c(Ds)),e}function un(){let e,s;return o++,n.substr(r,8)===Q?(e=Q,r+=8):(e=t,o===0&&c(Bs)),e===t&&(n.substr(r,8)===pe?(e=pe,r+=8):(e=t,o===0&&c(Vs))),o--,e===t&&(s=t,o===0&&c(qs)),e}function dn(){let e,s;return o++,n.substr(r,2)===ee?(e=ee,r+=2):(e=t,o===0&&c(zs)),e===t&&(n.substr(r,3)===z?(e=z,r+=3):(e=t,o===0&&c(Us)),e===t&&(n.substr(r,2)===j?(e=j,r+=2):(e=t,o===0&&c(Zs)),e===t&&(n.substr(r,2)===R?(e=R,r+=2):(e=t,o===0&&c(Js)),e===t&&(n.substr(r,2)===F?(e=F,r+=2):(e=t,o===0&&c(Ws)),e===t&&(n.substr(r,2)===G?(e=G,r+=2):(e=t,o===0&&c(Hs)),e===t&&(n.substr(r,2)===W?(e=W,r+=2):(e=t,o===0&&c(Xs)))))))),o--,e===t&&(s=t,o===0&&c(Gs)),e}function gn(){let e,s;return o++,n.substr(r,2)===be?(e=be,r+=2):(e=t,o===0&&c(Ks)),e===t&&(n.substr(r,3)===Ue?(e=Ue,r+=3):(e=t,o===0&&c(Qs)),e===t&&(n.substr(r,2)===Ze?(e=Ze,r+=2):(e=t,o===0&&c(er)),e===t&&(n.substr(r,2)===Je?(e=Je,r+=2):(e=t,o===0&&c(tr)),e===t&&(n.substr(r,2)===We?(e=We,r+=2):(e=t,o===0&&c(sr)))))),o--,e===t&&(s=t,o===0&&c(Ys)),e}function ke(){let e,s,i,a,p;if(e=r,s=y(),n.charCodeAt(r)===35?(i=is,r++):(i=t,o===0&&c(rr)),i!==t){for(a=[],p=Ee();p!==t;)a.push(p),p=Ee();m=e,e=Vr(a)}else r=e,e=t;return e}function mn(){let e;return e=yn(),e===t&&(e=_e()),e}function yn(){let e,s,i,a,p;return e=r,s=r,i=_e(),i!==t?(n.charCodeAt(r)===46?(a=as,r++):(a=t,o===0&&c(nr)),a!==t?(p=_e(),p!==t?(i=[i,a,p],s=i):(r=s,s=t)):(r=s,s=t)):(r=s,s=t),s!==t&&(m=e,s=Gr(s)),e=s,e}function _e(){let e,s,i;if(e=r,s=[],i=n.charAt(r),Ye.test(i)?r++:(i=t,o===0&&c(ct)),i!==t)for(;i!==t;)s.push(i),i=n.charAt(r),Ye.test(i)?r++:(i=t,o===0&&c(ct));else s=t;return s!==t&&(m=e,s=zr(s)),e=s,e}function hn(){let e;return e=he(),e===t&&(e=bn()),e}function $n(){let e;return e=he(),e===t&&(e=Pn()),e}function he(){let e,s,i,a;return o++,e=r,n.charCodeAt(r)===34?(s=te,r++):(s=t,o===0&&c(se)),s!==t?(i=wn(),n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),a!==t?(m=e,e=Ur(i)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&c(ir)),e}function wn(){let e,s,i,a;for(e=[],s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.substr(r,2)===Pe?(a=Pe,r+=2):(a=t,o===0&&c(ft)),a===t&&(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie))),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.substr(r,2)===Pe?(a=Pe,r+=2):(a=t,o===0&&c(ft)),a===t&&(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie))),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function xt(){let e,s,i,a;return o++,e=r,n.charCodeAt(r)===34?(s=te,r++):(s=t,o===0&&c(se)),s!==t?(i=vn(),n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),a!==t?(m=e,e=Zr(i)):(r=e,e=t)):(r=e,e=t),o--,e===t&&(s=t,o===0&&c(ar)),e}function vn(){let e,s,i,a;for(e=[],s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(a=n.charAt(r),Ke.test(a)?r++:(a=t,o===0&&c(pt)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,n.charCodeAt(r)===34?(a=te,r++):(a=t,o===0&&c(se)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(a=n.charAt(r),Ke.test(a)?r++:(a=t,o===0&&c(pt)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function bn(){let e,s;return e=r,s=xn(),m=e,s=Jr(s),e=s,e}function Pn(){let e,s;return e=r,s=An(),m=e,s=Wr(s),e=s,e}function An(){let e,s,i,a;for(e=[],s=r,i=r,o++,a=n.charAt(r),Qe.test(a)?r++:(a=t,o===0&&c(ut)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,a=n.charAt(r),Qe.test(a)?r++:(a=t,o===0&&c(ut)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function xn(){let e,s,i,a;for(e=[],s=r,i=r,o++,a=n.charAt(r),et.test(a)?r++:(a=t,o===0&&c(dt)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);s!==t;)e.push(s),s=r,i=r,o++,a=n.charAt(r),et.test(a)?r++:(a=t,o===0&&c(dt)),o--,a===t?i=void 0:(r=i,i=t),i!==t?(n.length>r?(a=n.charAt(r),r++):(a=t,o===0&&c(ie)),a!==t?(m=s,s=a):(r=s,s=t)):(r=s,s=t);return e}function $e(){let e,s,i;if(o++,e=r,s=[],i=n.charAt(r),tt.test(i)?r++:(i=t,o===0&&c(gt)),i!==t)for(;i!==t;)s.push(i),i=n.charAt(r),tt.test(i)?r++:(i=t,o===0&&c(gt));else s=t;return s!==t&&(m=e,s=Hr(s)),e=s,e===t&&(e=he()),o--,e===t&&(s=t,o===0&&c(or)),e}function kt(){let e,s;return o++,e=n.charAt(r),os.test(e)?r++:(e=t,o===0&&c(cr)),o--,e===t&&(s=t,o===0&&c(lr)),e}function Et(){let e,s;return o++,e=n.charAt(r),ls.test(e)?r++:(e=t,o===0&&c(pr)),o--,e===t&&(s=t,o===0&&c(fr)),e}function kn(){let e;return n.substr(r,2)===He?(e=He,r+=2):(e=t,o===0&&c(ur)),e}function En(){let e;return n.substr(r,2)===Ae?(e=Ae,r+=2):(e=t,o===0&&c(mt)),e}function Tt(){let e,s,i;return e=r,s=r,o++,n.substr(r,2)===Ae?(i=Ae,r+=2):(i=t,o===0&&c(mt)),o--,i===t?s=void 0:(r=s,s=t),s!==t?(n.length>r?(i=n.charAt(r),r++):(i=t,o===0&&c(ie)),i!==t?(s=[s,i],e=s):(r=e,e=t)):(r=e,e=t),e}function Tn(){let e,s,i,a;if(e=r,s=kn(),s!==t){for(i=[],a=Tt();a!==t;)i.push(a),a=Tt();a=En(),a!==t?(s=[s,i,a],e=s):(r=e,e=t)}else r=e,e=t;return e}function Cn(){let e;return n.substr(r,2)===Xe?(e=Xe,r+=2):(e=t,o===0&&c(dr)),e}function Ee(){let e;return e=n.charAt(r),cs.test(e)?r++:(e=t,o===0&&c(gr)),e}function Sn(){let e,s,i,a;if(e=r,s=Cn(),s!==t){for(i=[],a=Ee();a!==t;)i.push(a),a=Ee();s=[s,i],e=s}else r=e,e=t;return e}function Ct(){let e,s;return o++,e=Sn(),e===t&&(e=Tn()),o--,e===t&&(s=t,o===0&&c(mr)),e}function y(){let e,s;for(e=[],s=kt(),s===t&&(s=Et(),s===t&&(s=Ct()));s!==t;)e.push(s),s=kt(),s===t&&(s=Et(),s===t&&(s=Ct()));return e}me=x();let je=me!==t&&r===n.length;function St(){throw me!==t&&r<n.length&&c(Kr()),ht(xe,U<n.length?Xr(U):null,U<n.length?ye(U,U+1):ye(U,U))}if(l.peg$library)return{peg$result:me,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:xe,peg$maxFailPos:U,peg$success:je,peg$throw:je?void 0:St};if(je)return me;St()}function qt(n){return Ft(n,{counter:new jt})}var Me=zt;var Bt={type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{type:"string"},type:{$ref:"#/definitions/StateType"},label:{type:"string"},color:{type:"string"},class:{$ref:"#/definitions/ClassType"},active:{type:"boolean"},typeExplicitlySet:{type:"boolean"},isComposite:{type:"boolean"},actions:{type:"array",items:{$ref:"#/definitions/ActionType"}},note:{$ref:"#/definitions/NoteType"},statemachine:{$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["id","from","to"],additionalProperties:!1,properties:{id:{type:"number"},from:{type:"string"},to:{type:"string"},label:{type:"string"},event:{type:"string"},cond:{type:"string"},action:{type:"string"},note:{$ref:"#/definitions/NoteType"},color:{type:"string"},width:{type:"number",minimum:0,maximum:30},class:{$ref:"#/definitions/ClassType"},type:{$ref:"#/definitions/TransitionType"}}}}}},jn={type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},Ln={type:"string",enum:["internal","external"]},Vt=Object.prototype.hasOwnProperty,Gt=new RegExp("^[a-zA-Z0-9_\\- ]*$","u"),In={type:"string",enum:["entry","activity","exit"]};function Z(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,f=0;if(f===0)if(n&&typeof n=="object"&&!Array.isArray(n)){let w;if(n.type===void 0&&(w="type")||n.body===void 0&&(w="body"))return Z.errors=[{instancePath:l,schemaPath:"#/required",keyword:"required",params:{missingProperty:w},message:"must have required property '"+w+"'"}],!1;{let B=f;for(let C in n)if(!(C==="type"||C==="body"))return Z.errors=[{instancePath:l,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:C},message:"must NOT have additional properties"}],!1;if(B===f){if(n.type!==void 0){let C=n.type,J=f;if(typeof C!="string")return Z.errors=[{instancePath:l+"/type",schemaPath:"#/definitions/ActionTypeType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(C==="entry"||C==="activity"||C==="exit"))return Z.errors=[{instancePath:l+"/type",schemaPath:"#/definitions/ActionTypeType/enum",keyword:"enum",params:{allowedValues:In.enum},message:"must be equal to one of the allowed values"}],!1;var L=J===f}else var L=!0;if(L)if(n.body!==void 0){let C=f;if(typeof n.body!="string")return Z.errors=[{instancePath:l+"/body",schemaPath:"#/properties/body/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var L=C===f}else var L=!0}}}else return Z.errors=[{instancePath:l,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Z.errors=x,f===0}var Re={validate:v};function v(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,f=0;if(f===0)if(n&&typeof n=="object"&&!Array.isArray(n)){let V;if(n.states===void 0&&(V="states"))return v.errors=[{instancePath:l,schemaPath:"#/required",keyword:"required",params:{missingProperty:V},message:"must have required property '"+V+"'"}],!1;{let Ce=f;for(let N in n)if(!(N==="states"||N==="transitions"))return v.errors=[{instancePath:l,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:N},message:"must NOT have additional properties"}],!1;if(Ce===f){if(n.states!==void 0){let N=n.states,X=f;if(f===X)if(Array.isArray(N)){var L=!0;let oe=N.length;for(let h=0;h<oe;h++){let u=N[h],Y=f;if(f===Y)if(u&&typeof u=="object"&&!Array.isArray(u)){let O;if(u.name===void 0&&(O="name")||u.type===void 0&&(O="type"))return v.errors=[{instancePath:l+"/states/"+h,schemaPath:"#/properties/states/items/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"}],!1;{let le=f;for(let D in u)if(!Vt.call(Bt.properties.states.items.properties,D))return v.errors=[{instancePath:l+"/states/"+h,schemaPath:"#/properties/states/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:D},message:"must NOT have additional properties"}],!1;if(le===f){if(u.name!==void 0){let D=f;if(typeof u.name!="string")return v.errors=[{instancePath:l+"/states/"+h+"/name",schemaPath:"#/properties/states/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=D===f}else var w=!0;if(w){if(u.type!==void 0){let S=u.type,K=f;if(typeof S!="string")return v.errors=[{instancePath:l+"/states/"+h+"/type",schemaPath:"#/definitions/StateType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(S==="regular"||S==="initial"||S==="terminate"||S==="final"||S==="parallel"||S==="history"||S==="deephistory"||S==="choice"||S==="forkjoin"||S==="fork"||S==="join"||S==="junction"))return v.errors=[{instancePath:l+"/states/"+h+"/type",schemaPath:"#/definitions/StateType/enum",keyword:"enum",params:{allowedValues:jn.enum},message:"must be equal to one of the allowed values"}],!1;var w=K===f}else var w=!0;if(w){if(u.label!==void 0){let K=f;if(typeof u.label!="string")return v.errors=[{instancePath:l+"/states/"+h+"/label",schemaPath:"#/properties/states/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=K===f}else var w=!0;if(w){if(u.color!==void 0){let ce=f;if(typeof u.color!="string")return v.errors=[{instancePath:l+"/states/"+h+"/color",schemaPath:"#/properties/states/items/properties/color/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=ce===f}else var w=!0;if(w){if(u.class!==void 0){let fe=u.class,Q=f;if(f===f)if(typeof fe=="string"){if(!Gt.test(fe))return v.errors=[{instancePath:l+"/states/"+h+"/class",schemaPath:"#/definitions/ClassType/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9_\\- ]*$"},message:'must match pattern "^[a-zA-Z0-9_\\- ]*$"'}],!1}else return v.errors=[{instancePath:l+"/states/"+h+"/class",schemaPath:"#/definitions/ClassType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var w=Q===f}else var w=!0;if(w){if(u.active!==void 0){let Q=f;if(typeof u.active!="boolean")return v.errors=[{instancePath:l+"/states/"+h+"/active",schemaPath:"#/properties/states/items/properties/active/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var w=Q===f}else var w=!0;if(w){if(u.typeExplicitlySet!==void 0){let pe=f;if(typeof u.typeExplicitlySet!="boolean")return v.errors=[{instancePath:l+"/states/"+h+"/typeExplicitlySet",schemaPath:"#/properties/states/items/properties/typeExplicitlySet/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var w=pe===f}else var w=!0;if(w){if(u.isComposite!==void 0){let ee=f;if(typeof u.isComposite!="boolean")return v.errors=[{instancePath:l+"/states/"+h+"/isComposite",schemaPath:"#/properties/states/items/properties/isComposite/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var w=ee===f}else var w=!0;if(w){if(u.actions!==void 0){let z=u.actions,j=f;if(f===j)if(Array.isArray(z)){var B=!0;let F=z.length;for(let G=0;G<F;G++){let W=f;Z(z[G],{instancePath:l+"/states/"+h+"/actions/"+G,parentData:z,parentDataProperty:G,rootData:E})||(x=x===null?Z.errors:x.concat(Z.errors),f=x.length);var B=W===f;if(!B)break}}else return v.errors=[{instancePath:l+"/states/"+h+"/actions",schemaPath:"#/properties/states/items/properties/actions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var w=j===f}else var w=!0;if(w){if(u.note!==void 0){let j=u.note,R=f;if(f===f)if(Array.isArray(j)){var C=!0;let G=j.length;for(let W=0;W<G;W++){let be=f;if(typeof j[W]!="string")return v.errors=[{instancePath:l+"/states/"+h+"/note/"+W,schemaPath:"#/definitions/NoteType/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var C=be===f;if(!C)break}}else return v.errors=[{instancePath:l+"/states/"+h+"/note",schemaPath:"#/definitions/NoteType/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var w=R===f}else var w=!0;if(w)if(u.statemachine!==void 0){let j=f;Re.validate(u.statemachine,{instancePath:l+"/states/"+h+"/statemachine",parentData:u,parentDataProperty:"statemachine",rootData:E})||(x=x===null?Re.validate.errors:x.concat(Re.validate.errors),f=x.length);var w=j===f}else var w=!0}}}}}}}}}}}}else return v.errors=[{instancePath:l+"/states/"+h,schemaPath:"#/properties/states/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var L=Y===f;if(!L)break}}else return v.errors=[{instancePath:l+"/states",schemaPath:"#/properties/states/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var M=X===f}else var M=!0;if(M)if(n.transitions!==void 0){let N=n.transitions,X=f;if(f===X)if(Array.isArray(N)){var J=!0;let oe=N.length;for(let h=0;h<oe;h++){let u=N[h],Y=f;if(f===Y)if(u&&typeof u=="object"&&!Array.isArray(u)){let O;if(u.id===void 0&&(O="id")||u.from===void 0&&(O="from")||u.to===void 0&&(O="to"))return v.errors=[{instancePath:l+"/transitions/"+h,schemaPath:"#/properties/transitions/items/required",keyword:"required",params:{missingProperty:O},message:"must have required property '"+O+"'"}],!1;{let le=f;for(let D in u)if(!Vt.call(Bt.properties.transitions.items.properties,D))return v.errors=[{instancePath:l+"/transitions/"+h,schemaPath:"#/properties/transitions/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:D},message:"must NOT have additional properties"}],!1;if(le===f){if(u.id!==void 0){let D=u.id,S=f;if(!(typeof D=="number"&&isFinite(D)))return v.errors=[{instancePath:l+"/transitions/"+h+"/id",schemaPath:"#/properties/transitions/items/properties/id/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=S===f}else var d=!0;if(d){if(u.from!==void 0){let S=f;if(typeof u.from!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/from",schemaPath:"#/properties/transitions/items/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=S===f}else var d=!0;if(d){if(u.to!==void 0){let K=f;if(typeof u.to!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/to",schemaPath:"#/properties/transitions/items/properties/to/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=K===f}else var d=!0;if(d){if(u.label!==void 0){let ce=f;if(typeof u.label!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/label",schemaPath:"#/properties/transitions/items/properties/label/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=ce===f}else var d=!0;if(d){if(u.event!==void 0){let fe=f;if(typeof u.event!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/event",schemaPath:"#/properties/transitions/items/properties/event/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=fe===f}else var d=!0;if(d){if(u.cond!==void 0){let Q=f;if(typeof u.cond!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/cond",schemaPath:"#/properties/transitions/items/properties/cond/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=Q===f}else var d=!0;if(d){if(u.action!==void 0){let pe=f;if(typeof u.action!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/action",schemaPath:"#/properties/transitions/items/properties/action/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=pe===f}else var d=!0;if(d){if(u.note!==void 0){let ee=u.note,z=f;if(f===f)if(Array.isArray(ee)){var P=!0;let R=ee.length;for(let F=0;F<R;F++){let G=f;if(typeof ee[F]!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/note/"+F,schemaPath:"#/definitions/NoteType/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var P=G===f;if(!P)break}}else return v.errors=[{instancePath:l+"/transitions/"+h+"/note",schemaPath:"#/definitions/NoteType/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=z===f}else var d=!0;if(d){if(u.color!==void 0){let z=f;if(typeof u.color!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/color",schemaPath:"#/properties/transitions/items/properties/color/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=z===f}else var d=!0;if(d){if(u.width!==void 0){let j=u.width,R=f;if(f===R)if(typeof j=="number"&&isFinite(j)){if(j>30||isNaN(j))return v.errors=[{instancePath:l+"/transitions/"+h+"/width",schemaPath:"#/properties/transitions/items/properties/width/maximum",keyword:"maximum",params:{comparison:"<=",limit:30},message:"must be <= 30"}],!1;if(j<0||isNaN(j))return v.errors=[{instancePath:l+"/transitions/"+h+"/width",schemaPath:"#/properties/transitions/items/properties/width/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return v.errors=[{instancePath:l+"/transitions/"+h+"/width",schemaPath:"#/properties/transitions/items/properties/width/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var d=R===f}else var d=!0;if(d){if(u.class!==void 0){let R=u.class,F=f;if(f===f)if(typeof R=="string"){if(!Gt.test(R))return v.errors=[{instancePath:l+"/transitions/"+h+"/class",schemaPath:"#/definitions/ClassType/pattern",keyword:"pattern",params:{pattern:"^[a-zA-Z0-9_\\- ]*$"},message:'must match pattern "^[a-zA-Z0-9_\\- ]*$"'}],!1}else return v.errors=[{instancePath:l+"/transitions/"+h+"/class",schemaPath:"#/definitions/ClassType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=F===f}else var d=!0;if(d)if(u.type!==void 0){let R=u.type,F=f;if(typeof R!="string")return v.errors=[{instancePath:l+"/transitions/"+h+"/type",schemaPath:"#/definitions/TransitionType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(R==="internal"||R==="external"))return v.errors=[{instancePath:l+"/transitions/"+h+"/type",schemaPath:"#/definitions/TransitionType/enum",keyword:"enum",params:{allowedValues:Ln.enum},message:"must be equal to one of the allowed values"}],!1;var d=F===f}else var d=!0}}}}}}}}}}}}}else return v.errors=[{instancePath:l+"/transitions/"+h,schemaPath:"#/properties/transitions/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var J=Y===f;if(!J)break}}else return v.errors=[{instancePath:l+"/transitions",schemaPath:"#/properties/transitions/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var M=X===f}else var M=!0}}}else return v.errors=[{instancePath:l,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return v.errors=x,f===0}function zt(n,{instancePath:l="",parentData:t,parentDataProperty:A,rootData:E=n}={}){let x=null,f=0;return v(n,{instancePath:l,parentData:t,parentDataProperty:A,rootData:E})||(x=x===null?v.errors:x.concat(v.errors),f=x.length),zt.errors=x,f===0}var Rn=async n=>{let{parse:l}=await import("./scxml-AUQIRRYT.js");return l(n)};function Mn(n){return(n||[]).map(l=>`data${l.instancePath} ${l.message}`).join(", ")}async function Ut(n,l){let t=n;if(de(l,"inputType")==="smcat"?t=qt(n):de(l,"inputType")==="scxml"?t=await Rn(n):typeof n=="string"&&(t=JSON.parse(n)),!Me(t))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${Mn(Me.errors)}.
`);return t}var Zt=null,Jt=null,Wt=null,Ht=null,Xt=null;async function Ne(n){switch(n){case"smcat":return Zt??=await import("./smcat-EVI24VSX.js"),Zt.default;case"dot":return Jt??=await import("./dot-CKKHYRV6.js"),Jt.default;case"svg":case"oldsvg":return Wt??=await import("./vector-with-wasm-IEQ3275N.js"),Wt.default;case"scjson":return Ht??=await import("./scjson-3PZEL4HD.js"),Ht.default;case"scxml":return Xt??=await import("./scxml-BEZX4AFP.js"),Xt.default;default:return l=>l}}var Yt="14.0.6";var Kt=null;async function Nn(n){Kt??=await import("./desugar-THJDU7MF.js");let l=Kt.default;return l(n)}async function Qt(n,l){let t=l??{},A=await Ut(n,t),E=de(t,"desugar");return(await Ne(de(t,"outputType")))(E?await Nn(A):A,t)}var Oe=Yt;var es={engineering:{dotGraphAttrs:[{name:"bgcolor",value:"dodgerblue"},{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}]},reverse:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}]},contrast:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotNodeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotEdgeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}]},policetape:{dotGraphAttrs:[{name:"bgcolor",value:"yellow"}],dotNodeAttrs:[],dotEdgeAttrs:[]},transparent:{dotGraphAttrs:[{name:"bgcolor",value:"transparent"}],dotNodeAttrs:[],dotEdgeAttrs:[]},zany:{dotGraphAttrs:[{name:"bgcolor",value:"deeppink"},{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"},{name:"nslimit",value:"0"},{name:"nslimit1",value:"1"}],dotNodeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}],dotEdgeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}]}};var De=null,Be=`state-machine-cat-${Oe.split(".")[0]}`,On=`initial,
"media player off",

"media player on" {
  stopped, playing, paused;

  stopped => playing : play;
  playing => stopped : stop;
  playing => paused  : pause;
  paused  => playing : pause;
  paused  => stopped : stop;
};

initial            => "media player off";
"media player off" => stopped           : power;
"media player on"  => "media player off" : power;`,_={outputType:"svg",inputType:"smcat",engine:"dot",theme:"vanilla",direction:"top-down",fitToWidth:!1,desugar:!1,autoRender:!0,inputscript:On,sample:"/samples/mediaplayer.smcat"};function Fe(n){return l=>l.substr(0,1)===n}function qe(n){return l=>({name:l.substr(1),value:n[l]})}function ss(n,l){typeof localStorage<"u"&&localStorage.setItem(n,JSON.stringify(l))}function Dn(n,l){let t=l;if(typeof localStorage<"u")try{t=JSON.parse(localStorage.getItem(n))||l}catch{}return t}function I(n){return async l=>{_[n||l.target.id]=l.target.type==="checkbox"?l.target.checked:l.target.value,ss(Be,_),await Ve(_)}}function Fn(){return window.output.getElementsByTagName("svg").length>0}async function Ve(n){document.getElementById("autoRender").checked=n.autoRender,document.getElementById("fitToWidth").checked=n.fitToWidth,document.getElementById("desugar").checked=n.desugar,document.getElementById("engine").value=n.engine,document.getElementById("theme").value=n.theme,document.getElementById("direction").value=n.direction,document.getElementById("sample").value=n.sample,document.getElementById("inputscript").value=n.inputscript,document.getElementById(n.outputType).checked=!0,document.getElementById(`input_${n.inputType}`).checked=!0,_.autoRender?(document.getElementById("render").style="display : none",await rs()):document.getElementById("render").style=""}function qn(n){let l=Object.keys(n).filter(Fe("G")).map(qe(n)),t=Object.keys(n).filter(Fe("N")).map(qe(n)),A=Object.keys(n).filter(Fe("E")).map(qe(n)),E={};return l.length>0&&(E.dotGraphAttrs=l),t.length>0&&(E.dotNodeAttrs=t),A.length>0&&(E.dotEdgeAttrs=A),E}function Bn(n){let l=new URLSearchParams(n),t={};for(let[A,E]of l.entries())t[A]=E;return t}function Vn(n,l){return n[l]||{dotGraphAttrs:[],dotNodeAttrs:[],dotEdgeAttrs:[]}}function Gn(n){return n.slice(0,1024).replaceAll("<","&lt;")}async function rs(){window.output.textContent="Loading ...";try{let n=Gn(location.search),l=Object.assign({inputType:_.inputType,outputType:_.outputType,engine:_.engine,direction:_.direction,desugar:_.desugar},Vn(es,_.theme),qn(Bn(n))),t=await Qt(_.inputscript,l);window.output.style=`background-color: ${(l.dotGraphAttrs.find(A=>A.name==="bgcolor")||{value:"transparent"}).value}`,window.output.innerHTML=zn(t,_.outputType,_.fitToWidth)}catch(n){window.output.textContent=n}}function zn(n,l,t){switch(l){case"json":case"scjson":return`<pre>${JSON.stringify(n,null,"    ").replaceAll("<","&lt;")}</pre>`;case"svg":return t?n.replaceAll(/svg width="[^"]+"/g,'svg width="100%"'):n;default:return`<pre>${n.replaceAll("<","&lt;")}</pre>`}}function ns(){window.inputscript.style.height="${height}px".replaceAll("${height}",window.innerHeight-120)}async function Un(n,l){let t=window.output.getElementsByTagName("svg"),A=new Date().toISOString();De??=await import("./svg-to-uri-5DWZR2SQ.js"),document.getElementById("save-svg").href=De.toVectorURI(t[0].outerHTML),document.getElementById("save-svg").download=`state-machine-${A}.svg`,De.toRasterURI(t[0].outerHTML,E=>{document.getElementById("save-png").href=E,document.getElementById("save-png").download=`state-machine-${A}.png`}),window.contextmenu.style=`display: block; position: absolute; z-index: 2; left: ${n}px; top: ${l-70}px`}function Te(){window.contextmenu.style="display : none"}function ts(n){LOG}_=Dn(Be,_);window.svg.addEventListener("click",await I("outputType"),!1);window.dot.addEventListener("click",await I("outputType"),!1);window.json.addEventListener("click",await I("outputType"),!1);window.smcat.addEventListener("click",await I("outputType"),!1);window.scjson.addEventListener("click",await I("outputType"),!1);window.scxml.addEventListener("click",await I("outputType"),!1);window.svg.addEventListener("click",await I("outputType"),!1);window.inputscript.addEventListener("input",await I());window.direction.addEventListener("change",await I());window.engine.addEventListener("change",await I());window.theme.addEventListener("change",await I());window.input_json.addEventListener("click",await I("inputType"),!1);window.input_smcat.addEventListener("click",await I("inputType"),!1);window.input_scxml.addEventListener("click",await I("inputType"),!1);window.fitToWidth.addEventListener("click",await I(),!1);window.autoRender.addEventListener("click",await I(),!1);window.desugar.addEventListener("click",await I(),!1);window.render.addEventListener("click",async()=>await rs(),!1);window.addEventListener("resize",ns);window.output.addEventListener("contextmenu",async n=>{Fn()&&(n.preventDefault(),await Un(n.clientX,n.clientY))});document.getElementById("save-svg").addEventListener("click",Te);document.getElementById("save-png").addEventListener("click",Te);window.output.addEventListener("click",Te);window.addEventListener("keyup",n=>{n.code==="Escape"&&Te()});window.sample.addEventListener("change",n=>{n.target.value&&(_.sample=n.target.value,fetch(n.target.value).then(l=>{if(l.status===200)return l.text();ts(l)}).then(async l=>{l&&(_.inputscript=l,ss(Be,_),await Ve(_))}).catch(ts))});window.version.innerHTML="state machine cat ${version}".replaceAll("${version}",Oe);ns();await Ve(_);
//# sourceMappingURL=smcat-online-interpreter.js.map
