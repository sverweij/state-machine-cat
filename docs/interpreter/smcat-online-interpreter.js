import{a as ee}from"./chunk-6QSL3ECV.js";import{b as We}from"./chunk-TFOWPL26.js";import{a as Di}from"./chunk-QBCC6J4V.js";import"./chunk-DSGGCMS6.js";import{a as k,b as ff}from"./chunk-FW4363Y4.js";var qt=k(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.regexpCode=U.getEsmExportName=U.getProperty=U.safeStringify=U.stringify=U.strConcat=U.addCodeArg=U.str=U._=U.nil=U._Code=U.Name=U.IDENTIFIER=U._CodeOrName=void 0;var Ot=class{};U._CodeOrName=Ot;U.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Xe=class extends Ot{constructor(t){if(super(),!U.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};U.Name=Xe;var ge=class extends Ot{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,s)=>(s instanceof Xe&&(r[s.str]=(r[s.str]||0)+1),r),{})}};U._Code=ge;U.nil=new ge("");function Vi(e,...t){let r=[e[0]],s=0;for(;s<t.length;)Qr(r,t[s]),r.push(e[++s]);return new ge(r)}U._=Vi;var Zr=new ge("+");function Li(e,...t){let r=[It(e[0])],s=0;for(;s<t.length;)r.push(Zr),Qr(r,t[s]),r.push(Zr,It(e[++s]));return df(r),new ge(r)}U.str=Li;function Qr(e,t){t instanceof ge?e.push(...t._items):t instanceof Xe?e.push(t):e.push(mf(t))}U.addCodeArg=Qr;function df(e){let t=1;for(;t<e.length-1;){if(e[t]===Zr){let r=pf(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function pf(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Xe||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Xe))return`"${e}${t.slice(1)}`}function hf(e,t){return t.emptyStr()?e:e.emptyStr()?t:Li`${e}${t}`}U.strConcat=hf;function mf(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:It(Array.isArray(e)?e.join(","):e)}function gf(e){return new ge(It(e))}U.stringify=gf;function It(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}U.safeStringify=It;function yf(e){return typeof e=="string"&&U.IDENTIFIER.test(e)?new ge(`.${e}`):Vi`[${e}]`}U.getProperty=yf;function $f(e){if(typeof e=="string"&&U.IDENTIFIER.test(e))return new ge(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}U.getEsmExportName=$f;function _f(e){return new ge(e.toString())}U.regexpCode=_f});var rs=k(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.ValueScope=le.ValueScopeName=le.Scope=le.varKinds=le.UsedValueState=void 0;var ue=qt(),es=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},fr;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(fr||(le.UsedValueState=fr={}));le.varKinds={const:new ue.Name("const"),let:new ue.Name("let"),var:new ue.Name("var")};var dr=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof ue.Name?t:this.name(t)}name(t){return new ue.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};le.Scope=dr;var pr=class extends ue.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:s}){this.value=t,this.scopePath=(0,ue._)`.${new ue.Name(r)}[${s}]`}};le.ValueScopeName=pr;var vf=(0,ue._)`\n`,ts=class extends dr{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?vf:ue.nil}}get(){return this._scope}name(t){return new pr(t,this._newName(t))}value(t,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:o}=i,u=(s=r.key)!==null&&s!==void 0?s:r.ref,l=this._values[o];if(l){let m=l.get(u);if(m)return m}else l=this._values[o]=new Map;l.set(u,i);let h=this._scope[o]||(this._scope[o]=[]),g=h.length;return h[g]=r.ref,i.setValue(r,{property:o,itemIndex:g}),i}getValue(t,r){let s=this._values[t];if(s)return s.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,ue._)`${t}${s.scopePath}`})}scopeCode(t=this._values,r,s){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,s)}_reduceValues(t,r,s={},i){let o=ue.nil;for(let u in t){let l=t[u];if(!l)continue;let h=s[u]=s[u]||new Map;l.forEach(g=>{if(h.has(g))return;h.set(g,fr.Started);let m=r(g);if(m){let y=this.opts.es5?le.varKinds.var:le.varKinds.const;o=(0,ue._)`${o}${y} ${g} = ${m};${this.opts._n}`}else if(m=i?.(g))o=(0,ue._)`${o}${m}${this.opts._n}`;else throw new es(g);h.set(g,fr.Completed)})}return o}};le.ValueScope=ts});var D=k(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.or=x.and=x.not=x.CodeGen=x.operators=x.varKinds=x.ValueScopeName=x.ValueScope=x.Scope=x.Name=x.regexpCode=x.stringify=x.getProperty=x.nil=x.strConcat=x.str=x._=void 0;var F=qt(),we=rs(),Ve=qt();Object.defineProperty(x,"_",{enumerable:!0,get:function(){return Ve._}});Object.defineProperty(x,"str",{enumerable:!0,get:function(){return Ve.str}});Object.defineProperty(x,"strConcat",{enumerable:!0,get:function(){return Ve.strConcat}});Object.defineProperty(x,"nil",{enumerable:!0,get:function(){return Ve.nil}});Object.defineProperty(x,"getProperty",{enumerable:!0,get:function(){return Ve.getProperty}});Object.defineProperty(x,"stringify",{enumerable:!0,get:function(){return Ve.stringify}});Object.defineProperty(x,"regexpCode",{enumerable:!0,get:function(){return Ve.regexpCode}});Object.defineProperty(x,"Name",{enumerable:!0,get:function(){return Ve.Name}});var yr=rs();Object.defineProperty(x,"Scope",{enumerable:!0,get:function(){return yr.Scope}});Object.defineProperty(x,"ValueScope",{enumerable:!0,get:function(){return yr.ValueScope}});Object.defineProperty(x,"ValueScopeName",{enumerable:!0,get:function(){return yr.ValueScopeName}});Object.defineProperty(x,"varKinds",{enumerable:!0,get:function(){return yr.varKinds}});x.operators={GT:new F._Code(">"),GTE:new F._Code(">="),LT:new F._Code("<"),LTE:new F._Code("<="),EQ:new F._Code("==="),NEQ:new F._Code("!=="),NOT:new F._Code("!"),OR:new F._Code("||"),AND:new F._Code("&&"),ADD:new F._Code("+")};var Oe=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},ss=class extends Oe{constructor(t,r,s){super(),this.varKind=t,this.name=r,this.rhs=s}render({es5:t,_n:r}){let s=t?we.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=ft(this.rhs,t,r)),this}get names(){return this.rhs instanceof F._CodeOrName?this.rhs.names:{}}},hr=class extends Oe{constructor(t,r,s){super(),this.lhs=t,this.rhs=r,this.sideEffects=s}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof F.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=ft(this.rhs,t,r),this}get names(){let t=this.lhs instanceof F.Name?{}:{...this.lhs.names};return gr(t,this.rhs)}},ns=class extends hr{constructor(t,r,s,i){super(t,s,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},is=class extends Oe{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},os=class extends Oe{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},as=class extends Oe{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},cs=class extends Oe{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=ft(this.code,t,r),this}get names(){return this.code instanceof F._CodeOrName?this.code.names:{}}},At=class extends Oe{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,s)=>r+s.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let s=t[r].optimizeNodes();Array.isArray(s)?t.splice(r,1,...s):s?t[r]=s:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:s}=this,i=s.length;for(;i--;){let o=s[i];o.optimizeNames(t,r)||(wf(t,o.names),s.splice(i,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Qe(t,r.names),{})}},Ie=class extends At{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},us=class extends At{},lt=class extends Ie{};lt.kind="else";var Ye=class e extends Ie{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new lt(s):s}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Fi(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=ft(this.condition,t,r),this}get names(){let t=super.names;return gr(t,this.condition),this.else&&Qe(t,this.else.names),t}};Ye.kind="if";var Ze=class extends Ie{};Ze.kind="for";var ls=class extends Ze{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=ft(this.iteration,t,r),this}get names(){return Qe(super.names,this.iteration.names)}},fs=class extends Ze{constructor(t,r,s,i){super(),this.varKind=t,this.name=r,this.from=s,this.to=i}render(t){let r=t.es5?we.varKinds.var:this.varKind,{name:s,from:i,to:o}=this;return`for(${r} ${s}=${i}; ${s}<${o}; ${s}++)`+super.render(t)}get names(){let t=gr(super.names,this.from);return gr(t,this.to)}},mr=class extends Ze{constructor(t,r,s,i){super(),this.loop=t,this.varKind=r,this.name=s,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=ft(this.iterable,t,r),this}get names(){return Qe(super.names,this.iterable.names)}},Ct=class extends Ie{constructor(t,r,s){super(),this.name=t,this.args=r,this.async=s}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Ct.kind="func";var Rt=class extends At{render(t){return"return "+super.render(t)}};Rt.kind="return";var ds=class extends Ie{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var s,i;return super.optimizeNames(t,r),(s=this.catch)===null||s===void 0||s.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Qe(t,this.catch.names),this.finally&&Qe(t,this.finally.names),t}},Mt=class extends Ie{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};Mt.kind="catch";var xt=class extends Ie{render(t){return"finally"+super.render(t)}};xt.kind="finally";var ps=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new we.Scope({parent:t}),this._nodes=[new us]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let s=this._extScope.value(t,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,s,i){let o=this._scope.toName(r);return s!==void 0&&i&&(this._constants[o.str]=s),this._leafNode(new ss(t,o,s)),o}const(t,r,s){return this._def(we.varKinds.const,t,r,s)}let(t,r,s){return this._def(we.varKinds.let,t,r,s)}var(t,r,s){return this._def(we.varKinds.var,t,r,s)}assign(t,r,s){return this._leafNode(new hr(t,r,s))}add(t,r){return this._leafNode(new ns(t,x.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==F.nil&&this._leafNode(new cs(t)),this}object(...t){let r=["{"];for(let[s,i]of t)r.length>1&&r.push(","),r.push(s),(s!==i||this.opts.es5)&&(r.push(":"),(0,F.addCodeArg)(r,i));return r.push("}"),new F._Code(r)}if(t,r,s){if(this._blockNode(new Ye(t)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Ye(t))}else(){return this._elseNode(new lt)}endIf(){return this._endBlockNode(Ye,lt)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new ls(t),r)}forRange(t,r,s,i,o=this.opts.es5?we.varKinds.var:we.varKinds.let){let u=this._scope.toName(t);return this._for(new fs(o,u,r,s),()=>i(u))}forOf(t,r,s,i=we.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let u=r instanceof F.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,F._)`${u}.length`,l=>{this.var(o,(0,F._)`${u}[${l}]`),s(o)})}return this._for(new mr("of",i,o,r),()=>s(o))}forIn(t,r,s,i=this.opts.es5?we.varKinds.var:we.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,F._)`Object.keys(${r})`,s);let o=this._scope.toName(t);return this._for(new mr("in",i,o,r),()=>s(o))}endFor(){return this._endBlockNode(Ze)}label(t){return this._leafNode(new is(t))}break(t){return this._leafNode(new os(t))}return(t){let r=new Rt;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Rt)}try(t,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new ds;if(this._blockNode(i),this.code(t),r){let o=this.name("e");this._currNode=i.catch=new Mt(o),r(o)}return s&&(this._currNode=i.finally=new xt,this.code(s)),this._endBlockNode(Mt,xt)}throw(t){return this._leafNode(new as(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||t!==void 0&&s!==t)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=F.nil,s,i){return this._blockNode(new Ct(t,r,s)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(Ct)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let s=this._currNode;if(s instanceof t||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof Ye))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};x.CodeGen=ps;function Qe(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function gr(e,t){return t instanceof F._CodeOrName?Qe(e,t.names):e}function ft(e,t,r){if(e instanceof F.Name)return s(e);if(!i(e))return e;return new F._Code(e._items.reduce((o,u)=>(u instanceof F.Name&&(u=s(u)),u instanceof F._Code?o.push(...u._items):o.push(u),o),[]));function s(o){let u=r[o.str];return u===void 0||t[o.str]!==1?o:(delete t[o.str],u)}function i(o){return o instanceof F._Code&&o._items.some(u=>u instanceof F.Name&&t[u.str]===1&&r[u.str]!==void 0)}}function wf(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Fi(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,F._)`!${hs(e)}`}x.not=Fi;var bf=zi(x.operators.AND);function Ef(...e){return e.reduce(bf)}x.and=Ef;var Sf=zi(x.operators.OR);function Pf(...e){return e.reduce(Sf)}x.or=Pf;function zi(e){return(t,r)=>t===F.nil?r:r===F.nil?t:(0,F._)`${hs(t)} ${e} ${hs(r)}`}function hs(e){return e instanceof F.Name?e:(0,F._)`(${e})`}});var K=k(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.checkStrictMode=V.getErrorPath=V.Type=V.useFunc=V.setEvaluated=V.evaluatedPropsToName=V.mergeEvaluated=V.eachItem=V.unescapeJsonPointer=V.escapeJsonPointer=V.escapeFragment=V.unescapeFragment=V.schemaRefOrVal=V.schemaHasRulesButRef=V.schemaHasRules=V.checkUnknownRules=V.alwaysValidSchema=V.toHash=void 0;var B=D(),kf=qt();function Nf(e){let t={};for(let r of e)t[r]=!0;return t}V.toHash=Nf;function Tf(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Gi(e,t),!Hi(t,e.self.RULES.all))}V.alwaysValidSchema=Tf;function Gi(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=s.RULES.keywords;for(let o in t)i[o]||Wi(e,`unknown keyword: "${o}"`)}V.checkUnknownRules=Gi;function Hi(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}V.schemaHasRules=Hi;function jf(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}V.schemaHasRulesButRef=jf;function Of({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,B._)`${r}`}return(0,B._)`${e}${t}${(0,B.getProperty)(s)}`}V.schemaRefOrVal=Of;function If(e){return Ji(decodeURIComponent(e))}V.unescapeFragment=If;function qf(e){return encodeURIComponent(gs(e))}V.escapeFragment=qf;function gs(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}V.escapeJsonPointer=gs;function Ji(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}V.unescapeJsonPointer=Ji;function Af(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}V.eachItem=Af;function Ui({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,u,l)=>{let h=u===void 0?o:u instanceof B.Name?(o instanceof B.Name?e(i,o,u):t(i,o,u),u):o instanceof B.Name?(t(i,u,o),o):r(o,u);return l===B.Name&&!(h instanceof B.Name)?s(i,h):h}}V.mergeEvaluated={props:Ui({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,B._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,B._)`${r} || {}`).code((0,B._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,B._)`${r} || {}`),ys(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Bi}),items:Ui({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,B._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,B._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Bi(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,B._)`{}`);return t!==void 0&&ys(e,r,t),r}V.evaluatedPropsToName=Bi;function ys(e,t,r){Object.keys(r).forEach(s=>e.assign((0,B._)`${t}${(0,B.getProperty)(s)}`,!0))}V.setEvaluated=ys;var Ki={};function Cf(e,t){return e.scopeValue("func",{ref:t,code:Ki[t.code]||(Ki[t.code]=new kf._Code(t.code))})}V.useFunc=Cf;var ms;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(ms||(V.Type=ms={}));function Rf(e,t,r){if(e instanceof B.Name){let s=t===ms.Num;return r?s?(0,B._)`"[" + ${e} + "]"`:(0,B._)`"['" + ${e} + "']"`:s?(0,B._)`"/" + ${e}`:(0,B._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,B.getProperty)(e).toString():"/"+gs(e)}V.getErrorPath=Rf;function Wi(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}V.checkStrictMode=Wi});var qe=k($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var ne=D(),Mf={data:new ne.Name("data"),valCxt:new ne.Name("valCxt"),instancePath:new ne.Name("instancePath"),parentData:new ne.Name("parentData"),parentDataProperty:new ne.Name("parentDataProperty"),rootData:new ne.Name("rootData"),dynamicAnchors:new ne.Name("dynamicAnchors"),vErrors:new ne.Name("vErrors"),errors:new ne.Name("errors"),this:new ne.Name("this"),self:new ne.Name("self"),scope:new ne.Name("scope"),json:new ne.Name("json"),jsonPos:new ne.Name("jsonPos"),jsonLen:new ne.Name("jsonLen"),jsonPart:new ne.Name("jsonPart")};$s.default=Mf});var Dt=k(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.extendErrors=ie.resetErrorsCount=ie.reportExtraError=ie.reportError=ie.keyword$DataError=ie.keywordError=void 0;var z=D(),$r=K(),ae=qe();ie.keywordError={message:({keyword:e})=>(0,z.str)`must pass "${e}" keyword validation`};ie.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,z.str)`"${e}" keyword must be ${t} ($data)`:(0,z.str)`"${e}" keyword is invalid ($data)`};function xf(e,t=ie.keywordError,r,s){let{it:i}=e,{gen:o,compositeRule:u,allErrors:l}=i,h=Zi(e,t,r);s??(u||l)?Xi(o,h):Yi(i,(0,z._)`[${h}]`)}ie.reportError=xf;function Df(e,t=ie.keywordError,r){let{it:s}=e,{gen:i,compositeRule:o,allErrors:u}=s,l=Zi(e,t,r);Xi(i,l),o||u||Yi(s,ae.default.vErrors)}ie.reportExtraError=Df;function Vf(e,t){e.assign(ae.default.errors,t),e.if((0,z._)`${ae.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,z._)`${ae.default.vErrors}.length`,t),()=>e.assign(ae.default.vErrors,null)))}ie.resetErrorsCount=Vf;function Lf({gen:e,keyword:t,schemaValue:r,data:s,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let u=e.name("err");e.forRange("i",i,ae.default.errors,l=>{e.const(u,(0,z._)`${ae.default.vErrors}[${l}]`),e.if((0,z._)`${u}.instancePath === undefined`,()=>e.assign((0,z._)`${u}.instancePath`,(0,z.strConcat)(ae.default.instancePath,o.errorPath))),e.assign((0,z._)`${u}.schemaPath`,(0,z.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,z._)`${u}.schema`,r),e.assign((0,z._)`${u}.data`,s))})}ie.extendErrors=Lf;function Xi(e,t){let r=e.const("err",t);e.if((0,z._)`${ae.default.vErrors} === null`,()=>e.assign(ae.default.vErrors,(0,z._)`[${r}]`),(0,z._)`${ae.default.vErrors}.push(${r})`),e.code((0,z._)`${ae.default.errors}++`)}function Yi(e,t){let{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw((0,z._)`new ${e.ValidationError}(${t})`):(r.assign((0,z._)`${s}.errors`,t),r.return(!1))}var et={keyword:new z.Name("keyword"),schemaPath:new z.Name("schemaPath"),params:new z.Name("params"),propertyName:new z.Name("propertyName"),message:new z.Name("message"),schema:new z.Name("schema"),parentSchema:new z.Name("parentSchema")};function Zi(e,t,r){let{createErrors:s}=e.it;return s===!1?(0,z._)`{}`:Ff(e,t,r)}function Ff(e,t,r={}){let{gen:s,it:i}=e,o=[zf(i,r),Uf(e,r)];return Kf(e,t,o),s.object(...o)}function zf({errorPath:e},{instancePath:t}){let r=t?(0,z.str)`${e}${(0,$r.getErrorPath)(t,$r.Type.Str)}`:e;return[ae.default.instancePath,(0,z.strConcat)(ae.default.instancePath,r)]}function Uf({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:s}){let i=s?t:(0,z.str)`${t}/${e}`;return r&&(i=(0,z.str)`${i}${(0,$r.getErrorPath)(r,$r.Type.Str)}`),[et.schemaPath,i]}function Kf(e,{params:t,message:r},s){let{keyword:i,data:o,schemaValue:u,it:l}=e,{opts:h,propertyName:g,topSchemaRef:m,schemaPath:y}=l;s.push([et.keyword,i],[et.params,typeof t=="function"?t(e):t||(0,z._)`{}`]),h.messages&&s.push([et.message,typeof r=="function"?r(e):r]),h.verbose&&s.push([et.schema,u],[et.parentSchema,(0,z._)`${m}${y}`],[ae.default.data,o]),g&&s.push([et.propertyName,g])}});var eo=k(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.boolOrEmptySchema=dt.topBoolOrEmptySchema=void 0;var Gf=Dt(),Hf=D(),Jf=qe(),Bf={message:"boolean schema is false"};function Wf(e){let{gen:t,schema:r,validateName:s}=e;r===!1?Qi(e,!1):typeof r=="object"&&r.$async===!0?t.return(Jf.default.data):(t.assign((0,Hf._)`${s}.errors`,null),t.return(!0))}dt.topBoolOrEmptySchema=Wf;function Xf(e,t){let{gen:r,schema:s}=e;s===!1?(r.var(t,!1),Qi(e)):r.var(t,!0)}dt.boolOrEmptySchema=Xf;function Qi(e,t){let{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Gf.reportError)(i,Bf,void 0,t)}});var _s=k(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.getRules=pt.isJSONType=void 0;var Yf=["string","number","integer","boolean","null","object","array"],Zf=new Set(Yf);function Qf(e){return typeof e=="string"&&Zf.has(e)}pt.isJSONType=Qf;function ed(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}pt.getRules=ed});var vs=k(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.shouldUseRule=Le.shouldUseGroup=Le.schemaHasRulesForType=void 0;function td({schema:e,self:t},r){let s=t.RULES.types[r];return s&&s!==!0&&to(e,s)}Le.schemaHasRulesForType=td;function to(e,t){return t.rules.some(r=>ro(e,r))}Le.shouldUseGroup=to;function ro(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}Le.shouldUseRule=ro});var Vt=k(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.reportTypeError=oe.checkDataTypes=oe.checkDataType=oe.coerceAndCheckDataType=oe.getJSONTypes=oe.getSchemaTypes=oe.DataType=void 0;var rd=_s(),sd=vs(),nd=Dt(),R=D(),so=K(),ht;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ht||(oe.DataType=ht={}));function id(e){let t=no(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}oe.getSchemaTypes=id;function no(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(rd.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}oe.getJSONTypes=no;function od(e,t){let{gen:r,data:s,opts:i}=e,o=ad(t,i.coerceTypes),u=t.length>0&&!(o.length===0&&t.length===1&&(0,sd.schemaHasRulesForType)(e,t[0]));if(u){let l=bs(t,s,i.strictNumbers,ht.Wrong);r.if(l,()=>{o.length?cd(e,t,o):Es(e)})}return u}oe.coerceAndCheckDataType=od;var io=new Set(["string","number","integer","boolean","null"]);function ad(e,t){return t?e.filter(r=>io.has(r)||t==="array"&&r==="array"):[]}function cd(e,t,r){let{gen:s,data:i,opts:o}=e,u=s.let("dataType",(0,R._)`typeof ${i}`),l=s.let("coerced",(0,R._)`undefined`);o.coerceTypes==="array"&&s.if((0,R._)`${u} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>s.assign(i,(0,R._)`${i}[0]`).assign(u,(0,R._)`typeof ${i}`).if(bs(t,i,o.strictNumbers),()=>s.assign(l,i))),s.if((0,R._)`${l} !== undefined`);for(let g of r)(io.has(g)||g==="array"&&o.coerceTypes==="array")&&h(g);s.else(),Es(e),s.endIf(),s.if((0,R._)`${l} !== undefined`,()=>{s.assign(i,l),ud(e,l)});function h(g){switch(g){case"string":s.elseIf((0,R._)`${u} == "number" || ${u} == "boolean"`).assign(l,(0,R._)`"" + ${i}`).elseIf((0,R._)`${i} === null`).assign(l,(0,R._)`""`);return;case"number":s.elseIf((0,R._)`${u} == "boolean" || ${i} === null
              || (${u} == "string" && ${i} && ${i} == +${i})`).assign(l,(0,R._)`+${i}`);return;case"integer":s.elseIf((0,R._)`${u} === "boolean" || ${i} === null
              || (${u} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,(0,R._)`+${i}`);return;case"boolean":s.elseIf((0,R._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf((0,R._)`${i} === "true" || ${i} === 1`).assign(l,!0);return;case"null":s.elseIf((0,R._)`${i} === "" || ${i} === 0 || ${i} === false`),s.assign(l,null);return;case"array":s.elseIf((0,R._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${i} === null`).assign(l,(0,R._)`[${i}]`)}}}function ud({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,R._)`${t} !== undefined`,()=>e.assign((0,R._)`${t}[${r}]`,s))}function ws(e,t,r,s=ht.Correct){let i=s===ht.Correct?R.operators.EQ:R.operators.NEQ,o;switch(e){case"null":return(0,R._)`${t} ${i} null`;case"array":o=(0,R._)`Array.isArray(${t})`;break;case"object":o=(0,R._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=u((0,R._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=u();break;default:return(0,R._)`typeof ${t} ${i} ${e}`}return s===ht.Correct?o:(0,R.not)(o);function u(l=R.nil){return(0,R.and)((0,R._)`typeof ${t} == "number"`,l,r?(0,R._)`isFinite(${t})`:R.nil)}}oe.checkDataType=ws;function bs(e,t,r,s){if(e.length===1)return ws(e[0],t,r,s);let i,o=(0,so.toHash)(e);if(o.array&&o.object){let u=(0,R._)`typeof ${t} != "object"`;i=o.null?u:(0,R._)`!${t} || ${u}`,delete o.null,delete o.array,delete o.object}else i=R.nil;o.number&&delete o.integer;for(let u in o)i=(0,R.and)(i,ws(u,t,r,s));return i}oe.checkDataTypes=bs;var ld={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,R._)`{type: ${e}}`:(0,R._)`{type: ${t}}`};function Es(e){let t=fd(e);(0,nd.reportError)(t,ld)}oe.reportTypeError=Es;function fd(e){let{gen:t,data:r,schema:s}=e,i=(0,so.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:i,schemaValue:i,parentSchema:s,params:{},it:e}}});var ao=k(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.assignDefaults=void 0;var mt=D(),dd=K();function pd(e,t){let{properties:r,items:s}=e.schema;if(t==="object"&&r)for(let i in r)oo(e,i,r[i].default);else t==="array"&&Array.isArray(s)&&s.forEach((i,o)=>oo(e,o,i.default))}_r.assignDefaults=pd;function oo(e,t,r){let{gen:s,compositeRule:i,data:o,opts:u}=e;if(r===void 0)return;let l=(0,mt._)`${o}${(0,mt.getProperty)(t)}`;if(i){(0,dd.checkStrictMode)(e,`default is ignored for: ${l}`);return}let h=(0,mt._)`${l} === undefined`;u.useDefaults==="empty"&&(h=(0,mt._)`${h} || ${l} === null || ${l} === ""`),s.if(h,(0,mt._)`${l} = ${(0,mt.stringify)(r)}`)}});var ye=k(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.validateUnion=J.validateArray=J.usePattern=J.callValidateCode=J.schemaProperties=J.allSchemaProperties=J.noPropertyInData=J.propertyInData=J.isOwnProperty=J.hasPropFunc=J.reportMissingProp=J.checkMissingProp=J.checkReportMissingProp=void 0;var W=D(),Ss=K(),Fe=qe(),hd=K();function md(e,t){let{gen:r,data:s,it:i}=e;r.if(ks(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,W._)`${t}`},!0),e.error()})}J.checkReportMissingProp=md;function gd({gen:e,data:t,it:{opts:r}},s,i){return(0,W.or)(...s.map(o=>(0,W.and)(ks(e,t,o,r.ownProperties),(0,W._)`${i} = ${o}`)))}J.checkMissingProp=gd;function yd(e,t){e.setParams({missingProperty:t},!0),e.error()}J.reportMissingProp=yd;function co(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,W._)`Object.prototype.hasOwnProperty`})}J.hasPropFunc=co;function Ps(e,t,r){return(0,W._)`${co(e)}.call(${t}, ${r})`}J.isOwnProperty=Ps;function $d(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} !== undefined`;return s?(0,W._)`${i} && ${Ps(e,t,r)}`:i}J.propertyInData=$d;function ks(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} === undefined`;return s?(0,W.or)(i,(0,W.not)(Ps(e,t,r))):i}J.noPropertyInData=ks;function uo(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}J.allSchemaProperties=uo;function _d(e,t){return uo(t).filter(r=>!(0,Ss.alwaysValidSchema)(e,t[r]))}J.schemaProperties=_d;function vd({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:i,errorPath:o},it:u},l,h,g){let m=g?(0,W._)`${e}, ${t}, ${s}${i}`:t,y=[[Fe.default.instancePath,(0,W.strConcat)(Fe.default.instancePath,o)],[Fe.default.parentData,u.parentData],[Fe.default.parentDataProperty,u.parentDataProperty],[Fe.default.rootData,Fe.default.rootData]];u.opts.dynamicRef&&y.push([Fe.default.dynamicAnchors,Fe.default.dynamicAnchors]);let b=(0,W._)`${m}, ${r.object(...y)}`;return h!==W.nil?(0,W._)`${l}.call(${h}, ${b})`:(0,W._)`${l}(${b})`}J.callValidateCode=vd;var wd=(0,W._)`new RegExp`;function bd({gen:e,it:{opts:t}},r){let s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,W._)`${i.code==="new RegExp"?wd:(0,hd.useFunc)(e,i)}(${r}, ${s})`})}J.usePattern=bd;function Ed(e){let{gen:t,data:r,keyword:s,it:i}=e,o=t.name("valid");if(i.allErrors){let l=t.let("valid",!0);return u(()=>t.assign(l,!1)),l}return t.var(o,!0),u(()=>t.break()),o;function u(l){let h=t.const("len",(0,W._)`${r}.length`);t.forRange("i",0,h,g=>{e.subschema({keyword:s,dataProp:g,dataPropType:Ss.Type.Num},o),t.if((0,W.not)(o),l)})}}J.validateArray=Ed;function Sd(e){let{gen:t,schema:r,keyword:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(h=>(0,Ss.alwaysValidSchema)(i,h))&&!i.opts.unevaluated)return;let u=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((h,g)=>{let m=e.subschema({keyword:s,schemaProp:g,compositeRule:!0},l);t.assign(u,(0,W._)`${u} || ${l}`),e.mergeValidEvaluated(m,l)||t.if((0,W.not)(u))})),e.result(u,()=>e.reset(),()=>e.error(!0))}J.validateUnion=Sd});var po=k(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateKeywordUsage=Pe.validSchemaType=Pe.funcKeywordCode=Pe.macroKeywordCode=void 0;var ce=D(),tt=qe(),Pd=ye(),kd=Dt();function Nd(e,t){let{gen:r,keyword:s,schema:i,parentSchema:o,it:u}=e,l=t.macro.call(u.self,i,o,u),h=fo(r,s,l);u.opts.validateSchema!==!1&&u.self.validateSchema(l,!0);let g=r.name("valid");e.subschema({schema:l,schemaPath:ce.nil,errSchemaPath:`${u.errSchemaPath}/${s}`,topSchemaRef:h,compositeRule:!0},g),e.pass(g,()=>e.error(!0))}Pe.macroKeywordCode=Nd;function Td(e,t){var r;let{gen:s,keyword:i,schema:o,parentSchema:u,$data:l,it:h}=e;Od(h,t);let g=!l&&t.compile?t.compile.call(h.self,o,u,h):t.validate,m=fo(s,i,g),y=s.let("valid");e.block$data(y,b),e.ok((r=t.valid)!==null&&r!==void 0?r:y);function b(){if(t.errors===!1)w(),t.modifying&&lo(e),E(()=>e.error());else{let P=t.async?$():v();t.modifying&&lo(e),E(()=>jd(e,P))}}function $(){let P=s.let("ruleErrs",null);return s.try(()=>w((0,ce._)`await `),L=>s.assign(y,!1).if((0,ce._)`${L} instanceof ${h.ValidationError}`,()=>s.assign(P,(0,ce._)`${L}.errors`),()=>s.throw(L))),P}function v(){let P=(0,ce._)`${m}.errors`;return s.assign(P,null),w(ce.nil),P}function w(P=t.async?(0,ce._)`await `:ce.nil){let L=h.opts.passContext?tt.default.this:tt.default.self,M=!("compile"in t&&!l||t.schema===!1);s.assign(y,(0,ce._)`${P}${(0,Pd.callValidateCode)(e,m,L,M)}`,t.modifying)}function E(P){var L;s.if((0,ce.not)((L=t.valid)!==null&&L!==void 0?L:y),P)}}Pe.funcKeywordCode=Td;function lo(e){let{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,(0,ce._)`${s.parentData}[${s.parentDataProperty}]`))}function jd(e,t){let{gen:r}=e;r.if((0,ce._)`Array.isArray(${t})`,()=>{r.assign(tt.default.vErrors,(0,ce._)`${tt.default.vErrors} === null ? ${t} : ${tt.default.vErrors}.concat(${t})`).assign(tt.default.errors,(0,ce._)`${tt.default.vErrors}.length`),(0,kd.extendErrors)(e)},()=>e.error())}function Od({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function fo(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ce.stringify)(r)})}function Id(e,t,r=!1){return!t.length||t.some(s=>s==="array"?Array.isArray(e):s==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==s||r&&typeof e>"u")}Pe.validSchemaType=Id;function qd({schema:e,opts:t,self:r,errSchemaPath:s},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let u=i.dependencies;if(u?.some(l=>!Object.prototype.hasOwnProperty.call(e,l)))throw new Error(`parent schema must have dependencies of ${o}: ${u.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){let h=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(h);else throw new Error(h)}}Pe.validateKeywordUsage=qd});var mo=k(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.extendSubschemaMode=ze.extendSubschemaData=ze.getSubschema=void 0;var ke=D(),ho=K();function Ad(e,{keyword:t,schemaProp:r,schema:s,schemaPath:i,errSchemaPath:o,topSchemaRef:u}){if(t!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let l=e.schema[t];return r===void 0?{schema:l,schemaPath:(0,ke._)`${e.schemaPath}${(0,ke.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:l[r],schemaPath:(0,ke._)`${e.schemaPath}${(0,ke.getProperty)(t)}${(0,ke.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ho.escapeFragment)(r)}`}}if(s!==void 0){if(i===void 0||o===void 0||u===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:i,topSchemaRef:u,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}ze.getSubschema=Ad;function Cd(e,t,{dataProp:r,dataPropType:s,data:i,dataTypes:o,propertyName:u}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:l}=t;if(r!==void 0){let{errorPath:g,dataPathArr:m,opts:y}=t,b=l.let("data",(0,ke._)`${t.data}${(0,ke.getProperty)(r)}`,!0);h(b),e.errorPath=(0,ke.str)`${g}${(0,ho.getErrorPath)(r,s,y.jsPropertySyntax)}`,e.parentDataProperty=(0,ke._)`${r}`,e.dataPathArr=[...m,e.parentDataProperty]}if(i!==void 0){let g=i instanceof ke.Name?i:l.let("data",i,!0);h(g),u!==void 0&&(e.propertyName=u)}o&&(e.dataTypes=o);function h(g){e.data=g,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,g]}}ze.extendSubschemaData=Cd;function Rd(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:i,allErrors:o}){s!==void 0&&(e.compositeRule=s),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}ze.extendSubschemaMode=Rd});var Ns=k((Sy,go)=>{"use strict";go.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,i,o;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=s;i--!==0;){var u=o[i];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r}});var $o=k((Py,yo)=>{"use strict";var Ue=yo.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var s=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};vr(t,s,i,e,"",e)};Ue.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ue.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ue.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ue.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function vr(e,t,r,s,i,o,u,l,h,g){if(s&&typeof s=="object"&&!Array.isArray(s)){t(s,i,o,u,l,h,g);for(var m in s){var y=s[m];if(Array.isArray(y)){if(m in Ue.arrayKeywords)for(var b=0;b<y.length;b++)vr(e,t,r,y[b],i+"/"+m+"/"+b,o,i,m,s,b)}else if(m in Ue.propsKeywords){if(y&&typeof y=="object")for(var $ in y)vr(e,t,r,y[$],i+"/"+m+"/"+Md($),o,i,m,s,$)}else(m in Ue.keywords||e.allKeys&&!(m in Ue.skipKeywords))&&vr(e,t,r,y,i+"/"+m,o,i,m,s)}r(s,i,o,u,l,h,g)}}function Md(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Lt=k(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.getSchemaRefs=fe.resolveUrl=fe.normalizeId=fe._getFullPath=fe.getFullPath=fe.inlineRef=void 0;var xd=K(),Dd=Ns(),Vd=$o(),Ld=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Fd(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Ts(e):t?_o(e)<=t:!1}fe.inlineRef=Fd;var zd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ts(e){for(let t in e){if(zd.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(Ts)||typeof r=="object"&&Ts(r))return!0}return!1}function _o(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Ld.has(r)&&(typeof e[r]=="object"&&(0,xd.eachItem)(e[r],s=>t+=_o(s)),t===1/0))return 1/0}return t}function vo(e,t="",r){r!==!1&&(t=gt(t));let s=e.parse(t);return wo(e,s)}fe.getFullPath=vo;function wo(e,t){return e.serialize(t).split("#")[0]+"#"}fe._getFullPath=wo;var Ud=/#\/?$/;function gt(e){return e?e.replace(Ud,""):""}fe.normalizeId=gt;function Kd(e,t,r){return r=gt(r),e.resolve(t,r)}fe.resolveUrl=Kd;var Gd=/^[a-z_][-a-z0-9._]*$/i;function Hd(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,i=gt(e[r]||t),o={"":i},u=vo(s,i,!1),l={},h=new Set;return Vd(e,{allKeys:!0},(y,b,$,v)=>{if(v===void 0)return;let w=u+b,E=o[v];typeof y[r]=="string"&&(E=P.call(this,y[r])),L.call(this,y.$anchor),L.call(this,y.$dynamicAnchor),o[b]=E;function P(M){let H=this.opts.uriResolver.resolve;if(M=gt(E?H(E,M):M),h.has(M))throw m(M);h.add(M);let q=this.refs[M];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?g(y,q.schema,M):M!==gt(w)&&(M[0]==="#"?(g(y,l[M],M),l[M]=y):this.refs[M]=w),M}function L(M){if(typeof M=="string"){if(!Gd.test(M))throw new Error(`invalid anchor "${M}"`);P.call(this,`#${M}`)}}}),l;function g(y,b,$){if(b!==void 0&&!Dd(y,b))throw m($)}function m(y){return new Error(`reference "${y}" resolves to more than one schema`)}}fe.getSchemaRefs=Hd});var Ut=k(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.getData=Ke.KeywordCxt=Ke.validateFunctionCode=void 0;var ko=eo(),bo=Vt(),Os=vs(),wr=Vt(),Jd=ao(),zt=po(),js=mo(),N=D(),A=qe(),Bd=Lt(),Ae=K(),Ft=Dt();function Wd(e){if(jo(e)&&(Oo(e),To(e))){Zd(e);return}No(e,()=>(0,ko.topBoolOrEmptySchema)(e))}Ke.validateFunctionCode=Wd;function No({gen:e,validateName:t,schema:r,schemaEnv:s,opts:i},o){i.code.es5?e.func(t,(0,N._)`${A.default.data}, ${A.default.valCxt}`,s.$async,()=>{e.code((0,N._)`"use strict"; ${Eo(r,i)}`),Yd(e,i),e.code(o)}):e.func(t,(0,N._)`${A.default.data}, ${Xd(i)}`,s.$async,()=>e.code(Eo(r,i)).code(o))}function Xd(e){return(0,N._)`{${A.default.instancePath}="", ${A.default.parentData}, ${A.default.parentDataProperty}, ${A.default.rootData}=${A.default.data}${e.dynamicRef?(0,N._)`, ${A.default.dynamicAnchors}={}`:N.nil}}={}`}function Yd(e,t){e.if(A.default.valCxt,()=>{e.var(A.default.instancePath,(0,N._)`${A.default.valCxt}.${A.default.instancePath}`),e.var(A.default.parentData,(0,N._)`${A.default.valCxt}.${A.default.parentData}`),e.var(A.default.parentDataProperty,(0,N._)`${A.default.valCxt}.${A.default.parentDataProperty}`),e.var(A.default.rootData,(0,N._)`${A.default.valCxt}.${A.default.rootData}`),t.dynamicRef&&e.var(A.default.dynamicAnchors,(0,N._)`${A.default.valCxt}.${A.default.dynamicAnchors}`)},()=>{e.var(A.default.instancePath,(0,N._)`""`),e.var(A.default.parentData,(0,N._)`undefined`),e.var(A.default.parentDataProperty,(0,N._)`undefined`),e.var(A.default.rootData,A.default.data),t.dynamicRef&&e.var(A.default.dynamicAnchors,(0,N._)`{}`)})}function Zd(e){let{schema:t,opts:r,gen:s}=e;No(e,()=>{r.$comment&&t.$comment&&qo(e),sp(e),s.let(A.default.vErrors,null),s.let(A.default.errors,0),r.unevaluated&&Qd(e),Io(e),op(e)})}function Qd(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,N._)`${r}.evaluated`),t.if((0,N._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,N._)`${e.evaluated}.props`,(0,N._)`undefined`)),t.if((0,N._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,N._)`${e.evaluated}.items`,(0,N._)`undefined`))}function Eo(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,N._)`/*# sourceURL=${r} */`:N.nil}function ep(e,t){if(jo(e)&&(Oo(e),To(e))){tp(e,t);return}(0,ko.boolOrEmptySchema)(e,t)}function To({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function jo(e){return typeof e.schema!="boolean"}function tp(e,t){let{schema:r,gen:s,opts:i}=e;i.$comment&&r.$comment&&qo(e),np(e),ip(e);let o=s.const("_errs",A.default.errors);Io(e,o),s.var(t,(0,N._)`${o} === ${A.default.errors}`)}function Oo(e){(0,Ae.checkUnknownRules)(e),rp(e)}function Io(e,t){if(e.opts.jtd)return So(e,[],!1,t);let r=(0,bo.getSchemaTypes)(e.schema),s=(0,bo.coerceAndCheckDataType)(e,r);So(e,r,!s,t)}function rp(e){let{schema:t,errSchemaPath:r,opts:s,self:i}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,Ae.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function sp(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ae.checkStrictMode)(e,"default is ignored in the schema root")}function np(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Bd.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function ip(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function qo({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:i}){let o=r.$comment;if(i.$comment===!0)e.code((0,N._)`${A.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let u=(0,N.str)`${s}/$comment`,l=e.scopeValue("root",{ref:t.root});e.code((0,N._)`${A.default.self}.opts.$comment(${o}, ${u}, ${l}.schema)`)}}function op(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:i,opts:o}=e;r.$async?t.if((0,N._)`${A.default.errors} === 0`,()=>t.return(A.default.data),()=>t.throw((0,N._)`new ${i}(${A.default.vErrors})`)):(t.assign((0,N._)`${s}.errors`,A.default.vErrors),o.unevaluated&&ap(e),t.return((0,N._)`${A.default.errors} === 0`))}function ap({gen:e,evaluated:t,props:r,items:s}){r instanceof N.Name&&e.assign((0,N._)`${t}.props`,r),s instanceof N.Name&&e.assign((0,N._)`${t}.items`,s)}function So(e,t,r,s){let{gen:i,schema:o,data:u,allErrors:l,opts:h,self:g}=e,{RULES:m}=g;if(o.$ref&&(h.ignoreKeywordsWithRef||!(0,Ae.schemaHasRulesButRef)(o,m))){i.block(()=>Co(e,"$ref",m.all.$ref.definition));return}h.jtd||cp(e,t),i.block(()=>{for(let b of m.rules)y(b);y(m.post)});function y(b){(0,Os.shouldUseGroup)(o,b)&&(b.type?(i.if((0,wr.checkDataType)(b.type,u,h.strictNumbers)),Po(e,b),t.length===1&&t[0]===b.type&&r&&(i.else(),(0,wr.reportTypeError)(e)),i.endIf()):Po(e,b),l||i.if((0,N._)`${A.default.errors} === ${s||0}`))}}function Po(e,t){let{gen:r,schema:s,opts:{useDefaults:i}}=e;i&&(0,Jd.assignDefaults)(e,t.type),r.block(()=>{for(let o of t.rules)(0,Os.shouldUseRule)(s,o)&&Co(e,o.keyword,o.definition,t.type)})}function cp(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(up(e,t),e.opts.allowUnionTypes||lp(e,t),fp(e,e.dataTypes))}function up(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Ao(e.dataTypes,r)||Is(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),pp(e,t)}}function lp(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Is(e,"use allowUnionTypes to allow union type keyword")}function fp(e,t){let r=e.self.RULES.all;for(let s in r){let i=r[s];if(typeof i=="object"&&(0,Os.shouldUseRule)(e.schema,i)){let{type:o}=i.definition;o.length&&!o.some(u=>dp(t,u))&&Is(e,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function dp(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Ao(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function pp(e,t){let r=[];for(let s of e.dataTypes)Ao(t,s)?r.push(s):t.includes("integer")&&s==="number"&&r.push("integer");e.dataTypes=r}function Is(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ae.checkStrictMode)(e,t,e.opts.strictTypes)}var br=class{constructor(t,r,s){if((0,zt.validateKeywordUsage)(t,r,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ae.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Ro(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,zt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",A.default.errors))}result(t,r,s){this.failResult((0,N.not)(t),r,s)}failResult(t,r,s){this.gen.if(t),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,N.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,N._)`${r} !== undefined && (${(0,N.or)(this.invalid$data(),t)})`)}error(t,r,s){if(r){this.setParams(r),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,r){(t?Ft.reportExtraError:Ft.reportError)(this,this.def.error,r)}$dataError(){(0,Ft.reportError)(this,this.def.$dataError||Ft.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Ft.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,s=N.nil){this.gen.block(()=>{this.check$data(t,s),r()})}check$data(t=N.nil,r=N.nil){if(!this.$data)return;let{gen:s,schemaCode:i,schemaType:o,def:u}=this;s.if((0,N.or)((0,N._)`${i} === undefined`,r)),t!==N.nil&&s.assign(t,!0),(o.length||u.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==N.nil&&s.assign(t,!1)),s.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:s,def:i,it:o}=this;return(0,N.or)(u(),l());function u(){if(s.length){if(!(r instanceof N.Name))throw new Error("ajv implementation error");let h=Array.isArray(s)?s:[s];return(0,N._)`${(0,wr.checkDataTypes)(h,r,o.opts.strictNumbers,wr.DataType.Wrong)}`}return N.nil}function l(){if(i.validateSchema){let h=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,N._)`!${h}(${r})`}return N.nil}}subschema(t,r){let s=(0,js.getSubschema)(this.it,t);(0,js.extendSubschemaData)(s,this.it,t),(0,js.extendSubschemaMode)(s,t);let i={...this.it,...s,items:void 0,props:void 0};return ep(i,r),i}mergeEvaluated(t,r){let{it:s,gen:i}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=Ae.mergeEvaluated.props(i,t.props,s.props,r)),s.items!==!0&&t.items!==void 0&&(s.items=Ae.mergeEvaluated.items(i,t.items,s.items,r)))}mergeValidEvaluated(t,r){let{it:s,gen:i}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,N.Name)),!0}};Ke.KeywordCxt=br;function Co(e,t,r,s){let i=new br(e,r,t);"code"in r?r.code(i,s):i.$data&&r.validate?(0,zt.funcKeywordCode)(i,r):"macro"in r?(0,zt.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,zt.funcKeywordCode)(i,r)}var hp=/^\/(?:[^~]|~0|~1)*$/,mp=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ro(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let i,o;if(e==="")return A.default.rootData;if(e[0]==="/"){if(!hp.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=A.default.rootData}else{let g=mp.exec(e);if(!g)throw new Error(`Invalid JSON-pointer: ${e}`);let m=+g[1];if(i=g[2],i==="#"){if(m>=t)throw new Error(h("property/index",m));return s[t-m]}if(m>t)throw new Error(h("data",m));if(o=r[t-m],!i)return o}let u=o,l=i.split("/");for(let g of l)g&&(o=(0,N._)`${o}${(0,N.getProperty)((0,Ae.unescapeJsonPointer)(g))}`,u=(0,N._)`${u} && ${o}`);return u;function h(g,m){return`Cannot access ${g} ${m} levels up, current level is ${t}`}}Ke.getData=Ro});var Er=k(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});var qs=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};As.default=qs});var Kt=k(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var Cs=Lt(),Rs=class extends Error{constructor(t,r,s,i){super(i||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Cs.resolveUrl)(t,r,s),this.missingSchema=(0,Cs.normalizeId)((0,Cs.getFullPath)(t,this.missingRef))}};Ms.default=Rs});var Pr=k($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.resolveSchema=$e.getCompilingSchema=$e.resolveRef=$e.compileSchema=$e.SchemaEnv=void 0;var be=D(),gp=Er(),rt=qe(),Ee=Lt(),Mo=K(),yp=Ut(),yt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ee.normalizeId)(s?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s?.$async,this.refs={}}};$e.SchemaEnv=yt;function Ds(e){let t=xo.call(this,e);if(t)return t;let r=(0,Ee.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:i}=this.opts.code,{ownProperties:o}=this.opts,u=new be.CodeGen(this.scope,{es5:s,lines:i,ownProperties:o}),l;e.$async&&(l=u.scopeValue("Error",{ref:gp.default,code:(0,be._)`require("ajv/dist/runtime/validation_error").default`}));let h=u.scopeName("validate");e.validateName=h;let g={gen:u,allErrors:this.opts.allErrors,data:rt.default.data,parentData:rt.default.parentData,parentDataProperty:rt.default.parentDataProperty,dataNames:[rt.default.data],dataPathArr:[be.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,be.stringify)(e.schema)}:{ref:e.schema}),validateName:h,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:be.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,be._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(e),(0,yp.validateFunctionCode)(g),u.optimize(this.opts.code.optimize);let y=u.toString();m=`${u.scopeRefs(rt.default.scope)}return ${y}`,this.opts.code.process&&(m=this.opts.code.process(m,e));let $=new Function(`${rt.default.self}`,`${rt.default.scope}`,m)(this,this.scope.get());if(this.scope.value(h,{ref:$}),$.errors=null,$.schema=e.schema,$.schemaEnv=e,e.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:h,validateCode:y,scopeValues:u._values}),this.opts.unevaluated){let{props:v,items:w}=g;$.evaluated={props:v instanceof be.Name?void 0:v,items:w instanceof be.Name?void 0:w,dynamicProps:v instanceof be.Name,dynamicItems:w instanceof be.Name},$.source&&($.source.evaluated=(0,be.stringify)($.evaluated))}return e.validate=$,e}catch(y){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),y}finally{this._compilations.delete(e)}}$e.compileSchema=Ds;function $p(e,t,r){var s;r=(0,Ee.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let o=wp.call(this,e,r);if(o===void 0){let u=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:l}=this.opts;u&&(o=new yt({schema:u,schemaId:l,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=_p.call(this,o)}$e.resolveRef=$p;function _p(e){return(0,Ee.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Ds.call(this,e)}function xo(e){for(let t of this._compilations)if(vp(t,e))return t}$e.getCompilingSchema=xo;function vp(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wp(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Sr.call(this,e,t)}function Sr(e,t){let r=this.opts.uriResolver.parse(t),s=(0,Ee._getFullPath)(this.opts.uriResolver,r),i=(0,Ee.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===i)return xs.call(this,r,e);let o=(0,Ee.normalizeId)(s),u=this.refs[o]||this.schemas[o];if(typeof u=="string"){let l=Sr.call(this,e,u);return typeof l?.schema!="object"?void 0:xs.call(this,r,l)}if(typeof u?.schema=="object"){if(u.validate||Ds.call(this,u),o===(0,Ee.normalizeId)(t)){let{schema:l}=u,{schemaId:h}=this.opts,g=l[h];return g&&(i=(0,Ee.resolveUrl)(this.opts.uriResolver,i,g)),new yt({schema:l,schemaId:h,root:e,baseId:i})}return xs.call(this,r,u)}}$e.resolveSchema=Sr;var bp=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function xs(e,{baseId:t,schema:r,root:s}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let l of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let h=r[(0,Mo.unescapeFragment)(l)];if(h===void 0)return;r=h;let g=typeof r=="object"&&r[this.opts.schemaId];!bp.has(l)&&g&&(t=(0,Ee.resolveUrl)(this.opts.uriResolver,t,g))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Mo.schemaHasRulesButRef)(r,this.RULES)){let l=(0,Ee.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Sr.call(this,s,l)}let{schemaId:u}=this.opts;if(o=o||new yt({schema:r,schemaId:u,root:s,baseId:t}),o.schema!==o.root.schema)return o}});var Do=k((Iy,Ep)=>{Ep.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Lo=k((qy,Vo)=>{"use strict";var Sp={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Vo.exports={HEX:Sp}});var Bo=k((Ay,Jo)=>{"use strict";var{HEX:Pp}=Lo(),kp=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function Ko(e){if(Ho(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(kp)||[],[r]=t;return r?{host:Tp(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Vs(e,t=!1){let r="",s=!0;for(let i of e){if(Pp[i]===void 0)return;i!=="0"&&s===!0&&(s=!1),s||(r+=i)}return t&&r.length===0&&(r="0"),r}function Np(e){let t=0,r={error:!1,address:"",zone:""},s=[],i=[],o=!1,u=!1,l=!1;function h(){if(i.length){if(o===!1){let g=Vs(i);if(g!==void 0)s.push(g);else return r.error=!0,!1}i.length=0}return!0}for(let g=0;g<e.length;g++){let m=e[g];if(!(m==="["||m==="]"))if(m===":"){if(u===!0&&(l=!0),!h())break;if(t++,s.push(":"),t>7){r.error=!0;break}g-1>=0&&e[g-1]===":"&&(u=!0);continue}else if(m==="%"){if(!h())break;o=!0}else{i.push(m);continue}}return i.length&&(o?r.zone=i.join(""):l?s.push(i.join("")):s.push(Vs(i))),r.address=s.join(""),r}function Go(e){if(Ho(e,":")<2)return{host:e,isIPV6:!1};let t=Np(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,s=t.address;return t.zone&&(r+="%"+t.zone,s+="%25"+t.zone),{host:r,escapedHost:s,isIPV6:!0}}}function Tp(e,t){let r="",s=!0,i=e.length;for(let o=0;o<i;o++){let u=e[o];u==="0"&&s?(o+1<=i&&e[o+1]===t||o+1===i)&&(r+=u,s=!1):(u===t?s=!0:s=!1,r+=u)}return r}function Ho(e,t){let r=0;for(let s=0;s<e.length;s++)e[s]===t&&r++;return r}var Fo=/^\.\.?\//u,zo=/^\/\.(?:\/|$)/u,Uo=/^\/\.\.(?:\/|$)/u,jp=/^\/?(?:.|\n)*?(?=\/|$)/u;function Op(e){let t=[];for(;e.length;)if(e.match(Fo))e=e.replace(Fo,"");else if(e.match(zo))e=e.replace(zo,"/");else if(e.match(Uo))e=e.replace(Uo,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(jp);if(r){let s=r[0];e=e.slice(s.length),t.push(s)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function Ip(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function qp(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host),s=Ko(r);if(s.isIPV4)r=s.host;else{let i=Go(s.host);i.isIPV6===!0?r=`[${i.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}Jo.exports={recomposeAuthority:qp,normalizeComponentEncoding:Ip,removeDotSegments:Op,normalizeIPv4:Ko,normalizeIPv6:Go,stringArrayToHexStripped:Vs}});var ea=k((Cy,Qo)=>{"use strict";var Ap=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,Cp=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Wo(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function Xo(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Yo(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Rp(e){return e.secure=Wo(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Mp(e){if((e.port===(Wo(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function xp(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(Cp);if(r){let s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${s}:${t.nid||e.nid}`,o=Ls[i];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Dp(e,t){let r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),i=`${r}:${t.nid||s}`,o=Ls[i];o&&(e=o.serialize(e,t));let u=e,l=e.nss;return u.path=`${s||t.nid}:${l}`,t.skipEscape=!0,u}function Vp(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Ap.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Lp(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Zo={scheme:"http",domainHost:!0,parse:Xo,serialize:Yo},Fp={scheme:"https",domainHost:Zo.domainHost,parse:Xo,serialize:Yo},kr={scheme:"ws",domainHost:!0,parse:Rp,serialize:Mp},zp={scheme:"wss",domainHost:kr.domainHost,parse:kr.parse,serialize:kr.serialize},Up={scheme:"urn",parse:xp,serialize:Dp,skipNormalize:!0},Kp={scheme:"urn:uuid",parse:Vp,serialize:Lp,skipNormalize:!0},Ls={http:Zo,https:Fp,ws:kr,wss:zp,urn:Up,"urn:uuid":Kp};Qo.exports=Ls});var ra=k((Ry,Tr)=>{"use strict";var{normalizeIPv6:Gp,normalizeIPv4:Hp,removeDotSegments:Gt,recomposeAuthority:Jp,normalizeComponentEncoding:Nr}=Bo(),Fs=ea();function Bp(e,t){return typeof e=="string"?e=Ne(Ce(e,t),t):typeof e=="object"&&(e=Ce(Ne(e,t),t)),e}function Wp(e,t,r){let s=Object.assign({scheme:"null"},r),i=ta(Ce(e,s),Ce(t,s),s,!0);return Ne(i,{...s,skipEscape:!0})}function ta(e,t,r,s){let i={};return s||(e=Ce(Ne(e,r),r),t=Ce(Ne(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Gt(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Gt(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=Gt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Gt(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function Xp(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ne(Nr(Ce(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ne(Nr(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ne(Nr(Ce(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ne(Nr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ne(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),i=[],o=Fs[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");let u=Jp(r);if(u!==void 0&&(s.reference!=="suffix"&&i.push("//"),i.push(u),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let l=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(l=Gt(l)),u===void 0&&(l=l.replace(/^\/\//u,"/%2F")),i.push(l)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}var Yp=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function Zp(e){let t=0;for(let r=0,s=e.length;r<s;++r)if(t=e.charCodeAt(r),t>126||Yp[t])return!0;return!1}var Qp=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Ce(e,t){let r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let u=e.match(Qp);if(u){if(s.scheme=u[1],s.userinfo=u[3],s.host=u[4],s.port=parseInt(u[5],10),s.path=u[6]||"",s.query=u[7],s.fragment=u[8],isNaN(s.port)&&(s.port=u[5]),s.host){let h=Hp(s.host);if(h.isIPV4===!1){let g=Gp(h.host);s.host=g.host.toLowerCase(),o=g.isIPV6}else s.host=h.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&s.query===void 0&&!s.path?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let l=Fs[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!l||!l.unicodeSupport)&&s.host&&(r.domainHost||l&&l.domainHost)&&o===!1&&Zp(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(h){s.error=s.error||"Host's domain name can not be converted to ASCII: "+h}(!l||l&&!l.skipNormalize)&&(i&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),i&&s.host!==void 0&&(s.host=unescape(s.host)),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),l&&l.parse&&l.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var zs={SCHEMES:Fs,normalize:Bp,resolve:Wp,resolveComponents:ta,equal:Xp,serialize:Ne,parse:Ce};Tr.exports=zs;Tr.exports.default=zs;Tr.exports.fastUri=zs});var na=k(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var sa=ra();sa.code='require("ajv/dist/runtime/uri").default';Us.default=sa});var da=k(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.CodeGen=te.Name=te.nil=te.stringify=te.str=te._=te.KeywordCxt=void 0;var eh=Ut();Object.defineProperty(te,"KeywordCxt",{enumerable:!0,get:function(){return eh.KeywordCxt}});var $t=D();Object.defineProperty(te,"_",{enumerable:!0,get:function(){return $t._}});Object.defineProperty(te,"str",{enumerable:!0,get:function(){return $t.str}});Object.defineProperty(te,"stringify",{enumerable:!0,get:function(){return $t.stringify}});Object.defineProperty(te,"nil",{enumerable:!0,get:function(){return $t.nil}});Object.defineProperty(te,"Name",{enumerable:!0,get:function(){return $t.Name}});Object.defineProperty(te,"CodeGen",{enumerable:!0,get:function(){return $t.CodeGen}});var th=Er(),ua=Kt(),rh=_s(),Ht=Pr(),sh=D(),Jt=Lt(),jr=Vt(),Gs=K(),ia=Do(),nh=na(),la=(e,t)=>new RegExp(e,t);la.code="new RegExp";var ih=["removeAdditional","useDefaults","coerceTypes"],oh=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ah={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ch={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},oa=200;function uh(e){var t,r,s,i,o,u,l,h,g,m,y,b,$,v,w,E,P,L,M,H,q,pe,me,ot,at;let Re=e.strict,ct=(t=e.code)===null||t===void 0?void 0:t.optimize,St=ct===!0||ct===void 0?1:ct||0,Pt=(s=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:la,ir=(i=e.uriResolver)!==null&&i!==void 0?i:nh.default;return{strictSchema:(u=(o=e.strictSchema)!==null&&o!==void 0?o:Re)!==null&&u!==void 0?u:!0,strictNumbers:(h=(l=e.strictNumbers)!==null&&l!==void 0?l:Re)!==null&&h!==void 0?h:!0,strictTypes:(m=(g=e.strictTypes)!==null&&g!==void 0?g:Re)!==null&&m!==void 0?m:"log",strictTuples:(b=(y=e.strictTuples)!==null&&y!==void 0?y:Re)!==null&&b!==void 0?b:"log",strictRequired:(v=($=e.strictRequired)!==null&&$!==void 0?$:Re)!==null&&v!==void 0?v:!1,code:e.code?{...e.code,optimize:St,regExp:Pt}:{optimize:St,regExp:Pt},loopRequired:(w=e.loopRequired)!==null&&w!==void 0?w:oa,loopEnum:(E=e.loopEnum)!==null&&E!==void 0?E:oa,meta:(P=e.meta)!==null&&P!==void 0?P:!0,messages:(L=e.messages)!==null&&L!==void 0?L:!0,inlineRefs:(M=e.inlineRefs)!==null&&M!==void 0?M:!0,schemaId:(H=e.schemaId)!==null&&H!==void 0?H:"$id",addUsedSchema:(q=e.addUsedSchema)!==null&&q!==void 0?q:!0,validateSchema:(pe=e.validateSchema)!==null&&pe!==void 0?pe:!0,validateFormats:(me=e.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(ot=e.unicodeRegExp)!==null&&ot!==void 0?ot:!0,int32range:(at=e.int32range)!==null&&at!==void 0?at:!0,uriResolver:ir}}var Bt=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...uh(t)};let{es5:r,lines:s}=this.opts.code;this.scope=new sh.ValueScope({scope:{},prefixes:oh,es5:r,lines:s}),this.logger=mh(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,rh.getRules)(),aa.call(this,ah,t,"NOT SUPPORTED"),aa.call(this,ch,t,"DEPRECATED","warn"),this._metaOpts=ph.call(this),t.formats&&fh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&dh.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),lh.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:s}=this.opts,i=ia;s==="id"&&(i={...ia},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[s],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let s;if(typeof t=="string"){if(s=this.getSchema(t),!s)throw new Error(`no schema with key or ref "${t}"`)}else s=this.compile(t);let i=s(r);return"$async"in s||(this.errors=s.errors),i}compile(t,r){let s=this._addSchema(t,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return i.call(this,t,r);async function i(m,y){await o.call(this,m.$schema);let b=this._addSchema(m,y);return b.validate||u.call(this,b)}async function o(m){m&&!this.getSchema(m)&&await i.call(this,{$ref:m},!0)}async function u(m){try{return this._compileSchemaEnv(m)}catch(y){if(!(y instanceof ua.default))throw y;return l.call(this,y),await h.call(this,y.missingSchema),u.call(this,m)}}function l({missingSchema:m,missingRef:y}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${y} cannot be resolved`)}async function h(m){let y=await g.call(this,m);this.refs[m]||await o.call(this,y.$schema),this.refs[m]||this.addSchema(y,m,r)}async function g(m){let y=this._loading[m];if(y)return y;try{return await(this._loading[m]=s(m))}finally{delete this._loading[m]}}}addSchema(t,r,s,i=this.opts.validateSchema){if(Array.isArray(t)){for(let u of t)this.addSchema(u,void 0,s,i);return this}let o;if(typeof t=="object"){let{schemaId:u}=this.opts;if(o=t[u],o!==void 0&&typeof o!="string")throw new Error(`schema ${u} must be string`)}return r=(0,Jt.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(t,s,r,i,!0),this}addMetaSchema(t,r,s=this.opts.validateSchema){return this.addSchema(t,r,!0,s),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let s;if(s=t.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(s,t);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(t){let r;for(;typeof(r=ca.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:s}=this.opts,i=new Ht.SchemaEnv({schema:{},schemaId:s});if(r=Ht.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=ca.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let s=t[this.opts.schemaId];return s&&(s=(0,Jt.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let s;if(typeof t=="string")s=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof t=="object"&&r===void 0){if(r=t,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(yh.call(this,s,r),!r)return(0,Gs.eachItem)(s,o=>Ks.call(this,o)),this;_h.call(this,r);let i={...r,type:(0,jr.getJSONTypes)(r.type),schemaType:(0,jr.getJSONTypes)(r.schemaType)};return(0,Gs.eachItem)(s,i.type.length===0?o=>Ks.call(this,o,i):o=>i.type.forEach(u=>Ks.call(this,o,i,u))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let s of r.rules){let i=s.rules.findIndex(o=>o.keyword===t);i>=0&&s.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${s}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(t,r){let s=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let o=i.split("/").slice(1),u=t;for(let l of o)u=u[l];for(let l in s){let h=s[l];if(typeof h!="object")continue;let{$data:g}=h.definition,m=u[l];g&&m&&(u[l]=fa(m))}}return t}_removeAllSchemas(t,r){for(let s in t){let i=t[s];(!r||r.test(s))&&(typeof i=="string"?delete t[s]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[s]))}}_addSchema(t,r,s,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let u,{schemaId:l}=this.opts;if(typeof t=="object")u=t[l];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let h=this._cache.get(t);if(h!==void 0)return h;s=(0,Jt.normalizeId)(u||s);let g=Jt.getSchemaRefs.call(this,t,s);return h=new Ht.SchemaEnv({schema:t,schemaId:l,meta:r,baseId:s,localRefs:g}),this._cache.set(h.schema,h),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=h),i&&this.validateSchema(t,!0),h}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Ht.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Ht.compileSchema.call(this,t)}finally{this.opts=r}}};Bt.ValidationError=th.default;Bt.MissingRefError=ua.default;te.default=Bt;function aa(e,t,r,s="error"){for(let i in e){let o=i;o in t&&this.logger[s](`${r}: option ${i}. ${e[o]}`)}}function ca(e){return e=(0,Jt.normalizeId)(e),this.schemas[e]||this.refs[e]}function lh(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function fh(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function dh(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function ph(){let e={...this.opts};for(let t of ih)delete e[t];return e}var hh={log(){},warn(){},error(){}};function mh(e){if(e===!1)return hh;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var gh=/^[a-z_$][a-z0-9_$:-]*$/i;function yh(e,t){let{RULES:r}=this;if((0,Gs.eachItem)(e,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!gh.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Ks(e,t,r){var s;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,u=i?o.post:o.rules.find(({type:h})=>h===r);if(u||(u={type:r,rules:[]},o.rules.push(u)),o.keywords[e]=!0,!t)return;let l={keyword:e,definition:{...t,type:(0,jr.getJSONTypes)(t.type),schemaType:(0,jr.getJSONTypes)(t.schemaType)}};t.before?$h.call(this,u,l,t.before):u.rules.push(l),o.all[e]=l,(s=t.implements)===null||s===void 0||s.forEach(h=>this.addKeyword(h))}function $h(e,t,r){let s=e.rules.findIndex(i=>i.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function _h(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=fa(t)),e.validateSchema=this.compile(t,!0))}var vh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function fa(e){return{anyOf:[e,vh]}}});var pa=k(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var wh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Hs.default=wh});var ya=k(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.callRef=st.getValidate=void 0;var bh=Kt(),ha=ye(),de=D(),_t=qe(),ma=Pr(),Or=K(),Eh={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:s}=e,{baseId:i,schemaEnv:o,validateName:u,opts:l,self:h}=s,{root:g}=o;if((r==="#"||r==="#/")&&i===g.baseId)return y();let m=ma.resolveRef.call(h,g,i,r);if(m===void 0)throw new bh.default(s.opts.uriResolver,i,r);if(m instanceof ma.SchemaEnv)return b(m);return $(m);function y(){if(o===g)return Ir(e,u,o,o.$async);let v=t.scopeValue("root",{ref:g});return Ir(e,(0,de._)`${v}.validate`,g,g.$async)}function b(v){let w=ga(e,v);Ir(e,w,v,v.$async)}function $(v){let w=t.scopeValue("schema",l.code.source===!0?{ref:v,code:(0,de.stringify)(v)}:{ref:v}),E=t.name("valid"),P=e.subschema({schema:v,dataTypes:[],schemaPath:de.nil,topSchemaRef:w,errSchemaPath:r},E);e.mergeEvaluated(P),e.ok(E)}}};function ga(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,de._)`${r.scopeValue("wrapper",{ref:t})}.validate`}st.getValidate=ga;function Ir(e,t,r,s){let{gen:i,it:o}=e,{allErrors:u,schemaEnv:l,opts:h}=o,g=h.passContext?_t.default.this:de.nil;s?m():y();function m(){if(!l.$async)throw new Error("async schema referenced by sync schema");let v=i.let("valid");i.try(()=>{i.code((0,de._)`await ${(0,ha.callValidateCode)(e,t,g)}`),$(t),u||i.assign(v,!0)},w=>{i.if((0,de._)`!(${w} instanceof ${o.ValidationError})`,()=>i.throw(w)),b(w),u||i.assign(v,!1)}),e.ok(v)}function y(){e.result((0,ha.callValidateCode)(e,t,g),()=>$(t),()=>b(t))}function b(v){let w=(0,de._)`${v}.errors`;i.assign(_t.default.vErrors,(0,de._)`${_t.default.vErrors} === null ? ${w} : ${_t.default.vErrors}.concat(${w})`),i.assign(_t.default.errors,(0,de._)`${_t.default.vErrors}.length`)}function $(v){var w;if(!o.opts.unevaluated)return;let E=(w=r?.validate)===null||w===void 0?void 0:w.evaluated;if(o.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(o.props=Or.mergeEvaluated.props(i,E.props,o.props));else{let P=i.var("props",(0,de._)`${v}.evaluated.props`);o.props=Or.mergeEvaluated.props(i,P,o.props,de.Name)}if(o.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(o.items=Or.mergeEvaluated.items(i,E.items,o.items));else{let P=i.var("items",(0,de._)`${v}.evaluated.items`);o.items=Or.mergeEvaluated.items(i,P,o.items,de.Name)}}}st.callRef=Ir;st.default=Eh});var $a=k(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Sh=pa(),Ph=ya(),kh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Sh.default,Ph.default];Js.default=kh});var _a=k(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var qr=D(),Ge=qr.operators,Ar={maximum:{okStr:"<=",ok:Ge.LTE,fail:Ge.GT},minimum:{okStr:">=",ok:Ge.GTE,fail:Ge.LT},exclusiveMaximum:{okStr:"<",ok:Ge.LT,fail:Ge.GTE},exclusiveMinimum:{okStr:">",ok:Ge.GT,fail:Ge.LTE}},Nh={message:({keyword:e,schemaCode:t})=>(0,qr.str)`must be ${Ar[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,qr._)`{comparison: ${Ar[e].okStr}, limit: ${t}}`},Th={keyword:Object.keys(Ar),type:"number",schemaType:"number",$data:!0,error:Nh,code(e){let{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,qr._)`${r} ${Ar[t].fail} ${s} || isNaN(${r})`)}};Bs.default=Th});var va=k(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var Wt=D(),jh={message:({schemaCode:e})=>(0,Wt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Wt._)`{multipleOf: ${e}}`},Oh={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:jh,code(e){let{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,u=t.let("res"),l=o?(0,Wt._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${o}`:(0,Wt._)`${u} !== parseInt(${u})`;e.fail$data((0,Wt._)`(${s} === 0 || (${u} = ${r}/${s}, ${l}))`)}};Ws.default=Oh});var ba=k(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});function wa(e){let t=e.length,r=0,s=0,i;for(;s<t;)r++,i=e.charCodeAt(s++),i>=55296&&i<=56319&&s<t&&(i=e.charCodeAt(s),(i&64512)===56320&&s++);return r}Xs.default=wa;wa.code='require("ajv/dist/runtime/ucs2length").default'});var Ea=k(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var nt=D(),Ih=K(),qh=ba(),Ah={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,nt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,nt._)`{limit: ${e}}`},Ch={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ah,code(e){let{keyword:t,data:r,schemaCode:s,it:i}=e,o=t==="maxLength"?nt.operators.GT:nt.operators.LT,u=i.opts.unicode===!1?(0,nt._)`${r}.length`:(0,nt._)`${(0,Ih.useFunc)(e.gen,qh.default)}(${r})`;e.fail$data((0,nt._)`${u} ${o} ${s}`)}};Ys.default=Ch});var Sa=k(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});var Rh=ye(),Cr=D(),Mh={message:({schemaCode:e})=>(0,Cr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Cr._)`{pattern: ${e}}`},xh={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Mh,code(e){let{data:t,$data:r,schema:s,schemaCode:i,it:o}=e,u=o.opts.unicodeRegExp?"u":"",l=r?(0,Cr._)`(new RegExp(${i}, ${u}))`:(0,Rh.usePattern)(e,s);e.fail$data((0,Cr._)`!${l}.test(${t})`)}};Zs.default=xh});var Pa=k(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Xt=D(),Dh={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Xt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Xt._)`{limit: ${e}}`},Vh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Dh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxProperties"?Xt.operators.GT:Xt.operators.LT;e.fail$data((0,Xt._)`Object.keys(${r}).length ${i} ${s}`)}};Qs.default=Vh});var ka=k(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var Yt=ye(),Zt=D(),Lh=K(),Fh={message:({params:{missingProperty:e}})=>(0,Zt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Zt._)`{missingProperty: ${e}}`},zh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Fh,code(e){let{gen:t,schema:r,schemaCode:s,data:i,$data:o,it:u}=e,{opts:l}=u;if(!o&&r.length===0)return;let h=r.length>=l.loopRequired;if(u.allErrors?g():m(),l.strictRequired){let $=e.parentSchema.properties,{definedProperties:v}=e.it;for(let w of r)if($?.[w]===void 0&&!v.has(w)){let E=u.schemaEnv.baseId+u.errSchemaPath,P=`required property "${w}" is not defined at "${E}" (strictRequired)`;(0,Lh.checkStrictMode)(u,P,u.opts.strictRequired)}}function g(){if(h||o)e.block$data(Zt.nil,y);else for(let $ of r)(0,Yt.checkReportMissingProp)(e,$)}function m(){let $=t.let("missing");if(h||o){let v=t.let("valid",!0);e.block$data(v,()=>b($,v)),e.ok(v)}else t.if((0,Yt.checkMissingProp)(e,r,$)),(0,Yt.reportMissingProp)(e,$),t.else()}function y(){t.forOf("prop",s,$=>{e.setParams({missingProperty:$}),t.if((0,Yt.noPropertyInData)(t,i,$,l.ownProperties),()=>e.error())})}function b($,v){e.setParams({missingProperty:$}),t.forOf($,s,()=>{t.assign(v,(0,Yt.propertyInData)(t,i,$,l.ownProperties)),t.if((0,Zt.not)(v),()=>{e.error(),t.break()})},Zt.nil)}}};en.default=zh});var Na=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var Qt=D(),Uh={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Qt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Qt._)`{limit: ${e}}`},Kh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Uh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxItems"?Qt.operators.GT:Qt.operators.LT;e.fail$data((0,Qt._)`${r}.length ${i} ${s}`)}};tn.default=Kh});var Rr=k(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var Ta=Ns();Ta.code='require("ajv/dist/runtime/equal").default';rn.default=Ta});var ja=k(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var sn=Vt(),re=D(),Gh=K(),Hh=Rr(),Jh={message:({params:{i:e,j:t}})=>(0,re.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,re._)`{i: ${e}, j: ${t}}`},Bh={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Jh,code(e){let{gen:t,data:r,$data:s,schema:i,parentSchema:o,schemaCode:u,it:l}=e;if(!s&&!i)return;let h=t.let("valid"),g=o.items?(0,sn.getSchemaTypes)(o.items):[];e.block$data(h,m,(0,re._)`${u} === false`),e.ok(h);function m(){let v=t.let("i",(0,re._)`${r}.length`),w=t.let("j");e.setParams({i:v,j:w}),t.assign(h,!0),t.if((0,re._)`${v} > 1`,()=>(y()?b:$)(v,w))}function y(){return g.length>0&&!g.some(v=>v==="object"||v==="array")}function b(v,w){let E=t.name("item"),P=(0,sn.checkDataTypes)(g,E,l.opts.strictNumbers,sn.DataType.Wrong),L=t.const("indices",(0,re._)`{}`);t.for((0,re._)`;${v}--;`,()=>{t.let(E,(0,re._)`${r}[${v}]`),t.if(P,(0,re._)`continue`),g.length>1&&t.if((0,re._)`typeof ${E} == "string"`,(0,re._)`${E} += "_"`),t.if((0,re._)`typeof ${L}[${E}] == "number"`,()=>{t.assign(w,(0,re._)`${L}[${E}]`),e.error(),t.assign(h,!1).break()}).code((0,re._)`${L}[${E}] = ${v}`)})}function $(v,w){let E=(0,Gh.useFunc)(t,Hh.default),P=t.name("outer");t.label(P).for((0,re._)`;${v}--;`,()=>t.for((0,re._)`${w} = ${v}; ${w}--;`,()=>t.if((0,re._)`${E}(${r}[${v}], ${r}[${w}])`,()=>{e.error(),t.assign(h,!1).break(P)})))}}};nn.default=Bh});var Oa=k(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var on=D(),Wh=K(),Xh=Rr(),Yh={message:"must be equal to constant",params:({schemaCode:e})=>(0,on._)`{allowedValue: ${e}}`},Zh={keyword:"const",$data:!0,error:Yh,code(e){let{gen:t,data:r,$data:s,schemaCode:i,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,on._)`!${(0,Wh.useFunc)(t,Xh.default)}(${r}, ${i})`):e.fail((0,on._)`${o} !== ${r}`)}};an.default=Zh});var Ia=k(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var er=D(),Qh=K(),em=Rr(),tm={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,er._)`{allowedValues: ${e}}`},rm={keyword:"enum",schemaType:"array",$data:!0,error:tm,code(e){let{gen:t,data:r,$data:s,schema:i,schemaCode:o,it:u}=e;if(!s&&i.length===0)throw new Error("enum must have non-empty array");let l=i.length>=u.opts.loopEnum,h,g=()=>h??(h=(0,Qh.useFunc)(t,em.default)),m;if(l||s)m=t.let("valid"),e.block$data(m,y);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let $=t.const("vSchema",o);m=(0,er.or)(...i.map((v,w)=>b($,w)))}e.pass(m);function y(){t.assign(m,!1),t.forOf("v",o,$=>t.if((0,er._)`${g()}(${r}, ${$})`,()=>t.assign(m,!0).break()))}function b($,v){let w=i[v];return typeof w=="object"&&w!==null?(0,er._)`${g()}(${r}, ${$}[${v}])`:(0,er._)`${r} === ${w}`}}};cn.default=rm});var qa=k(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var sm=_a(),nm=va(),im=Ea(),om=Sa(),am=Pa(),cm=ka(),um=Na(),lm=ja(),fm=Oa(),dm=Ia(),pm=[sm.default,nm.default,im.default,om.default,am.default,cm.default,um.default,lm.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},fm.default,dm.default];un.default=pm});var fn=k(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.validateAdditionalItems=void 0;var it=D(),ln=K(),hm={message:({params:{len:e}})=>(0,it.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,it._)`{limit: ${e}}`},mm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hm,code(e){let{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,ln.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Aa(e,s)}};function Aa(e,t){let{gen:r,schema:s,data:i,keyword:o,it:u}=e;u.items=!0;let l=r.const("len",(0,it._)`${i}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,it._)`${l} <= ${t.length}`);else if(typeof s=="object"&&!(0,ln.alwaysValidSchema)(u,s)){let g=r.var("valid",(0,it._)`${l} <= ${t.length}`);r.if((0,it.not)(g),()=>h(g)),e.ok(g)}function h(g){r.forRange("i",t.length,l,m=>{e.subschema({keyword:o,dataProp:m,dataPropType:ln.Type.Num},g),u.allErrors||r.if((0,it.not)(g),()=>r.break())})}}tr.validateAdditionalItems=Aa;tr.default=mm});var dn=k(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.validateTuple=void 0;var Ca=D(),Mr=K(),gm=ye(),ym={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Ra(e,"additionalItems",t);r.items=!0,!(0,Mr.alwaysValidSchema)(r,t)&&e.ok((0,gm.validateArray)(e))}};function Ra(e,t,r=e.schema){let{gen:s,parentSchema:i,data:o,keyword:u,it:l}=e;m(i),l.opts.unevaluated&&r.length&&l.items!==!0&&(l.items=Mr.mergeEvaluated.items(s,r.length,l.items));let h=s.name("valid"),g=s.const("len",(0,Ca._)`${o}.length`);r.forEach((y,b)=>{(0,Mr.alwaysValidSchema)(l,y)||(s.if((0,Ca._)`${g} > ${b}`,()=>e.subschema({keyword:u,schemaProp:b,dataProp:b},h)),e.ok(h))});function m(y){let{opts:b,errSchemaPath:$}=l,v=r.length,w=v===y.minItems&&(v===y.maxItems||y[t]===!1);if(b.strictTuples&&!w){let E=`"${u}" is ${v}-tuple, but minItems or maxItems/${t} are not specified or different at path "${$}"`;(0,Mr.checkStrictMode)(l,E,b.strictTuples)}}}rr.validateTuple=Ra;rr.default=ym});var Ma=k(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var $m=dn(),_m={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,$m.validateTuple)(e,"items")};pn.default=_m});var Da=k(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var xa=D(),vm=K(),wm=ye(),bm=fn(),Em={message:({params:{len:e}})=>(0,xa.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,xa._)`{limit: ${e}}`},Sm={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Em,code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:i}=r;s.items=!0,!(0,vm.alwaysValidSchema)(s,t)&&(i?(0,bm.validateAdditionalItems)(e,i):e.ok((0,wm.validateArray)(e)))}};hn.default=Sm});var Va=k(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var _e=D(),xr=K(),Pm={message:({params:{min:e,max:t}})=>t===void 0?(0,_e.str)`must contain at least ${e} valid item(s)`:(0,_e.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,_e._)`{minContains: ${e}}`:(0,_e._)`{minContains: ${e}, maxContains: ${t}}`},km={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Pm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e,u,l,{minContains:h,maxContains:g}=s;o.opts.next?(u=h===void 0?1:h,l=g):u=1;let m=t.const("len",(0,_e._)`${i}.length`);if(e.setParams({min:u,max:l}),l===void 0&&u===0){(0,xr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&u>l){(0,xr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,xr.alwaysValidSchema)(o,r)){let w=(0,_e._)`${m} >= ${u}`;l!==void 0&&(w=(0,_e._)`${w} && ${m} <= ${l}`),e.pass(w);return}o.items=!0;let y=t.name("valid");l===void 0&&u===1?$(y,()=>t.if(y,()=>t.break())):u===0?(t.let(y,!0),l!==void 0&&t.if((0,_e._)`${i}.length > 0`,b)):(t.let(y,!1),b()),e.result(y,()=>e.reset());function b(){let w=t.name("_valid"),E=t.let("count",0);$(w,()=>t.if(w,()=>v(E)))}function $(w,E){t.forRange("i",0,m,P=>{e.subschema({keyword:"contains",dataProp:P,dataPropType:xr.Type.Num,compositeRule:!0},w),E()})}function v(w){t.code((0,_e._)`${w}++`),l===void 0?t.if((0,_e._)`${w} >= ${u}`,()=>t.assign(y,!0).break()):(t.if((0,_e._)`${w} > ${l}`,()=>t.assign(y,!1).break()),u===1?t.assign(y,!0):t.if((0,_e._)`${w} >= ${u}`,()=>t.assign(y,!0)))}}};mn.default=km});var za=k(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.validateSchemaDeps=Te.validatePropertyDeps=Te.error=void 0;var gn=D(),Nm=K(),sr=ye();Te.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let s=t===1?"property":"properties";return(0,gn.str)`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>(0,gn._)`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};var Tm={keyword:"dependencies",type:"object",schemaType:"object",error:Te.error,code(e){let[t,r]=jm(e);La(e,t),Fa(e,r)}};function jm({schema:e}){let t={},r={};for(let s in e){if(s==="__proto__")continue;let i=Array.isArray(e[s])?t:r;i[s]=e[s]}return[t,r]}function La(e,t=e.schema){let{gen:r,data:s,it:i}=e;if(Object.keys(t).length===0)return;let o=r.let("missing");for(let u in t){let l=t[u];if(l.length===0)continue;let h=(0,sr.propertyInData)(r,s,u,i.opts.ownProperties);e.setParams({property:u,depsCount:l.length,deps:l.join(", ")}),i.allErrors?r.if(h,()=>{for(let g of l)(0,sr.checkReportMissingProp)(e,g)}):(r.if((0,gn._)`${h} && (${(0,sr.checkMissingProp)(e,l,o)})`),(0,sr.reportMissingProp)(e,o),r.else())}}Te.validatePropertyDeps=La;function Fa(e,t=e.schema){let{gen:r,data:s,keyword:i,it:o}=e,u=r.name("valid");for(let l in t)(0,Nm.alwaysValidSchema)(o,t[l])||(r.if((0,sr.propertyInData)(r,s,l,o.opts.ownProperties),()=>{let h=e.subschema({keyword:i,schemaProp:l},u);e.mergeValidEvaluated(h,u)},()=>r.var(u,!0)),e.ok(u))}Te.validateSchemaDeps=Fa;Te.default=Tm});var Ka=k(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var Ua=D(),Om=K(),Im={message:"property name must be valid",params:({params:e})=>(0,Ua._)`{propertyName: ${e.propertyName}}`},qm={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Im,code(e){let{gen:t,schema:r,data:s,it:i}=e;if((0,Om.alwaysValidSchema)(i,r))return;let o=t.name("valid");t.forIn("key",s,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},o),t.if((0,Ua.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};yn.default=qm});var _n=k($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var Dr=ye(),Se=D(),Am=qe(),Vr=K(),Cm={message:"must NOT have additional properties",params:({params:e})=>(0,Se._)`{additionalProperty: ${e.additionalProperty}}`},Rm={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Cm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,errsCount:o,it:u}=e;if(!o)throw new Error("ajv implementation error");let{allErrors:l,opts:h}=u;if(u.props=!0,h.removeAdditional!=="all"&&(0,Vr.alwaysValidSchema)(u,r))return;let g=(0,Dr.allSchemaProperties)(s.properties),m=(0,Dr.allSchemaProperties)(s.patternProperties);y(),e.ok((0,Se._)`${o} === ${Am.default.errors}`);function y(){t.forIn("key",i,E=>{!g.length&&!m.length?v(E):t.if(b(E),()=>v(E))})}function b(E){let P;if(g.length>8){let L=(0,Vr.schemaRefOrVal)(u,s.properties,"properties");P=(0,Dr.isOwnProperty)(t,L,E)}else g.length?P=(0,Se.or)(...g.map(L=>(0,Se._)`${E} === ${L}`)):P=Se.nil;return m.length&&(P=(0,Se.or)(P,...m.map(L=>(0,Se._)`${(0,Dr.usePattern)(e,L)}.test(${E})`))),(0,Se.not)(P)}function $(E){t.code((0,Se._)`delete ${i}[${E}]`)}function v(E){if(h.removeAdditional==="all"||h.removeAdditional&&r===!1){$(E);return}if(r===!1){e.setParams({additionalProperty:E}),e.error(),l||t.break();return}if(typeof r=="object"&&!(0,Vr.alwaysValidSchema)(u,r)){let P=t.name("valid");h.removeAdditional==="failing"?(w(E,P,!1),t.if((0,Se.not)(P),()=>{e.reset(),$(E)})):(w(E,P),l||t.if((0,Se.not)(P),()=>t.break()))}}function w(E,P,L){let M={keyword:"additionalProperties",dataProp:E,dataPropType:Vr.Type.Str};L===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(M,P)}}};$n.default=Rm});var Ja=k(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Mm=Ut(),Ga=ye(),vn=K(),Ha=_n(),xm={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Ha.default.code(new Mm.KeywordCxt(o,Ha.default,"additionalProperties"));let u=(0,Ga.allSchemaProperties)(r);for(let y of u)o.definedProperties.add(y);o.opts.unevaluated&&u.length&&o.props!==!0&&(o.props=vn.mergeEvaluated.props(t,(0,vn.toHash)(u),o.props));let l=u.filter(y=>!(0,vn.alwaysValidSchema)(o,r[y]));if(l.length===0)return;let h=t.name("valid");for(let y of l)g(y)?m(y):(t.if((0,Ga.propertyInData)(t,i,y,o.opts.ownProperties)),m(y),o.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(y),e.ok(h);function g(y){return o.opts.useDefaults&&!o.compositeRule&&r[y].default!==void 0}function m(y){e.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};wn.default=xm});var Ya=k(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var Ba=ye(),Lr=D(),Wa=K(),Xa=K(),Dm={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:s,parentSchema:i,it:o}=e,{opts:u}=o,l=(0,Ba.allSchemaProperties)(r),h=l.filter(w=>(0,Wa.alwaysValidSchema)(o,r[w]));if(l.length===0||h.length===l.length&&(!o.opts.unevaluated||o.props===!0))return;let g=u.strictSchema&&!u.allowMatchingProperties&&i.properties,m=t.name("valid");o.props!==!0&&!(o.props instanceof Lr.Name)&&(o.props=(0,Xa.evaluatedPropsToName)(t,o.props));let{props:y}=o;b();function b(){for(let w of l)g&&$(w),o.allErrors?v(w):(t.var(m,!0),v(w),t.if(m))}function $(w){for(let E in g)new RegExp(w).test(E)&&(0,Wa.checkStrictMode)(o,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function v(w){t.forIn("key",s,E=>{t.if((0,Lr._)`${(0,Ba.usePattern)(e,w)}.test(${E})`,()=>{let P=h.includes(w);P||e.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:Xa.Type.Str},m),o.opts.unevaluated&&y!==!0?t.assign((0,Lr._)`${y}[${E}]`,!0):!P&&!o.allErrors&&t.if((0,Lr.not)(m),()=>t.break())})})}}};bn.default=Dm});var Za=k(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Vm=K(),Lm={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:s}=e;if((0,Vm.alwaysValidSchema)(s,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};En.default=Lm});var Qa=k(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var Fm=ye(),zm={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Fm.validateUnion,error:{message:"must match a schema in anyOf"}};Sn.default=zm});var ec=k(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Fr=D(),Um=K(),Km={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Fr._)`{passingSchemas: ${e.passing}}`},Gm={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Km,code(e){let{gen:t,schema:r,parentSchema:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&s.discriminator)return;let o=r,u=t.let("valid",!1),l=t.let("passing",null),h=t.name("_valid");e.setParams({passing:l}),t.block(g),e.result(u,()=>e.reset(),()=>e.error(!0));function g(){o.forEach((m,y)=>{let b;(0,Um.alwaysValidSchema)(i,m)?t.var(h,!0):b=e.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},h),y>0&&t.if((0,Fr._)`${h} && ${u}`).assign(u,!1).assign(l,(0,Fr._)`[${l}, ${y}]`).else(),t.if(h,()=>{t.assign(u,!0),t.assign(l,y),b&&e.mergeEvaluated(b,Fr.Name)})})}}};Pn.default=Gm});var tc=k(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var Hm=K(),Jm={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((o,u)=>{if((0,Hm.alwaysValidSchema)(s,o))return;let l=e.subschema({keyword:"allOf",schemaProp:u},i);e.ok(i),e.mergeEvaluated(l)})}};kn.default=Jm});var nc=k(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var zr=D(),sc=K(),Bm={message:({params:e})=>(0,zr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,zr._)`{failingKeyword: ${e.ifClause}}`},Wm={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Bm,code(e){let{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,sc.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let i=rc(s,"then"),o=rc(s,"else");if(!i&&!o)return;let u=t.let("valid",!0),l=t.name("_valid");if(h(),e.reset(),i&&o){let m=t.let("ifClause");e.setParams({ifClause:m}),t.if(l,g("then",m),g("else",m))}else i?t.if(l,g("then")):t.if((0,zr.not)(l),g("else"));e.pass(u,()=>e.error(!0));function h(){let m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(m)}function g(m,y){return()=>{let b=e.subschema({keyword:m},l);t.assign(u,l),e.mergeValidEvaluated(b,u),y?t.assign(y,(0,zr._)`${m}`):e.setParams({ifClause:m})}}}};function rc(e,t){let r=e.schema[t];return r!==void 0&&!(0,sc.alwaysValidSchema)(e,r)}Nn.default=Wm});var ic=k(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var Xm=K(),Ym={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Xm.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Tn.default=Ym});var oc=k(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var Zm=fn(),Qm=Ma(),eg=dn(),tg=Da(),rg=Va(),sg=za(),ng=Ka(),ig=_n(),og=Ja(),ag=Ya(),cg=Za(),ug=Qa(),lg=ec(),fg=tc(),dg=nc(),pg=ic();function hg(e=!1){let t=[cg.default,ug.default,lg.default,fg.default,dg.default,pg.default,ng.default,ig.default,sg.default,og.default,ag.default];return e?t.push(Qm.default,tg.default):t.push(Zm.default,eg.default),t.push(rg.default),t}jn.default=hg});var ac=k(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var Z=D(),mg={message:({schemaCode:e})=>(0,Z.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Z._)`{format: ${e}}`},gg={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:mg,code(e,t){let{gen:r,data:s,$data:i,schema:o,schemaCode:u,it:l}=e,{opts:h,errSchemaPath:g,schemaEnv:m,self:y}=l;if(!h.validateFormats)return;i?b():$();function b(){let v=r.scopeValue("formats",{ref:y.formats,code:h.code.formats}),w=r.const("fDef",(0,Z._)`${v}[${u}]`),E=r.let("fType"),P=r.let("format");r.if((0,Z._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(E,(0,Z._)`${w}.type || "string"`).assign(P,(0,Z._)`${w}.validate`),()=>r.assign(E,(0,Z._)`"string"`).assign(P,w)),e.fail$data((0,Z.or)(L(),M()));function L(){return h.strictSchema===!1?Z.nil:(0,Z._)`${u} && !${P}`}function M(){let H=m.$async?(0,Z._)`(${w}.async ? await ${P}(${s}) : ${P}(${s}))`:(0,Z._)`${P}(${s})`,q=(0,Z._)`(typeof ${P} == "function" ? ${H} : ${P}.test(${s}))`;return(0,Z._)`${P} && ${P} !== true && ${E} === ${t} && !${q}`}}function $(){let v=y.formats[o];if(!v){L();return}if(v===!0)return;let[w,E,P]=M(v);w===t&&e.pass(H());function L(){if(h.strictSchema===!1){y.logger.warn(q());return}throw new Error(q());function q(){return`unknown format "${o}" ignored in schema at path "${g}"`}}function M(q){let pe=q instanceof RegExp?(0,Z.regexpCode)(q):h.code.formats?(0,Z._)`${h.code.formats}${(0,Z.getProperty)(o)}`:void 0,me=r.scopeValue("formats",{key:o,ref:q,code:pe});return typeof q=="object"&&!(q instanceof RegExp)?[q.type||"string",q.validate,(0,Z._)`${me}.validate`]:["string",q,me]}function H(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!m.$async)throw new Error("async format in sync schema");return(0,Z._)`await ${P}(${s})`}return typeof E=="function"?(0,Z._)`${P}(${s})`:(0,Z._)`${P}.test(${s})`}}}};On.default=gg});var cc=k(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var yg=ac(),$g=[yg.default];In.default=$g});var uc=k(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.contentVocabulary=vt.metadataVocabulary=void 0;vt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];vt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var fc=k(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var _g=$a(),vg=qa(),wg=oc(),bg=cc(),lc=uc(),Eg=[_g.default,vg.default,(0,wg.default)(),bg.default,lc.metadataVocabulary,lc.contentVocabulary];qn.default=Eg});var pc=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.DiscrError=void 0;var dc;(function(e){e.Tag="tag",e.Mapping="mapping"})(dc||(Ur.DiscrError=dc={}))});var mc=k(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var wt=D(),An=pc(),hc=Pr(),Sg=Kt(),Pg=K(),kg={message:({params:{discrError:e,tagName:t}})=>e===An.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,wt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Ng={keyword:"discriminator",type:"object",schemaType:"object",error:kg,code(e){let{gen:t,data:r,schema:s,parentSchema:i,it:o}=e,{oneOf:u}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let l=s.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");let h=t.let("valid",!1),g=t.const("tag",(0,wt._)`${r}${(0,wt.getProperty)(l)}`);t.if((0,wt._)`typeof ${g} == "string"`,()=>m(),()=>e.error(!1,{discrError:An.DiscrError.Tag,tag:g,tagName:l})),e.ok(h);function m(){let $=b();t.if(!1);for(let v in $)t.elseIf((0,wt._)`${g} === ${v}`),t.assign(h,y($[v]));t.else(),e.error(!1,{discrError:An.DiscrError.Mapping,tag:g,tagName:l}),t.endIf()}function y($){let v=t.name("valid"),w=e.subschema({keyword:"oneOf",schemaProp:$},v);return e.mergeEvaluated(w,wt.Name),v}function b(){var $;let v={},w=P(i),E=!0;for(let H=0;H<u.length;H++){let q=u[H];if(q?.$ref&&!(0,Pg.schemaHasRulesButRef)(q,o.self.RULES)){let me=q.$ref;if(q=hc.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,me),q instanceof hc.SchemaEnv&&(q=q.schema),q===void 0)throw new Sg.default(o.opts.uriResolver,o.baseId,me)}let pe=($=q?.properties)===null||$===void 0?void 0:$[l];if(typeof pe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);E=E&&(w||P(q)),L(pe,H)}if(!E)throw new Error(`discriminator: "${l}" must be required`);return v;function P({required:H}){return Array.isArray(H)&&H.includes(l)}function L(H,q){if(H.const)M(H.const,q);else if(H.enum)for(let pe of H.enum)M(pe,q);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function M(H,q){if(typeof H!="string"||H in v)throw new Error(`discriminator: "${l}" values must be unique strings`);v[H]=q}}}};Cn.default=Ng});var gc=k((E$,Tg)=>{Tg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var $c=k((X,Rn)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=X.Ajv=void 0;var jg=da(),Og=fc(),Ig=mc(),yc=gc(),qg=["/properties"],Kr="http://json-schema.org/draft-07/schema",bt=class extends jg.default{_addVocabularies(){super._addVocabularies(),Og.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(Ig.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(yc,qg):yc;this.addMetaSchema(t,Kr,!1),this.refs["http://json-schema.org/schema"]=Kr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Kr)?Kr:void 0)}};X.Ajv=bt;Rn.exports=X=bt;Rn.exports.Ajv=bt;Object.defineProperty(X,"__esModule",{value:!0});X.default=bt;var Ag=Ut();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return Ag.KeywordCxt}});var Et=D();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Et._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Et.str}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Et.stringify}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Et.nil}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Et.Name}});Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return Et.CodeGen}});var Cg=Er();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return Cg.default}});var Rg=Kt();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return Rg.default}})});var bc=ff($c(),1);var nr=class extends SyntaxError{constructor(t,r,s,i){super(t),this.expected=r,this.found=s,this.location=i,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let s=null,i=t.find(h=>h.source===this.location.source);i&&(s=i.text.split(/\r\n|\n|\r/g));let o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,l=this.location.source+":"+u.line+":"+u.column;if(s){let h=this.location.end,g="".padEnd(u.line.toString().length," "),m=s[o.line-1],b=(o.line===h.line?h.column:m.length+1)-o.column||1;r+=`
 --> `+l+`
`+g+` |
`+u.line+" | "+m+`
`+g+" | "+"".padEnd(o.column-1," ")+"".padEnd(b,"^")}else r+=`
 at `+l}return r}static buildMessage(t,r){function s(b){return b.codePointAt(0).toString(16).toUpperCase()}let i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(b){return i?b.replace(i,$=>"\\u{"+s($)+"}"):b}function u(b){return o(b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}function l(b){return o(b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}let h={literal(b){return'"'+u(b.text)+'"'},class(b){let $=b.parts.map(v=>Array.isArray(v)?l(v[0])+"-"+l(v[1]):l(v));return"["+(b.inverted?"^":"")+$.join("")+"]"+(b.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(b){return b.description}};function g(b){return h[b.type](b)}function m(b){let $=b.map(g);if($.sort(),$.length>0){let v=1;for(let w=1;w<$.length;w++)$[w-1]!==$[w]&&($[v]=$[w],v++);$.length=v}switch($.length){case 1:return $[0];case 2:return $[0]+" or "+$[1];default:return $.slice(0,-1).join(", ")+", or "+$[$.length-1]}}function y(b){return b?'"'+u(b)+'"':"end of input"}return"Expected "+m(t)+" but "+y(r)+" found."}};function _c(e,t){t=t!==void 0?t:{};let r={},s=t.grammarSource,i={program:Pi},o=Pi,u=",",l=";",h="[",g="]",m=":",y="{",b="}",$="=",v="label",w="color",E="class",P="active",L="type",M="regular",H="initial",q="terminate",pe="final",me="parallel",ot="history",at="deephistory",Re="choice",ct="forkjoin",St="fork",Pt="join",ir="junction",Dc="width",zn="external",Un="internal",Kn="->",Gn="=>>",Hn="=>",Jn=">>",Bn=":>",Wn="--",Xn="==",Yn="<-",Zn="<<=",Qn="<=",ei="<<",ti="<:",Vc="#",Lc=".",Me='"',or='\\"',ri="/*",ar="*/",si="//",ni=/^[0-9]/,ii=/^[a-zA-Z0-9_\- ]/,oi=/^[,;{]/,ai=/^[;{]/,ci=/^[^;, "\t\n\r=\-><:{[]/,Fc=/^[ \t]/,zc=/^[\r\n]/,Uc=/^[^\r\n]/,ui=I(",",!1),li=I(";",!1),Kc=Y("state"),fi=I("[",!1),di=I("]",!1),pi=I(":",!1),Gc=I("{",!1),Hc=I("}",!1),Jc=Y("extended state attribute"),He=I("=",!1),Bc=Y("state attribute name"),Wc=I("label",!0),hi=I("color",!0),Xc=Y("class attribute"),Yc=I("class",!0),Zc=Y("state flag"),Qc=I("active",!0),eu=Y("state type"),mi=I("type",!0),tu=Y("state type type"),ru=I("regular",!1),su=I("initial",!1),nu=I("terminate",!1),iu=I("final",!1),ou=I("parallel",!1),au=I("history",!1),cu=I("deephistory",!1),uu=I("choice",!1),lu=I("forkjoin",!1),fu=I("fork",!1),du=I("join",!1),pu=I("junction",!1),hu=Y("transition"),mu=Y("extended transition attribute"),gu=Y("transition attribute name"),yu=Y("transition type name"),$u=Y("numeric transition attribute name"),_u=I("width",!0),vu=Y("transition type value"),wu=I("external",!1),bu=I("internal",!1),Eu=Y("left to right arrow"),Su=I("->",!1),Pu=I("=>>",!1),ku=I("=>",!1),Nu=I(">>",!1),Tu=I(":>",!1),ju=I("--",!1),Ou=I("==",!1),Iu=Y("right to left arrow"),qu=I("<-",!1),Au=I("<<=",!1),Cu=I("<=",!1),Ru=I("<<",!1),Mu=I("<:",!1),xu=I("#",!1),Du=I(".",!1),gi=De([["0","9"]],!1,!1,!1),Vu=Y("double quoted string"),xe=I('"',!1),yi=I('\\"',!1),Je=Il(),Lu=Y("valid class string"),$i=De([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1,!1),_i=De([",",";","{"],!1,!1,!1),vi=De([";","{"],!1,!1,!1),Fu=Y("identifier"),wi=De([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1,!1),zu=Y("whitespace"),Uu=De([" ","	"],!1,!1,!1),Ku=Y("line end"),Gu=De(["\r",`
`],!1,!1,!1),Hu=I("/*",!1),bi=I("*/",!1),Ju=I("//",!1),Bu=De(["\r",`
`],!0,!1,!1),Wu=Y("comment");function Xu(n){return n.states=ee.extractUndeclaredStates(n),ee.classifyForkJoins(n)}function Yu(n,a){let f={};return ee.setIf(f,"states",n),ee.setIfNotEmpty(f,"transitions",a),f}function Yg(n){return n}function Zg(n){return n}function Zu(n){return ee.uniq(n[0].concat(n[1]),ee.stateEqual)}function Qu(n,a,f){return f}function el(n,a,f,d){return d}function tl(n,a,f,d,S){return S}function rl(n,a,f,d,S){let T=ee.initState(a);for(let C of f||[])ee.setIf(T,C.name,C.value);return ee.setIf(T,"typeExplicitlySet",(f||[]).some(C=>C.typeExplicitlySet)),ee.setIf(T,"statemachine",S),ee.setIfNotEmpty(T,"note",n),d&&ee.setIfNotEmpty(T,"actions",ee.extractActions(d)),T}function sl(n,a){return{name:n,value:a}}function nl(n,a){return{name:n,value:a}}function il(n){return{name:n,value:!0}}function ol(n,a){return{name:n,value:a,typeExplicitlySet:!0}}function al(n){return n.toLowerCase()}function cl(n){return n.toLowerCase()}function ul(n){return n.toLowerCase()}function ll(n){return n.toLowerCase()}function fl(n,a,f){return f}function dl(n,a,f,d){return d}function pl(n,a,f,d){d&&(a.label=d,a=Object.assign(a,ee.parseTransitionExpression(d)));for(let S of f||[])ee.setIf(a,S.name,S.value);return ee.setIfNotEmpty(a,"note",n),a.id=t.counter.next(),a}function hl(n,a){return{from:n,to:a}}function ml(n,a){return{from:a,to:n}}function gl(n,a){return{name:n,value:a}}function yl(n,a){return{name:n,value:a}}function $l(n,a){return{name:n,value:a}}function _l(n,a){return{name:n,value:a}}function vl(n){return n.toLowerCase()}function wl(n){return n.toLowerCase()}function Qg(n){return n}function bl(n){return n.join("").trim()}function El(n){return parseFloat(n.join(""))}function Sl(n){return parseInt(n.join(""),10)}function Pl(n){return n.join("").replace(/\\\"/g,'"')}function ey(n){return n}function kl(n){return n.join("")}function ty(n){return n}function Nl(n){return n.join("").trim()}function Tl(n){return n.join("").trim()}function ry(n){return n}function sy(n){return n}function jl(n){return n.join("")}let c=t.peg$currPos|0,j=c,ut=[{line:1,column:1}],ve=c,cr=t.peg$maxFailExpected||[],p=t.peg$silentFails|0,kt;if(t.startRule){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=i[t.startRule]}function ny(){return e.substring(j,c)}function iy(){return j}function oy(){return{source:s,start:j,end:c}}function ay(){return Nt(j,c)}function cy(n,a){throw a=a!==void 0?a:Nt(j,c),Si([Y(n)],e.substring(j,c),a)}function uy(n,a){throw a=a!==void 0?a:Nt(j,c),Al(n,a)}function Ol(n=c){let a=e.codePointAt(n);return a===void 0?"":String.fromCodePoint(a)}function I(n,a){return{type:"literal",text:n,ignoreCase:a}}function De(n,a,f,d){return{type:"class",parts:n,inverted:a,ignoreCase:f,unicode:d}}function Il(){return{type:"any"}}function ql(){return{type:"end"}}function Y(n){return{type:"other",description:n}}function Ei(n){let a=ut[n],f;if(a)return a;if(n>=ut.length)f=ut.length-1;else for(f=n;!ut[--f];);for(a=ut[f],a={line:a.line,column:a.column};f<n;)e.charCodeAt(f)===10?(a.line++,a.column=1):a.column++,f++;return ut[n]=a,a}function Nt(n,a,f){let d=Ei(n),S=Ei(a),T={source:s,start:{offset:n,line:d.line,column:d.column},end:{offset:a,line:S.line,column:S.column}};return f&&s&&typeof s.offset=="function"&&(T.start=s.offset(T.start),T.end=s.offset(T.end)),T}function _(n){c<ve||(c>ve&&(ve=c,cr=[]),cr.push(n))}function Al(n,a){return new nr(n,null,null,a)}function Si(n,a,f){return new nr(nr.buildMessage(n,a),n,a,f)}function Pi(){let n,a,f,d;return n=c,a=O(),f=ki(),d=O(),j=n,n=Xu(f),n}function ki(){let n,a,f,d;for(p++,n=c,a=Cl(),a===r&&(a=null),f=[],d=ji();d!==r;)f.push(d),d=ji();return j=n,n=Yu(a,f),p--,n}function Cl(){let n,a,f,d,S,T;for(n=c,a=c,f=[],d=c,S=Jr(),S!==r?(e.charCodeAt(c)===44?(T=u,c++):(T=r,p===0&&_(ui)),T!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);d!==r;)f.push(d),d=c,S=Jr(),S!==r?(e.charCodeAt(c)===44?(T=u,c++):(T=r,p===0&&_(ui)),T!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);return d=c,S=Jr(),S!==r?(e.charCodeAt(c)===59?(T=l,c++):(T=r,p===0&&_(li)),T!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r),d!==r?(f=[f,d],a=f):(c=a,a=r),a!==r&&(j=n,a=Zu(a)),n=a,n}function Jr(){let n,a,f,d,S,T,C,G,je,he,Be,xi,Xr,lf,Yr;for(p++,n=c,a=[],f=ur();f!==r;)a.push(f),f=ur();return f=O(),d=jt(),d!==r?(S=O(),T=c,e.charCodeAt(c)===91?(C=h,c++):(C=r,p===0&&_(fi)),C!==r?(G=Rl(),e.charCodeAt(c)===93?(je=g,c++):(je=r,p===0&&_(di)),je!==r?(j=T,T=Qu(a,d,G)):(c=T,T=r)):(c=T,T=r),T===r&&(T=null),C=O(),G=c,e.charCodeAt(c)===58?(je=m,c++):(je=r,p===0&&_(pi)),je!==r?(he=O(),Be=Yl(),Be!==r?(xi=O(),j=G,G=el(a,d,T,Be)):(c=G,G=r)):(c=G,G=r),G===r&&(G=null),je=O(),he=c,e.charCodeAt(c)===123?(Be=y,c++):(Be=r,p===0&&_(Gc)),Be!==r?(xi=O(),Xr=ki(),Xr!==r?(lf=O(),e.charCodeAt(c)===125?(Yr=b,c++):(Yr=r,p===0&&_(Hc)),Yr!==r?(j=he,he=tl(a,d,T,G,Xr)):(c=he,he=r)):(c=he,he=r)):(c=he,he=r),he===r&&(he=null),Be=O(),j=n,n=rl(a,d,T,G,he)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Kc)),n}function Rl(){let n,a;for(p++,n=[],a=Ni();a!==r;)n.push(a),a=Ni();return p--,n}function Ni(){let n,a,f,d,S,T,C,G;return p++,n=c,a=O(),f=Ml(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Tt(),C!==r?(G=O(),j=n,n=sl(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Ti(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Ii(),C!==r?(G=O(),j=n,n=nl(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=xl(),f!==r?(d=O(),j=n,n=il(f)):(c=n,n=r),n===r&&(n=c,a=O(),f=Dl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Vl(),C!==r?(G=O(),j=n,n=ol(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(Jc)),n}function Ml(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===v?c+=5:(a=r,p===0&&_(Wc)),a===r&&(a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_(hi))),a!==r&&(j=n,a=al(a)),n=a,p--,n===r&&(a=r,p===0&&_(Bc)),n}function Ti(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===E?c+=5:(a=r,p===0&&_(Yc)),a!==r&&(j=n,a=cl(a)),n=a,p--,n===r&&(a=r,p===0&&_(Xc)),n}function xl(){let n,a;return p++,n=c,a=e.substr(c,6),a.toLowerCase()===P?c+=6:(a=r,p===0&&_(Qc)),a!==r&&(j=n,a=ul(a)),n=a,p--,n===r&&(a=r,p===0&&_(Zc)),n}function Dl(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(mi)),a!==r&&(j=n,a=ll(a)),n=a,p--,n===r&&(a=r,p===0&&_(eu)),n}function Vl(){let n,a;return p++,e.substr(c,7)===M?(n=M,c+=7):(n=r,p===0&&_(ru)),n===r&&(e.substr(c,7)===H?(n=H,c+=7):(n=r,p===0&&_(su)),n===r&&(e.substr(c,9)===q?(n=q,c+=9):(n=r,p===0&&_(nu)),n===r&&(e.substr(c,5)===pe?(n=pe,c+=5):(n=r,p===0&&_(iu)),n===r&&(e.substr(c,8)===me?(n=me,c+=8):(n=r,p===0&&_(ou)),n===r&&(e.substr(c,7)===ot?(n=ot,c+=7):(n=r,p===0&&_(au)),n===r&&(e.substr(c,11)===at?(n=at,c+=11):(n=r,p===0&&_(cu)),n===r&&(e.substr(c,6)===Re?(n=Re,c+=6):(n=r,p===0&&_(uu)),n===r&&(e.substr(c,8)===ct?(n=ct,c+=8):(n=r,p===0&&_(lu)),n===r&&(e.substr(c,4)===St?(n=St,c+=4):(n=r,p===0&&_(fu)),n===r&&(e.substr(c,4)===Pt?(n=Pt,c+=4):(n=r,p===0&&_(du)),n===r&&(e.substr(c,8)===ir?(n=ir,c+=8):(n=r,p===0&&_(pu))))))))))))),p--,n===r&&(a=r,p===0&&_(tu)),n}function ji(){let n,a,f,d,S,T,C,G,je;for(p++,n=c,a=[],f=ur();f!==r;)a.push(f),f=ur();return f=Ll(),f!==r?(d=c,e.charCodeAt(c)===91?(S=h,c++):(S=r,p===0&&_(fi)),S!==r?(T=Fl(),e.charCodeAt(c)===93?(C=g,c++):(C=r,p===0&&_(di)),C!==r?(G=O(),j=d,d=fl(a,f,T)):(c=d,d=r)):(c=d,d=r),d===r&&(d=null),S=c,e.charCodeAt(c)===58?(T=m,c++):(T=r,p===0&&_(pi)),T!==r?(C=O(),G=Xl(),G!==r?(je=O(),j=S,S=dl(a,f,d,G)):(c=S,S=r)):(c=S,S=r),S===r&&(S=null),e.charCodeAt(c)===59?(T=l,c++):(T=r,p===0&&_(li)),T!==r?(j=n,n=pl(a,f,d,S)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(hu)),n}function Ll(){let n,a,f,d,S,T,C,G;return n=c,a=O(),f=jt(),f!==r?(d=O(),S=Hl(),S!==r?(T=O(),C=jt(),C!==r?(G=O(),j=n,n=hl(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=jt(),f!==r?(d=O(),S=Jl(),S!==r?(T=O(),C=jt(),C!==r?(G=O(),j=n,n=ml(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)),n}function Fl(){let n,a;for(p++,n=[],a=Oi();a!==r;)n.push(a),a=Oi();return p--,n}function Oi(){let n,a,f,d,S,T,C,G;return p++,n=c,a=O(),f=zl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Tt(),C!==r?(G=O(),j=n,n=gl(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Ti(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Ii(),C!==r?(G=O(),j=n,n=yl(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Ul(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Gl(),C!==r?(G=O(),j=n,n=$l(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Kl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(He)),S!==r?(T=O(),C=Bl(),C!==r?(G=O(),j=n,n=_l(f,C)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(mu)),n}function zl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_(hi)),a!==r&&(j=n,a=vl(a)),n=a,p--,n===r&&(a=r,p===0&&_(gu)),n}function Ul(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(mi)),a!==r&&(j=n,a=wl(a)),n=a,p--,n===r&&(a=r,p===0&&_(yu)),n}function Kl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===Dc?c+=5:(a=r,p===0&&_(_u)),a!==r&&(j=n,a=a),n=a,p--,n===r&&(a=r,p===0&&_($u)),n}function Gl(){let n,a;return p++,e.substr(c,8)===zn?(n=zn,c+=8):(n=r,p===0&&_(wu)),n===r&&(e.substr(c,8)===Un?(n=Un,c+=8):(n=r,p===0&&_(bu))),p--,n===r&&(a=r,p===0&&_(vu)),n}function Hl(){let n,a;return p++,e.substr(c,2)===Kn?(n=Kn,c+=2):(n=r,p===0&&_(Su)),n===r&&(e.substr(c,3)===Gn?(n=Gn,c+=3):(n=r,p===0&&_(Pu)),n===r&&(e.substr(c,2)===Hn?(n=Hn,c+=2):(n=r,p===0&&_(ku)),n===r&&(e.substr(c,2)===Jn?(n=Jn,c+=2):(n=r,p===0&&_(Nu)),n===r&&(e.substr(c,2)===Bn?(n=Bn,c+=2):(n=r,p===0&&_(Tu)),n===r&&(e.substr(c,2)===Wn?(n=Wn,c+=2):(n=r,p===0&&_(ju)),n===r&&(e.substr(c,2)===Xn?(n=Xn,c+=2):(n=r,p===0&&_(Ou)))))))),p--,n===r&&(a=r,p===0&&_(Eu)),n}function Jl(){let n,a;return p++,e.substr(c,2)===Yn?(n=Yn,c+=2):(n=r,p===0&&_(qu)),n===r&&(e.substr(c,3)===Zn?(n=Zn,c+=3):(n=r,p===0&&_(Au)),n===r&&(e.substr(c,2)===Qn?(n=Qn,c+=2):(n=r,p===0&&_(Cu)),n===r&&(e.substr(c,2)===ei?(n=ei,c+=2):(n=r,p===0&&_(Ru)),n===r&&(e.substr(c,2)===ti?(n=ti,c+=2):(n=r,p===0&&_(Mu)))))),p--,n===r&&(a=r,p===0&&_(Iu)),n}function ur(){let n,a,f,d,S;if(n=c,a=O(),e.charCodeAt(c)===35?(f=Vc,c++):(f=r,p===0&&_(xu)),f!==r){for(d=[],S=lr();S!==r;)d.push(S),S=lr();j=n,n=bl(d)}else c=n,n=r;return n}function Bl(){let n;return n=Wl(),n===r&&(n=Br()),n}function Wl(){let n,a,f,d,S;return n=c,a=c,f=Br(),f!==r?(e.charCodeAt(c)===46?(d=Lc,c++):(d=r,p===0&&_(Du)),d!==r?(S=Br(),S!==r?(f=[f,d,S],a=f):(c=a,a=r)):(c=a,a=r)):(c=a,a=r),a!==r&&(j=n,a=El(a)),n=a,n}function Br(){let n,a,f;if(n=c,a=[],f=e.charAt(c),ni.test(f)?c++:(f=r,p===0&&_(gi)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),ni.test(f)?c++:(f=r,p===0&&_(gi));else a=r;return a!==r&&(j=n,a=Sl(a)),n=a,n}function Xl(){let n;return n=Tt(),n===r&&(n=ef()),n}function Yl(){let n;return n=Tt(),n===r&&(n=tf()),n}function Tt(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Me,c++):(a=r,p===0&&_(xe)),a!==r?(f=Zl(),e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),d!==r?(j=n,n=Pl(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Vu)),n}function Zl(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===or?(d=or,c+=2):(d=r,p===0&&_(yi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===or?(d=or,c+=2):(d=r,p===0&&_(yi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function Ii(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Me,c++):(a=r,p===0&&_(xe)),a!==r?(f=Ql(),e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),d!==r?(j=n,n=kl(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Lu)),n}function Ql(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),ii.test(d)?c++:(d=r,p===0&&_($i)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Me,c++):(d=r,p===0&&_(xe)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),ii.test(d)?c++:(d=r,p===0&&_($i)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function ef(){let n,a;return n=c,a=sf(),j=n,a=Nl(a),n=a,n}function tf(){let n,a;return n=c,a=rf(),j=n,a=Tl(a),n=a,n}function rf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),oi.test(d)?c++:(d=r,p===0&&_(_i)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),oi.test(d)?c++:(d=r,p===0&&_(_i)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function sf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),ai.test(d)?c++:(d=r,p===0&&_(vi)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),ai.test(d)?c++:(d=r,p===0&&_(vi)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(Je)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function jt(){let n,a,f;if(p++,n=c,a=[],f=e.charAt(c),ci.test(f)?c++:(f=r,p===0&&_(wi)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),ci.test(f)?c++:(f=r,p===0&&_(wi));else a=r;return a!==r&&(j=n,a=jl(a)),n=a,n===r&&(n=Tt()),p--,n===r&&(a=r,p===0&&_(Fu)),n}function qi(){let n,a;return p++,n=e.charAt(c),Fc.test(n)?c++:(n=r,p===0&&_(Uu)),p--,n===r&&(a=r,p===0&&_(zu)),n}function Ai(){let n,a;return p++,n=e.charAt(c),zc.test(n)?c++:(n=r,p===0&&_(Gu)),p--,n===r&&(a=r,p===0&&_(Ku)),n}function nf(){let n;return e.substr(c,2)===ri?(n=ri,c+=2):(n=r,p===0&&_(Hu)),n}function of(){let n;return e.substr(c,2)===ar?(n=ar,c+=2):(n=r,p===0&&_(bi)),n}function Ci(){let n,a,f;return n=c,a=c,p++,e.substr(c,2)===ar?(f=ar,c+=2):(f=r,p===0&&_(bi)),p--,f===r?a=void 0:(c=a,a=r),a!==r?(e.length>c?(f=e.charAt(c),c++):(f=r,p===0&&_(Je)),f!==r?(a=[a,f],n=a):(c=n,n=r)):(c=n,n=r),n}function af(){let n,a,f,d;if(n=c,a=nf(),a!==r){for(f=[],d=Ci();d!==r;)f.push(d),d=Ci();d=of(),d!==r?(a=[a,f,d],n=a):(c=n,n=r)}else c=n,n=r;return n}function cf(){let n;return e.substr(c,2)===si?(n=si,c+=2):(n=r,p===0&&_(Ju)),n}function lr(){let n;return n=e.charAt(c),Uc.test(n)?c++:(n=r,p===0&&_(Bu)),n}function uf(){let n,a,f,d;if(n=c,a=cf(),a!==r){for(f=[],d=lr();d!==r;)f.push(d),d=lr();a=[a,f],n=a}else c=n,n=r;return n}function Ri(){let n,a;return p++,n=uf(),n===r&&(n=af()),p--,n===r&&(a=r,p===0&&_(Wu)),n}function O(){let n,a;for(n=[],a=qi(),a===r&&(a=Ai(),a===r&&(a=Ri()));a!==r;)n.push(a),a=qi(),a===r&&(a=Ai(),a===r&&(a=Ri()));return n}kt=o();let Wr=kt!==r&&c===e.length;function Mi(){throw kt!==r&&c<e.length&&_(ql()),Si(cr,ve<e.length?Ol(ve):null,ve<e.length?Nt(ve,ve+1):Nt(ve,ve))}if(t.peg$library)return{peg$result:kt,peg$currPos:c,peg$FAILED:r,peg$maxFailExpected:cr,peg$maxFailPos:ve,peg$success:Wr,peg$throw:Wr?void 0:Mi};if(Wr)return kt;Mi()}function vc(e){return _c(e,{counter:new Di})}var wc={$schema:"http://json-schema.org/draft-07/schema#",title:"state-machine-cat abstract syntax tree schema",$ref:"#/definitions/StateMachineType",$id:"org.js.state-machine-cat/v7.4.0",definitions:{StateType:{type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},TransitionType:{type:"string",enum:["internal","external"]},NoteType:{type:"array",items:{type:"string"}},ActionTypeType:{type:"string",enum:["entry","activity","exit"]},ActionType:{type:"object",required:["type","body"],additionalProperties:!1,properties:{type:{$ref:"#/definitions/ActionTypeType"},body:{type:"string"}}},ClassType:{type:"string",pattern:"^[a-zA-Z0-9_\\- ]*$"},StateMachineType:{type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{description:"The name and identifier of the state. Unique within the root state machine.",type:"string"},type:{description:"What kind of state (or pseudo state) this state is. E.g. 'regular' for normal states or 'initial', 'final', 'choice' etc for pseudo states. Most UML (pseudo-) states are supported.",$ref:"#/definitions/StateType"},label:{description:"The display label of the state. If it's not present, most renderers will use the states' name in stead.",type:"string"},color:{description:'Color to use for rendering the state. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},active:{description:"If true the state is considered to be active and rendered as such.",type:"boolean"},typeExplicitlySet:{description:"The default parser derives the `type` from the `name` with inband signaling. The user can override that behavior by explicitly setting the `type`. This attribute is there to express that (and make sure that on next parses & processing it doesn't get accidentily re-derived from the name again).",type:"boolean"},isComposite:{description:"convenience, derived attribute - set to true if there's a state machine inside the state; false in all other cases. For internal use - @deprecated",type:"boolean"},actions:{type:"array",description:"A series of actions and their types. The type describe when the action takes place (on entry, exit, or otherwise ('activity'))",items:{$ref:"#/definitions/ActionType"}},note:{description:"Comments related to this state. Some renderers will use the note attribute to render a note (i.e. as a post-it) attached to the state.",$ref:"#/definitions/NoteType"},statemachine:{description:"state machine nested within the state.",$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["id","from","to"],additionalProperties:!1,properties:{id:{type:"number"},from:{description:"The name of the state this transition transitions from",type:"string"},to:{description:"The name of the state this transition transitions to",type:"string"},label:{description:"A display label to represent this transition. Parsers can parse this label into events conditions and actions.",type:"string"},event:{description:"Event triggering the transition",type:"string"},cond:{description:"Condition for the transition to occur.",type:"string"},action:{description:"Action to execute when the transition occurs.",type:"string"},note:{description:"Comments related to this transition",$ref:"#/definitions/NoteType"},color:{description:'Color to use for rendering the transition. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},width:{description:"The line width to use for rendering the transition",type:"number",minimum:0,maximum:30},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},type:{description:"Whether the transition is external (default) or internal. See https://www.w3.org/TR/scxml/#transition for details.",$ref:"#/definitions/TransitionType"}}}}}}}};var Ec=new bc.default,Mg=Ec.compile(wc),xg=async e=>{let{parse:t}=await import("./scxml-R2W27J6G.js");return t(e)},Sc={async getAST(e,t){let r=e;if(We.getOptionValue(t,"inputType")==="smcat"?r=vc(e):We.getOptionValue(t,"inputType")==="scxml"?r=await xg(e):typeof e=="string"&&(r=JSON.parse(e)),!Mg(r))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${Ec.errorsText()}.
`);return r}};var Pc=null,kc=null,Nc=null,Tc=null,jc=null;async function Mn(e){switch(e){case"smcat":return Pc=await import("./smcat-VDXHMLA6.js"),Pc.default;case"dot":return kc=await import("./dot-SXXHRXIQ.js"),kc.default;case"svg":case"oldsvg":return Nc=await import("./vector-with-wasm-LD6NPY2C.js"),Nc.default;case"scjson":return Tc=await import("./scjson-XD7SVYRX.js"),Tc.default;case"scxml":return jc=await import("./scxml-G3R7NVLX.js"),jc.default;default:return t=>t}}var Oc="13.0.3";var xn=null;async function Dg(e){xn||(xn=await import("./desugar-VTQNQ7QN.js"));let t=xn.default;return t(e)}async function Vg(e,t){let r=t??{},s=await Sc.getAST(e,r),i=We.getOptionValue(r,"desugar");return(await Mn(We.getOptionValue(r,"outputType")))(i?await Dg(s):s,r)}var Lg=Oc;function Fg(){return We.getAllowedValues()}var Gr={render:Vg,version:Lg,getAllowedValues:Fg};var Ic=(e,t)=>{let r=document.createElement("img");r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e)),r.addEventListener("load",function(s){let i=document.createElement("canvas"),o=i.getContext("2d"),u=s.target;u.width>32767||u.height>32767?t(null,"image-too-big"):(i.width=u.width,i.height=u.height,o.drawImage(u,0,0),t(i.toDataURL("image/png",.8)))})};var qc={engineering:{dotGraphAttrs:[{name:"bgcolor",value:"dodgerblue"},{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}]},reverse:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}]},contrast:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotNodeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotEdgeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}]},policetape:{dotGraphAttrs:[{name:"bgcolor",value:"yellow"}],dotNodeAttrs:[],dotEdgeAttrs:[]},transparent:{dotGraphAttrs:[{name:"bgcolor",value:"transparent"}],dotNodeAttrs:[],dotEdgeAttrs:[]},zany:{dotGraphAttrs:[{name:"bgcolor",value:"deeppink"},{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"},{name:"nslimit",value:"0"},{name:"nslimit1",value:"1"}],dotNodeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}],dotEdgeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}]}};var Ln=`state-machine-cat-${Gr.version.split(".")[0]}`,zg=`initial,
"media player off",

"media player on" {
  stopped, playing, paused;

  stopped => playing : play;
  playing => stopped : stop;
  playing => paused  : pause;
  paused  => playing : pause;
  paused  => stopped : stop;
};

initial            => "media player off";
"media player off" => stopped           : power;
"media player on"  => "media player off" : power;`,Q={outputType:"svg",inputType:"smcat",engine:"dot",theme:"vanilla",direction:"top-down",fitToWidth:!1,desugar:!1,autoRender:!0,inputscript:zg,sample:"/samples/mediaplayer.smcat"};function Dn(e){return t=>t.substr(0,1)===e}function Vn(e){return t=>({name:t.substr(1),value:e[t]})}function Cc(e,t){typeof localStorage<"u"&&localStorage.setItem(e,JSON.stringify(t))}function Ug(e,t){let r=t;if(typeof localStorage<"u")try{r=JSON.parse(localStorage.getItem(e))||t}catch{}return r}function Kg(e){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e))}function se(e){return t=>{Q[e||t.target.id]=t.target.type==="checkbox"?t.target.checked:t.target.value,Cc(Ln,Q),Fn(Q)}}function Rc(){return window.output.getElementsByTagName("svg").length>0}function Fn(e){if(document.getElementById("autoRender").checked=e.autoRender,document.getElementById("fitToWidth").checked=e.fitToWidth,document.getElementById("desugar").checked=e.desugar,document.getElementById("engine").value=e.engine,document.getElementById("theme").value=e.theme,document.getElementById("direction").value=e.direction,document.getElementById("sample").value=e.sample,document.getElementById("inputscript").value=e.inputscript,document.getElementById(e.outputType).checked=!0,document.getElementById(`input_${e.inputType}`).checked=!0,Q.autoRender?(document.getElementById("render").style="display : none",Mc()):document.getElementById("render").style="",Rc()){let t=window.output.getElementsByTagName("svg"),r=new Date().toISOString();document.getElementById("save-svg").href=Kg(t[0].outerHTML),document.getElementById("save-svg").download=`state-machine-${r}.svg`,Ic(t[0].outerHTML,s=>{document.getElementById("save-png").href=s,document.getElementById("save-png").download=`state-machine-${r}.png`})}}function Gg(e){let t=Object.keys(e).filter(Dn("G")).map(Vn(e)),r=Object.keys(e).filter(Dn("N")).map(Vn(e)),s=Object.keys(e).filter(Dn("E")).map(Vn(e)),i={};return t.length>0&&(i.dotGraphAttrs=t),r.length>0&&(i.dotNodeAttrs=r),s.length>0&&(i.dotEdgeAttrs=s),i}function Hg(e){let t=new URLSearchParams(e),r={};for(let[s,i]of t.entries())r[s]=i;return r}function Jg(e,t){return e[t]||{dotGraphAttrs:[],dotNodeAttrs:[],dotEdgeAttrs:[]}}function Bg(e){return e.slice(0,1024).replace(/</g,"&lt;")}async function Mc(){window.output.textContent="Loading ...";try{let e=Bg(location.search),t=Object.assign({inputType:Q.inputType,outputType:Q.outputType,engine:Q.engine,direction:Q.direction,desugar:Q.desugar},Jg(qc,Q.theme),Gg(Hg(e))),r=await Gr.render(Q.inputscript,t);window.output.style=`background-color: ${(t.dotGraphAttrs.find(s=>s.name==="bgcolor")||{value:"transparent"}).value}`,window.output.innerHTML=Wg(r,Q.outputType,Q.fitToWidth)}catch(e){window.output.textContent=e}}function Wg(e,t,r){switch(t){case"json":case"scjson":return`<pre>${JSON.stringify(e,null,"    ").replace(/</g,"&lt;")}</pre>`;case"svg":return r?e.replace(/svg width="[^"]+"/g,'svg width="100%"'):e;default:return`<pre>${e.replace(/</g,"&lt;")}</pre>`}}function xc(){window.inputscript.style.height="${height}px".replace("${height}",window.innerHeight-120)}function Xg(e,t){window.contextmenu.style=`display: block; position: absolute; z-index: 2; left: ${e}px; top: ${t-70}px`}function Hr(){window.contextmenu.style="display : none"}function Ac(e){LOG}Q=Ug(Ln,Q);window.svg.addEventListener("click",se("outputType"),!1);window.dot.addEventListener("click",se("outputType"),!1);window.json.addEventListener("click",se("outputType"),!1);window.smcat.addEventListener("click",se("outputType"),!1);window.scjson.addEventListener("click",se("outputType"),!1);window.scxml.addEventListener("click",se("outputType"),!1);window.svg.addEventListener("click",se("outputType"),!1);window.inputscript.addEventListener("input",se());window.direction.addEventListener("change",se());window.engine.addEventListener("change",se());window.theme.addEventListener("change",se());window.input_json.addEventListener("click",se("inputType"),!1);window.input_smcat.addEventListener("click",se("inputType"),!1);window.input_scxml.addEventListener("click",se("inputType"),!1);window.fitToWidth.addEventListener("click",se(),!1);window.autoRender.addEventListener("click",se(),!1);window.desugar.addEventListener("click",se(),!1);window.render.addEventListener("click",async()=>await Mc(),!1);window.addEventListener("resize",xc);window.output.addEventListener("contextmenu",e=>{Rc()&&(e.preventDefault(),Xg(e.clientX,e.clientY))});document.getElementById("save-svg").addEventListener("click",Hr);document.getElementById("save-png").addEventListener("click",Hr);window.output.addEventListener("click",Hr);window.addEventListener("keyup",e=>{e.code==="Escape"&&Hr()});window.sample.addEventListener("change",e=>{e.target.value&&(Q.sample=e.target.value,fetch(e.target.value).then(t=>{if(t.status===200)return t.text();Ac(t)}).then(t=>{t&&(Q.inputscript=t,Cc(Ln,Q),Fn(Q))}).catch(Ac))});window.version.innerHTML="state machine cat ${version}".replace("${version}",Gr.version);xc();Fn(Q);
//# sourceMappingURL=smcat-online-interpreter.js.map
