import{b as Ji,c as Bi,d as Wi,e as Xi,f as Yi,g as Zi,h as ut,i as Ot,j as Qi}from"./chunk-34DTPQC7.js";import{a as ct}from"./chunk-PWCD3LMQ.js";import{a as Hi}from"./chunk-QBCC6J4V.js";import"./chunk-DSGGCMS6.js";import{a as k,b as gf}from"./chunk-FW4363Y4.js";var Rt=k(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.regexpCode=U.getEsmExportName=U.getProperty=U.safeStringify=U.stringify=U.strConcat=U.addCodeArg=U.str=U._=U.nil=U._Code=U.Name=U.IDENTIFIER=U._CodeOrName=void 0;var qt=class{};U._CodeOrName=qt;U.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Be=class extends qt{constructor(t){if(super(),!U.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};U.Name=Be;var me=class extends qt{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,s)=>(s instanceof Be&&(r[s.str]=(r[s.str]||0)+1),r),{})}};U._Code=me;U.nil=new me("");function eo(e,...t){let r=[e[0]],s=0;for(;s<t.length;)es(r,t[s]),r.push(e[++s]);return new me(r)}U._=eo;var Qr=new me("+");function to(e,...t){let r=[It(e[0])],s=0;for(;s<t.length;)r.push(Qr),es(r,t[s]),r.push(Qr,It(e[++s]));return yf(r),new me(r)}U.str=to;function es(e,t){t instanceof me?e.push(...t._items):t instanceof Be?e.push(t):e.push(vf(t))}U.addCodeArg=es;function yf(e){let t=1;for(;t<e.length-1;){if(e[t]===Qr){let r=$f(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function $f(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Be||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Be))return`"${e}${t.slice(1)}`}function _f(e,t){return t.emptyStr()?e:e.emptyStr()?t:to`${e}${t}`}U.strConcat=_f;function vf(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:It(Array.isArray(e)?e.join(","):e)}function wf(e){return new me(It(e))}U.stringify=wf;function It(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}U.safeStringify=It;function bf(e){return typeof e=="string"&&U.IDENTIFIER.test(e)?new me(`.${e}`):eo`[${e}]`}U.getProperty=bf;function Ef(e){if(typeof e=="string"&&U.IDENTIFIER.test(e))return new me(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}U.getEsmExportName=Ef;function Sf(e){return new me(e.toString())}U.regexpCode=Sf});var ss=k(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.ValueScope=ue.ValueScopeName=ue.Scope=ue.varKinds=ue.UsedValueState=void 0;var ce=Rt(),ts=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},dr;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(dr||(ue.UsedValueState=dr={}));ue.varKinds={const:new ce.Name("const"),let:new ce.Name("let"),var:new ce.Name("var")};var pr=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof ce.Name?t:this.name(t)}name(t){return new ce.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};ue.Scope=pr;var hr=class extends ce.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:s}){this.value=t,this.scopePath=(0,ce._)`.${new ce.Name(r)}[${s}]`}};ue.ValueScopeName=hr;var Pf=(0,ce._)`\n`,rs=class extends pr{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Pf:ce.nil}}get(){return this._scope}name(t){return new hr(t,this._newName(t))}value(t,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:o}=i,u=(s=r.key)!==null&&s!==void 0?s:r.ref,l=this._values[o];if(l){let m=l.get(u);if(m)return m}else l=this._values[o]=new Map;l.set(u,i);let h=this._scope[o]||(this._scope[o]=[]),g=h.length;return h[g]=r.ref,i.setValue(r,{property:o,itemIndex:g}),i}getValue(t,r){let s=this._values[t];if(s)return s.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,ce._)`${t}${s.scopePath}`})}scopeCode(t=this._values,r,s){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,s)}_reduceValues(t,r,s={},i){let o=ce.nil;for(let u in t){let l=t[u];if(!l)continue;let h=s[u]=s[u]||new Map;l.forEach(g=>{if(h.has(g))return;h.set(g,dr.Started);let m=r(g);if(m){let y=this.opts.es5?ue.varKinds.var:ue.varKinds.const;o=(0,ce._)`${o}${y} ${g} = ${m};${this.opts._n}`}else if(m=i?.(g))o=(0,ce._)`${o}${m}${this.opts._n}`;else throw new ts(g);h.set(g,dr.Completed)})}return o}};ue.ValueScope=rs});var D=k(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.or=x.and=x.not=x.CodeGen=x.operators=x.varKinds=x.ValueScopeName=x.ValueScope=x.Scope=x.Name=x.regexpCode=x.stringify=x.getProperty=x.nil=x.strConcat=x.str=x._=void 0;var F=Rt(),ve=ss(),De=Rt();Object.defineProperty(x,"_",{enumerable:!0,get:function(){return De._}});Object.defineProperty(x,"str",{enumerable:!0,get:function(){return De.str}});Object.defineProperty(x,"strConcat",{enumerable:!0,get:function(){return De.strConcat}});Object.defineProperty(x,"nil",{enumerable:!0,get:function(){return De.nil}});Object.defineProperty(x,"getProperty",{enumerable:!0,get:function(){return De.getProperty}});Object.defineProperty(x,"stringify",{enumerable:!0,get:function(){return De.stringify}});Object.defineProperty(x,"regexpCode",{enumerable:!0,get:function(){return De.regexpCode}});Object.defineProperty(x,"Name",{enumerable:!0,get:function(){return De.Name}});var $r=ss();Object.defineProperty(x,"Scope",{enumerable:!0,get:function(){return $r.Scope}});Object.defineProperty(x,"ValueScope",{enumerable:!0,get:function(){return $r.ValueScope}});Object.defineProperty(x,"ValueScopeName",{enumerable:!0,get:function(){return $r.ValueScopeName}});Object.defineProperty(x,"varKinds",{enumerable:!0,get:function(){return $r.varKinds}});x.operators={GT:new F._Code(">"),GTE:new F._Code(">="),LT:new F._Code("<"),LTE:new F._Code("<="),EQ:new F._Code("==="),NEQ:new F._Code("!=="),NOT:new F._Code("!"),OR:new F._Code("||"),AND:new F._Code("&&"),ADD:new F._Code("+")};var je=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},ns=class extends je{constructor(t,r,s){super(),this.varKind=t,this.name=r,this.rhs=s}render({es5:t,_n:r}){let s=t?ve.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=ft(this.rhs,t,r)),this}get names(){return this.rhs instanceof F._CodeOrName?this.rhs.names:{}}},mr=class extends je{constructor(t,r,s){super(),this.lhs=t,this.rhs=r,this.sideEffects=s}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof F.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=ft(this.rhs,t,r),this}get names(){let t=this.lhs instanceof F.Name?{}:{...this.lhs.names};return yr(t,this.rhs)}},is=class extends mr{constructor(t,r,s,i){super(t,s,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},os=class extends je{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},as=class extends je{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},cs=class extends je{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},us=class extends je{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=ft(this.code,t,r),this}get names(){return this.code instanceof F._CodeOrName?this.code.names:{}}},At=class extends je{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,s)=>r+s.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let s=t[r].optimizeNodes();Array.isArray(s)?t.splice(r,1,...s):s?t[r]=s:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:s}=this,i=s.length;for(;i--;){let o=s[i];o.optimizeNames(t,r)||(kf(t,o.names),s.splice(i,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Ye(t,r.names),{})}},Oe=class extends At{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},ls=class extends At{},lt=class extends Oe{};lt.kind="else";var We=class e extends Oe{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new lt(s):s}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(ro(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=ft(this.condition,t,r),this}get names(){let t=super.names;return yr(t,this.condition),this.else&&Ye(t,this.else.names),t}};We.kind="if";var Xe=class extends Oe{};Xe.kind="for";var fs=class extends Xe{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=ft(this.iteration,t,r),this}get names(){return Ye(super.names,this.iteration.names)}},ds=class extends Xe{constructor(t,r,s,i){super(),this.varKind=t,this.name=r,this.from=s,this.to=i}render(t){let r=t.es5?ve.varKinds.var:this.varKind,{name:s,from:i,to:o}=this;return`for(${r} ${s}=${i}; ${s}<${o}; ${s}++)`+super.render(t)}get names(){let t=yr(super.names,this.from);return yr(t,this.to)}},gr=class extends Xe{constructor(t,r,s,i){super(),this.loop=t,this.varKind=r,this.name=s,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=ft(this.iterable,t,r),this}get names(){return Ye(super.names,this.iterable.names)}},Ct=class extends Oe{constructor(t,r,s){super(),this.name=t,this.args=r,this.async=s}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Ct.kind="func";var Mt=class extends At{render(t){return"return "+super.render(t)}};Mt.kind="return";var ps=class extends Oe{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var s,i;return super.optimizeNames(t,r),(s=this.catch)===null||s===void 0||s.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Ye(t,this.catch.names),this.finally&&Ye(t,this.finally.names),t}},xt=class extends Oe{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};xt.kind="catch";var Dt=class extends Oe{render(t){return"finally"+super.render(t)}};Dt.kind="finally";var hs=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new ve.Scope({parent:t}),this._nodes=[new ls]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let s=this._extScope.value(t,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,s,i){let o=this._scope.toName(r);return s!==void 0&&i&&(this._constants[o.str]=s),this._leafNode(new ns(t,o,s)),o}const(t,r,s){return this._def(ve.varKinds.const,t,r,s)}let(t,r,s){return this._def(ve.varKinds.let,t,r,s)}var(t,r,s){return this._def(ve.varKinds.var,t,r,s)}assign(t,r,s){return this._leafNode(new mr(t,r,s))}add(t,r){return this._leafNode(new is(t,x.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==F.nil&&this._leafNode(new us(t)),this}object(...t){let r=["{"];for(let[s,i]of t)r.length>1&&r.push(","),r.push(s),(s!==i||this.opts.es5)&&(r.push(":"),(0,F.addCodeArg)(r,i));return r.push("}"),new F._Code(r)}if(t,r,s){if(this._blockNode(new We(t)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new We(t))}else(){return this._elseNode(new lt)}endIf(){return this._endBlockNode(We,lt)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new fs(t),r)}forRange(t,r,s,i,o=this.opts.es5?ve.varKinds.var:ve.varKinds.let){let u=this._scope.toName(t);return this._for(new ds(o,u,r,s),()=>i(u))}forOf(t,r,s,i=ve.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let u=r instanceof F.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,F._)`${u}.length`,l=>{this.var(o,(0,F._)`${u}[${l}]`),s(o)})}return this._for(new gr("of",i,o,r),()=>s(o))}forIn(t,r,s,i=this.opts.es5?ve.varKinds.var:ve.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,F._)`Object.keys(${r})`,s);let o=this._scope.toName(t);return this._for(new gr("in",i,o,r),()=>s(o))}endFor(){return this._endBlockNode(Xe)}label(t){return this._leafNode(new os(t))}break(t){return this._leafNode(new as(t))}return(t){let r=new Mt;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Mt)}try(t,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new ps;if(this._blockNode(i),this.code(t),r){let o=this.name("e");this._currNode=i.catch=new xt(o),r(o)}return s&&(this._currNode=i.finally=new Dt,this.code(s)),this._endBlockNode(xt,Dt)}throw(t){return this._leafNode(new cs(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||t!==void 0&&s!==t)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=F.nil,s,i){return this._blockNode(new Ct(t,r,s)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(Ct)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let s=this._currNode;if(s instanceof t||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof We))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};x.CodeGen=hs;function Ye(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function yr(e,t){return t instanceof F._CodeOrName?Ye(e,t.names):e}function ft(e,t,r){if(e instanceof F.Name)return s(e);if(!i(e))return e;return new F._Code(e._items.reduce((o,u)=>(u instanceof F.Name&&(u=s(u)),u instanceof F._Code?o.push(...u._items):o.push(u),o),[]));function s(o){let u=r[o.str];return u===void 0||t[o.str]!==1?o:(delete t[o.str],u)}function i(o){return o instanceof F._Code&&o._items.some(u=>u instanceof F.Name&&t[u.str]===1&&r[u.str]!==void 0)}}function kf(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function ro(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,F._)`!${ms(e)}`}x.not=ro;var Tf=so(x.operators.AND);function Nf(...e){return e.reduce(Tf)}x.and=Nf;var jf=so(x.operators.OR);function Of(...e){return e.reduce(jf)}x.or=Of;function so(e){return(t,r)=>t===F.nil?r:r===F.nil?t:(0,F._)`${ms(t)} ${e} ${ms(r)}`}function ms(e){return e instanceof F.Name?e:(0,F._)`(${e})`}});var K=k(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.checkStrictMode=V.getErrorPath=V.Type=V.useFunc=V.setEvaluated=V.evaluatedPropsToName=V.mergeEvaluated=V.eachItem=V.unescapeJsonPointer=V.escapeJsonPointer=V.escapeFragment=V.unescapeFragment=V.schemaRefOrVal=V.schemaHasRulesButRef=V.schemaHasRules=V.checkUnknownRules=V.alwaysValidSchema=V.toHash=void 0;var B=D(),qf=Rt();function If(e){let t={};for(let r of e)t[r]=!0;return t}V.toHash=If;function Rf(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(oo(e,t),!ao(t,e.self.RULES.all))}V.alwaysValidSchema=Rf;function oo(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=s.RULES.keywords;for(let o in t)i[o]||lo(e,`unknown keyword: "${o}"`)}V.checkUnknownRules=oo;function ao(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}V.schemaHasRules=ao;function Af(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}V.schemaHasRulesButRef=Af;function Cf({topSchemaRef:e,schemaPath:t},r,s,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,B._)`${r}`}return(0,B._)`${e}${t}${(0,B.getProperty)(s)}`}V.schemaRefOrVal=Cf;function Mf(e){return co(decodeURIComponent(e))}V.unescapeFragment=Mf;function xf(e){return encodeURIComponent(ys(e))}V.escapeFragment=xf;function ys(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}V.escapeJsonPointer=ys;function co(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}V.unescapeJsonPointer=co;function Df(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}V.eachItem=Df;function no({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(i,o,u,l)=>{let h=u===void 0?o:u instanceof B.Name?(o instanceof B.Name?e(i,o,u):t(i,o,u),u):o instanceof B.Name?(t(i,u,o),o):r(o,u);return l===B.Name&&!(h instanceof B.Name)?s(i,h):h}}V.mergeEvaluated={props:no({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,B._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,B._)`${r} || {}`).code((0,B._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,B._)`${r} || {}`),$s(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:uo}),items:no({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,B._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,B._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function uo(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,B._)`{}`);return t!==void 0&&$s(e,r,t),r}V.evaluatedPropsToName=uo;function $s(e,t,r){Object.keys(r).forEach(s=>e.assign((0,B._)`${t}${(0,B.getProperty)(s)}`,!0))}V.setEvaluated=$s;var io={};function Vf(e,t){return e.scopeValue("func",{ref:t,code:io[t.code]||(io[t.code]=new qf._Code(t.code))})}V.useFunc=Vf;var gs;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(gs||(V.Type=gs={}));function Lf(e,t,r){if(e instanceof B.Name){let s=t===gs.Num;return r?s?(0,B._)`"[" + ${e} + "]"`:(0,B._)`"['" + ${e} + "']"`:s?(0,B._)`"/" + ${e}`:(0,B._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,B.getProperty)(e).toString():"/"+ys(e)}V.getErrorPath=Lf;function lo(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}V.checkStrictMode=lo});var qe=k(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});var se=D(),Ff={data:new se.Name("data"),valCxt:new se.Name("valCxt"),instancePath:new se.Name("instancePath"),parentData:new se.Name("parentData"),parentDataProperty:new se.Name("parentDataProperty"),rootData:new se.Name("rootData"),dynamicAnchors:new se.Name("dynamicAnchors"),vErrors:new se.Name("vErrors"),errors:new se.Name("errors"),this:new se.Name("this"),self:new se.Name("self"),scope:new se.Name("scope"),json:new se.Name("json"),jsonPos:new se.Name("jsonPos"),jsonLen:new se.Name("jsonLen"),jsonPart:new se.Name("jsonPart")};_s.default=Ff});var Vt=k(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.extendErrors=ne.resetErrorsCount=ne.reportExtraError=ne.reportError=ne.keyword$DataError=ne.keywordError=void 0;var z=D(),_r=K(),oe=qe();ne.keywordError={message:({keyword:e})=>(0,z.str)`must pass "${e}" keyword validation`};ne.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,z.str)`"${e}" keyword must be ${t} ($data)`:(0,z.str)`"${e}" keyword is invalid ($data)`};function zf(e,t=ne.keywordError,r,s){let{it:i}=e,{gen:o,compositeRule:u,allErrors:l}=i,h=ho(e,t,r);s??(u||l)?fo(o,h):po(i,(0,z._)`[${h}]`)}ne.reportError=zf;function Uf(e,t=ne.keywordError,r){let{it:s}=e,{gen:i,compositeRule:o,allErrors:u}=s,l=ho(e,t,r);fo(i,l),o||u||po(s,oe.default.vErrors)}ne.reportExtraError=Uf;function Kf(e,t){e.assign(oe.default.errors,t),e.if((0,z._)`${oe.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,z._)`${oe.default.vErrors}.length`,t),()=>e.assign(oe.default.vErrors,null)))}ne.resetErrorsCount=Kf;function Gf({gen:e,keyword:t,schemaValue:r,data:s,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let u=e.name("err");e.forRange("i",i,oe.default.errors,l=>{e.const(u,(0,z._)`${oe.default.vErrors}[${l}]`),e.if((0,z._)`${u}.instancePath === undefined`,()=>e.assign((0,z._)`${u}.instancePath`,(0,z.strConcat)(oe.default.instancePath,o.errorPath))),e.assign((0,z._)`${u}.schemaPath`,(0,z.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,z._)`${u}.schema`,r),e.assign((0,z._)`${u}.data`,s))})}ne.extendErrors=Gf;function fo(e,t){let r=e.const("err",t);e.if((0,z._)`${oe.default.vErrors} === null`,()=>e.assign(oe.default.vErrors,(0,z._)`[${r}]`),(0,z._)`${oe.default.vErrors}.push(${r})`),e.code((0,z._)`${oe.default.errors}++`)}function po(e,t){let{gen:r,validateName:s,schemaEnv:i}=e;i.$async?r.throw((0,z._)`new ${e.ValidationError}(${t})`):(r.assign((0,z._)`${s}.errors`,t),r.return(!1))}var Ze={keyword:new z.Name("keyword"),schemaPath:new z.Name("schemaPath"),params:new z.Name("params"),propertyName:new z.Name("propertyName"),message:new z.Name("message"),schema:new z.Name("schema"),parentSchema:new z.Name("parentSchema")};function ho(e,t,r){let{createErrors:s}=e.it;return s===!1?(0,z._)`{}`:Hf(e,t,r)}function Hf(e,t,r={}){let{gen:s,it:i}=e,o=[Jf(i,r),Bf(e,r)];return Wf(e,t,o),s.object(...o)}function Jf({errorPath:e},{instancePath:t}){let r=t?(0,z.str)`${e}${(0,_r.getErrorPath)(t,_r.Type.Str)}`:e;return[oe.default.instancePath,(0,z.strConcat)(oe.default.instancePath,r)]}function Bf({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:s}){let i=s?t:(0,z.str)`${t}/${e}`;return r&&(i=(0,z.str)`${i}${(0,_r.getErrorPath)(r,_r.Type.Str)}`),[Ze.schemaPath,i]}function Wf(e,{params:t,message:r},s){let{keyword:i,data:o,schemaValue:u,it:l}=e,{opts:h,propertyName:g,topSchemaRef:m,schemaPath:y}=l;s.push([Ze.keyword,i],[Ze.params,typeof t=="function"?t(e):t||(0,z._)`{}`]),h.messages&&s.push([Ze.message,typeof r=="function"?r(e):r]),h.verbose&&s.push([Ze.schema,u],[Ze.parentSchema,(0,z._)`${m}${y}`],[oe.default.data,o]),g&&s.push([Ze.propertyName,g])}});var go=k(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.boolOrEmptySchema=dt.topBoolOrEmptySchema=void 0;var Xf=Vt(),Yf=D(),Zf=qe(),Qf={message:"boolean schema is false"};function ed(e){let{gen:t,schema:r,validateName:s}=e;r===!1?mo(e,!1):typeof r=="object"&&r.$async===!0?t.return(Zf.default.data):(t.assign((0,Yf._)`${s}.errors`,null),t.return(!0))}dt.topBoolOrEmptySchema=ed;function td(e,t){let{gen:r,schema:s}=e;s===!1?(r.var(t,!1),mo(e)):r.var(t,!0)}dt.boolOrEmptySchema=td;function mo(e,t){let{gen:r,data:s}=e,i={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Xf.reportError)(i,Qf,void 0,t)}});var vs=k(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.getRules=pt.isJSONType=void 0;var rd=["string","number","integer","boolean","null","object","array"],sd=new Set(rd);function nd(e){return typeof e=="string"&&sd.has(e)}pt.isJSONType=nd;function id(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}pt.getRules=id});var ws=k(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.shouldUseRule=Ve.shouldUseGroup=Ve.schemaHasRulesForType=void 0;function od({schema:e,self:t},r){let s=t.RULES.types[r];return s&&s!==!0&&yo(e,s)}Ve.schemaHasRulesForType=od;function yo(e,t){return t.rules.some(r=>$o(e,r))}Ve.shouldUseGroup=yo;function $o(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(s=>e[s]!==void 0))}Ve.shouldUseRule=$o});var Lt=k(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.reportTypeError=ie.checkDataTypes=ie.checkDataType=ie.coerceAndCheckDataType=ie.getJSONTypes=ie.getSchemaTypes=ie.DataType=void 0;var ad=vs(),cd=ws(),ud=Vt(),C=D(),_o=K(),ht;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ht||(ie.DataType=ht={}));function ld(e){let t=vo(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ie.getSchemaTypes=ld;function vo(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(ad.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ie.getJSONTypes=vo;function fd(e,t){let{gen:r,data:s,opts:i}=e,o=dd(t,i.coerceTypes),u=t.length>0&&!(o.length===0&&t.length===1&&(0,cd.schemaHasRulesForType)(e,t[0]));if(u){let l=Es(t,s,i.strictNumbers,ht.Wrong);r.if(l,()=>{o.length?pd(e,t,o):Ss(e)})}return u}ie.coerceAndCheckDataType=fd;var wo=new Set(["string","number","integer","boolean","null"]);function dd(e,t){return t?e.filter(r=>wo.has(r)||t==="array"&&r==="array"):[]}function pd(e,t,r){let{gen:s,data:i,opts:o}=e,u=s.let("dataType",(0,C._)`typeof ${i}`),l=s.let("coerced",(0,C._)`undefined`);o.coerceTypes==="array"&&s.if((0,C._)`${u} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>s.assign(i,(0,C._)`${i}[0]`).assign(u,(0,C._)`typeof ${i}`).if(Es(t,i,o.strictNumbers),()=>s.assign(l,i))),s.if((0,C._)`${l} !== undefined`);for(let g of r)(wo.has(g)||g==="array"&&o.coerceTypes==="array")&&h(g);s.else(),Ss(e),s.endIf(),s.if((0,C._)`${l} !== undefined`,()=>{s.assign(i,l),hd(e,l)});function h(g){switch(g){case"string":s.elseIf((0,C._)`${u} == "number" || ${u} == "boolean"`).assign(l,(0,C._)`"" + ${i}`).elseIf((0,C._)`${i} === null`).assign(l,(0,C._)`""`);return;case"number":s.elseIf((0,C._)`${u} == "boolean" || ${i} === null
              || (${u} == "string" && ${i} && ${i} == +${i})`).assign(l,(0,C._)`+${i}`);return;case"integer":s.elseIf((0,C._)`${u} === "boolean" || ${i} === null
              || (${u} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,(0,C._)`+${i}`);return;case"boolean":s.elseIf((0,C._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf((0,C._)`${i} === "true" || ${i} === 1`).assign(l,!0);return;case"null":s.elseIf((0,C._)`${i} === "" || ${i} === 0 || ${i} === false`),s.assign(l,null);return;case"array":s.elseIf((0,C._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${i} === null`).assign(l,(0,C._)`[${i}]`)}}}function hd({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,C._)`${t} !== undefined`,()=>e.assign((0,C._)`${t}[${r}]`,s))}function bs(e,t,r,s=ht.Correct){let i=s===ht.Correct?C.operators.EQ:C.operators.NEQ,o;switch(e){case"null":return(0,C._)`${t} ${i} null`;case"array":o=(0,C._)`Array.isArray(${t})`;break;case"object":o=(0,C._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=u((0,C._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=u();break;default:return(0,C._)`typeof ${t} ${i} ${e}`}return s===ht.Correct?o:(0,C.not)(o);function u(l=C.nil){return(0,C.and)((0,C._)`typeof ${t} == "number"`,l,r?(0,C._)`isFinite(${t})`:C.nil)}}ie.checkDataType=bs;function Es(e,t,r,s){if(e.length===1)return bs(e[0],t,r,s);let i,o=(0,_o.toHash)(e);if(o.array&&o.object){let u=(0,C._)`typeof ${t} != "object"`;i=o.null?u:(0,C._)`!${t} || ${u}`,delete o.null,delete o.array,delete o.object}else i=C.nil;o.number&&delete o.integer;for(let u in o)i=(0,C.and)(i,bs(u,t,r,s));return i}ie.checkDataTypes=Es;var md={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,C._)`{type: ${e}}`:(0,C._)`{type: ${t}}`};function Ss(e){let t=gd(e);(0,ud.reportError)(t,md)}ie.reportTypeError=Ss;function gd(e){let{gen:t,data:r,schema:s}=e,i=(0,_o.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:i,schemaValue:i,parentSchema:s,params:{},it:e}}});var Eo=k(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.assignDefaults=void 0;var mt=D(),yd=K();function $d(e,t){let{properties:r,items:s}=e.schema;if(t==="object"&&r)for(let i in r)bo(e,i,r[i].default);else t==="array"&&Array.isArray(s)&&s.forEach((i,o)=>bo(e,o,i.default))}vr.assignDefaults=$d;function bo(e,t,r){let{gen:s,compositeRule:i,data:o,opts:u}=e;if(r===void 0)return;let l=(0,mt._)`${o}${(0,mt.getProperty)(t)}`;if(i){(0,yd.checkStrictMode)(e,`default is ignored for: ${l}`);return}let h=(0,mt._)`${l} === undefined`;u.useDefaults==="empty"&&(h=(0,mt._)`${h} || ${l} === null || ${l} === ""`),s.if(h,(0,mt._)`${l} = ${(0,mt.stringify)(r)}`)}});var ge=k(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.validateUnion=J.validateArray=J.usePattern=J.callValidateCode=J.schemaProperties=J.allSchemaProperties=J.noPropertyInData=J.propertyInData=J.isOwnProperty=J.hasPropFunc=J.reportMissingProp=J.checkMissingProp=J.checkReportMissingProp=void 0;var W=D(),Ps=K(),Le=qe(),_d=K();function vd(e,t){let{gen:r,data:s,it:i}=e;r.if(Ts(r,s,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,W._)`${t}`},!0),e.error()})}J.checkReportMissingProp=vd;function wd({gen:e,data:t,it:{opts:r}},s,i){return(0,W.or)(...s.map(o=>(0,W.and)(Ts(e,t,o,r.ownProperties),(0,W._)`${i} = ${o}`)))}J.checkMissingProp=wd;function bd(e,t){e.setParams({missingProperty:t},!0),e.error()}J.reportMissingProp=bd;function So(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,W._)`Object.prototype.hasOwnProperty`})}J.hasPropFunc=So;function ks(e,t,r){return(0,W._)`${So(e)}.call(${t}, ${r})`}J.isOwnProperty=ks;function Ed(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} !== undefined`;return s?(0,W._)`${i} && ${ks(e,t,r)}`:i}J.propertyInData=Ed;function Ts(e,t,r,s){let i=(0,W._)`${t}${(0,W.getProperty)(r)} === undefined`;return s?(0,W.or)(i,(0,W.not)(ks(e,t,r))):i}J.noPropertyInData=Ts;function Po(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}J.allSchemaProperties=Po;function Sd(e,t){return Po(t).filter(r=>!(0,Ps.alwaysValidSchema)(e,t[r]))}J.schemaProperties=Sd;function Pd({schemaCode:e,data:t,it:{gen:r,topSchemaRef:s,schemaPath:i,errorPath:o},it:u},l,h,g){let m=g?(0,W._)`${e}, ${t}, ${s}${i}`:t,y=[[Le.default.instancePath,(0,W.strConcat)(Le.default.instancePath,o)],[Le.default.parentData,u.parentData],[Le.default.parentDataProperty,u.parentDataProperty],[Le.default.rootData,Le.default.rootData]];u.opts.dynamicRef&&y.push([Le.default.dynamicAnchors,Le.default.dynamicAnchors]);let b=(0,W._)`${m}, ${r.object(...y)}`;return h!==W.nil?(0,W._)`${l}.call(${h}, ${b})`:(0,W._)`${l}(${b})`}J.callValidateCode=Pd;var kd=(0,W._)`new RegExp`;function Td({gen:e,it:{opts:t}},r){let s=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,s);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,W._)`${i.code==="new RegExp"?kd:(0,_d.useFunc)(e,i)}(${r}, ${s})`})}J.usePattern=Td;function Nd(e){let{gen:t,data:r,keyword:s,it:i}=e,o=t.name("valid");if(i.allErrors){let l=t.let("valid",!0);return u(()=>t.assign(l,!1)),l}return t.var(o,!0),u(()=>t.break()),o;function u(l){let h=t.const("len",(0,W._)`${r}.length`);t.forRange("i",0,h,g=>{e.subschema({keyword:s,dataProp:g,dataPropType:Ps.Type.Num},o),t.if((0,W.not)(o),l)})}}J.validateArray=Nd;function jd(e){let{gen:t,schema:r,keyword:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(h=>(0,Ps.alwaysValidSchema)(i,h))&&!i.opts.unevaluated)return;let u=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((h,g)=>{let m=e.subschema({keyword:s,schemaProp:g,compositeRule:!0},l);t.assign(u,(0,W._)`${u} || ${l}`),e.mergeValidEvaluated(m,l)||t.if((0,W.not)(u))})),e.result(u,()=>e.reset(),()=>e.error(!0))}J.validateUnion=jd});var No=k(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.validateKeywordUsage=Se.validSchemaType=Se.funcKeywordCode=Se.macroKeywordCode=void 0;var ae=D(),Qe=qe(),Od=ge(),qd=Vt();function Id(e,t){let{gen:r,keyword:s,schema:i,parentSchema:o,it:u}=e,l=t.macro.call(u.self,i,o,u),h=To(r,s,l);u.opts.validateSchema!==!1&&u.self.validateSchema(l,!0);let g=r.name("valid");e.subschema({schema:l,schemaPath:ae.nil,errSchemaPath:`${u.errSchemaPath}/${s}`,topSchemaRef:h,compositeRule:!0},g),e.pass(g,()=>e.error(!0))}Se.macroKeywordCode=Id;function Rd(e,t){var r;let{gen:s,keyword:i,schema:o,parentSchema:u,$data:l,it:h}=e;Cd(h,t);let g=!l&&t.compile?t.compile.call(h.self,o,u,h):t.validate,m=To(s,i,g),y=s.let("valid");e.block$data(y,b),e.ok((r=t.valid)!==null&&r!==void 0?r:y);function b(){if(t.errors===!1)w(),t.modifying&&ko(e),E(()=>e.error());else{let P=t.async?$():v();t.modifying&&ko(e),E(()=>Ad(e,P))}}function $(){let P=s.let("ruleErrs",null);return s.try(()=>w((0,ae._)`await `),L=>s.assign(y,!1).if((0,ae._)`${L} instanceof ${h.ValidationError}`,()=>s.assign(P,(0,ae._)`${L}.errors`),()=>s.throw(L))),P}function v(){let P=(0,ae._)`${m}.errors`;return s.assign(P,null),w(ae.nil),P}function w(P=t.async?(0,ae._)`await `:ae.nil){let L=h.opts.passContext?Qe.default.this:Qe.default.self,M=!("compile"in t&&!l||t.schema===!1);s.assign(y,(0,ae._)`${P}${(0,Od.callValidateCode)(e,m,L,M)}`,t.modifying)}function E(P){var L;s.if((0,ae.not)((L=t.valid)!==null&&L!==void 0?L:y),P)}}Se.funcKeywordCode=Rd;function ko(e){let{gen:t,data:r,it:s}=e;t.if(s.parentData,()=>t.assign(r,(0,ae._)`${s.parentData}[${s.parentDataProperty}]`))}function Ad(e,t){let{gen:r}=e;r.if((0,ae._)`Array.isArray(${t})`,()=>{r.assign(Qe.default.vErrors,(0,ae._)`${Qe.default.vErrors} === null ? ${t} : ${Qe.default.vErrors}.concat(${t})`).assign(Qe.default.errors,(0,ae._)`${Qe.default.vErrors}.length`),(0,qd.extendErrors)(e)},()=>e.error())}function Cd({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function To(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ae.stringify)(r)})}function Md(e,t,r=!1){return!t.length||t.some(s=>s==="array"?Array.isArray(e):s==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==s||r&&typeof e>"u")}Se.validSchemaType=Md;function xd({schema:e,opts:t,self:r,errSchemaPath:s},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let u=i.dependencies;if(u?.some(l=>!Object.prototype.hasOwnProperty.call(e,l)))throw new Error(`parent schema must have dependencies of ${o}: ${u.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){let h=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(h);else throw new Error(h)}}Se.validateKeywordUsage=xd});var Oo=k(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.extendSubschemaMode=Fe.extendSubschemaData=Fe.getSubschema=void 0;var Pe=D(),jo=K();function Dd(e,{keyword:t,schemaProp:r,schema:s,schemaPath:i,errSchemaPath:o,topSchemaRef:u}){if(t!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let l=e.schema[t];return r===void 0?{schema:l,schemaPath:(0,Pe._)`${e.schemaPath}${(0,Pe.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:l[r],schemaPath:(0,Pe._)`${e.schemaPath}${(0,Pe.getProperty)(t)}${(0,Pe.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,jo.escapeFragment)(r)}`}}if(s!==void 0){if(i===void 0||o===void 0||u===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:i,topSchemaRef:u,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Fe.getSubschema=Dd;function Vd(e,t,{dataProp:r,dataPropType:s,data:i,dataTypes:o,propertyName:u}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:l}=t;if(r!==void 0){let{errorPath:g,dataPathArr:m,opts:y}=t,b=l.let("data",(0,Pe._)`${t.data}${(0,Pe.getProperty)(r)}`,!0);h(b),e.errorPath=(0,Pe.str)`${g}${(0,jo.getErrorPath)(r,s,y.jsPropertySyntax)}`,e.parentDataProperty=(0,Pe._)`${r}`,e.dataPathArr=[...m,e.parentDataProperty]}if(i!==void 0){let g=i instanceof Pe.Name?i:l.let("data",i,!0);h(g),u!==void 0&&(e.propertyName=u)}o&&(e.dataTypes=o);function h(g){e.data=g,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,g]}}Fe.extendSubschemaData=Vd;function Ld(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:i,allErrors:o}){s!==void 0&&(e.compositeRule=s),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Fe.extendSubschemaMode=Ld});var Ns=k((Ty,qo)=>{"use strict";qo.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,i,o;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),s=o.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=s;i--!==0;){var u=o[i];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r}});var Ro=k((Ny,Io)=>{"use strict";var ze=Io.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var s=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};wr(t,s,i,e,"",e)};ze.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ze.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ze.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ze.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function wr(e,t,r,s,i,o,u,l,h,g){if(s&&typeof s=="object"&&!Array.isArray(s)){t(s,i,o,u,l,h,g);for(var m in s){var y=s[m];if(Array.isArray(y)){if(m in ze.arrayKeywords)for(var b=0;b<y.length;b++)wr(e,t,r,y[b],i+"/"+m+"/"+b,o,i,m,s,b)}else if(m in ze.propsKeywords){if(y&&typeof y=="object")for(var $ in y)wr(e,t,r,y[$],i+"/"+m+"/"+Fd($),o,i,m,s,$)}else(m in ze.keywords||e.allKeys&&!(m in ze.skipKeywords))&&wr(e,t,r,y,i+"/"+m,o,i,m,s)}r(s,i,o,u,l,h,g)}}function Fd(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ft=k(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.getSchemaRefs=le.resolveUrl=le.normalizeId=le._getFullPath=le.getFullPath=le.inlineRef=void 0;var zd=K(),Ud=Ns(),Kd=Ro(),Gd=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Hd(e,t=!0){return typeof e=="boolean"?!0:t===!0?!js(e):t?Ao(e)<=t:!1}le.inlineRef=Hd;var Jd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function js(e){for(let t in e){if(Jd.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(js)||typeof r=="object"&&js(r))return!0}return!1}function Ao(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Gd.has(r)&&(typeof e[r]=="object"&&(0,zd.eachItem)(e[r],s=>t+=Ao(s)),t===1/0))return 1/0}return t}function Co(e,t="",r){r!==!1&&(t=gt(t));let s=e.parse(t);return Mo(e,s)}le.getFullPath=Co;function Mo(e,t){return e.serialize(t).split("#")[0]+"#"}le._getFullPath=Mo;var Bd=/#\/?$/;function gt(e){return e?e.replace(Bd,""):""}le.normalizeId=gt;function Wd(e,t,r){return r=gt(r),e.resolve(t,r)}le.resolveUrl=Wd;var Xd=/^[a-z_][-a-z0-9._]*$/i;function Yd(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,i=gt(e[r]||t),o={"":i},u=Co(s,i,!1),l={},h=new Set;return Kd(e,{allKeys:!0},(y,b,$,v)=>{if(v===void 0)return;let w=u+b,E=o[v];typeof y[r]=="string"&&(E=P.call(this,y[r])),L.call(this,y.$anchor),L.call(this,y.$dynamicAnchor),o[b]=E;function P(M){let H=this.opts.uriResolver.resolve;if(M=gt(E?H(E,M):M),h.has(M))throw m(M);h.add(M);let I=this.refs[M];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?g(y,I.schema,M):M!==gt(w)&&(M[0]==="#"?(g(y,l[M],M),l[M]=y):this.refs[M]=w),M}function L(M){if(typeof M=="string"){if(!Xd.test(M))throw new Error(`invalid anchor "${M}"`);P.call(this,`#${M}`)}}}),l;function g(y,b,$){if(b!==void 0&&!Ud(y,b))throw m($)}function m(y){return new Error(`reference "${y}" resolves to more than one schema`)}}le.getSchemaRefs=Yd});var Kt=k(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getData=Ue.KeywordCxt=Ue.validateFunctionCode=void 0;var Fo=go(),xo=Lt(),qs=ws(),br=Lt(),Zd=Eo(),Ut=No(),Os=Oo(),T=D(),R=qe(),Qd=Ft(),Ie=K(),zt=Vt();function ep(e){if(Ko(e)&&(Go(e),Uo(e))){sp(e);return}zo(e,()=>(0,Fo.topBoolOrEmptySchema)(e))}Ue.validateFunctionCode=ep;function zo({gen:e,validateName:t,schema:r,schemaEnv:s,opts:i},o){i.code.es5?e.func(t,(0,T._)`${R.default.data}, ${R.default.valCxt}`,s.$async,()=>{e.code((0,T._)`"use strict"; ${Do(r,i)}`),rp(e,i),e.code(o)}):e.func(t,(0,T._)`${R.default.data}, ${tp(i)}`,s.$async,()=>e.code(Do(r,i)).code(o))}function tp(e){return(0,T._)`{${R.default.instancePath}="", ${R.default.parentData}, ${R.default.parentDataProperty}, ${R.default.rootData}=${R.default.data}${e.dynamicRef?(0,T._)`, ${R.default.dynamicAnchors}={}`:T.nil}}={}`}function rp(e,t){e.if(R.default.valCxt,()=>{e.var(R.default.instancePath,(0,T._)`${R.default.valCxt}.${R.default.instancePath}`),e.var(R.default.parentData,(0,T._)`${R.default.valCxt}.${R.default.parentData}`),e.var(R.default.parentDataProperty,(0,T._)`${R.default.valCxt}.${R.default.parentDataProperty}`),e.var(R.default.rootData,(0,T._)`${R.default.valCxt}.${R.default.rootData}`),t.dynamicRef&&e.var(R.default.dynamicAnchors,(0,T._)`${R.default.valCxt}.${R.default.dynamicAnchors}`)},()=>{e.var(R.default.instancePath,(0,T._)`""`),e.var(R.default.parentData,(0,T._)`undefined`),e.var(R.default.parentDataProperty,(0,T._)`undefined`),e.var(R.default.rootData,R.default.data),t.dynamicRef&&e.var(R.default.dynamicAnchors,(0,T._)`{}`)})}function sp(e){let{schema:t,opts:r,gen:s}=e;zo(e,()=>{r.$comment&&t.$comment&&Jo(e),cp(e),s.let(R.default.vErrors,null),s.let(R.default.errors,0),r.unevaluated&&np(e),Ho(e),fp(e)})}function np(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,T._)`${r}.evaluated`),t.if((0,T._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,T._)`${e.evaluated}.props`,(0,T._)`undefined`)),t.if((0,T._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,T._)`${e.evaluated}.items`,(0,T._)`undefined`))}function Do(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,T._)`/*# sourceURL=${r} */`:T.nil}function ip(e,t){if(Ko(e)&&(Go(e),Uo(e))){op(e,t);return}(0,Fo.boolOrEmptySchema)(e,t)}function Uo({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function Ko(e){return typeof e.schema!="boolean"}function op(e,t){let{schema:r,gen:s,opts:i}=e;i.$comment&&r.$comment&&Jo(e),up(e),lp(e);let o=s.const("_errs",R.default.errors);Ho(e,o),s.var(t,(0,T._)`${o} === ${R.default.errors}`)}function Go(e){(0,Ie.checkUnknownRules)(e),ap(e)}function Ho(e,t){if(e.opts.jtd)return Vo(e,[],!1,t);let r=(0,xo.getSchemaTypes)(e.schema),s=(0,xo.coerceAndCheckDataType)(e,r);Vo(e,r,!s,t)}function ap(e){let{schema:t,errSchemaPath:r,opts:s,self:i}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,Ie.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function cp(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Ie.checkStrictMode)(e,"default is ignored in the schema root")}function up(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Qd.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function lp(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Jo({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:i}){let o=r.$comment;if(i.$comment===!0)e.code((0,T._)`${R.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let u=(0,T.str)`${s}/$comment`,l=e.scopeValue("root",{ref:t.root});e.code((0,T._)`${R.default.self}.opts.$comment(${o}, ${u}, ${l}.schema)`)}}function fp(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:i,opts:o}=e;r.$async?t.if((0,T._)`${R.default.errors} === 0`,()=>t.return(R.default.data),()=>t.throw((0,T._)`new ${i}(${R.default.vErrors})`)):(t.assign((0,T._)`${s}.errors`,R.default.vErrors),o.unevaluated&&dp(e),t.return((0,T._)`${R.default.errors} === 0`))}function dp({gen:e,evaluated:t,props:r,items:s}){r instanceof T.Name&&e.assign((0,T._)`${t}.props`,r),s instanceof T.Name&&e.assign((0,T._)`${t}.items`,s)}function Vo(e,t,r,s){let{gen:i,schema:o,data:u,allErrors:l,opts:h,self:g}=e,{RULES:m}=g;if(o.$ref&&(h.ignoreKeywordsWithRef||!(0,Ie.schemaHasRulesButRef)(o,m))){i.block(()=>Wo(e,"$ref",m.all.$ref.definition));return}h.jtd||pp(e,t),i.block(()=>{for(let b of m.rules)y(b);y(m.post)});function y(b){(0,qs.shouldUseGroup)(o,b)&&(b.type?(i.if((0,br.checkDataType)(b.type,u,h.strictNumbers)),Lo(e,b),t.length===1&&t[0]===b.type&&r&&(i.else(),(0,br.reportTypeError)(e)),i.endIf()):Lo(e,b),l||i.if((0,T._)`${R.default.errors} === ${s||0}`))}}function Lo(e,t){let{gen:r,schema:s,opts:{useDefaults:i}}=e;i&&(0,Zd.assignDefaults)(e,t.type),r.block(()=>{for(let o of t.rules)(0,qs.shouldUseRule)(s,o)&&Wo(e,o.keyword,o.definition,t.type)})}function pp(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(hp(e,t),e.opts.allowUnionTypes||mp(e,t),gp(e,e.dataTypes))}function hp(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Bo(e.dataTypes,r)||Is(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),$p(e,t)}}function mp(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Is(e,"use allowUnionTypes to allow union type keyword")}function gp(e,t){let r=e.self.RULES.all;for(let s in r){let i=r[s];if(typeof i=="object"&&(0,qs.shouldUseRule)(e.schema,i)){let{type:o}=i.definition;o.length&&!o.some(u=>yp(t,u))&&Is(e,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function yp(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Bo(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function $p(e,t){let r=[];for(let s of e.dataTypes)Bo(t,s)?r.push(s):t.includes("integer")&&s==="number"&&r.push("integer");e.dataTypes=r}function Is(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Ie.checkStrictMode)(e,t,e.opts.strictTypes)}var Er=class{constructor(t,r,s){if((0,Ut.validateKeywordUsage)(t,r,s),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=s,this.data=t.data,this.schema=t.schema[s],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Ie.schemaRefOrVal)(t,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Xo(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Ut.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",R.default.errors))}result(t,r,s){this.failResult((0,T.not)(t),r,s)}failResult(t,r,s){this.gen.if(t),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,T.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,T._)`${r} !== undefined && (${(0,T.or)(this.invalid$data(),t)})`)}error(t,r,s){if(r){this.setParams(r),this._error(t,s),this.setParams({});return}this._error(t,s)}_error(t,r){(t?zt.reportExtraError:zt.reportError)(this,this.def.error,r)}$dataError(){(0,zt.reportError)(this,this.def.$dataError||zt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,s=T.nil){this.gen.block(()=>{this.check$data(t,s),r()})}check$data(t=T.nil,r=T.nil){if(!this.$data)return;let{gen:s,schemaCode:i,schemaType:o,def:u}=this;s.if((0,T.or)((0,T._)`${i} === undefined`,r)),t!==T.nil&&s.assign(t,!0),(o.length||u.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),t!==T.nil&&s.assign(t,!1)),s.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:s,def:i,it:o}=this;return(0,T.or)(u(),l());function u(){if(s.length){if(!(r instanceof T.Name))throw new Error("ajv implementation error");let h=Array.isArray(s)?s:[s];return(0,T._)`${(0,br.checkDataTypes)(h,r,o.opts.strictNumbers,br.DataType.Wrong)}`}return T.nil}function l(){if(i.validateSchema){let h=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,T._)`!${h}(${r})`}return T.nil}}subschema(t,r){let s=(0,Os.getSubschema)(this.it,t);(0,Os.extendSubschemaData)(s,this.it,t),(0,Os.extendSubschemaMode)(s,t);let i={...this.it,...s,items:void 0,props:void 0};return ip(i,r),i}mergeEvaluated(t,r){let{it:s,gen:i}=this;s.opts.unevaluated&&(s.props!==!0&&t.props!==void 0&&(s.props=Ie.mergeEvaluated.props(i,t.props,s.props,r)),s.items!==!0&&t.items!==void 0&&(s.items=Ie.mergeEvaluated.items(i,t.items,s.items,r)))}mergeValidEvaluated(t,r){let{it:s,gen:i}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,T.Name)),!0}};Ue.KeywordCxt=Er;function Wo(e,t,r,s){let i=new Er(e,r,t);"code"in r?r.code(i,s):i.$data&&r.validate?(0,Ut.funcKeywordCode)(i,r):"macro"in r?(0,Ut.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,Ut.funcKeywordCode)(i,r)}var _p=/^\/(?:[^~]|~0|~1)*$/,vp=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Xo(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let i,o;if(e==="")return R.default.rootData;if(e[0]==="/"){if(!_p.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=R.default.rootData}else{let g=vp.exec(e);if(!g)throw new Error(`Invalid JSON-pointer: ${e}`);let m=+g[1];if(i=g[2],i==="#"){if(m>=t)throw new Error(h("property/index",m));return s[t-m]}if(m>t)throw new Error(h("data",m));if(o=r[t-m],!i)return o}let u=o,l=i.split("/");for(let g of l)g&&(o=(0,T._)`${o}${(0,T.getProperty)((0,Ie.unescapeJsonPointer)(g))}`,u=(0,T._)`${u} && ${o}`);return u;function h(g,m){return`Cannot access ${g} ${m} levels up, current level is ${t}`}}Ue.getData=Xo});var Sr=k(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});var Rs=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};As.default=Rs});var Gt=k(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var Cs=Ft(),Ms=class extends Error{constructor(t,r,s,i){super(i||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Cs.resolveUrl)(t,r,s),this.missingSchema=(0,Cs.normalizeId)((0,Cs.getFullPath)(t,this.missingRef))}};xs.default=Ms});var kr=k(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.resolveSchema=ye.getCompilingSchema=ye.resolveRef=ye.compileSchema=ye.SchemaEnv=void 0;var we=D(),wp=Sr(),et=qe(),be=Ft(),Yo=K(),bp=Kt(),yt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let s;typeof t.schema=="object"&&(s=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,be.normalizeId)(s?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=s?.$async,this.refs={}}};ye.SchemaEnv=yt;function Vs(e){let t=Zo.call(this,e);if(t)return t;let r=(0,be.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:s,lines:i}=this.opts.code,{ownProperties:o}=this.opts,u=new we.CodeGen(this.scope,{es5:s,lines:i,ownProperties:o}),l;e.$async&&(l=u.scopeValue("Error",{ref:wp.default,code:(0,we._)`require("ajv/dist/runtime/validation_error").default`}));let h=u.scopeName("validate");e.validateName=h;let g={gen:u,allErrors:this.opts.allErrors,data:et.default.data,parentData:et.default.parentData,parentDataProperty:et.default.parentDataProperty,dataNames:[et.default.data],dataPathArr:[we.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,we.stringify)(e.schema)}:{ref:e.schema}),validateName:h,ValidationError:l,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:we.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,we._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(e),(0,bp.validateFunctionCode)(g),u.optimize(this.opts.code.optimize);let y=u.toString();m=`${u.scopeRefs(et.default.scope)}return ${y}`,this.opts.code.process&&(m=this.opts.code.process(m,e));let $=new Function(`${et.default.self}`,`${et.default.scope}`,m)(this,this.scope.get());if(this.scope.value(h,{ref:$}),$.errors=null,$.schema=e.schema,$.schemaEnv=e,e.$async&&($.$async=!0),this.opts.code.source===!0&&($.source={validateName:h,validateCode:y,scopeValues:u._values}),this.opts.unevaluated){let{props:v,items:w}=g;$.evaluated={props:v instanceof we.Name?void 0:v,items:w instanceof we.Name?void 0:w,dynamicProps:v instanceof we.Name,dynamicItems:w instanceof we.Name},$.source&&($.source.evaluated=(0,we.stringify)($.evaluated))}return e.validate=$,e}catch(y){throw delete e.validate,delete e.validateName,m&&this.logger.error("Error compiling schema, function code:",m),y}finally{this._compilations.delete(e)}}ye.compileSchema=Vs;function Ep(e,t,r){var s;r=(0,be.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let o=kp.call(this,e,r);if(o===void 0){let u=(s=e.localRefs)===null||s===void 0?void 0:s[r],{schemaId:l}=this.opts;u&&(o=new yt({schema:u,schemaId:l,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=Sp.call(this,o)}ye.resolveRef=Ep;function Sp(e){return(0,be.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Vs.call(this,e)}function Zo(e){for(let t of this._compilations)if(Pp(t,e))return t}ye.getCompilingSchema=Zo;function Pp(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function kp(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Pr.call(this,e,t)}function Pr(e,t){let r=this.opts.uriResolver.parse(t),s=(0,be._getFullPath)(this.opts.uriResolver,r),i=(0,be.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===i)return Ds.call(this,r,e);let o=(0,be.normalizeId)(s),u=this.refs[o]||this.schemas[o];if(typeof u=="string"){let l=Pr.call(this,e,u);return typeof l?.schema!="object"?void 0:Ds.call(this,r,l)}if(typeof u?.schema=="object"){if(u.validate||Vs.call(this,u),o===(0,be.normalizeId)(t)){let{schema:l}=u,{schemaId:h}=this.opts,g=l[h];return g&&(i=(0,be.resolveUrl)(this.opts.uriResolver,i,g)),new yt({schema:l,schemaId:h,root:e,baseId:i})}return Ds.call(this,r,u)}}ye.resolveSchema=Pr;var Tp=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ds(e,{baseId:t,schema:r,root:s}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let l of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let h=r[(0,Yo.unescapeFragment)(l)];if(h===void 0)return;r=h;let g=typeof r=="object"&&r[this.opts.schemaId];!Tp.has(l)&&g&&(t=(0,be.resolveUrl)(this.opts.uriResolver,t,g))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Yo.schemaHasRulesButRef)(r,this.RULES)){let l=(0,be.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Pr.call(this,s,l)}let{schemaId:u}=this.opts;if(o=o||new yt({schema:r,schemaId:u,root:s,baseId:t}),o.schema!==o.root.schema)return o}});var Qo=k((Ay,Np)=>{Np.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Fs=k((Cy,sa)=>{"use strict";var jp=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),ta=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function Ls(e){let t="",r=0,s=0;for(s=0;s<e.length;s++)if(r=e[s].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s];break}for(s+=1;s<e.length;s++){if(r=e[s].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s]}return t}var Op=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function ea(e){return e.length=0,!0}function qp(e,t,r){if(e.length){let s=Ls(e);if(s!=="")t.push(s);else return r.error=!0,!1;e.length=0}return!0}function Ip(e){let t=0,r={error:!1,address:"",zone:""},s=[],i=[],o=!1,u=!1,l=qp;for(let h=0;h<e.length;h++){let g=e[h];if(!(g==="["||g==="]"))if(g===":"){if(o===!0&&(u=!0),!l(i,s,r))break;if(++t>7){r.error=!0;break}h>0&&e[h-1]===":"&&(o=!0),s.push(":");continue}else if(g==="%"){if(!l(i,s,r))break;l=ea}else{i.push(g);continue}}return i.length&&(l===ea?r.zone=i.join(""):u?s.push(i.join("")):s.push(Ls(i))),r.address=s.join(""),r}function ra(e){if(Rp(e,":")<2)return{host:e,isIPV6:!1};let t=Ip(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,s=t.address;return t.zone&&(r+="%"+t.zone,s+="%25"+t.zone),{host:r,isIPV6:!0,escapedHost:s}}}function Rp(e,t){let r=0;for(let s=0;s<e.length;s++)e[s]===t&&r++;return r}function Ap(e){let t=e,r=[],s=-1,i=0;for(;i=t.length;){if(i===1){if(t===".")break;if(t==="/"){r.push("/");break}else{r.push(t);break}}else if(i===2){if(t[0]==="."){if(t[1]===".")break;if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&(t[1]==="."||t[1]==="/")){r.push("/");break}}else if(i===3&&t==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(t[0]==="."){if(t[1]==="."){if(t[2]==="/"){t=t.slice(3);continue}}else if(t[1]==="/"){t=t.slice(2);continue}}else if(t[0]==="/"&&t[1]==="."){if(t[2]==="/"){t=t.slice(2);continue}else if(t[2]==="."&&t[3]==="/"){t=t.slice(3),r.length!==0&&r.pop();continue}}if((s=t.indexOf("/",1))===-1){r.push(t);break}else r.push(t.slice(0,s)),t=t.slice(s)}return r.join("")}function Cp(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Mp(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);if(!ta(r)){let s=ra(r);s.isIPV6===!0?r=`[${s.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}sa.exports={nonSimpleDomain:Op,recomposeAuthority:Mp,normalizeComponentEncoding:Cp,removeDotSegments:Ap,isIPv4:ta,isUUID:jp,normalizeIPv6:ra,stringArrayToHexStripped:Ls}});var ca=k((My,aa)=>{"use strict";var{isUUID:xp}=Fs(),Dp=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,Vp=["http","https","ws","wss","urn","urn:uuid"];function Lp(e){return Vp.indexOf(e)!==-1}function zs(e){return e.secure===!0?!0:e.secure===!1?!1:e.scheme?e.scheme.length===3&&(e.scheme[0]==="w"||e.scheme[0]==="W")&&(e.scheme[1]==="s"||e.scheme[1]==="S")&&(e.scheme[2]==="s"||e.scheme[2]==="S"):!1}function na(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function ia(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Fp(e){return e.secure=zs(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function zp(e){if((e.port===(zs(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Up(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(Dp);if(r){let s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${s}:${t.nid||e.nid}`,o=Us(i);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Kp(e,t){if(e.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),i=`${r}:${t.nid||s}`,o=Us(i);o&&(e=o.serialize(e,t));let u=e,l=e.nss;return u.path=`${s||t.nid}:${l}`,t.skipEscape=!0,u}function Gp(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!xp(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Hp(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var oa={scheme:"http",domainHost:!0,parse:na,serialize:ia},Jp={scheme:"https",domainHost:oa.domainHost,parse:na,serialize:ia},Tr={scheme:"ws",domainHost:!0,parse:Fp,serialize:zp},Bp={scheme:"wss",domainHost:Tr.domainHost,parse:Tr.parse,serialize:Tr.serialize},Wp={scheme:"urn",parse:Up,serialize:Kp,skipNormalize:!0},Xp={scheme:"urn:uuid",parse:Gp,serialize:Hp,skipNormalize:!0},Nr={http:oa,https:Jp,ws:Tr,wss:Bp,urn:Wp,"urn:uuid":Xp};Object.setPrototypeOf(Nr,null);function Us(e){return e&&(Nr[e]||Nr[e.toLowerCase()])||void 0}aa.exports={wsIsSecure:zs,SCHEMES:Nr,isValidSchemeName:Lp,getSchemeHandler:Us}});var fa=k((xy,Or)=>{"use strict";var{normalizeIPv6:Yp,removeDotSegments:Ht,recomposeAuthority:Zp,normalizeComponentEncoding:jr,isIPv4:Qp,nonSimpleDomain:eh}=Fs(),{SCHEMES:th,getSchemeHandler:ua}=ca();function rh(e,t){return typeof e=="string"?e=ke(Re(e,t),t):typeof e=="object"&&(e=Re(ke(e,t),t)),e}function sh(e,t,r){let s=r?Object.assign({scheme:"null"},r):{scheme:"null"},i=la(Re(e,s),Re(t,s),s,!0);return s.skipEscape=!0,ke(i,s)}function la(e,t,r,s){let i={};return s||(e=Re(ke(e,r),r),t=Re(ke(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Ht(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Ht(t.path||""),i.query=t.query):(t.path?(t.path[0]==="/"?i.path=Ht(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Ht(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function nh(e,t,r){return typeof e=="string"?(e=unescape(e),e=ke(jr(Re(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=ke(jr(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=ke(jr(Re(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=ke(jr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function ke(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),i=[],o=ua(s.scheme||r.scheme);o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");let u=Zp(r);if(u!==void 0&&(s.reference!=="suffix"&&i.push("//"),i.push(u),r.path&&r.path[0]!=="/"&&i.push("/")),r.path!==void 0){let l=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(l=Ht(l)),u===void 0&&l[0]==="/"&&l[1]==="/"&&(l="/%2F"+l.slice(2)),i.push(l)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}var ih=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Re(e,t){let r=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=!1;r.reference==="suffix"&&(r.scheme?e=r.scheme+":"+e:e="//"+e);let o=e.match(ih);if(o){if(s.scheme=o[1],s.userinfo=o[3],s.host=o[4],s.port=parseInt(o[5],10),s.path=o[6]||"",s.query=o[7],s.fragment=o[8],isNaN(s.port)&&(s.port=o[5]),s.host)if(Qp(s.host)===!1){let h=Yp(s.host);s.host=h.host.toLowerCase(),i=h.isIPV6}else i=!0;s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&s.query===void 0&&!s.path?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let u=ua(r.scheme||s.scheme);if(!r.unicodeSupport&&(!u||!u.unicodeSupport)&&s.host&&(r.domainHost||u&&u.domainHost)&&i===!1&&eh(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(l){s.error=s.error||"Host's domain name can not be converted to ASCII: "+l}(!u||u&&!u.skipNormalize)&&(e.indexOf("%")!==-1&&(s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),s.host!==void 0&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),u&&u.parse&&u.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var Ks={SCHEMES:th,normalize:rh,resolve:sh,resolveComponent:la,equal:nh,serialize:ke,parse:Re};Or.exports=Ks;Or.exports.default=Ks;Or.exports.fastUri=Ks});var pa=k(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var da=fa();da.code='require("ajv/dist/runtime/uri").default';Gs.default=da});var wa=k(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.CodeGen=ee.Name=ee.nil=ee.stringify=ee.str=ee._=ee.KeywordCxt=void 0;var oh=Kt();Object.defineProperty(ee,"KeywordCxt",{enumerable:!0,get:function(){return oh.KeywordCxt}});var $t=D();Object.defineProperty(ee,"_",{enumerable:!0,get:function(){return $t._}});Object.defineProperty(ee,"str",{enumerable:!0,get:function(){return $t.str}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return $t.stringify}});Object.defineProperty(ee,"nil",{enumerable:!0,get:function(){return $t.nil}});Object.defineProperty(ee,"Name",{enumerable:!0,get:function(){return $t.Name}});Object.defineProperty(ee,"CodeGen",{enumerable:!0,get:function(){return $t.CodeGen}});var ah=Sr(),$a=Gt(),ch=vs(),Jt=kr(),uh=D(),Bt=Ft(),qr=Lt(),Js=K(),ha=Qo(),lh=pa(),_a=(e,t)=>new RegExp(e,t);_a.code="new RegExp";var fh=["removeAdditional","useDefaults","coerceTypes"],dh=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ph={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hh={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},ma=200;function mh(e){var t,r,s,i,o,u,l,h,g,m,y,b,$,v,w,E,P,L,M,H,I,de,he,nt,it;let Ae=e.strict,ot=(t=e.code)===null||t===void 0?void 0:t.optimize,St=ot===!0||ot===void 0?1:ot||0,Pt=(s=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:_a,or=(i=e.uriResolver)!==null&&i!==void 0?i:lh.default;return{strictSchema:(u=(o=e.strictSchema)!==null&&o!==void 0?o:Ae)!==null&&u!==void 0?u:!0,strictNumbers:(h=(l=e.strictNumbers)!==null&&l!==void 0?l:Ae)!==null&&h!==void 0?h:!0,strictTypes:(m=(g=e.strictTypes)!==null&&g!==void 0?g:Ae)!==null&&m!==void 0?m:"log",strictTuples:(b=(y=e.strictTuples)!==null&&y!==void 0?y:Ae)!==null&&b!==void 0?b:"log",strictRequired:(v=($=e.strictRequired)!==null&&$!==void 0?$:Ae)!==null&&v!==void 0?v:!1,code:e.code?{...e.code,optimize:St,regExp:Pt}:{optimize:St,regExp:Pt},loopRequired:(w=e.loopRequired)!==null&&w!==void 0?w:ma,loopEnum:(E=e.loopEnum)!==null&&E!==void 0?E:ma,meta:(P=e.meta)!==null&&P!==void 0?P:!0,messages:(L=e.messages)!==null&&L!==void 0?L:!0,inlineRefs:(M=e.inlineRefs)!==null&&M!==void 0?M:!0,schemaId:(H=e.schemaId)!==null&&H!==void 0?H:"$id",addUsedSchema:(I=e.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(de=e.validateSchema)!==null&&de!==void 0?de:!0,validateFormats:(he=e.validateFormats)!==null&&he!==void 0?he:!0,unicodeRegExp:(nt=e.unicodeRegExp)!==null&&nt!==void 0?nt:!0,int32range:(it=e.int32range)!==null&&it!==void 0?it:!0,uriResolver:or}}var Wt=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...mh(t)};let{es5:r,lines:s}=this.opts.code;this.scope=new uh.ValueScope({scope:{},prefixes:dh,es5:r,lines:s}),this.logger=wh(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,ch.getRules)(),ga.call(this,ph,t,"NOT SUPPORTED"),ga.call(this,hh,t,"DEPRECATED","warn"),this._metaOpts=_h.call(this),t.formats&&yh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&$h.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),gh.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:s}=this.opts,i=ha;s==="id"&&(i={...ha},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[s],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let s;if(typeof t=="string"){if(s=this.getSchema(t),!s)throw new Error(`no schema with key or ref "${t}"`)}else s=this.compile(t);let i=s(r);return"$async"in s||(this.errors=s.errors),i}compile(t,r){let s=this._addSchema(t,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return i.call(this,t,r);async function i(m,y){await o.call(this,m.$schema);let b=this._addSchema(m,y);return b.validate||u.call(this,b)}async function o(m){m&&!this.getSchema(m)&&await i.call(this,{$ref:m},!0)}async function u(m){try{return this._compileSchemaEnv(m)}catch(y){if(!(y instanceof $a.default))throw y;return l.call(this,y),await h.call(this,y.missingSchema),u.call(this,m)}}function l({missingSchema:m,missingRef:y}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${y} cannot be resolved`)}async function h(m){let y=await g.call(this,m);this.refs[m]||await o.call(this,y.$schema),this.refs[m]||this.addSchema(y,m,r)}async function g(m){let y=this._loading[m];if(y)return y;try{return await(this._loading[m]=s(m))}finally{delete this._loading[m]}}}addSchema(t,r,s,i=this.opts.validateSchema){if(Array.isArray(t)){for(let u of t)this.addSchema(u,void 0,s,i);return this}let o;if(typeof t=="object"){let{schemaId:u}=this.opts;if(o=t[u],o!==void 0&&typeof o!="string")throw new Error(`schema ${u} must be string`)}return r=(0,Bt.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(t,s,r,i,!0),this}addMetaSchema(t,r,s=this.opts.validateSchema){return this.addSchema(t,r,!0,s),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let s;if(s=t.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(s,t);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(t){let r;for(;typeof(r=ya.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:s}=this.opts,i=new Jt.SchemaEnv({schema:{},schemaId:s});if(r=Jt.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=ya.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let s=t[this.opts.schemaId];return s&&(s=(0,Bt.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let s;if(typeof t=="string")s=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof t=="object"&&r===void 0){if(r=t,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Eh.call(this,s,r),!r)return(0,Js.eachItem)(s,o=>Hs.call(this,o)),this;Ph.call(this,r);let i={...r,type:(0,qr.getJSONTypes)(r.type),schemaType:(0,qr.getJSONTypes)(r.schemaType)};return(0,Js.eachItem)(s,i.type.length===0?o=>Hs.call(this,o,i):o=>i.type.forEach(u=>Hs.call(this,o,i,u))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let s of r.rules){let i=s.rules.findIndex(o=>o.keyword===t);i>=0&&s.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${s}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(t,r){let s=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let o=i.split("/").slice(1),u=t;for(let l of o)u=u[l];for(let l in s){let h=s[l];if(typeof h!="object")continue;let{$data:g}=h.definition,m=u[l];g&&m&&(u[l]=va(m))}}return t}_removeAllSchemas(t,r){for(let s in t){let i=t[s];(!r||r.test(s))&&(typeof i=="string"?delete t[s]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[s]))}}_addSchema(t,r,s,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let u,{schemaId:l}=this.opts;if(typeof t=="object")u=t[l];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let h=this._cache.get(t);if(h!==void 0)return h;s=(0,Bt.normalizeId)(u||s);let g=Bt.getSchemaRefs.call(this,t,s);return h=new Jt.SchemaEnv({schema:t,schemaId:l,meta:r,baseId:s,localRefs:g}),this._cache.set(h.schema,h),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=h),i&&this.validateSchema(t,!0),h}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Jt.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Jt.compileSchema.call(this,t)}finally{this.opts=r}}};Wt.ValidationError=ah.default;Wt.MissingRefError=$a.default;ee.default=Wt;function ga(e,t,r,s="error"){for(let i in e){let o=i;o in t&&this.logger[s](`${r}: option ${i}. ${e[o]}`)}}function ya(e){return e=(0,Bt.normalizeId)(e),this.schemas[e]||this.refs[e]}function gh(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function yh(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function $h(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function _h(){let e={...this.opts};for(let t of fh)delete e[t];return e}var vh={log(){},warn(){},error(){}};function wh(e){if(e===!1)return vh;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var bh=/^[a-z_$][a-z0-9_$:-]*$/i;function Eh(e,t){let{RULES:r}=this;if((0,Js.eachItem)(e,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!bh.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Hs(e,t,r){var s;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,u=i?o.post:o.rules.find(({type:h})=>h===r);if(u||(u={type:r,rules:[]},o.rules.push(u)),o.keywords[e]=!0,!t)return;let l={keyword:e,definition:{...t,type:(0,qr.getJSONTypes)(t.type),schemaType:(0,qr.getJSONTypes)(t.schemaType)}};t.before?Sh.call(this,u,l,t.before):u.rules.push(l),o.all[e]=l,(s=t.implements)===null||s===void 0||s.forEach(h=>this.addKeyword(h))}function Sh(e,t,r){let s=e.rules.findIndex(i=>i.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Ph(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=va(t)),e.validateSchema=this.compile(t,!0))}var kh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function va(e){return{anyOf:[e,kh]}}});var ba=k(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Th={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Bs.default=Th});var ka=k(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.callRef=tt.getValidate=void 0;var Nh=Gt(),Ea=ge(),fe=D(),_t=qe(),Sa=kr(),Ir=K(),jh={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:s}=e,{baseId:i,schemaEnv:o,validateName:u,opts:l,self:h}=s,{root:g}=o;if((r==="#"||r==="#/")&&i===g.baseId)return y();let m=Sa.resolveRef.call(h,g,i,r);if(m===void 0)throw new Nh.default(s.opts.uriResolver,i,r);if(m instanceof Sa.SchemaEnv)return b(m);return $(m);function y(){if(o===g)return Rr(e,u,o,o.$async);let v=t.scopeValue("root",{ref:g});return Rr(e,(0,fe._)`${v}.validate`,g,g.$async)}function b(v){let w=Pa(e,v);Rr(e,w,v,v.$async)}function $(v){let w=t.scopeValue("schema",l.code.source===!0?{ref:v,code:(0,fe.stringify)(v)}:{ref:v}),E=t.name("valid"),P=e.subschema({schema:v,dataTypes:[],schemaPath:fe.nil,topSchemaRef:w,errSchemaPath:r},E);e.mergeEvaluated(P),e.ok(E)}}};function Pa(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,fe._)`${r.scopeValue("wrapper",{ref:t})}.validate`}tt.getValidate=Pa;function Rr(e,t,r,s){let{gen:i,it:o}=e,{allErrors:u,schemaEnv:l,opts:h}=o,g=h.passContext?_t.default.this:fe.nil;s?m():y();function m(){if(!l.$async)throw new Error("async schema referenced by sync schema");let v=i.let("valid");i.try(()=>{i.code((0,fe._)`await ${(0,Ea.callValidateCode)(e,t,g)}`),$(t),u||i.assign(v,!0)},w=>{i.if((0,fe._)`!(${w} instanceof ${o.ValidationError})`,()=>i.throw(w)),b(w),u||i.assign(v,!1)}),e.ok(v)}function y(){e.result((0,Ea.callValidateCode)(e,t,g),()=>$(t),()=>b(t))}function b(v){let w=(0,fe._)`${v}.errors`;i.assign(_t.default.vErrors,(0,fe._)`${_t.default.vErrors} === null ? ${w} : ${_t.default.vErrors}.concat(${w})`),i.assign(_t.default.errors,(0,fe._)`${_t.default.vErrors}.length`)}function $(v){var w;if(!o.opts.unevaluated)return;let E=(w=r?.validate)===null||w===void 0?void 0:w.evaluated;if(o.props!==!0)if(E&&!E.dynamicProps)E.props!==void 0&&(o.props=Ir.mergeEvaluated.props(i,E.props,o.props));else{let P=i.var("props",(0,fe._)`${v}.evaluated.props`);o.props=Ir.mergeEvaluated.props(i,P,o.props,fe.Name)}if(o.items!==!0)if(E&&!E.dynamicItems)E.items!==void 0&&(o.items=Ir.mergeEvaluated.items(i,E.items,o.items));else{let P=i.var("items",(0,fe._)`${v}.evaluated.items`);o.items=Ir.mergeEvaluated.items(i,P,o.items,fe.Name)}}}tt.callRef=Rr;tt.default=jh});var Ta=k(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var Oh=ba(),qh=ka(),Ih=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Oh.default,qh.default];Ws.default=Ih});var Na=k(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var Ar=D(),Ke=Ar.operators,Cr={maximum:{okStr:"<=",ok:Ke.LTE,fail:Ke.GT},minimum:{okStr:">=",ok:Ke.GTE,fail:Ke.LT},exclusiveMaximum:{okStr:"<",ok:Ke.LT,fail:Ke.GTE},exclusiveMinimum:{okStr:">",ok:Ke.GT,fail:Ke.LTE}},Rh={message:({keyword:e,schemaCode:t})=>(0,Ar.str)`must be ${Cr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ar._)`{comparison: ${Cr[e].okStr}, limit: ${t}}`},Ah={keyword:Object.keys(Cr),type:"number",schemaType:"number",$data:!0,error:Rh,code(e){let{keyword:t,data:r,schemaCode:s}=e;e.fail$data((0,Ar._)`${r} ${Cr[t].fail} ${s} || isNaN(${r})`)}};Xs.default=Ah});var ja=k(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Xt=D(),Ch={message:({schemaCode:e})=>(0,Xt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Xt._)`{multipleOf: ${e}}`},Mh={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ch,code(e){let{gen:t,data:r,schemaCode:s,it:i}=e,o=i.opts.multipleOfPrecision,u=t.let("res"),l=o?(0,Xt._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${o}`:(0,Xt._)`${u} !== parseInt(${u})`;e.fail$data((0,Xt._)`(${s} === 0 || (${u} = ${r}/${s}, ${l}))`)}};Ys.default=Mh});var qa=k(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});function Oa(e){let t=e.length,r=0,s=0,i;for(;s<t;)r++,i=e.charCodeAt(s++),i>=55296&&i<=56319&&s<t&&(i=e.charCodeAt(s),(i&64512)===56320&&s++);return r}Zs.default=Oa;Oa.code='require("ajv/dist/runtime/ucs2length").default'});var Ia=k(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var rt=D(),xh=K(),Dh=qa(),Vh={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,rt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,rt._)`{limit: ${e}}`},Lh={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vh,code(e){let{keyword:t,data:r,schemaCode:s,it:i}=e,o=t==="maxLength"?rt.operators.GT:rt.operators.LT,u=i.opts.unicode===!1?(0,rt._)`${r}.length`:(0,rt._)`${(0,xh.useFunc)(e.gen,Dh.default)}(${r})`;e.fail$data((0,rt._)`${u} ${o} ${s}`)}};Qs.default=Lh});var Ra=k(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var Fh=ge(),Mr=D(),zh={message:({schemaCode:e})=>(0,Mr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Mr._)`{pattern: ${e}}`},Uh={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zh,code(e){let{data:t,$data:r,schema:s,schemaCode:i,it:o}=e,u=o.opts.unicodeRegExp?"u":"",l=r?(0,Mr._)`(new RegExp(${i}, ${u}))`:(0,Fh.usePattern)(e,s);e.fail$data((0,Mr._)`!${l}.test(${t})`)}};en.default=Uh});var Aa=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var Yt=D(),Kh={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Yt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Yt._)`{limit: ${e}}`},Gh={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxProperties"?Yt.operators.GT:Yt.operators.LT;e.fail$data((0,Yt._)`Object.keys(${r}).length ${i} ${s}`)}};tn.default=Gh});var Ca=k(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var Zt=ge(),Qt=D(),Hh=K(),Jh={message:({params:{missingProperty:e}})=>(0,Qt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Qt._)`{missingProperty: ${e}}`},Bh={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Jh,code(e){let{gen:t,schema:r,schemaCode:s,data:i,$data:o,it:u}=e,{opts:l}=u;if(!o&&r.length===0)return;let h=r.length>=l.loopRequired;if(u.allErrors?g():m(),l.strictRequired){let $=e.parentSchema.properties,{definedProperties:v}=e.it;for(let w of r)if($?.[w]===void 0&&!v.has(w)){let E=u.schemaEnv.baseId+u.errSchemaPath,P=`required property "${w}" is not defined at "${E}" (strictRequired)`;(0,Hh.checkStrictMode)(u,P,u.opts.strictRequired)}}function g(){if(h||o)e.block$data(Qt.nil,y);else for(let $ of r)(0,Zt.checkReportMissingProp)(e,$)}function m(){let $=t.let("missing");if(h||o){let v=t.let("valid",!0);e.block$data(v,()=>b($,v)),e.ok(v)}else t.if((0,Zt.checkMissingProp)(e,r,$)),(0,Zt.reportMissingProp)(e,$),t.else()}function y(){t.forOf("prop",s,$=>{e.setParams({missingProperty:$}),t.if((0,Zt.noPropertyInData)(t,i,$,l.ownProperties),()=>e.error())})}function b($,v){e.setParams({missingProperty:$}),t.forOf($,s,()=>{t.assign(v,(0,Zt.propertyInData)(t,i,$,l.ownProperties)),t.if((0,Qt.not)(v),()=>{e.error(),t.break()})},Qt.nil)}}};rn.default=Bh});var Ma=k(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var er=D(),Wh={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,er.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,er._)`{limit: ${e}}`},Xh={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Wh,code(e){let{keyword:t,data:r,schemaCode:s}=e,i=t==="maxItems"?er.operators.GT:er.operators.LT;e.fail$data((0,er._)`${r}.length ${i} ${s}`)}};sn.default=Xh});var xr=k(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var xa=Ns();xa.code='require("ajv/dist/runtime/equal").default';nn.default=xa});var Da=k(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var on=Lt(),te=D(),Yh=K(),Zh=xr(),Qh={message:({params:{i:e,j:t}})=>(0,te.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,te._)`{i: ${e}, j: ${t}}`},em={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Qh,code(e){let{gen:t,data:r,$data:s,schema:i,parentSchema:o,schemaCode:u,it:l}=e;if(!s&&!i)return;let h=t.let("valid"),g=o.items?(0,on.getSchemaTypes)(o.items):[];e.block$data(h,m,(0,te._)`${u} === false`),e.ok(h);function m(){let v=t.let("i",(0,te._)`${r}.length`),w=t.let("j");e.setParams({i:v,j:w}),t.assign(h,!0),t.if((0,te._)`${v} > 1`,()=>(y()?b:$)(v,w))}function y(){return g.length>0&&!g.some(v=>v==="object"||v==="array")}function b(v,w){let E=t.name("item"),P=(0,on.checkDataTypes)(g,E,l.opts.strictNumbers,on.DataType.Wrong),L=t.const("indices",(0,te._)`{}`);t.for((0,te._)`;${v}--;`,()=>{t.let(E,(0,te._)`${r}[${v}]`),t.if(P,(0,te._)`continue`),g.length>1&&t.if((0,te._)`typeof ${E} == "string"`,(0,te._)`${E} += "_"`),t.if((0,te._)`typeof ${L}[${E}] == "number"`,()=>{t.assign(w,(0,te._)`${L}[${E}]`),e.error(),t.assign(h,!1).break()}).code((0,te._)`${L}[${E}] = ${v}`)})}function $(v,w){let E=(0,Yh.useFunc)(t,Zh.default),P=t.name("outer");t.label(P).for((0,te._)`;${v}--;`,()=>t.for((0,te._)`${w} = ${v}; ${w}--;`,()=>t.if((0,te._)`${E}(${r}[${v}], ${r}[${w}])`,()=>{e.error(),t.assign(h,!1).break(P)})))}}};an.default=em});var Va=k(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var cn=D(),tm=K(),rm=xr(),sm={message:"must be equal to constant",params:({schemaCode:e})=>(0,cn._)`{allowedValue: ${e}}`},nm={keyword:"const",$data:!0,error:sm,code(e){let{gen:t,data:r,$data:s,schemaCode:i,schema:o}=e;s||o&&typeof o=="object"?e.fail$data((0,cn._)`!${(0,tm.useFunc)(t,rm.default)}(${r}, ${i})`):e.fail((0,cn._)`${o} !== ${r}`)}};un.default=nm});var La=k(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});var tr=D(),im=K(),om=xr(),am={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,tr._)`{allowedValues: ${e}}`},cm={keyword:"enum",schemaType:"array",$data:!0,error:am,code(e){let{gen:t,data:r,$data:s,schema:i,schemaCode:o,it:u}=e;if(!s&&i.length===0)throw new Error("enum must have non-empty array");let l=i.length>=u.opts.loopEnum,h,g=()=>h??(h=(0,im.useFunc)(t,om.default)),m;if(l||s)m=t.let("valid"),e.block$data(m,y);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let $=t.const("vSchema",o);m=(0,tr.or)(...i.map((v,w)=>b($,w)))}e.pass(m);function y(){t.assign(m,!1),t.forOf("v",o,$=>t.if((0,tr._)`${g()}(${r}, ${$})`,()=>t.assign(m,!0).break()))}function b($,v){let w=i[v];return typeof w=="object"&&w!==null?(0,tr._)`${g()}(${r}, ${$}[${v}])`:(0,tr._)`${r} === ${w}`}}};ln.default=cm});var Fa=k(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var um=Na(),lm=ja(),fm=Ia(),dm=Ra(),pm=Aa(),hm=Ca(),mm=Ma(),gm=Da(),ym=Va(),$m=La(),_m=[um.default,lm.default,fm.default,dm.default,pm.default,hm.default,mm.default,gm.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ym.default,$m.default];fn.default=_m});var pn=k(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.validateAdditionalItems=void 0;var st=D(),dn=K(),vm={message:({params:{len:e}})=>(0,st.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,st._)`{limit: ${e}}`},wm={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:vm,code(e){let{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,dn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}za(e,s)}};function za(e,t){let{gen:r,schema:s,data:i,keyword:o,it:u}=e;u.items=!0;let l=r.const("len",(0,st._)`${i}.length`);if(s===!1)e.setParams({len:t.length}),e.pass((0,st._)`${l} <= ${t.length}`);else if(typeof s=="object"&&!(0,dn.alwaysValidSchema)(u,s)){let g=r.var("valid",(0,st._)`${l} <= ${t.length}`);r.if((0,st.not)(g),()=>h(g)),e.ok(g)}function h(g){r.forRange("i",t.length,l,m=>{e.subschema({keyword:o,dataProp:m,dataPropType:dn.Type.Num},g),u.allErrors||r.if((0,st.not)(g),()=>r.break())})}}rr.validateAdditionalItems=za;rr.default=wm});var hn=k(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.validateTuple=void 0;var Ua=D(),Dr=K(),bm=ge(),Em={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Ka(e,"additionalItems",t);r.items=!0,!(0,Dr.alwaysValidSchema)(r,t)&&e.ok((0,bm.validateArray)(e))}};function Ka(e,t,r=e.schema){let{gen:s,parentSchema:i,data:o,keyword:u,it:l}=e;m(i),l.opts.unevaluated&&r.length&&l.items!==!0&&(l.items=Dr.mergeEvaluated.items(s,r.length,l.items));let h=s.name("valid"),g=s.const("len",(0,Ua._)`${o}.length`);r.forEach((y,b)=>{(0,Dr.alwaysValidSchema)(l,y)||(s.if((0,Ua._)`${g} > ${b}`,()=>e.subschema({keyword:u,schemaProp:b,dataProp:b},h)),e.ok(h))});function m(y){let{opts:b,errSchemaPath:$}=l,v=r.length,w=v===y.minItems&&(v===y.maxItems||y[t]===!1);if(b.strictTuples&&!w){let E=`"${u}" is ${v}-tuple, but minItems or maxItems/${t} are not specified or different at path "${$}"`;(0,Dr.checkStrictMode)(l,E,b.strictTuples)}}}sr.validateTuple=Ka;sr.default=Em});var Ga=k(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var Sm=hn(),Pm={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Sm.validateTuple)(e,"items")};mn.default=Pm});var Ja=k(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Ha=D(),km=K(),Tm=ge(),Nm=pn(),jm={message:({params:{len:e}})=>(0,Ha.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ha._)`{limit: ${e}}`},Om={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:jm,code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:i}=r;s.items=!0,!(0,km.alwaysValidSchema)(s,t)&&(i?(0,Nm.validateAdditionalItems)(e,i):e.ok((0,Tm.validateArray)(e)))}};gn.default=Om});var Ba=k(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var $e=D(),Vr=K(),qm={message:({params:{min:e,max:t}})=>t===void 0?(0,$e.str)`must contain at least ${e} valid item(s)`:(0,$e.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,$e._)`{minContains: ${e}}`:(0,$e._)`{minContains: ${e}, maxContains: ${t}}`},Im={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:qm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e,u,l,{minContains:h,maxContains:g}=s;o.opts.next?(u=h===void 0?1:h,l=g):u=1;let m=t.const("len",(0,$e._)`${i}.length`);if(e.setParams({min:u,max:l}),l===void 0&&u===0){(0,Vr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(l!==void 0&&u>l){(0,Vr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Vr.alwaysValidSchema)(o,r)){let w=(0,$e._)`${m} >= ${u}`;l!==void 0&&(w=(0,$e._)`${w} && ${m} <= ${l}`),e.pass(w);return}o.items=!0;let y=t.name("valid");l===void 0&&u===1?$(y,()=>t.if(y,()=>t.break())):u===0?(t.let(y,!0),l!==void 0&&t.if((0,$e._)`${i}.length > 0`,b)):(t.let(y,!1),b()),e.result(y,()=>e.reset());function b(){let w=t.name("_valid"),E=t.let("count",0);$(w,()=>t.if(w,()=>v(E)))}function $(w,E){t.forRange("i",0,m,P=>{e.subschema({keyword:"contains",dataProp:P,dataPropType:Vr.Type.Num,compositeRule:!0},w),E()})}function v(w){t.code((0,$e._)`${w}++`),l===void 0?t.if((0,$e._)`${w} >= ${u}`,()=>t.assign(y,!0).break()):(t.if((0,$e._)`${w} > ${l}`,()=>t.assign(y,!1).break()),u===1?t.assign(y,!0):t.if((0,$e._)`${w} >= ${u}`,()=>t.assign(y,!0)))}}};yn.default=Im});var Ya=k(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.validateSchemaDeps=Te.validatePropertyDeps=Te.error=void 0;var $n=D(),Rm=K(),nr=ge();Te.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let s=t===1?"property":"properties";return(0,$n.str)`must have ${s} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:s}})=>(0,$n._)`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${r}}`};var Am={keyword:"dependencies",type:"object",schemaType:"object",error:Te.error,code(e){let[t,r]=Cm(e);Wa(e,t),Xa(e,r)}};function Cm({schema:e}){let t={},r={};for(let s in e){if(s==="__proto__")continue;let i=Array.isArray(e[s])?t:r;i[s]=e[s]}return[t,r]}function Wa(e,t=e.schema){let{gen:r,data:s,it:i}=e;if(Object.keys(t).length===0)return;let o=r.let("missing");for(let u in t){let l=t[u];if(l.length===0)continue;let h=(0,nr.propertyInData)(r,s,u,i.opts.ownProperties);e.setParams({property:u,depsCount:l.length,deps:l.join(", ")}),i.allErrors?r.if(h,()=>{for(let g of l)(0,nr.checkReportMissingProp)(e,g)}):(r.if((0,$n._)`${h} && (${(0,nr.checkMissingProp)(e,l,o)})`),(0,nr.reportMissingProp)(e,o),r.else())}}Te.validatePropertyDeps=Wa;function Xa(e,t=e.schema){let{gen:r,data:s,keyword:i,it:o}=e,u=r.name("valid");for(let l in t)(0,Rm.alwaysValidSchema)(o,t[l])||(r.if((0,nr.propertyInData)(r,s,l,o.opts.ownProperties),()=>{let h=e.subschema({keyword:i,schemaProp:l},u);e.mergeValidEvaluated(h,u)},()=>r.var(u,!0)),e.ok(u))}Te.validateSchemaDeps=Xa;Te.default=Am});var Qa=k(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var Za=D(),Mm=K(),xm={message:"property name must be valid",params:({params:e})=>(0,Za._)`{propertyName: ${e.propertyName}}`},Dm={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:xm,code(e){let{gen:t,schema:r,data:s,it:i}=e;if((0,Mm.alwaysValidSchema)(i,r))return;let o=t.name("valid");t.forIn("key",s,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},o),t.if((0,Za.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};_n.default=Dm});var wn=k(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var Lr=ge(),Ee=D(),Vm=qe(),Fr=K(),Lm={message:"must NOT have additional properties",params:({params:e})=>(0,Ee._)`{additionalProperty: ${e.additionalProperty}}`},Fm={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Lm,code(e){let{gen:t,schema:r,parentSchema:s,data:i,errsCount:o,it:u}=e;if(!o)throw new Error("ajv implementation error");let{allErrors:l,opts:h}=u;if(u.props=!0,h.removeAdditional!=="all"&&(0,Fr.alwaysValidSchema)(u,r))return;let g=(0,Lr.allSchemaProperties)(s.properties),m=(0,Lr.allSchemaProperties)(s.patternProperties);y(),e.ok((0,Ee._)`${o} === ${Vm.default.errors}`);function y(){t.forIn("key",i,E=>{!g.length&&!m.length?v(E):t.if(b(E),()=>v(E))})}function b(E){let P;if(g.length>8){let L=(0,Fr.schemaRefOrVal)(u,s.properties,"properties");P=(0,Lr.isOwnProperty)(t,L,E)}else g.length?P=(0,Ee.or)(...g.map(L=>(0,Ee._)`${E} === ${L}`)):P=Ee.nil;return m.length&&(P=(0,Ee.or)(P,...m.map(L=>(0,Ee._)`${(0,Lr.usePattern)(e,L)}.test(${E})`))),(0,Ee.not)(P)}function $(E){t.code((0,Ee._)`delete ${i}[${E}]`)}function v(E){if(h.removeAdditional==="all"||h.removeAdditional&&r===!1){$(E);return}if(r===!1){e.setParams({additionalProperty:E}),e.error(),l||t.break();return}if(typeof r=="object"&&!(0,Fr.alwaysValidSchema)(u,r)){let P=t.name("valid");h.removeAdditional==="failing"?(w(E,P,!1),t.if((0,Ee.not)(P),()=>{e.reset(),$(E)})):(w(E,P),l||t.if((0,Ee.not)(P),()=>t.break()))}}function w(E,P,L){let M={keyword:"additionalProperties",dataProp:E,dataPropType:Fr.Type.Str};L===!1&&Object.assign(M,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(M,P)}}};vn.default=Fm});var rc=k(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var zm=Kt(),ec=ge(),bn=K(),tc=wn(),Um={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:s,data:i,it:o}=e;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&tc.default.code(new zm.KeywordCxt(o,tc.default,"additionalProperties"));let u=(0,ec.allSchemaProperties)(r);for(let y of u)o.definedProperties.add(y);o.opts.unevaluated&&u.length&&o.props!==!0&&(o.props=bn.mergeEvaluated.props(t,(0,bn.toHash)(u),o.props));let l=u.filter(y=>!(0,bn.alwaysValidSchema)(o,r[y]));if(l.length===0)return;let h=t.name("valid");for(let y of l)g(y)?m(y):(t.if((0,ec.propertyInData)(t,i,y,o.opts.ownProperties)),m(y),o.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(y),e.ok(h);function g(y){return o.opts.useDefaults&&!o.compositeRule&&r[y].default!==void 0}function m(y){e.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};En.default=Um});var oc=k(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var sc=ge(),zr=D(),nc=K(),ic=K(),Km={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:s,parentSchema:i,it:o}=e,{opts:u}=o,l=(0,sc.allSchemaProperties)(r),h=l.filter(w=>(0,nc.alwaysValidSchema)(o,r[w]));if(l.length===0||h.length===l.length&&(!o.opts.unevaluated||o.props===!0))return;let g=u.strictSchema&&!u.allowMatchingProperties&&i.properties,m=t.name("valid");o.props!==!0&&!(o.props instanceof zr.Name)&&(o.props=(0,ic.evaluatedPropsToName)(t,o.props));let{props:y}=o;b();function b(){for(let w of l)g&&$(w),o.allErrors?v(w):(t.var(m,!0),v(w),t.if(m))}function $(w){for(let E in g)new RegExp(w).test(E)&&(0,nc.checkStrictMode)(o,`property ${E} matches pattern ${w} (use allowMatchingProperties)`)}function v(w){t.forIn("key",s,E=>{t.if((0,zr._)`${(0,sc.usePattern)(e,w)}.test(${E})`,()=>{let P=h.includes(w);P||e.subschema({keyword:"patternProperties",schemaProp:w,dataProp:E,dataPropType:ic.Type.Str},m),o.opts.unevaluated&&y!==!0?t.assign((0,zr._)`${y}[${E}]`,!0):!P&&!o.allErrors&&t.if((0,zr.not)(m),()=>t.break())})})}}};Sn.default=Km});var ac=k(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var Gm=K(),Hm={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:s}=e;if((0,Gm.alwaysValidSchema)(s,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};Pn.default=Hm});var cc=k(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var Jm=ge(),Bm={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Jm.validateUnion,error:{message:"must match a schema in anyOf"}};kn.default=Bm});var uc=k(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var Ur=D(),Wm=K(),Xm={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Ur._)`{passingSchemas: ${e.passing}}`},Ym={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Xm,code(e){let{gen:t,schema:r,parentSchema:s,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&s.discriminator)return;let o=r,u=t.let("valid",!1),l=t.let("passing",null),h=t.name("_valid");e.setParams({passing:l}),t.block(g),e.result(u,()=>e.reset(),()=>e.error(!0));function g(){o.forEach((m,y)=>{let b;(0,Wm.alwaysValidSchema)(i,m)?t.var(h,!0):b=e.subschema({keyword:"oneOf",schemaProp:y,compositeRule:!0},h),y>0&&t.if((0,Ur._)`${h} && ${u}`).assign(u,!1).assign(l,(0,Ur._)`[${l}, ${y}]`).else(),t.if(h,()=>{t.assign(u,!0),t.assign(l,y),b&&e.mergeEvaluated(b,Ur.Name)})})}}};Tn.default=Ym});var lc=k(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});var Zm=K(),Qm={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((o,u)=>{if((0,Zm.alwaysValidSchema)(s,o))return;let l=e.subschema({keyword:"allOf",schemaProp:u},i);e.ok(i),e.mergeEvaluated(l)})}};Nn.default=Qm});var pc=k(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var Kr=D(),dc=K(),eg={message:({params:e})=>(0,Kr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Kr._)`{failingKeyword: ${e.ifClause}}`},tg={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:eg,code(e){let{gen:t,parentSchema:r,it:s}=e;r.then===void 0&&r.else===void 0&&(0,dc.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let i=fc(s,"then"),o=fc(s,"else");if(!i&&!o)return;let u=t.let("valid",!0),l=t.name("_valid");if(h(),e.reset(),i&&o){let m=t.let("ifClause");e.setParams({ifClause:m}),t.if(l,g("then",m),g("else",m))}else i?t.if(l,g("then")):t.if((0,Kr.not)(l),g("else"));e.pass(u,()=>e.error(!0));function h(){let m=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(m)}function g(m,y){return()=>{let b=e.subschema({keyword:m},l);t.assign(u,l),e.mergeValidEvaluated(b,u),y?t.assign(y,(0,Kr._)`${m}`):e.setParams({ifClause:m})}}}};function fc(e,t){let r=e.schema[t];return r!==void 0&&!(0,dc.alwaysValidSchema)(e,r)}jn.default=tg});var hc=k(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var rg=K(),sg={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,rg.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};On.default=sg});var mc=k(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var ng=pn(),ig=Ga(),og=hn(),ag=Ja(),cg=Ba(),ug=Ya(),lg=Qa(),fg=wn(),dg=rc(),pg=oc(),hg=ac(),mg=cc(),gg=uc(),yg=lc(),$g=pc(),_g=hc();function vg(e=!1){let t=[hg.default,mg.default,gg.default,yg.default,$g.default,_g.default,lg.default,fg.default,ug.default,dg.default,pg.default];return e?t.push(ig.default,ag.default):t.push(ng.default,og.default),t.push(cg.default),t}qn.default=vg});var gc=k(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var Z=D(),wg={message:({schemaCode:e})=>(0,Z.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Z._)`{format: ${e}}`},bg={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:wg,code(e,t){let{gen:r,data:s,$data:i,schema:o,schemaCode:u,it:l}=e,{opts:h,errSchemaPath:g,schemaEnv:m,self:y}=l;if(!h.validateFormats)return;i?b():$();function b(){let v=r.scopeValue("formats",{ref:y.formats,code:h.code.formats}),w=r.const("fDef",(0,Z._)`${v}[${u}]`),E=r.let("fType"),P=r.let("format");r.if((0,Z._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>r.assign(E,(0,Z._)`${w}.type || "string"`).assign(P,(0,Z._)`${w}.validate`),()=>r.assign(E,(0,Z._)`"string"`).assign(P,w)),e.fail$data((0,Z.or)(L(),M()));function L(){return h.strictSchema===!1?Z.nil:(0,Z._)`${u} && !${P}`}function M(){let H=m.$async?(0,Z._)`(${w}.async ? await ${P}(${s}) : ${P}(${s}))`:(0,Z._)`${P}(${s})`,I=(0,Z._)`(typeof ${P} == "function" ? ${H} : ${P}.test(${s}))`;return(0,Z._)`${P} && ${P} !== true && ${E} === ${t} && !${I}`}}function $(){let v=y.formats[o];if(!v){L();return}if(v===!0)return;let[w,E,P]=M(v);w===t&&e.pass(H());function L(){if(h.strictSchema===!1){y.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${o}" ignored in schema at path "${g}"`}}function M(I){let de=I instanceof RegExp?(0,Z.regexpCode)(I):h.code.formats?(0,Z._)`${h.code.formats}${(0,Z.getProperty)(o)}`:void 0,he=r.scopeValue("formats",{key:o,ref:I,code:de});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,Z._)`${he}.validate`]:["string",I,he]}function H(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!m.$async)throw new Error("async format in sync schema");return(0,Z._)`await ${P}(${s})`}return typeof E=="function"?(0,Z._)`${P}(${s})`:(0,Z._)`${P}.test(${s})`}}}};In.default=bg});var yc=k(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Eg=gc(),Sg=[Eg.default];Rn.default=Sg});var $c=k(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.contentVocabulary=vt.metadataVocabulary=void 0;vt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];vt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var vc=k(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var Pg=Ta(),kg=Fa(),Tg=mc(),Ng=yc(),_c=$c(),jg=[Pg.default,kg.default,(0,Tg.default)(),Ng.default,_c.metadataVocabulary,_c.contentVocabulary];An.default=jg});var bc=k(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.DiscrError=void 0;var wc;(function(e){e.Tag="tag",e.Mapping="mapping"})(wc||(Gr.DiscrError=wc={}))});var Sc=k(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var wt=D(),Cn=bc(),Ec=kr(),Og=Gt(),qg=K(),Ig={message:({params:{discrError:e,tagName:t}})=>e===Cn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,wt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Rg={keyword:"discriminator",type:"object",schemaType:"object",error:Ig,code(e){let{gen:t,data:r,schema:s,parentSchema:i,it:o}=e,{oneOf:u}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let l=s.propertyName;if(typeof l!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");let h=t.let("valid",!1),g=t.const("tag",(0,wt._)`${r}${(0,wt.getProperty)(l)}`);t.if((0,wt._)`typeof ${g} == "string"`,()=>m(),()=>e.error(!1,{discrError:Cn.DiscrError.Tag,tag:g,tagName:l})),e.ok(h);function m(){let $=b();t.if(!1);for(let v in $)t.elseIf((0,wt._)`${g} === ${v}`),t.assign(h,y($[v]));t.else(),e.error(!1,{discrError:Cn.DiscrError.Mapping,tag:g,tagName:l}),t.endIf()}function y($){let v=t.name("valid"),w=e.subschema({keyword:"oneOf",schemaProp:$},v);return e.mergeEvaluated(w,wt.Name),v}function b(){var $;let v={},w=P(i),E=!0;for(let H=0;H<u.length;H++){let I=u[H];if(I?.$ref&&!(0,qg.schemaHasRulesButRef)(I,o.self.RULES)){let he=I.$ref;if(I=Ec.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,he),I instanceof Ec.SchemaEnv&&(I=I.schema),I===void 0)throw new Og.default(o.opts.uriResolver,o.baseId,he)}let de=($=I?.properties)===null||$===void 0?void 0:$[l];if(typeof de!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${l}"`);E=E&&(w||P(I)),L(de,H)}if(!E)throw new Error(`discriminator: "${l}" must be required`);return v;function P({required:H}){return Array.isArray(H)&&H.includes(l)}function L(H,I){if(H.const)M(H.const,I);else if(H.enum)for(let de of H.enum)M(de,I);else throw new Error(`discriminator: "properties/${l}" must have "const" or "enum"`)}function M(H,I){if(typeof H!="string"||H in v)throw new Error(`discriminator: "${l}" values must be unique strings`);v[H]=I}}}};Mn.default=Rg});var Pc=k((P$,Ag)=>{Ag.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Tc=k((X,xn)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=X.Ajv=void 0;var Cg=wa(),Mg=vc(),xg=Sc(),kc=Pc(),Dg=["/properties"],Hr="http://json-schema.org/draft-07/schema",bt=class extends Cg.default{_addVocabularies(){super._addVocabularies(),Mg.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(xg.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(kc,Dg):kc;this.addMetaSchema(t,Hr,!1),this.refs["http://json-schema.org/schema"]=Hr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Hr)?Hr:void 0)}};X.Ajv=bt;xn.exports=X=bt;xn.exports.Ajv=bt;Object.defineProperty(X,"__esModule",{value:!0});X.default=bt;var Vg=Kt();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return Vg.KeywordCxt}});var Et=D();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Et._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Et.str}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Et.stringify}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Et.nil}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Et.Name}});Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return Et.CodeGen}});var Lg=Sr();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return Lg.default}});var Fg=Gt();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return Fg.default}})});var qc=gf(Tc(),1);var ir=class extends SyntaxError{constructor(t,r,s,i){super(t),this.expected=r,this.found=s,this.location=i,this.name="SyntaxError"}format(t){let r="Error: "+this.message;if(this.location){let s=null,i=t.find(h=>h.source===this.location.source);i&&(s=i.text.split(/\r\n|\n|\r/g));let o=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(o):o,l=this.location.source+":"+u.line+":"+u.column;if(s){let h=this.location.end,g="".padEnd(u.line.toString().length," "),m=s[o.line-1],b=(o.line===h.line?h.column:m.length+1)-o.column||1;r+=`
 --> `+l+`
`+g+` |
`+u.line+" | "+m+`
`+g+" | "+"".padEnd(o.column-1," ")+"".padEnd(b,"^")}else r+=`
 at `+l}return r}static buildMessage(t,r){function s(b){return b.codePointAt(0).toString(16).toUpperCase()}let i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function o(b){return i?b.replace(i,$=>"\\u{"+s($)+"}"):b}function u(b){return o(b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}function l(b){return o(b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,$=>"\\x0"+s($)).replace(/[\x10-\x1F\x7F-\x9F]/g,$=>"\\x"+s($)))}let h={literal(b){return'"'+u(b.text)+'"'},class(b){let $=b.parts.map(v=>Array.isArray(v)?l(v[0])+"-"+l(v[1]):l(v));return"["+(b.inverted?"^":"")+$.join("")+"]"+(b.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(b){return b.description}};function g(b){return h[b.type](b)}function m(b){let $=b.map(g);if($.sort(),$.length>0){let v=1;for(let w=1;w<$.length;w++)$[w-1]!==$[w]&&($[v]=$[w],v++);$.length=v}switch($.length){case 1:return $[0];case 2:return $[0]+" or "+$[1];default:return $.slice(0,-1).join(", ")+", or "+$[$.length-1]}}function y(b){return b?'"'+u(b)+'"':"end of input"}return"Expected "+m(t)+" but "+y(r)+" found."}};function Nc(e,t){t=t!==void 0?t:{};let r={},s=t.grammarSource,i={program:Ri},o=Ri,u=",",l=";",h="[",g="]",m=":",y="{",b="}",$="=",v="label",w="color",E="class",P="active",L="type",M="regular",H="initial",I="terminate",de="final",he="parallel",nt="history",it="deephistory",Ae="choice",ot="forkjoin",St="fork",Pt="join",or="junction",Uc="width",Xn="external",Yn="internal",Zn="->",Qn="=>>",ei="=>",ti=">>",ri=":>",si="--",ni="==",ii="<-",oi="<<=",ai="<=",ci="<<",ui="<:",Kc="#",Gc=".",Ce='"',ar='\\"',li="/*",cr="*/",fi="//",di=/^[0-9]/,pi=/^[a-zA-Z0-9_\- ]/,hi=/^[,;{]/,mi=/^[;{]/,gi=/^[^;, "\t\n\r=\-><:{[]/,Hc=/^[ \t]/,Jc=/^[\r\n]/,Bc=/^[^\r\n]/,yi=q(",",!1),$i=q(";",!1),Wc=Y("state"),_i=q("[",!1),vi=q("]",!1),wi=q(":",!1),Xc=q("{",!1),Yc=q("}",!1),Zc=Y("extended state attribute"),Ge=q("=",!1),Qc=Y("state attribute name"),eu=q("label",!0),bi=q("color",!0),tu=Y("class attribute"),ru=q("class",!0),su=Y("state flag"),nu=q("active",!0),iu=Y("state type"),Ei=q("type",!0),ou=Y("state type type"),au=q("regular",!1),cu=q("initial",!1),uu=q("terminate",!1),lu=q("final",!1),fu=q("parallel",!1),du=q("history",!1),pu=q("deephistory",!1),hu=q("choice",!1),mu=q("forkjoin",!1),gu=q("fork",!1),yu=q("join",!1),$u=q("junction",!1),_u=Y("transition"),vu=Y("extended transition attribute"),wu=Y("transition attribute name"),bu=Y("transition type name"),Eu=Y("numeric transition attribute name"),Su=q("width",!0),Pu=Y("transition type value"),ku=q("external",!1),Tu=q("internal",!1),Nu=Y("left to right arrow"),ju=q("->",!1),Ou=q("=>>",!1),qu=q("=>",!1),Iu=q(">>",!1),Ru=q(":>",!1),Au=q("--",!1),Cu=q("==",!1),Mu=Y("right to left arrow"),xu=q("<-",!1),Du=q("<<=",!1),Vu=q("<=",!1),Lu=q("<<",!1),Fu=q("<:",!1),zu=q("#",!1),Uu=q(".",!1),Si=xe([["0","9"]],!1,!1,!1),Ku=Y("double quoted string"),Me=q('"',!1),Pi=q('\\"',!1),He=Ml(),Gu=Y("valid class string"),ki=xe([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1,!1),Ti=xe([",",";","{"],!1,!1,!1),Ni=xe([";","{"],!1,!1,!1),Hu=Y("identifier"),ji=xe([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1,!1),Ju=Y("whitespace"),Bu=xe([" ","	"],!1,!1,!1),Wu=Y("line end"),Xu=xe(["\r",`
`],!1,!1,!1),Yu=q("/*",!1),Oi=q("*/",!1),Zu=q("//",!1),Qu=xe(["\r",`
`],!0,!1,!1),el=Y("comment");function tl(n){return n.states=Bi(n),Wi(n)}function rl(n,a){let f={};return ut(f,"states",n),Ot(f,"transitions",a),f}function ey(n){return n}function ty(n){return n}function sl(n){return Yi(n[0].concat(n[1]),Xi)}function nl(n,a,f){return f}function il(n,a,f,d){return d}function ol(n,a,f,d,S){return S}function al(n,a,f,d,S){let N=Ji(a);for(let A of f||[])ut(N,A.name,A.value);return ut(N,"typeExplicitlySet",(f||[]).some(A=>A.typeExplicitlySet)),ut(N,"statemachine",S),Ot(N,"note",n),d&&Ot(N,"actions",Qi(d)),N}function cl(n,a){return{name:n,value:a}}function ul(n,a){return{name:n,value:a}}function ll(n){return{name:n,value:!0}}function fl(n,a){return{name:n,value:a,typeExplicitlySet:!0}}function dl(n){return n.toLowerCase()}function pl(n){return n.toLowerCase()}function hl(n){return n.toLowerCase()}function ml(n){return n.toLowerCase()}function gl(n,a,f){return f}function yl(n,a,f,d){return d}function $l(n,a,f,d){d&&(a.label=d,a=Object.assign(a,Zi(d)));for(let S of f||[])ut(a,S.name,S.value);return Ot(a,"note",n),a.id=t.counter.next(),a}function _l(n,a){return{from:n,to:a}}function vl(n,a){return{from:a,to:n}}function wl(n,a){return{name:n,value:a}}function bl(n,a){return{name:n,value:a}}function El(n,a){return{name:n,value:a}}function Sl(n,a){return{name:n,value:a}}function Pl(n){return n.toLowerCase()}function kl(n){return n.toLowerCase()}function ry(n){return n}function Tl(n){return n.join("").trim()}function Nl(n){return parseFloat(n.join(""))}function jl(n){return parseInt(n.join(""),10)}function Ol(n){return n.join("").replace(/\\\"/g,'"')}function sy(n){return n}function ql(n){return n.join("")}function ny(n){return n}function Il(n){return n.join("").trim()}function Rl(n){return n.join("").trim()}function iy(n){return n}function oy(n){return n}function Al(n){return n.join("")}let c=t.peg$currPos|0,j=c,at=[{line:1,column:1}],_e=c,ur=t.peg$maxFailExpected||[],p=t.peg$silentFails|0,kt;if(t.startRule){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=i[t.startRule]}function ay(){return e.substring(j,c)}function cy(){return j}function uy(){return{source:s,start:j,end:c}}function ly(){return Tt(j,c)}function fy(n,a){throw a=a!==void 0?a:Tt(j,c),Ii([Y(n)],e.substring(j,c),a)}function dy(n,a){throw a=a!==void 0?a:Tt(j,c),Dl(n,a)}function Cl(n=c){let a=e.codePointAt(n);return a===void 0?"":String.fromCodePoint(a)}function q(n,a){return{type:"literal",text:n,ignoreCase:a}}function xe(n,a,f,d){return{type:"class",parts:n,inverted:a,ignoreCase:f,unicode:d}}function Ml(){return{type:"any"}}function xl(){return{type:"end"}}function Y(n){return{type:"other",description:n}}function qi(n){let a=at[n],f;if(a)return a;if(n>=at.length)f=at.length-1;else for(f=n;!at[--f];);for(a=at[f],a={line:a.line,column:a.column};f<n;)e.charCodeAt(f)===10?(a.line++,a.column=1):a.column++,f++;return at[n]=a,a}function Tt(n,a,f){let d=qi(n),S=qi(a),N={source:s,start:{offset:n,line:d.line,column:d.column},end:{offset:a,line:S.line,column:S.column}};return f&&s&&typeof s.offset=="function"&&(N.start=s.offset(N.start),N.end=s.offset(N.end)),N}function _(n){c<_e||(c>_e&&(_e=c,ur=[]),ur.push(n))}function Dl(n,a){return new ir(n,null,null,a)}function Ii(n,a,f){return new ir(ir.buildMessage(n,a),n,a,f)}function Ri(){let n,a,f,d;return n=c,a=O(),f=Ai(),d=O(),j=n,n=tl(f),n}function Ai(){let n,a,f,d;for(p++,n=c,a=Vl(),a===r&&(a=null),f=[],d=xi();d!==r;)f.push(d),d=xi();return j=n,n=rl(a,f),p--,n}function Vl(){let n,a,f,d,S,N;for(n=c,a=c,f=[],d=c,S=Br(),S!==r?(e.charCodeAt(c)===44?(N=u,c++):(N=r,p===0&&_(yi)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);d!==r;)f.push(d),d=c,S=Br(),S!==r?(e.charCodeAt(c)===44?(N=u,c++):(N=r,p===0&&_(yi)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r);return d=c,S=Br(),S!==r?(e.charCodeAt(c)===59?(N=l,c++):(N=r,p===0&&_($i)),N!==r?(j=d,d=S):(c=d,d=r)):(c=d,d=r),d!==r?(f=[f,d],a=f):(c=a,a=r),a!==r&&(j=n,a=sl(a)),n=a,n}function Br(){let n,a,f,d,S,N,A,G,Ne,pe,Je,Gi,Yr,mf,Zr;for(p++,n=c,a=[],f=lr();f!==r;)a.push(f),f=lr();return f=O(),d=jt(),d!==r?(S=O(),N=c,e.charCodeAt(c)===91?(A=h,c++):(A=r,p===0&&_(_i)),A!==r?(G=Ll(),e.charCodeAt(c)===93?(Ne=g,c++):(Ne=r,p===0&&_(vi)),Ne!==r?(j=N,N=nl(a,d,G)):(c=N,N=r)):(c=N,N=r),N===r&&(N=null),A=O(),G=c,e.charCodeAt(c)===58?(Ne=m,c++):(Ne=r,p===0&&_(wi)),Ne!==r?(pe=O(),Je=rf(),Je!==r?(Gi=O(),j=G,G=il(a,d,N,Je)):(c=G,G=r)):(c=G,G=r),G===r&&(G=null),Ne=O(),pe=c,e.charCodeAt(c)===123?(Je=y,c++):(Je=r,p===0&&_(Xc)),Je!==r?(Gi=O(),Yr=Ai(),Yr!==r?(mf=O(),e.charCodeAt(c)===125?(Zr=b,c++):(Zr=r,p===0&&_(Yc)),Zr!==r?(j=pe,pe=ol(a,d,N,G,Yr)):(c=pe,pe=r)):(c=pe,pe=r)):(c=pe,pe=r),pe===r&&(pe=null),Je=O(),j=n,n=al(a,d,N,G,pe)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Wc)),n}function Ll(){let n,a;for(p++,n=[],a=Ci();a!==r;)n.push(a),a=Ci();return p--,n}function Ci(){let n,a,f,d,S,N,A,G;return p++,n=c,a=O(),f=Fl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Nt(),A!==r?(G=O(),j=n,n=cl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Mi(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Vi(),A!==r?(G=O(),j=n,n=ul(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=zl(),f!==r?(d=O(),j=n,n=ll(f)):(c=n,n=r),n===r&&(n=c,a=O(),f=Ul(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Kl(),A!==r?(G=O(),j=n,n=fl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(Zc)),n}function Fl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===v?c+=5:(a=r,p===0&&_(eu)),a===r&&(a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_(bi))),a!==r&&(j=n,a=dl(a)),n=a,p--,n===r&&(a=r,p===0&&_(Qc)),n}function Mi(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===E?c+=5:(a=r,p===0&&_(ru)),a!==r&&(j=n,a=pl(a)),n=a,p--,n===r&&(a=r,p===0&&_(tu)),n}function zl(){let n,a;return p++,n=c,a=e.substr(c,6),a.toLowerCase()===P?c+=6:(a=r,p===0&&_(nu)),a!==r&&(j=n,a=hl(a)),n=a,p--,n===r&&(a=r,p===0&&_(su)),n}function Ul(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(Ei)),a!==r&&(j=n,a=ml(a)),n=a,p--,n===r&&(a=r,p===0&&_(iu)),n}function Kl(){let n,a;return p++,e.substr(c,7)===M?(n=M,c+=7):(n=r,p===0&&_(au)),n===r&&(e.substr(c,7)===H?(n=H,c+=7):(n=r,p===0&&_(cu)),n===r&&(e.substr(c,9)===I?(n=I,c+=9):(n=r,p===0&&_(uu)),n===r&&(e.substr(c,5)===de?(n=de,c+=5):(n=r,p===0&&_(lu)),n===r&&(e.substr(c,8)===he?(n=he,c+=8):(n=r,p===0&&_(fu)),n===r&&(e.substr(c,7)===nt?(n=nt,c+=7):(n=r,p===0&&_(du)),n===r&&(e.substr(c,11)===it?(n=it,c+=11):(n=r,p===0&&_(pu)),n===r&&(e.substr(c,6)===Ae?(n=Ae,c+=6):(n=r,p===0&&_(hu)),n===r&&(e.substr(c,8)===ot?(n=ot,c+=8):(n=r,p===0&&_(mu)),n===r&&(e.substr(c,4)===St?(n=St,c+=4):(n=r,p===0&&_(gu)),n===r&&(e.substr(c,4)===Pt?(n=Pt,c+=4):(n=r,p===0&&_(yu)),n===r&&(e.substr(c,8)===or?(n=or,c+=8):(n=r,p===0&&_($u))))))))))))),p--,n===r&&(a=r,p===0&&_(ou)),n}function xi(){let n,a,f,d,S,N,A,G,Ne;for(p++,n=c,a=[],f=lr();f!==r;)a.push(f),f=lr();return f=Gl(),f!==r?(d=c,e.charCodeAt(c)===91?(S=h,c++):(S=r,p===0&&_(_i)),S!==r?(N=Hl(),e.charCodeAt(c)===93?(A=g,c++):(A=r,p===0&&_(vi)),A!==r?(G=O(),j=d,d=gl(a,f,N)):(c=d,d=r)):(c=d,d=r),d===r&&(d=null),S=c,e.charCodeAt(c)===58?(N=m,c++):(N=r,p===0&&_(wi)),N!==r?(A=O(),G=tf(),G!==r?(Ne=O(),j=S,S=yl(a,f,d,G)):(c=S,S=r)):(c=S,S=r),S===r&&(S=null),e.charCodeAt(c)===59?(N=l,c++):(N=r,p===0&&_($i)),N!==r?(j=n,n=$l(a,f,d,S)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(_u)),n}function Gl(){let n,a,f,d,S,N,A,G;return n=c,a=O(),f=jt(),f!==r?(d=O(),S=Yl(),S!==r?(N=O(),A=jt(),A!==r?(G=O(),j=n,n=_l(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=jt(),f!==r?(d=O(),S=Zl(),S!==r?(N=O(),A=jt(),A!==r?(G=O(),j=n,n=vl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)),n}function Hl(){let n,a;for(p++,n=[],a=Di();a!==r;)n.push(a),a=Di();return p--,n}function Di(){let n,a,f,d,S,N,A,G;return p++,n=c,a=O(),f=Jl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Nt(),A!==r?(G=O(),j=n,n=wl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Mi(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Vi(),A!==r?(G=O(),j=n,n=bl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Bl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Xl(),A!==r?(G=O(),j=n,n=El(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r),n===r&&(n=c,a=O(),f=Wl(),f!==r?(d=O(),e.charCodeAt(c)===61?(S=$,c++):(S=r,p===0&&_(Ge)),S!==r?(N=O(),A=Ql(),A!==r?(G=O(),j=n,n=Sl(f,A)):(c=n,n=r)):(c=n,n=r)):(c=n,n=r)))),p--,n===r&&(a=r,p===0&&_(vu)),n}function Jl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===w?c+=5:(a=r,p===0&&_(bi)),a!==r&&(j=n,a=Pl(a)),n=a,p--,n===r&&(a=r,p===0&&_(wu)),n}function Bl(){let n,a;return p++,n=c,a=e.substr(c,4),a.toLowerCase()===L?c+=4:(a=r,p===0&&_(Ei)),a!==r&&(j=n,a=kl(a)),n=a,p--,n===r&&(a=r,p===0&&_(bu)),n}function Wl(){let n,a;return p++,n=c,a=e.substr(c,5),a.toLowerCase()===Uc?c+=5:(a=r,p===0&&_(Su)),a!==r&&(j=n,a=a),n=a,p--,n===r&&(a=r,p===0&&_(Eu)),n}function Xl(){let n,a;return p++,e.substr(c,8)===Xn?(n=Xn,c+=8):(n=r,p===0&&_(ku)),n===r&&(e.substr(c,8)===Yn?(n=Yn,c+=8):(n=r,p===0&&_(Tu))),p--,n===r&&(a=r,p===0&&_(Pu)),n}function Yl(){let n,a;return p++,e.substr(c,2)===Zn?(n=Zn,c+=2):(n=r,p===0&&_(ju)),n===r&&(e.substr(c,3)===Qn?(n=Qn,c+=3):(n=r,p===0&&_(Ou)),n===r&&(e.substr(c,2)===ei?(n=ei,c+=2):(n=r,p===0&&_(qu)),n===r&&(e.substr(c,2)===ti?(n=ti,c+=2):(n=r,p===0&&_(Iu)),n===r&&(e.substr(c,2)===ri?(n=ri,c+=2):(n=r,p===0&&_(Ru)),n===r&&(e.substr(c,2)===si?(n=si,c+=2):(n=r,p===0&&_(Au)),n===r&&(e.substr(c,2)===ni?(n=ni,c+=2):(n=r,p===0&&_(Cu)))))))),p--,n===r&&(a=r,p===0&&_(Nu)),n}function Zl(){let n,a;return p++,e.substr(c,2)===ii?(n=ii,c+=2):(n=r,p===0&&_(xu)),n===r&&(e.substr(c,3)===oi?(n=oi,c+=3):(n=r,p===0&&_(Du)),n===r&&(e.substr(c,2)===ai?(n=ai,c+=2):(n=r,p===0&&_(Vu)),n===r&&(e.substr(c,2)===ci?(n=ci,c+=2):(n=r,p===0&&_(Lu)),n===r&&(e.substr(c,2)===ui?(n=ui,c+=2):(n=r,p===0&&_(Fu)))))),p--,n===r&&(a=r,p===0&&_(Mu)),n}function lr(){let n,a,f,d,S;if(n=c,a=O(),e.charCodeAt(c)===35?(f=Kc,c++):(f=r,p===0&&_(zu)),f!==r){for(d=[],S=fr();S!==r;)d.push(S),S=fr();j=n,n=Tl(d)}else c=n,n=r;return n}function Ql(){let n;return n=ef(),n===r&&(n=Wr()),n}function ef(){let n,a,f,d,S;return n=c,a=c,f=Wr(),f!==r?(e.charCodeAt(c)===46?(d=Gc,c++):(d=r,p===0&&_(Uu)),d!==r?(S=Wr(),S!==r?(f=[f,d,S],a=f):(c=a,a=r)):(c=a,a=r)):(c=a,a=r),a!==r&&(j=n,a=Nl(a)),n=a,n}function Wr(){let n,a,f;if(n=c,a=[],f=e.charAt(c),di.test(f)?c++:(f=r,p===0&&_(Si)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),di.test(f)?c++:(f=r,p===0&&_(Si));else a=r;return a!==r&&(j=n,a=jl(a)),n=a,n}function tf(){let n;return n=Nt(),n===r&&(n=of()),n}function rf(){let n;return n=Nt(),n===r&&(n=af()),n}function Nt(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Ce,c++):(a=r,p===0&&_(Me)),a!==r?(f=sf(),e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),d!==r?(j=n,n=Ol(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Ku)),n}function sf(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===ar?(d=ar,c+=2):(d=r,p===0&&_(Pi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.substr(c,2)===ar?(d=ar,c+=2):(d=r,p===0&&_(Pi)),d===r&&(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He))),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function Vi(){let n,a,f,d;return p++,n=c,e.charCodeAt(c)===34?(a=Ce,c++):(a=r,p===0&&_(Me)),a!==r?(f=nf(),e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),d!==r?(j=n,n=ql(f)):(c=n,n=r)):(c=n,n=r),p--,n===r&&(a=r,p===0&&_(Gu)),n}function nf(){let n,a,f,d;for(n=[],a=c,f=c,p++,e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),pi.test(d)?c++:(d=r,p===0&&_(ki)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,e.charCodeAt(c)===34?(d=Ce,c++):(d=r,p===0&&_(Me)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(d=e.charAt(c),pi.test(d)?c++:(d=r,p===0&&_(ki)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function of(){let n,a;return n=c,a=uf(),j=n,a=Il(a),n=a,n}function af(){let n,a;return n=c,a=cf(),j=n,a=Rl(a),n=a,n}function cf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),hi.test(d)?c++:(d=r,p===0&&_(Ti)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),hi.test(d)?c++:(d=r,p===0&&_(Ti)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function uf(){let n,a,f,d;for(n=[],a=c,f=c,p++,d=e.charAt(c),mi.test(d)?c++:(d=r,p===0&&_(Ni)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);a!==r;)n.push(a),a=c,f=c,p++,d=e.charAt(c),mi.test(d)?c++:(d=r,p===0&&_(Ni)),p--,d===r?f=void 0:(c=f,f=r),f!==r?(e.length>c?(d=e.charAt(c),c++):(d=r,p===0&&_(He)),d!==r?(j=a,a=d):(c=a,a=r)):(c=a,a=r);return n}function jt(){let n,a,f;if(p++,n=c,a=[],f=e.charAt(c),gi.test(f)?c++:(f=r,p===0&&_(ji)),f!==r)for(;f!==r;)a.push(f),f=e.charAt(c),gi.test(f)?c++:(f=r,p===0&&_(ji));else a=r;return a!==r&&(j=n,a=Al(a)),n=a,n===r&&(n=Nt()),p--,n===r&&(a=r,p===0&&_(Hu)),n}function Li(){let n,a;return p++,n=e.charAt(c),Hc.test(n)?c++:(n=r,p===0&&_(Bu)),p--,n===r&&(a=r,p===0&&_(Ju)),n}function Fi(){let n,a;return p++,n=e.charAt(c),Jc.test(n)?c++:(n=r,p===0&&_(Xu)),p--,n===r&&(a=r,p===0&&_(Wu)),n}function lf(){let n;return e.substr(c,2)===li?(n=li,c+=2):(n=r,p===0&&_(Yu)),n}function ff(){let n;return e.substr(c,2)===cr?(n=cr,c+=2):(n=r,p===0&&_(Oi)),n}function zi(){let n,a,f;return n=c,a=c,p++,e.substr(c,2)===cr?(f=cr,c+=2):(f=r,p===0&&_(Oi)),p--,f===r?a=void 0:(c=a,a=r),a!==r?(e.length>c?(f=e.charAt(c),c++):(f=r,p===0&&_(He)),f!==r?(a=[a,f],n=a):(c=n,n=r)):(c=n,n=r),n}function df(){let n,a,f,d;if(n=c,a=lf(),a!==r){for(f=[],d=zi();d!==r;)f.push(d),d=zi();d=ff(),d!==r?(a=[a,f,d],n=a):(c=n,n=r)}else c=n,n=r;return n}function pf(){let n;return e.substr(c,2)===fi?(n=fi,c+=2):(n=r,p===0&&_(Zu)),n}function fr(){let n;return n=e.charAt(c),Bc.test(n)?c++:(n=r,p===0&&_(Qu)),n}function hf(){let n,a,f,d;if(n=c,a=pf(),a!==r){for(f=[],d=fr();d!==r;)f.push(d),d=fr();a=[a,f],n=a}else c=n,n=r;return n}function Ui(){let n,a;return p++,n=hf(),n===r&&(n=df()),p--,n===r&&(a=r,p===0&&_(el)),n}function O(){let n,a;for(n=[],a=Li(),a===r&&(a=Fi(),a===r&&(a=Ui()));a!==r;)n.push(a),a=Li(),a===r&&(a=Fi(),a===r&&(a=Ui()));return n}kt=o();let Xr=kt!==r&&c===e.length;function Ki(){throw kt!==r&&c<e.length&&_(xl()),Ii(ur,_e<e.length?Cl(_e):null,_e<e.length?Tt(_e,_e+1):Tt(_e,_e))}if(t.peg$library)return{peg$result:kt,peg$currPos:c,peg$FAILED:r,peg$maxFailExpected:ur,peg$maxFailPos:_e,peg$success:Xr,peg$throw:Xr?void 0:Ki};if(Xr)return kt;Ki()}function jc(e){return Nc(e,{counter:new Hi})}var Oc={$schema:"http://json-schema.org/draft-07/schema#",title:"state-machine-cat abstract syntax tree schema",$ref:"#/definitions/StateMachineType",$id:"org.js.state-machine-cat/v7.4.0",definitions:{StateType:{type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},TransitionType:{type:"string",enum:["internal","external"]},NoteType:{type:"array",items:{type:"string"}},ActionTypeType:{type:"string",enum:["entry","activity","exit"]},ActionType:{type:"object",required:["type","body"],additionalProperties:!1,properties:{type:{$ref:"#/definitions/ActionTypeType"},body:{type:"string"}}},ClassType:{type:"string",pattern:"^[a-zA-Z0-9_\\- ]*$"},StateMachineType:{type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{description:"The name and identifier of the state. Unique within the root state machine.",type:"string"},type:{description:"What kind of state (or pseudo state) this state is. E.g. 'regular' for normal states or 'initial', 'final', 'choice' etc for pseudo states. Most UML (pseudo-) states are supported.",$ref:"#/definitions/StateType"},label:{description:"The display label of the state. If it's not present, most renderers will use the states' name in stead.",type:"string"},color:{description:'Color to use for rendering the state. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},active:{description:"If true the state is considered to be active and rendered as such.",type:"boolean"},typeExplicitlySet:{description:"The default parser derives the `type` from the `name` with inband signaling. The user can override that behavior by explicitly setting the `type`. This attribute is there to express that (and make sure that on next parses & processing it doesn't get accidentily re-derived from the name again).",type:"boolean"},isComposite:{description:"convenience, derived attribute - set to true if there's a state machine inside the state; false in all other cases. For internal use - @deprecated",type:"boolean"},actions:{type:"array",description:"A series of actions and their types. The type describe when the action takes place (on entry, exit, or otherwise ('activity'))",items:{$ref:"#/definitions/ActionType"}},note:{description:"Comments related to this state. Some renderers will use the note attribute to render a note (i.e. as a post-it) attached to the state.",$ref:"#/definitions/NoteType"},statemachine:{description:"state machine nested within the state.",$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["id","from","to"],additionalProperties:!1,properties:{id:{type:"number"},from:{description:"The name of the state this transition transitions from",type:"string"},to:{description:"The name of the state this transition transitions to",type:"string"},label:{description:"A display label to represent this transition. Parsers can parse this label into events conditions and actions.",type:"string"},event:{description:"Event triggering the transition",type:"string"},cond:{description:"Condition for the transition to occur.",type:"string"},action:{description:"Action to execute when the transition occurs.",type:"string"},note:{description:"Comments related to this transition",$ref:"#/definitions/NoteType"},color:{description:'Color to use for rendering the transition. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},width:{description:"The line width to use for rendering the transition",type:"number",minimum:0,maximum:30},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},type:{description:"Whether the transition is external (default) or internal. See https://www.w3.org/TR/scxml/#transition for details.",$ref:"#/definitions/TransitionType"}}}}}}}};var Ic=new qc.default,zg=Ic.compile(Oc),Ug=async e=>{let{parse:t}=await import("./scxml-FIGR732E.js");return t(e)};async function Rc(e,t){let r=e;if(ct(t,"inputType")==="smcat"?r=jc(e):ct(t,"inputType")==="scxml"?r=await Ug(e):typeof e=="string"&&(r=JSON.parse(e)),!zg(r))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${Ic.errorsText()}.
`);return r}var Dn=null,Vn=null,Ln=null,Fn=null,zn=null;async function Un(e){switch(e){case"smcat":return Dn||(Dn=await import("./smcat-VDXHMLA6.js")),Dn.default;case"dot":return Vn||(Vn=await import("./dot-YFYDXNNQ.js")),Vn.default;case"svg":case"oldsvg":return Ln||(Ln=await import("./vector-with-wasm-K56E6FDA.js")),Ln.default;case"scjson":return Fn||(Fn=await import("./scjson-XD7SVYRX.js")),Fn.default;case"scxml":return zn||(zn=await import("./scxml-G3R7NVLX.js")),zn.default;default:return t=>t}}var Ac="14.0.0";var Kn=null;async function Kg(e){Kn||(Kn=await import("./desugar-NAXVOZJI.js"));let t=Kn.default;return t(e)}async function Cc(e,t){let r=t??{},s=await Rc(e,r),i=ct(r,"desugar");return(await Un(ct(r,"outputType")))(i?await Kg(s):s,r)}var Gn=Ac;var Mc=(e,t)=>{let r=document.createElement("img");r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e)),r.addEventListener("load",function(s){let i=document.createElement("canvas"),o=i.getContext("2d"),u=s.target;u.width>32767||u.height>32767?t(null,"image-too-big"):(i.width=u.width,i.height=u.height,o.drawImage(u,0,0),t(i.toDataURL("image/png",.8)))})};var xc={engineering:{dotGraphAttrs:[{name:"bgcolor",value:"dodgerblue"},{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontname",value:"courier"},{name:"fontcolor",value:"white"}]},reverse:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotNodeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}],dotEdgeAttrs:[{name:"color",value:"white"},{name:"fontcolor",value:"white"}]},contrast:{dotGraphAttrs:[{name:"bgcolor",value:"black"},{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotNodeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}],dotEdgeAttrs:[{name:"color",value:"yellow"},{name:"fontcolor",value:"yellow"}]},policetape:{dotGraphAttrs:[{name:"bgcolor",value:"yellow"}],dotNodeAttrs:[],dotEdgeAttrs:[]},transparent:{dotGraphAttrs:[{name:"bgcolor",value:"transparent"}],dotNodeAttrs:[],dotEdgeAttrs:[]},zany:{dotGraphAttrs:[{name:"bgcolor",value:"deeppink"},{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"},{name:"nslimit",value:"0"},{name:"nslimit1",value:"1"}],dotNodeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}],dotEdgeAttrs:[{name:"color",value:"green"},{name:"fontname",value:'"Comic Sans MS"'},{name:"fontcolor",value:"green"}]}};var Bn=`state-machine-cat-${Gn.split(".")[0]}`,Gg=`initial,
"media player off",

"media player on" {
  stopped, playing, paused;

  stopped => playing : play;
  playing => stopped : stop;
  playing => paused  : pause;
  paused  => playing : pause;
  paused  => stopped : stop;
};

initial            => "media player off";
"media player off" => stopped           : power;
"media player on"  => "media player off" : power;`,Q={outputType:"svg",inputType:"smcat",engine:"dot",theme:"vanilla",direction:"top-down",fitToWidth:!1,desugar:!1,autoRender:!0,inputscript:Gg,sample:"/samples/mediaplayer.smcat"};function Hn(e){return t=>t.substr(0,1)===e}function Jn(e){return t=>({name:t.substr(1),value:e[t]})}function Vc(e,t){typeof localStorage<"u"&&localStorage.setItem(e,JSON.stringify(t))}function Hg(e,t){let r=t;if(typeof localStorage<"u")try{r=JSON.parse(localStorage.getItem(e))||t}catch{}return r}function Jg(e){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<!DOCTYPE svg [<!ENTITY nbsp "&#160;">]>'.concat(e))}function re(e){return t=>{Q[e||t.target.id]=t.target.type==="checkbox"?t.target.checked:t.target.value,Vc(Bn,Q),Wn(Q)}}function Lc(){return window.output.getElementsByTagName("svg").length>0}function Wn(e){if(document.getElementById("autoRender").checked=e.autoRender,document.getElementById("fitToWidth").checked=e.fitToWidth,document.getElementById("desugar").checked=e.desugar,document.getElementById("engine").value=e.engine,document.getElementById("theme").value=e.theme,document.getElementById("direction").value=e.direction,document.getElementById("sample").value=e.sample,document.getElementById("inputscript").value=e.inputscript,document.getElementById(e.outputType).checked=!0,document.getElementById(`input_${e.inputType}`).checked=!0,Q.autoRender?(document.getElementById("render").style="display : none",Fc()):document.getElementById("render").style="",Lc()){let t=window.output.getElementsByTagName("svg"),r=new Date().toISOString();document.getElementById("save-svg").href=Jg(t[0].outerHTML),document.getElementById("save-svg").download=`state-machine-${r}.svg`,Mc(t[0].outerHTML,s=>{document.getElementById("save-png").href=s,document.getElementById("save-png").download=`state-machine-${r}.png`})}}function Bg(e){let t=Object.keys(e).filter(Hn("G")).map(Jn(e)),r=Object.keys(e).filter(Hn("N")).map(Jn(e)),s=Object.keys(e).filter(Hn("E")).map(Jn(e)),i={};return t.length>0&&(i.dotGraphAttrs=t),r.length>0&&(i.dotNodeAttrs=r),s.length>0&&(i.dotEdgeAttrs=s),i}function Wg(e){let t=new URLSearchParams(e),r={};for(let[s,i]of t.entries())r[s]=i;return r}function Xg(e,t){return e[t]||{dotGraphAttrs:[],dotNodeAttrs:[],dotEdgeAttrs:[]}}function Yg(e){return e.slice(0,1024).replace(/</g,"&lt;")}async function Fc(){window.output.textContent="Loading ...";try{let e=Yg(location.search),t=Object.assign({inputType:Q.inputType,outputType:Q.outputType,engine:Q.engine,direction:Q.direction,desugar:Q.desugar},Xg(xc,Q.theme),Bg(Wg(e))),r=await Cc(Q.inputscript,t);window.output.style=`background-color: ${(t.dotGraphAttrs.find(s=>s.name==="bgcolor")||{value:"transparent"}).value}`,window.output.innerHTML=Zg(r,Q.outputType,Q.fitToWidth)}catch(e){window.output.textContent=e}}function Zg(e,t,r){switch(t){case"json":case"scjson":return`<pre>${JSON.stringify(e,null,"    ").replace(/</g,"&lt;")}</pre>`;case"svg":return r?e.replace(/svg width="[^"]+"/g,'svg width="100%"'):e;default:return`<pre>${e.replace(/</g,"&lt;")}</pre>`}}function zc(){window.inputscript.style.height="${height}px".replace("${height}",window.innerHeight-120)}function Qg(e,t){window.contextmenu.style=`display: block; position: absolute; z-index: 2; left: ${e}px; top: ${t-70}px`}function Jr(){window.contextmenu.style="display : none"}function Dc(e){LOG}Q=Hg(Bn,Q);window.svg.addEventListener("click",re("outputType"),!1);window.dot.addEventListener("click",re("outputType"),!1);window.json.addEventListener("click",re("outputType"),!1);window.smcat.addEventListener("click",re("outputType"),!1);window.scjson.addEventListener("click",re("outputType"),!1);window.scxml.addEventListener("click",re("outputType"),!1);window.svg.addEventListener("click",re("outputType"),!1);window.inputscript.addEventListener("input",re());window.direction.addEventListener("change",re());window.engine.addEventListener("change",re());window.theme.addEventListener("change",re());window.input_json.addEventListener("click",re("inputType"),!1);window.input_smcat.addEventListener("click",re("inputType"),!1);window.input_scxml.addEventListener("click",re("inputType"),!1);window.fitToWidth.addEventListener("click",re(),!1);window.autoRender.addEventListener("click",re(),!1);window.desugar.addEventListener("click",re(),!1);window.render.addEventListener("click",async()=>await Fc(),!1);window.addEventListener("resize",zc);window.output.addEventListener("contextmenu",e=>{Lc()&&(e.preventDefault(),Qg(e.clientX,e.clientY))});document.getElementById("save-svg").addEventListener("click",Jr);document.getElementById("save-png").addEventListener("click",Jr);window.output.addEventListener("click",Jr);window.addEventListener("keyup",e=>{e.code==="Escape"&&Jr()});window.sample.addEventListener("change",e=>{e.target.value&&(Q.sample=e.target.value,fetch(e.target.value).then(t=>{if(t.status===200)return t.text();Dc(t)}).then(t=>{t&&(Q.inputscript=t,Vc(Bn,Q),Wn(Q))}).catch(Dc))});window.version.innerHTML="state machine cat ${version}".replace("${version}",Gn);zc();Wn(Q);
//# sourceMappingURL=smcat-online-interpreter.js.map
