{
  "version": 3,
  "sources": ["../../src/render/dot/index.mts", "../../src/render/dot/attributebuilder.mts", "../../src/render/dot/utl.mts"],
  "sourcesContent": ["/* eslint-disable max-params */\n/* eslint-disable max-lines */\n/* eslint-disable no-use-before-define */\n/* eslint-disable complexity */\nimport he from \"he\";\nimport type {\n  IStateMachine,\n  IRenderOptions,\n  IState,\n  ITransition,\n  StateType,\n  IActionType,\n} from \"../../../types/state-machine-cat.mjs\";\nimport { getOptionValue } from \"../../options.mjs\";\nimport StateMachineModel from \"../../state-machine-model.mjs\";\nimport {\n  buildGraphAttributes,\n  buildNodeAttributes,\n  buildEdgeAttributes,\n} from \"./attributebuilder.mjs\";\nimport {\n  escapeLabelString,\n  formatActionType,\n  getTransitionPorts,\n  isCompositeSelf,\n  isVertical,\n  type IStateNormalized,\n  noteToLabel,\n  normalizeState,\n  stateNote,\n} from \"./utl.mjs\";\n\nfunction initial(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" penwidth=3.0\" : \"\";\n\n  return `${pIndent}  \"${pState.name}\" [shape=circle style=filled class=\"${pState.class}\" color=\"${pState.color}\" fillcolor=\"${pState.color}\" fixedsize=true height=0.15 label=\"\"${lActiveAttribute}]${pState.noteText}`;\n}\n\nfunction regularStateActions(pActions: IActionType[], pIndent: string): string {\n  return pActions\n    .map((pAction) =>\n      he.escape(`${formatActionType(pAction.type)}${pAction.body}`),\n    )\n    .map((pActionString, pIndex) => {\n      let lReturnValue = `<tr><td align=\"left\" cellpadding=\"2\">${pActionString}</td></tr>`;\n      if (pIndex === 0) {\n        lReturnValue = `<hr/>${lReturnValue}`;\n      }\n      return `\\n${pIndent}        ${lReturnValue}`;\n    })\n    .join(\"\");\n}\n\n// TODO: regularStateActions and compositeStateActions differ by the 'cellpadding' attribute\n//       - would it hurt to add it to the composite, so we can have just one function?\n//       - if not - parametrize?\nfunction compositeStateActions(\n  pActions: IActionType[],\n  pIndent: string,\n): string {\n  return pActions\n    .map((pAction) =>\n      he.escape(`${formatActionType(pAction.type)}${pAction.body}`),\n    )\n    .map((pActionString, pIndex) => {\n      let lReturnValue = `<tr><td align=\"left\">${pActionString}</td></tr>`;\n      if (pIndex === 0) {\n        lReturnValue = `<hr/>${lReturnValue}`;\n      }\n      return `\\n${pIndent}        ${lReturnValue}`;\n    })\n    .join(\"\");\n}\n\nfunction atomicRegular(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" peripheries=1 style=rounded\" : \"\";\n  // eslint-disable-next-line no-magic-numbers\n  const lCellPadding = (pState.actions?.length ?? 0) > 0 ? 2 : 7;\n  const lActions = regularStateActions(pState?.actions ?? [], pIndent);\n\n  const lLabel = pState.active ? `<i>${pState.label}</i>` : pState.label;\n  const lLabelTag = `\n${pIndent}    <table align=\"center\" cellborder=\"0\" border=\"2\" style=\"rounded\" width=\"48\">\n${pIndent}      <tr><td width=\"48\" cellpadding=\"${lCellPadding}\">${lLabel}</td></tr>${lActions}\n${pIndent}    </table>`;\n\n  return `${pIndent}  \"${pState.name}\" [margin=0 class=\"${pState.class}\" label= <${lLabelTag}\n${pIndent}  >${pState.colorAttribute}${pState.fontColorAttribute}${lActiveAttribute}]${pState.noteText}`;\n}\n\nfunction compositeRegular(\n  pState: IStateNormalized,\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n  pRenderedTransitions: Set<number>,\n): string {\n  // eslint-disable-next-line no-nested-ternary\n  const lPenWidth = pState.isParallelArea\n    ? \"1.0\"\n    : pState.active\n      ? \"3.0\"\n      : \"2.0\";\n  const lStyle = pState.isParallelArea ? \"dashed\" : \"rounded\";\n  const lActions = compositeStateActions(pState?.actions ?? [], pIndent);\n  const lLabel = pState.active ? `<i>${pState.label}</i>` : pState.label;\n  const lLabelTag = `${pIndent}    <table cellborder=\"0\" border=\"0\">\n${pIndent}      <tr><td>${lLabel}</td></tr>${lActions}\n${pIndent}    </table>`;\n\n  const lSelfTransitionHelperPoints = pModel\n    .findExternalSelfTransitions(pState.name)\n    .map(\n      (pTransition) =>\n        `${pIndent}  \"self_tr_${pTransition.from}_${pTransition.to}_${pTransition.id}\" [shape=point style=invis width=0 height=0 fixedsize=true]\\n`,\n    )\n    .join(\"\");\n\n  return `${lSelfTransitionHelperPoints}${pIndent}  subgraph \"cluster_${pState.name}\" {\n${pIndent}    class=\"${pState.class}\" label= <\n${lLabelTag}\n${pIndent}    > style=${lStyle} penwidth=${lPenWidth}${pState.colorAttribute}${pState.fontColorAttribute}\n${pIndent}    \"${pState.name}\" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]\n${states(pState?.statemachine?.states ?? [], `${pIndent}    `, pOptions, pModel, pRenderedTransitions)}\n${pIndent}  }${pState.noteText}`;\n}\n\nfunction regular(\n  pState: IStateNormalized,\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n  pRenderedTransitions: Set<number>,\n): string {\n  if (pState.statemachine) {\n    return compositeRegular(\n      pState,\n      pIndent,\n      pOptions,\n      pModel,\n      pRenderedTransitions,\n    );\n  }\n  return atomicRegular(pState, pIndent);\n}\n\nfunction history(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" peripheries=2 penwidth=3.0\" : \"\";\n\n  return `${pIndent}  \"${pState.name}\" [shape=circle class=\"${pState.class}\" label=\"H\"${pState.colorAttribute}${pState.fontColorAttribute}${lActiveAttribute}]${pState.noteText}`;\n}\n\nfunction deepHistory(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" peripheries=2 penwidth=3.0\" : \"\";\n\n  return `${pIndent}  \"${pState.name}\" [shape=circle class=\"${pState.class}\" label=\"H*\"${pState.colorAttribute}${pState.fontColorAttribute}${lActiveAttribute}]${pState.noteText}`;\n}\n\nfunction choiceActions(pActions: IActionType[], pActive: boolean): string {\n  return pActions\n    .map((pAction) => {\n      let lReturnValue = he.escape(\n        `${formatActionType(pAction.type)}${pAction.body}`,\n      );\n      if (pActive) {\n        lReturnValue = `<i>${lReturnValue}</i>`;\n      }\n      return lReturnValue;\n    })\n    .join(\"\\\\n\");\n}\n\nfunction choice(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \"penwidth=3.0 \" : \"\";\n  const lActions = choiceActions(\n    pState?.actions ?? [],\n    pState?.active ?? false,\n  );\n  const lLabelTag = lActions;\n  const lDiamond = `${pIndent}  \"${pState.name}\" [shape=diamond fixedsize=true width=0.35 height=0.35 fontsize=10 label=\" \" class=\"${pState.class}\"${pState.colorAttribute}${lActiveAttribute}]`;\n  const lLabelConstruct = `${pIndent}  \"${pState.name}\" -> \"${pState.name}\" [color=\"#FFFFFF01\" fontcolor=\"${pState.color}\" class=\"${pState.class}\" label=<${lLabelTag}>]`;\n\n  return `${lDiamond}\\n${lLabelConstruct}${pState.noteText}`;\n}\n\nfunction forkjoin(\n  pState: IStateNormalized,\n  pIndent: string,\n  pOptions: IRenderOptions,\n): string {\n  const lActiveAttribute = pState.active ? \"penwidth=3.0 \" : \"\";\n  const lDirection = getOptionValue(pOptions, \"direction\") as string;\n  const lSizingExtras = isVertical(lDirection) ? \" height=0.1\" : \" width=0.1\";\n\n  return `${pIndent}  \"${pState.name}\" [shape=rect fixedsize=true label=\" \" style=filled class=\"${pState.class}\" color=\"${pState.color}\" fillcolor=\"${pState.color}\"${lActiveAttribute}${lSizingExtras}]${pState.noteText}`;\n}\n\nfunction junction(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" penwidth=3.0\" : \"\";\n  const lNote = stateNote(pState, pIndent);\n\n  return `${pIndent}  \"${pState.name}\" [shape=circle fixedsize=true height=0.15 label=\"\" style=filled class=\"${pState.class}\" color=\"${pState.color}\" fillcolor=\"${pState.color}\"${lActiveAttribute}]${lNote}`;\n}\n\nfunction terminate(pState: IStateNormalized, pIndent: string): string {\n  const lLabelTag = `\n${pIndent}      <table align=\"center\" cellborder=\"0\" border=\"0\">\n${pIndent}        <tr><td cellpadding=\"0\"><font color=\"${pState.color}\" point-size=\"20\">X</font></td></tr>\n${pIndent}        <tr><td cellpadding=\"0\"><font color=\"${pState.color}\">${pState.label}</font></td></tr>\n${pIndent}      </table>`;\n\n  return `${pIndent}  \"${pState.name}\" [label= <${lLabelTag}\n${pIndent}    > class=\"${pState.class}\"]${pState.noteText}`;\n}\n\nfunction final(pState: IStateNormalized, pIndent: string): string {\n  const lActiveAttribute = pState.active ? \" peripheries=2 penwidth=3.0\" : \"\";\n\n  return `${pIndent}  \"${pState.name}\" [shape=circle style=filled class=\"${pState.class}\" color=\"${pState.color}\" fillcolor=\"${pState.color}\" fixedsize=true height=0.15 peripheries=2 label=\"\"${lActiveAttribute}]${pState.noteText}`;\n}\n// @ts-expect-error - TS is yapping about something that just works  :shrug:\nconst STATE_TYPE2FUNCTION = new Map<\n  StateType,\n  (\n    pState: IStateNormalized,\n    pIndent: string,\n    pOptions: IRenderOptions,\n    pModel?: StateMachineModel,\n  ) => string\n>([\n  [\"initial\", initial],\n  [\"regular\", regular],\n  [\"history\", history],\n  [\"deephistory\", deepHistory],\n  [\"choice\", choice],\n  [\"fork\", forkjoin],\n  [\"forkjoin\", forkjoin],\n  [\"join\", forkjoin],\n  [\"junction\", junction],\n  [\"terminate\", terminate],\n  [\"final\", final],\n  // parallel\n]);\n\nfunction state(\n  pState: IState,\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n  pRenderedTransitions: Set<number>,\n): string {\n  const lState = normalizeState(pState, pOptions, pIndent);\n  const lCandidateTransitions = pModel.findTransitionsToSiblings(\n    pState.name,\n    pRenderedTransitions,\n  );\n  for (const lTransition of lCandidateTransitions) {\n    pRenderedTransitions.add(lTransition.id);\n  }\n  const lTransitions = transitions(\n    lCandidateTransitions,\n    pIndent,\n    pOptions,\n    pModel,\n  );\n\n  return (\n    // eslint-disable-next-line prefer-template\n    (STATE_TYPE2FUNCTION.get(pState.type) ?? regular)(\n      lState,\n      pIndent,\n      pOptions,\n      pModel,\n      pRenderedTransitions,\n    ) +\n    lTransitions +\n    \"\\n\"\n  );\n}\n\nfunction states(\n  pStates: IState[],\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n  pRenderedTransitions: Set<number>,\n): string {\n  return pStates\n    .map((pState) =>\n      state(pState, pIndent, pOptions, pModel, pRenderedTransitions),\n    )\n    .join(\"\");\n}\n\n// eslint-disable-next-line max-statements, max-lines-per-function\nfunction transition(\n  pTransition: ITransition,\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n): string {\n  // TODO: should also be he.escape'd?\n  const lLabel = `${escapeLabelString(pTransition.label ?? \" \")}`;\n  // using a default color  (`pTransition.color ?? \"black\"`) makes the output\n  // look more consistent and easier to check, but it also blocks the 'inheritance'\n  //\n  const lColorAttribute = pTransition.color\n    ? ` color=\"${pTransition.color}\"`\n    : \"\";\n  const lFontColorAttribute = pTransition.color\n    ? ` fontcolor=\"${pTransition.color}\"`\n    : \"\";\n  const lPenWidth = pTransition.width ? ` penwidth=${pTransition.width}` : \"\";\n  const lClass = pTransition.class\n    ? // eslint-disable-next-line prefer-template\n      `transition${pTransition.type ? \" \" + pTransition.type + \" \" : \" \"}${pTransition.class}`\n    : // eslint-disable-next-line prefer-template\n      `transition${pTransition.type ? \" \" + pTransition.type : \"\"}`;\n  // for transitions to/ from composite states put the _cluster_ as the head\n  // instead of the state itself\n  const lTail = pModel.findStateByName(pTransition.from)?.statemachine\n    ? ` ltail=\"cluster_${pTransition.from}\"`\n    : \"\";\n  const lHead = pModel.findStateByName(pTransition.to)?.statemachine\n    ? ` lhead=\"cluster_${pTransition.to}\"`\n    : \"\";\n  const lTransitionName = `tr_${pTransition.from}_${pTransition.to}_${pTransition.id}`;\n\n  if (isCompositeSelf(pModel, pTransition)) {\n    // for self-transitions to/ from composite states ensure the transition leaves\n    // and enters to/ from the right side of the state\n    const { lTailPorts, lHeadPorts } = getTransitionPorts(\n      pOptions,\n      pModel,\n      pTransition,\n    );\n    // as for composite self-transitions the transition is already split, we just\n    // have to connect any note to that same split point\n    let lNoteAndLine = \"\";\n    if (pTransition.note) {\n      const lNoteName = `note_${lTransitionName}`;\n      const lLineToNote = `\\n${pIndent}  \"${lNoteName}\" -> \"self_tr_${pTransition.from}_${pTransition.to}_${pTransition.id}\" [style=dashed arrowtail=none arrowhead=none weight=0]`;\n      const lNote = `\\n${pIndent}  \"${lNoteName}\" [label=\"${noteToLabel(pTransition.note)}\" shape=note fontsize=10 color=black fontcolor=black fillcolor=\"#ffffcc\" penwidth=1.0]`;\n      lNoteAndLine = lLineToNote + lNote;\n    }\n\n    // the invisible 'self' node is declared with the state (so not here). If we\n    // do it later than in the state the transition is guaranteed to look ugly.\n    const lTransitionFrom = `\\n${pIndent}  \"${pTransition.from}\" -> \"self_tr_${pTransition.from}_${pTransition.to}_${pTransition.id}\" [label=\"${lLabel}\" arrowhead=none class=\"${lClass}\"${lTailPorts}${lTail}${lColorAttribute}${lFontColorAttribute}${lPenWidth}]`;\n    const lTransitionTo = `\\n${pIndent}  \"self_tr_${pTransition.from}_${pTransition.to}_${pTransition.id}\" -> \"${pTransition.to}\" [class=\"${lClass}\"${lHead}${lHeadPorts}${lColorAttribute}${lPenWidth}]`;\n    return lTransitionFrom + lTransitionTo + lNoteAndLine;\n  }\n\n  // to attach a note, split the transition in half, reconnect them via an\n  // in-between point and connect the note to that in-between point as well\n  if (pTransition.note) {\n    const lNoteName = `note_${lTransitionName}`;\n    const lNoteNodeName = `i_${lNoteName}`;\n    const lNoteNode = `\\n${pIndent}  \"${lNoteNodeName}\" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]`;\n    const lTransitionFrom = `\\n${pIndent}  \"${pTransition.from}\" -> \"${lNoteNodeName}\" [arrowhead=none${lTail}${lColorAttribute}${lPenWidth}]`;\n    const lTransitionTo = `\\n${pIndent}  \"${lNoteNodeName}\" -> \"${pTransition.to}\" [label=\"${lLabel}\"${lHead}${lColorAttribute}${lFontColorAttribute}${lPenWidth}]`;\n    const lLineToNote = `\\n${pIndent}  \"${lNoteNodeName}\" -> \"${lNoteName}\" [style=dashed arrowtail=none arrowhead=none weight=0]`;\n    const lNote = `\\n${pIndent}  \"${lNoteName}\" [label=\"${noteToLabel(pTransition.note)}\" shape=note fontsize=10 color=black fontcolor=black fillcolor=\"#ffffcc\" penwidth=1.0]`;\n\n    return lNoteNode + lTransitionFrom + lTransitionTo + lLineToNote + lNote;\n  }\n\n  return `\\n${pIndent}  \"${pTransition.from}\" -> \"${pTransition.to}\" [label=\"${lLabel}\" class=\"${lClass}\"${lTail}${lHead}${lColorAttribute}${lFontColorAttribute}${lPenWidth}]`;\n}\n\nfunction transitions(\n  pTransitions: ITransition[],\n  pIndent: string,\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n): string {\n  return pTransitions\n    .map((pTransition) => transition(pTransition, pIndent, pOptions, pModel))\n    .join(\"\");\n}\n\n// eslint-disable-next-line max-lines-per-function\nexport default function renderDot(\n  pStateMachine: IStateMachine,\n  pOptions: IRenderOptions = {},\n  pIndent: string = \"\",\n): string {\n  const lGraphAttributes = buildGraphAttributes(\n    getOptionValue(pOptions, \"engine\") as string,\n    getOptionValue(pOptions, \"direction\") as string,\n    pOptions?.dotGraphAttrs || [],\n  );\n  const lNodeAttributes = buildNodeAttributes(pOptions.dotNodeAttrs || []);\n  const lEdgeAttributes = buildEdgeAttributes(pOptions.dotEdgeAttrs || []);\n  const lModel = new StateMachineModel(pStateMachine);\n  const lRenderedTransitions: Set<number> = new Set();\n  const lStates = states(\n    pStateMachine.states,\n    pIndent,\n    pOptions,\n    lModel,\n    lRenderedTransitions,\n  );\n  // ideally, we render transitions together with the states. However, in graphviz\n  // that only renders as we want to if we if the transition is _within_ the state.\n  // In this guy 'a' is rendered within cluster_b, though\n  // digraph {\n  //   a\n  //     subgraph \"cluster_b\" {\n  //     label=b\n  //       ba\n  //       ba -> a\n  //   }\n  // }\n  // This is documented and defined behavior in graphviz, so we will have to\n  // work around that...\n  // - one way is to render all transitions separately in one go which (accidentally)\n  // did in the previous render engine. That is guaranteed to work, but\n  // some transitions might look ugly (i.e. when attaching a note the note\n  // and the intermediate node will be in the outer state)\n  // - Another way would be to render the transitions in the most outer state of\n  // the (to, from). This is a nice idea, but it's not guaranteed to work\n  // because how the graphviz engine works. If there's a transition defined in\n  // state A to substate BB of state B, it will only show up if BB is already\n  // declared in the graph. If it's not, the transition will be ignored.\n  // - The compromise we landed with is to\n  // 1. Render transitions within a composite state if _both_ ends of the transition\n  //    are in that state (see the state function above). That means at least\n  //    comments on transitions for these will look a bit nicer.\n  // 2. Render all other transitions separately (below)\n  const lRemainingTransitions = transitions(\n    lModel.flattenedTransitions.filter(\n      (pTransition) => !lRenderedTransitions.has(pTransition.id),\n    ),\n    pIndent,\n    pOptions,\n    lModel,\n  );\n\n  return `digraph \"state transitions\" {\n  ${lGraphAttributes}\n  node [${lNodeAttributes}]\n  edge [${lEdgeAttributes}]\n\n${lStates}${lRemainingTransitions}\n}\n`;\n}\n", "/* eslint-disable security/detect-object-injection */\ninterface INameValuePair {\n  name: string;\n  value: string | number;\n}\nconst GENERIC_GRAPH_ATTRIBUTES: INameValuePair[] = [\n  { name: \"fontname\", value: '\"Helvetica\"' },\n  { name: \"fontsize\", value: \"12\" },\n  { name: \"penwidth\", value: \"2.0\" },\n];\n\nconst GRAPH_ATTRIBUTES: { [engine: string]: INameValuePair[] } = {\n  dot: [\n    { name: \"splines\", value: \"true\" },\n    { name: \"ordering\", value: \"out\" },\n    { name: \"compound\", value: \"true\" },\n    { name: \"overlap\", value: \"scale\" },\n    { name: \"nodesep\", value: \"0.3\" },\n    { name: \"ranksep\", value: \"0.1\" },\n  ],\n  fdp: [{ name: \"K\", value: \"0.9\" }],\n  osage: [{ name: \"pack\", value: \"42\" }],\n  neato: [{ name: \"epsilon\", value: \"0.9\" }],\n};\n\nconst DIRECTION_ATTRIBUTES: { [engine: string]: INameValuePair[] } = {\n  \"bottom-top\": [{ name: \"rankdir\", value: \"BT\" }],\n  \"left-right\": [{ name: \"rankdir\", value: \"LR\" }],\n  \"right-left\": [{ name: \"rankdir\", value: \"RL\" }],\n};\n\nconst NODE_ATTRIBUTES: INameValuePair[] = [\n  { name: \"shape\", value: \"plaintext\" },\n  { name: \"style\", value: \"filled\" },\n  { name: \"fillcolor\", value: '\"#FFFFFF01\"' },\n  { name: \"fontname\", value: \"Helvetica\" },\n  { name: \"fontsize\", value: 12 },\n  { name: \"penwidth\", value: \"2.0\" },\n];\n\nconst EDGE_ATTRIBUTES: INameValuePair[] = [\n  { name: \"fontname\", value: \"Helvetica\" },\n  { name: \"fontsize\", value: 10 },\n];\n\nfunction toNameValueString(pAttribute: INameValuePair): string {\n  return `${pAttribute.name}=${pAttribute.value}`;\n}\n\n// eslint-disable-next-line complexity\nexport function buildGraphAttributes(\n  pEngine: string,\n  pDirection: string,\n  pDotGraphAttributes?: INameValuePair[],\n): string {\n  const lParts: INameValuePair[] = [];\n\n  for (const lAttribute of GENERIC_GRAPH_ATTRIBUTES) {\n    lParts.push(lAttribute);\n  }\n  for (const lAttribute of GRAPH_ATTRIBUTES[pEngine] || []) {\n    lParts.push(lAttribute);\n  }\n  for (const lAttribute of DIRECTION_ATTRIBUTES[pDirection] || []) {\n    lParts.push(lAttribute);\n  }\n  for (const lAttribute of pDotGraphAttributes || []) {\n    lParts.push(lAttribute);\n  }\n\n  return lParts.map(toNameValueString).join(\" \");\n}\n\nexport function buildNodeAttributes(\n  pDotNodeAttributes?: INameValuePair[],\n): string {\n  return NODE_ATTRIBUTES.concat(pDotNodeAttributes || [])\n    .map(toNameValueString)\n    .join(\" \");\n}\n\nexport function buildEdgeAttributes(\n  pDotEdgeAttributes?: INameValuePair[],\n): string {\n  return EDGE_ATTRIBUTES.concat(pDotEdgeAttributes || [])\n    .map(toNameValueString)\n    .join(\" \");\n}\n", "import he from \"he\";\nimport { getOptionValue } from \"../../options.mjs\";\nimport type {\n  dotAttributesType,\n  IRenderOptions,\n  IState,\n  ITransition,\n} from \"../../../types/state-machine-cat.mjs\";\nimport type StateMachineModel from \"../../state-machine-model.mjs\";\n\nconst COLORABLE_STATE_TYPES: Set<string> = new Set([\n  \"initial\",\n  \"fork\",\n  \"join\",\n  \"junction\",\n  \"forkjoin\",\n  \"terminate\",\n  \"final\",\n]);\n\n// eslint-disable-next-line complexity\nfunction getStateColor(\n  pState: IState,\n  pNodeAttributes?: dotAttributesType,\n): string {\n  const lNodeColor = (pNodeAttributes || []).find(\n    (pAttribute) => pAttribute.name === \"color\",\n  )?.value;\n\n  if (lNodeColor && !pState.color && COLORABLE_STATE_TYPES.has(pState.type)) {\n    return lNodeColor;\n  }\n  return pState.color ?? \"black\";\n}\n\nexport function escapeString(pString: string): string {\n  return pString\n    .replace(/\\\\/g, \"\\\\\\\\\")\n    .replace(/\\n\\s*/g, \"\\\\l\")\n    .replace(/\"/g, '\\\\\"')\n    .concat(\"\\\\l\");\n}\n\nexport function escapeLabelString(pString: string): string {\n  return pString\n    .replace(/\\\\/g, \"\\\\\\\\\")\n    .replace(/\\n\\s*/g, \"   \\\\l\")\n    .replace(/\"/g, '\\\\\"')\n    .concat(\"   \\\\l\");\n}\n\n// TODO integrate this into the normalization\n\nexport function isVertical(pDirection: string): boolean {\n  const lDirection = pDirection || \"top-down\";\n\n  return lDirection === \"top-down\" || lDirection === \"bottom-top\";\n}\n\nexport function isCompositeSelf(\n  pStateMachineModel: StateMachineModel,\n  pTransition: ITransition,\n): boolean {\n  return (\n    pTransition.from === pTransition.to &&\n    (pStateMachineModel.findStateByName(pTransition.from)?.statemachine ??\n      false) &&\n    pTransition.type !== \"internal\"\n  );\n}\n\nexport interface IStateNormalized extends IState {\n  colorAttribute: string;\n  fontColorAttribute: string;\n  class: string;\n  label: string;\n  noteText: string;\n  isParallelArea: boolean;\n}\n\nexport function noteToLabel(pNote: string[]): string {\n  return pNote.map(escapeString).join(\"\");\n}\n\nexport function stateNote(pState: IState, pIndent: string): string {\n  if (pState.note) {\n    const lNoteName = `note_${pState.name}`;\n    let lReturnValue = `\\n${pIndent}  \"${lNoteName}\" [color=black fontcolor=black label=\"${noteToLabel(pState.note)}\" shape=note fontsize=10 fillcolor=\"#ffffcc\" penwidth=1.0]`;\n\n    lReturnValue += `\\n${pIndent}  \"${pState.name}\" -> \"${lNoteName}\" [style=dashed arrowtail=none arrowhead=none]`;\n\n    return lReturnValue;\n  }\n  return \"\";\n}\n\n// eslint-disable-next-line complexity\nexport function normalizeState(\n  pState: IState & Partial<IStateNormalized>,\n  pOptions: IRenderOptions,\n  pIndent: string,\n): IStateNormalized {\n  const lReturnValue = structuredClone(pState) as IStateNormalized;\n\n  // TODO: this is kludgy\n  // we use these in regular, composite and history states\n  lReturnValue.colorAttribute = pState.color ? ` color=\"${pState.color}\"` : \"\";\n  lReturnValue.fontColorAttribute = pState.color\n    ? ` fontcolor=\"${pState.color}\"`\n    : \"\";\n  // we use these in initial, fork, join, junction, forkjoin, terminal and final states\n  lReturnValue.color = getStateColor(pState, pOptions.dotNodeAttrs);\n\n  lReturnValue.class = pState.class\n    ? `state ${pState.type} ${pState.class}`\n    : `state ${pState.type}`;\n  lReturnValue.label = he.escape(pState.label ?? pState.name);\n  lReturnValue.noteText = stateNote(pState, pIndent);\n  if (\n    !pState.isParallelArea &&\n    pState.type === \"parallel\" &&\n    (pState.statemachine?.states ?? []).length > 0\n  ) {\n    // @ts-expect-error as lReturnValue is a clone of pStates statemachine && states\n    //                  are bound to exist on there as well.\n    lReturnValue.statemachine.states = pState.statemachine.states.map(\n      (pChildState) => ({\n        ...pChildState,\n        isParallelArea: pChildState.type === \"regular\",\n      }),\n    );\n  }\n\n  return lReturnValue;\n}\n\nexport function formatActionType(pString: string): string {\n  return pString === \"activity\" ? \"\" : `${pString}/ `;\n}\n\nexport function getTransitionPorts(\n  pOptions: IRenderOptions,\n  pModel: StateMachineModel,\n  pTransition: ITransition,\n) {\n  let lTailPorts = ' tailport=\"n\" headport=\"n\"';\n  let lHeadPorts = ' tailport=\"n\"';\n  const lDirection = getOptionValue(pOptions, \"direction\") as string;\n  if (isVertical(lDirection)) {\n    lTailPorts = ' tailport=\"e\" headport=\"e\"';\n    lHeadPorts = ' tailport=\"w\"';\n  } else if (pModel.findStateByName(pTransition.from)?.parent ?? false) {\n    lTailPorts = ' tailport=\"n\" headport=\"n\"';\n    lHeadPorts = ' tailport=\"s\"';\n  }\n  return { lTailPorts, lHeadPorts };\n}\n"],
  "mappings": "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",
  "names": ["import_he", "GENERIC_GRAPH_ATTRIBUTES", "GRAPH_ATTRIBUTES", "DIRECTION_ATTRIBUTES", "NODE_ATTRIBUTES", "EDGE_ATTRIBUTES", "toNameValueString", "pAttribute", "buildGraphAttributes", "pEngine", "pDirection", "pDotGraphAttributes", "lParts", "lAttribute", "buildNodeAttributes", "pDotNodeAttributes", "buildEdgeAttributes", "pDotEdgeAttributes", "import_he", "COLORABLE_STATE_TYPES", "getStateColor", "pState", "pNodeAttributes", "lNodeColor", "pAttribute", "escapeString", "pString", "escapeLabelString", "isVertical", "pDirection", "lDirection", "isCompositeSelf", "pStateMachineModel", "pTransition", "noteToLabel", "pNote", "stateNote", "pIndent", "lNoteName", "lReturnValue", "normalizeState", "pOptions", "he", "pChildState", "formatActionType", "getTransitionPorts", "pModel", "lTailPorts", "lHeadPorts", "getOptionValue", "initial", "pState", "pIndent", "lActiveAttribute", "regularStateActions", "pActions", "pAction", "he", "formatActionType", "pActionString", "pIndex", "lReturnValue", "compositeStateActions", "atomicRegular", "lCellPadding", "lActions", "lLabel", "lLabelTag", "compositeRegular", "pOptions", "pModel", "pRenderedTransitions", "lPenWidth", "lStyle", "pTransition", "states", "regular", "history", "deepHistory", "choiceActions", "pActive", "choice", "lDiamond", "lLabelConstruct", "forkjoin", "lDirection", "getOptionValue", "lSizingExtras", "isVertical", "junction", "lNote", "stateNote", "terminate", "final", "STATE_TYPE2FUNCTION", "state", "lState", "normalizeState", "lCandidateTransitions", "lTransition", "lTransitions", "transitions", "pStates", "transition", "escapeLabelString", "lColorAttribute", "lFontColorAttribute", "lClass", "lTail", "lHead", "lTransitionName", "isCompositeSelf", "lTailPorts", "lHeadPorts", "getTransitionPorts", "lNoteAndLine", "lNoteName", "lLineToNote", "noteToLabel", "lTransitionFrom", "lTransitionTo", "lNoteNodeName", "lNoteNode", "pTransitions", "renderDot", "pStateMachine", "lGraphAttributes", "buildGraphAttributes", "lNodeAttributes", "buildNodeAttributes", "lEdgeAttributes", "buildEdgeAttributes", "lModel", "StateMachineModel", "lRenderedTransitions", "lStates", "lRemainingTransitions"]
}
