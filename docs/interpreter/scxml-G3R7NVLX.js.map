{
  "version": 3,
  "sources": ["../../src/render/scxml/render-from-scjson.mts", "../../src/render/scxml/index.mts"],
  "sourcesContent": ["import he from \"he\";\nimport type {\n  ISCJSONMachine,\n  ISCJSONState,\n  ISCJSONTransition,\n} from \"../scjson/scjson.js\";\n\nconst INDENT_LENGTH = 4;\n\nfunction indentString(pString: string, pCount: number): string {\n  const lRegex = /^(?!\\s*$)/gm;\n\n  return pString.replace(lRegex, \" \".repeat(pCount));\n}\n\nfunction renderTransitionAttributes(pTransition: ISCJSONTransition): string {\n  let lReturnValue = \"\";\n  if (pTransition.event) {\n    lReturnValue += ` event=\"${he.escape(pTransition.event)}\"`;\n  }\n  if (pTransition.cond) {\n    lReturnValue += ` cond=\"${he.escape(pTransition.cond)}\"`;\n  }\n  if (pTransition.type) {\n    lReturnValue += ` type=\"${he.escape(pTransition.type)}\"`;\n  }\n  lReturnValue += ` target=\"${he.escape(pTransition.target)}\"`;\n  return lReturnValue;\n}\n\nfunction renderRegularTransition(\n  pTransition: ISCJSONTransition,\n  pDepth: number,\n): string {\n  const lReturnValue = `\n<transition${renderTransitionAttributes(pTransition)}/>`;\n  return indentString(lReturnValue, pDepth * INDENT_LENGTH);\n}\n\nfunction renderActionTransition(\n  pTransition: ISCJSONTransition & { action: string },\n  pDepth: number,\n): string {\n  const lReturnValue = `\n<transition${renderTransitionAttributes(pTransition)}>\n    ${he.escape(pTransition.action)}\n</transition>`;\n  return indentString(lReturnValue, pDepth * INDENT_LENGTH);\n}\n\nfunction renderTransition(\n  pTransition: ISCJSONTransition,\n  pDepth: number,\n): string {\n  if (pTransition.action) {\n    return renderActionTransition(\n      pTransition as ISCJSONTransition & { action: string },\n      pDepth,\n    );\n  }\n\n  return renderRegularTransition(pTransition, pDepth);\n}\n\nfunction renderTransitions(\n  pTransitions?: ISCJSONTransition[],\n  // @ts-expect-error Yes. pDepth follows optional parameter. So What?\n  pDepth: number,\n): string {\n  return (pTransitions ?? [])\n    .map((pTransition) => renderTransition(pTransition, pDepth))\n    .join(\"\");\n}\n\nfunction renderSimpleTag(\n  pOnExit: string,\n  pTag: string,\n  pDepth: number,\n): string {\n  const lReturnValue = `\n<${pTag}>${he.escape(pOnExit)}</${pTag}>`;\n  return indentString(lReturnValue, pDepth * INDENT_LENGTH);\n}\n\n// @ts-expect-error Yes. pDepth follows optional parameter. So What?\nfunction renderOnEntries(pOnEntries?: string[], pDepth: number): string {\n  return (pOnEntries ?? [])\n    .map((pOnEntry) => renderSimpleTag(pOnEntry, \"onentry\", pDepth))\n    .join(\"\");\n}\n\n// @ts-expect-error Yes. pDepth follows optional parameter. So What?\nfunction renderOnExits(pOnExits?: string[], pDepth: number): string {\n  return (pOnExits ?? [])\n    .map((pOnExit) => renderSimpleTag(pOnExit, \"onexit\", pDepth))\n    .join(\"\");\n}\n\nfunction renderStateAttributes(pState: ISCJSONState): string {\n  let lReturnValue = ` id=\"${he.escape(pState.id)}\"`;\n  if (pState.initial) {\n    lReturnValue += ` initial=\"${he.escape(pState.initial)}\"`;\n  }\n  if (pState.type) {\n    lReturnValue += ` type=\"${he.escape(pState.type)}\"`;\n  }\n  return lReturnValue;\n}\n\nfunction renderState(pState: ISCJSONState, pDepth: number): string {\n  let lReturnValue = `\\n<${pState.kind}${renderStateAttributes(pState)}>`;\n  // eslint-disable-next-line no-use-before-define -- recursion\n  lReturnValue += renderStates(pState.states, pDepth);\n  lReturnValue += renderOnEntries(pState.onentries, pDepth);\n  lReturnValue += renderOnExits(pState.onexits, pDepth);\n  lReturnValue += renderTransitions(pState.transitions, pDepth);\n  lReturnValue += `\\n</${pState.kind}>`;\n\n  return indentString(lReturnValue, pDepth * INDENT_LENGTH);\n}\n\nfunction renderStates(pStates?: ISCJSONState[], pDepth = 1): string {\n  return (pStates ?? []).map((pState) => renderState(pState, pDepth)).join(\"\");\n}\n\nfunction renderInitialAttribute(pInitialString?: string): string {\n  return pInitialString ? `initial=\"${pInitialString}\" ` : \"\";\n}\n\nexport default function renderSCXML(pSCJSON: ISCJSONMachine): string {\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<scxml xmlns=\"http://www.w3.org/2005/07/scxml\" ${renderInitialAttribute(pSCJSON.initial)}version=\"1.0\">${renderStates(pSCJSON.states)}\n</scxml>\n`;\n}\n", "import type { StringRenderFunctionType } from \"types/state-machine-cat.mjs\";\nimport ast2scjson from \"../scjson/index.mjs\";\nimport renderFomSCJSON from \"./render-from-scjson.mjs\";\n\nconst renderSCXML: StringRenderFunctionType = (pStateMachine) =>\n  renderFomSCJSON(ast2scjson(pStateMachine));\n\nexport default renderSCXML;\n"],
  "mappings": "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",
  "names": ["import_he", "INDENT_LENGTH", "indentString", "pString", "pCount", "lRegex", "renderTransitionAttributes", "pTransition", "lReturnValue", "he", "renderRegularTransition", "pDepth", "renderActionTransition", "renderTransition", "renderTransitions", "pTransitions", "renderSimpleTag", "pOnExit", "pTag", "renderOnEntries", "pOnEntries", "pOnEntry", "renderOnExits", "pOnExits", "renderStateAttributes", "pState", "renderState", "renderStates", "pStates", "renderInitialAttribute", "pInitialString", "renderSCXML", "pSCJSON", "renderSCXML", "pStateMachine", "render", "scxml_default"]
}
