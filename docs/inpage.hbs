<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>{{ title }}</title>
    <script src="{{ interpreterSourceFile }}" defer></script>
    <style>
      body {
          font-family: sans-serif;
          margin: 0 auto;
          max-width: 650px;
          line-height: 1.6;
          font-size: 18px;
          padding: 0 10px;
          background-color: {{background-color}};
      }

      h1,
      h2,
      h3 {
          line-height: 1.2;
      }
    </style>
  </head>

  <body>
    <h1>Multiple state machines on a page</h1>

    <h2>On. Off.</h2>
    <script type="text/x-smcat">
    on [color="darkgreen" active],
    off [color="maroon"];

    on => off [color="red"]: flickSwitch()
      / makeNoise("off.wav");
    off => on [color="#009900"]: flickSwitch()
      / makeNoise("on.wav");
    </script>

    <h2>Cat states</h2>
    <script type="text/x-smcat" src="{{root}}samples/cat.smcat">
    </script>

    <h2>Cassette player</h2>
    <script type="text/x-smcat" src="{{root}}samples/cassetteplayer.smcat" data-direction="left-right" data-dot-graph-attrs="splines=ortho">
    </script>

    <h2>Sprint states</h2>
    <p>This state machine happens to be described in <em>scxml</em></p>
    <script type="text/x-scxml" src="{{root}}samples/sprint-states.scxml">
    </script>

    <h2>The kitchen sink</h2>
    <p>Not a legal or practical state machine, but most of state machine cat's features are in.</p>
    <h3>as is</h3>

    <script src="{{ root }}samples/kitchensink.smcat" type="text/x-smcat" data-direction="left-right"></script>
    
    <h3>de-sugared</h3>
    <script src="{{ root }}samples/kitchensink.smcat" type="text/x-smcat" data-desugar=true data-direction="left-right"></script>

    <h2>DHCP</h2>
    <script src="{{ root }}samples/DHCP.smcat" type="text/x-smcat"></script>


    <h2>Output json with scxml executable content </h2>
    <script type="text/x-scxml" data-output-type="json">
      <scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0">
        <state id="off">
          <onentry><log expr="winston.log('switched lamp on')"/></onentry>
            <transition event="switch_flipped" target="on"/>
        </state>
        <state id="on">
          <transition event="switch_flipped" target="off"/>
        </state>
      </scxml>
    </script>
 
    <h2>Output smcat from scxml with executable content </h2>
    <script type="text/x-scxml" data-output-type="smcat">
      <scxml xmlns="http://www.w3.org/2005/07/scxml" version="1.0">
        <state id="off">
          <onentry><log expr="winston.log('switched lamp on')"/></onentry>
            <transition event="switch_flipped" target="on"/>
        </state>
        <state id="on">
          <transition event="switch_flipped" target="off"/>
        </state>
      </scxml>
    </script>

    {{#if dev}}
    <h2>Error scenarios for the inpage script</h2>
    <h3>src not found</h3>
    <script src="this_thing_doesnot_exist" type="text/x-smcat"></script>

    <h3>no textContent</h3>
    <script type="text/x-smcat"></script>

    <h3>syntax error in scxml</h3>
    <script type="text/x-scxml"><</script>
    <h3>syntax error in smcat source</h3>
    <script type="text/x-smcat">no_semicolon</script>
    {{/if}}
  </body>
</html>
