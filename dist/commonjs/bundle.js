"use strict";var _a=Object.create;var ge=Object.defineProperty;var Fa=Object.getOwnPropertyDescriptor;var Ra=Object.getOwnPropertyNames;var Na=Object.getPrototypeOf,Va=Object.prototype.hasOwnProperty;var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ba=(t,e)=>{for(var n in e)ge(t,n,{get:e[n],enumerable:!0})},Kt=(t,e,n,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of Ra(e))!Va.call(t,l)&&l!==n&&ge(t,l,{get:()=>e[l],enumerable:!(d=Fa(e,l))||d.enumerable});return t};var _=(t,e,n)=>(n=t!=null?_a(Na(t)):{},Kt(e||!t||!t.__esModule?ge(n,"default",{value:t,enumerable:!0}):n,t)),Ha=t=>Kt(ge({},"__esModule",{value:!0}),t);var En=M(()=>{"use strict";var Fe=require("handlebars/dist/handlebars.runtime"),go=Fe.template,yo=Fe.templates=Fe.templates||{};yo["smcat.template.hbs"]=go({1:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p="",a=(a=m(n,"note")||(e!=null?m(e,"note"):e))!=null?a:s,b={name:"note",hash:{},fn:t.program(2,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:0},end:{line:4,column:9}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"note")?c:v.call(e,c,b))!=null&&(p+=c),p+=(c=(m(n,"quotifyState")||e&&m(e,"quotifyState")||s).call(u,e!=null?m(e,"name"):e,{name:"quotifyState",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:5,column:0},end:{line:5,column:40}}}))!=null?c:"",a=(a=m(n,"hasExtendedAttributes")||(e!=null?m(e,"hasExtendedAttributes"):e))!=null?a:s,b={name:"hasExtendedAttributes",hash:{},fn:t.program(6,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:4},end:{line:6,column:270}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"hasExtendedAttributes")?c:v.call(e,c,b))!=null&&(p+=c),p+=(c=m(n,"if").call(u,e!=null?m(e,"actions"):e,{name:"if",hash:{},fn:t.program(18,l,0),inverse:t.noop,data:l,loc:{start:{line:7,column:4},end:{line:7,column:28}}}))!=null?c:"",a=(a=m(n,"actions")||(e!=null?m(e,"actions"):e))!=null?a:s,b={name:"actions",hash:{},fn:t.program(20,l,0),inverse:t.noop,data:l,loc:{start:{line:7,column:28},end:{line:7,column:93}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"actions")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"statemachine")||(e!=null?m(e,"statemachine"):e))!=null?a:s,b={name:"statemachine",hash:{},fn:t.program(22,l,0),inverse:t.noop,data:l,loc:{start:{line:8,column:4},end:{line:10,column:19}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"statemachine")?c:v.call(e,c,b))!=null&&(p+=c),p+((c=m(n,"if").call(u,l&&m(l,"last"),{name:"if",hash:{},fn:t.program(24,l,0),inverse:t.program(26,l,0),data:l,loc:{start:{line:11,column:0},end:{line:11,column:30}}}))!=null?c:"")+`
`},2:function(t,e,n,d,l){return"# "+((t=t.lambda(e,e))!=null?t:"")+`
`},4:function(t,e,n,d,l){return""},6:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p=" [",a=(a=m(n,"typeExplicitlySet")||(e!=null?m(e,"typeExplicitlySet"):e))!=null?a:s,b={name:"typeExplicitlySet",hash:{},fn:t.program(7,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:32},end:{line:6,column:107}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"typeExplicitlySet")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s,b={name:"label",hash:{},fn:t.program(10,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:107},end:{line:6,column:142}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"label")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"color")||(e!=null?m(e,"color"):e))!=null?a:s,b={name:"color",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:142},end:{line:6,column:178}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"color")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"class")||(e!=null?m(e,"class"):e))!=null?a:s,b={name:"class",hash:{},fn:t.program(14,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:178},end:{line:6,column:214}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"class")?c:v.call(e,c,b))!=null&&(p+=c),p+((c=m(n,"if").call(u,e!=null?m(e,"active"):e,{name:"if",hash:{},fn:t.program(16,l,0),inverse:t.noop,data:l,loc:{start:{line:6,column:214},end:{line:6,column:242}}}))!=null?c:"")+"]"},7:function(t,e,n,d,s){var u=t.lookupProperty||function(v,m){if(Object.prototype.hasOwnProperty.call(v,m))return v[m]},f=(f=u(n,"type")||(e!=null?u(e,"type"):e))!=null?f:t.hooks.helperMissing,s={name:"type",hash:{},fn:t.program(8,s,0),inverse:t.noop,data:s,loc:{start:{line:6,column:54},end:{line:6,column:85}}},f=typeof f=="function"?f.call(e??(t.nullContext||{}),s):f;return(f=u(n,"type")?f:t.hooks.blockHelperMissing.call(e,f,s))!=null?f:""},8:function(t,e,n,d,l){return"type="+((t=t.lambda(e,e))!=null?t:"")+" "},10:function(t,e,n,d,l){return'label="'+((t=t.lambda(e,e))!=null?t:"")+'"'},12:function(t,e,n,d,l){return' color="'+((t=t.lambda(e,e))!=null?t:"")+'"'},14:function(t,e,n,d,l){return' class="'+((t=t.lambda(e,e))!=null?t:"")+'"'},16:function(t,e,n,d,l){return" active"},18:function(t,e,n,d,l){return": "},20:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return(n=(u(n,"quotifyActions")||e&&u(e,"quotifyActions")||t.hooks.helperMissing).call(e??(t.nullContext||{}),e,{name:"quotifyActions",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:7,column:40},end:{line:7,column:80}}}))!=null?n:""},22:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return` {
`+((u=t.invokePartial(u(d,"smcat.template.hbs"),e,{name:"smcat.template.hbs",data:l,indent:"    ",helpers:n,partials:d,decorators:t.decorators}))!=null?u:"")+"}"},24:function(t,e,n,d,l){return";"},26:function(t,e,n,d,l){return","},28:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p="",a=(a=m(n,"note")||(e!=null?m(e,"note"):e))!=null?a:s,b={name:"note",hash:{},fn:t.program(2,l,0),inverse:t.noop,data:l,loc:{start:{line:15,column:0},end:{line:17,column:9}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"note")?c:v.call(e,c,b))!=null&&(p+=c),p+=((c=(m(n,"quotifyState")||e&&m(e,"quotifyState")||s).call(u,e!=null?m(e,"from"):e,{name:"quotifyState",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:18,column:0},end:{line:18,column:39}}}))!=null?c:"")+" => "+((c=(m(n,"quotifyState")||e&&m(e,"quotifyState")||s).call(u,e!=null?m(e,"to"):e,{name:"quotifyState",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:18,column:43},end:{line:18,column:81}}}))!=null?c:""),a=(a=m(n,"hasExtendedAttributes")||(e!=null?m(e,"hasExtendedAttributes"):e))!=null?a:s,b={name:"hasExtendedAttributes",hash:{},fn:t.program(29,l,0),inverse:t.noop,data:l,loc:{start:{line:19,column:4},end:{line:19,column:130}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"hasExtendedAttributes")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s,b={name:"label",hash:{},fn:t.program(34,l,0),inverse:t.noop,data:l,loc:{start:{line:20,column:4},end:{line:20,column:62}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"label")?c:v.call(e,c,b))!=null&&(p+=c),p+`;
`},29:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p=" [",a=(a=m(n,"color")||(e!=null?m(e,"color"):e))!=null?a:s,b={name:"color",hash:{},fn:t.program(30,l,0),inverse:t.noop,data:l,loc:{start:{line:19,column:32},end:{line:19,column:68}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"color")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"type")||(e!=null?m(e,"type"):e))!=null?a:s,b={name:"type",hash:{},fn:t.program(32,l,0),inverse:t.noop,data:l,loc:{start:{line:19,column:69},end:{line:19,column:102}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"type")?c:v.call(e,c,b))!=null&&(p+=c),p+"]"},30:function(t,e,n,d,l){return'color="'+((t=t.lambda(e,e))!=null?t:"")+'"'},32:function(t,e,n,d,l){return" type="+((t=t.lambda(e,e))!=null?t:"")},34:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return": "+((n=(u(n,"quotifyLabel")||e&&u(e,"quotifyLabel")||t.hooks.helperMissing).call(e??(t.nullContext||{}),e,{name:"quotifyLabel",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:20,column:16},end:{line:20,column:52}}}))!=null?n:"")},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,m){var u=e??(t.nullContext||{}),s=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]},f=((p=s(n,"each").call(u,e!=null?s(e,"states"):e,{name:"each",hash:{},fn:t.program(1,m,0),inverse:t.noop,data:m,loc:{start:{line:1,column:0},end:{line:12,column:9}}}))!=null?p:"")+`
`,v=(v=s(n,"transitions")||(e!=null?s(e,"transitions"):e))!=null?v:t.hooks.helperMissing,m={name:"transitions",hash:{},fn:t.program(28,m,0),inverse:t.noop,data:m,loc:{start:{line:14,column:0},end:{line:21,column:16}}},p=typeof v=="function"?v.call(u,m):v;return(p=s(n,"transitions")?p:t.hooks.blockHelperMissing.call(e,p,m))!=null&&(f+=p),f},usePartial:!0,useData:!0})});var wn=M((cs,An)=>{"use strict";var K=require("handlebars/dist/handlebars.runtime.js"),Tn=require("lodash/cloneDeep.js");En();var vo=/;|,|{| |\[/,bo=/;|,|{/,xo=/;|{/;function Re(t,e){return t.test(e)?`"${e}"`:e}K.registerPartial("smcat.template.hbs",K.templates["smcat.template.hbs"]);function $o(t){return t==="activity"?"":`${t}/ `}function Io(t){return{...t,actions:(t.actions||[]).map(e=>`${$o(e.type)}${e.body}`).join(`
    `)}}function Eo(t){return(Object.prototype.hasOwnProperty.call(t,"label")||Object.prototype.hasOwnProperty.call(t,"typeExplicitlySet")||Object.prototype.hasOwnProperty.call(t,"color")||Object.prototype.hasOwnProperty.call(t,"active")||Object.prototype.hasOwnProperty.call(t,"class"))&&(t.hasExtendedAttributes=!0),t}function kn(t){return t.map(Eo).filter(e=>e.statemachine).forEach(e=>{e.statemachine.states=kn(e.statemachine.states)}),t.map(Io)}function To(t){return(Object.prototype.hasOwnProperty.call(t,"type")||Object.prototype.hasOwnProperty.call(t,"color")||Object.prototype.hasOwnProperty.call(t,"class"))&&(t.hasExtendedAttributes=!0),t}function ko(t){return t.map(To)}K.registerHelper("quotifyState",t=>Re(vo,t));K.registerHelper("quotifyLabel",t=>Re(xo,t));K.registerHelper("quotifyActions",t=>Re(bo,t));An.exports=function(e){return K.templates["smcat.template.hbs"]({...e,states:kn(Tn(e.states)),transitions:ko(Tn(e.transitions||[]))})}});var On=M(()=>{"use strict";var Be=require("handlebars/dist/handlebars.runtime"),Xo=Be.template,Wo=Be.templates=Be.templates||{};Wo["dot.template.hbs"]=Xo({1:function(t,e,n,d,l,u,s){var f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,a=t.lookupProperty||function(V,B){if(Object.prototype.hasOwnProperty.call(V,B))return V[B]},b="",c=(c=a(n,"noteName")||(e!=null?a(e,"noteName"):e))!=null?c:v,I={name:"noteName",hash:{},fn:t.noop,inverse:t.program(2,l,0,u,s),data:l,loc:{start:{line:9,column:2},end:{line:26,column:15}}},x=typeof c==m?c.call(f,I):c;return(x=a(n,"noteName")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"noteName")||(e!=null?a(e,"noteName"):e))!=null?c:v,I={name:"noteName",hash:{},fn:t.program(19,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:27,column:2},end:{line:37,column:15}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"noteName")?x:p.call(e,x,I))!=null&&(b+=x),b},2:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p="",a=(a=m(n,"isCompositeSelf")||(e!=null?m(e,"isCompositeSelf"):e))!=null?a:s,b={name:"isCompositeSelf",hash:{},fn:t.noop,inverse:t.program(3,l,0),data:l,loc:{start:{line:10,column:4},end:{line:16,column:24}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"isCompositeSelf")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"isCompositeSelf")||(e!=null?m(e,"isCompositeSelf"):e))!=null?a:s,b={name:"isCompositeSelf",hash:{},fn:t.program(14,l,0),inverse:t.noop,data:l,loc:{start:{line:17,column:4},end:{line:25,column:24}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"isCompositeSelf")?c:v.call(e,c,b))!=null&&(p+=c),p},3:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p='    "'+((c=typeof(a=(a=m(n,"from")||(e!=null?m(e,"from"):e))!=null?a:s)==f?a.call(u,{name:"from",hash:{},data:l,loc:{start:{line:11,column:5},end:{line:11,column:15}}}):a)!=null?c:"")+'" -> "'+((c=typeof(a=(a=m(n,"to")||(e!=null?m(e,"to"):e))!=null?a:s)==f?a.call(u,{name:"to",hash:{},data:l,loc:{start:{line:11,column:21},end:{line:11,column:29}}}):a)!=null?c:"")+'" [label="',a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s,b={name:"label",hash:{},fn:t.noop,inverse:t.program(4,l,0),data:l,loc:{start:{line:11,column:39},end:{line:11,column:60}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"label")?c:v.call(e,c,b))!=null&&(p+=c),p+=((c=typeof(a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s)==f?a.call(u,{name:"label",hash:{},data:l,loc:{start:{line:11,column:60},end:{line:11,column:71}}}):a)!=null?c:"")+'"',a=(a=m(n,"fromComposite")||(e!=null?m(e,"fromComposite"):e))!=null?a:s,b={name:"fromComposite",hash:{},fn:t.program(6,l,0),inverse:t.noop,data:l,loc:{start:{line:12,column:28},end:{line:12,column:92}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"fromComposite")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"toComposite")||(e!=null?m(e,"toComposite"):e))!=null?a:s,b={name:"toComposite",hash:{},fn:t.program(8,l,0),inverse:t.noop,data:l,loc:{start:{line:13,column:28},end:{line:13,column:86}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"toComposite")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"color")||(e!=null?m(e,"color"):e))!=null?a:s,b={name:"color",hash:{},fn:t.program(10,l,0),inverse:t.noop,data:l,loc:{start:{line:14,column:28},end:{line:14,column:85}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"color")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"width")||(e!=null?m(e,"width"):e))!=null?a:s,b={name:"width",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:15,column:28},end:{line:15,column:68}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"width")?c:v.call(e,c,b))!=null&&(p+=c),p+' class="'+((c=typeof(a=(a=m(n,"class")||(e!=null?m(e,"class"):e))!=null?a:s)==f?a.call(u,{name:"class",hash:{},data:l,loc:{start:{line:15,column:76},end:{line:15,column:87}}}):a)!=null?c:"")+`"]
`},4:function(t,e,n,d,l){return" "},6:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return' ltail="cluster_'+((u=typeof(n=(n=u(n,"from")||(e!=null?u(e,"from"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"from",hash:{},data:l,loc:{start:{line:12,column:63},end:{line:12,column:73}}}):n)!=null?u:"")+'"'},8:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return' lhead="cluster_'+((u=typeof(n=(n=u(n,"to")||(e!=null?u(e,"to"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"to",hash:{},data:l,loc:{start:{line:13,column:61},end:{line:13,column:69}}}):n)!=null?u:"")+'"'},10:function(s,e,n,d,l){var u,s=s.lambda;return' color="'+((u=s(e,e))!=null?u:"")+'" fontcolor="'+((u=s(e,e))!=null?u:"")+'"'},12:function(t,e,n,d,l){return' penwidth="'+((t=t.lambda(e,e))!=null?t:"")+'"'},14:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.hooks.blockHelperMissing,m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p='      "'+((c=typeof(a=(a=m(n,"from")||(e!=null?m(e,"from"):e))!=null?a:s)==f?a.call(u,{name:"from",hash:{},data:l,loc:{start:{line:18,column:7},end:{line:18,column:17}}}):a)!=null?c:"")+'" -> "self_'+((c=typeof(a=(a=m(n,"name")||(e!=null?m(e,"name"):e))!=null?a:s)==f?a.call(u,{name:"name",hash:{},data:l,loc:{start:{line:18,column:28},end:{line:18,column:38}}}):a)!=null?c:"")+'" [label="',a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s,b={name:"label",hash:{},fn:t.noop,inverse:t.program(4,l,0),data:l,loc:{start:{line:18,column:48},end:{line:18,column:69}}},c=typeof a==f?a.call(u,b):a;return(c=m(n,"label")?c:v.call(e,c,b))!=null&&(p+=c),p+=((c=typeof(a=(a=m(n,"label")||(e!=null?m(e,"label"):e))!=null?a:s)==f?a.call(u,{name:"label",hash:{},data:l,loc:{start:{line:18,column:69},end:{line:18,column:80}}}):a)!=null?c:"")+'" arrowhead=none',a=(a=m(n,"tailportflags")||(e!=null?m(e,"tailportflags"):e))!=null?a:s,b={name:"tailportflags",hash:{},fn:t.program(15,l,0),inverse:t.noop,data:l,loc:{start:{line:19,column:28},end:{line:19,column:73}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"tailportflags")?c:v.call(e,c,b))!=null&&(p+=c),p+=' ltail="cluster_'+((c=typeof(a=(a=m(n,"from")||(e!=null?m(e,"from"):e))!=null?a:s)==f?a.call(u,{name:"from",hash:{},data:l,loc:{start:{line:19,column:89},end:{line:19,column:99}}}):a)!=null?c:"")+'"',a=(a=m(n,"color")||(e!=null?m(e,"color"):e))!=null?a:s,b={name:"color",hash:{},fn:t.program(10,l,0),inverse:t.noop,data:l,loc:{start:{line:20,column:28},end:{line:20,column:85}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"color")?c:v.call(e,c,b))!=null&&(p+=c),p+=' class="'+((c=typeof(a=(a=m(n,"class")||(e!=null?m(e,"class"):e))!=null?a:s)==f?a.call(u,{name:"class",hash:{},data:l,loc:{start:{line:20,column:93},end:{line:20,column:104}}}):a)!=null?c:"")+`"]
      "self_`+((c=typeof(a=(a=m(n,"name")||(e!=null?m(e,"name"):e))!=null?a:s)==f?a.call(u,{name:"name",hash:{},data:l,loc:{start:{line:21,column:12},end:{line:21,column:22}}}):a)!=null?c:"")+'" -> "'+((c=typeof(a=(a=m(n,"from")||(e!=null?m(e,"from"):e))!=null?a:s)==f?a.call(u,{name:"from",hash:{},data:l,loc:{start:{line:21,column:28},end:{line:21,column:38}}}):a)!=null?c:"")+'" [lhead="cluster_'+((c=typeof(a=(a=m(n,"from")||(e!=null?m(e,"from"):e))!=null?a:s)==f?a.call(u,{name:"from",hash:{},data:l,loc:{start:{line:21,column:56},end:{line:21,column:66}}}):a)!=null?c:"")+'"',a=(a=m(n,"headportflags")||(e!=null?m(e,"headportflags"):e))!=null?a:s,b={name:"headportflags",hash:{},fn:t.program(15,l,0),inverse:t.noop,data:l,loc:{start:{line:22,column:28},end:{line:22,column:73}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"headportflags")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"color")||(e!=null?m(e,"color"):e))!=null?a:s,b={name:"color",hash:{},fn:t.program(17,l,0),inverse:t.noop,data:l,loc:{start:{line:23,column:28},end:{line:23,column:65}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"color")?c:v.call(e,c,b))!=null&&(p+=c),a=(a=m(n,"width")||(e!=null?m(e,"width"):e))!=null?a:s,b={name:"width",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:24,column:28},end:{line:24,column:68}}},c=typeof a==f?a.call(u,b):a,(c=m(n,"width")?c:v.call(e,c,b))!=null&&(p+=c),p+' class="'+((c=typeof(a=(a=m(n,"class")||(e!=null?m(e,"class"):e))!=null?a:s)==f?a.call(u,{name:"class",hash:{},data:l,loc:{start:{line:24,column:76},end:{line:24,column:87}}}):a)!=null?c:"")+`"]
`},15:function(t,e,n,d,l){return" "+((t=t.lambda(e,e))!=null?t:"")},17:function(t,e,n,d,l){return' color="'+((t=t.lambda(e,e))!=null?t:"")+'"'},19:function(t,e,n,d,l,u,s){var f,v=t.lambda,m=t.hooks.blockHelperMissing,p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'      "i_'+((f=v(e,e))!=null?f:"")+`" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
      "`+((f=v(s[1]!=null?p(s[1],"from"):s[1],e))!=null?f:"")+'" -> "i_'+((f=v(e,e))!=null?f:"")+'" [arrowhead=none'+((f=m.call(e,v(s[1]!=null?p(s[1],"fromComposite"):s[1],e),{name:"../fromComposite",hash:{},fn:t.program(20,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:30,column:32},end:{line:30,column:105}}}))!=null?f:"")+((f=m.call(e,v(s[1]!=null?p(s[1],"color"):s[1],e),{name:"../color",hash:{},fn:t.program(17,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:31,column:32},end:{line:31,column:75}}}))!=null?f:"")+`]
      "i_`+((f=v(e,e))!=null?f:"")+'" -> "'+((f=v(s[1]!=null?p(s[1],"to"):s[1],e))!=null?f:"")+'" [label="'+((f=m.call(e,v(s[1]!=null?p(s[1],"label"):s[1],e),{name:"../label",hash:{},fn:t.noop,inverse:t.program(4,l,0,u,s),data:l,loc:{start:{line:32,column:43},end:{line:32,column:70}}}))!=null?f:"")+((f=v(s[1]!=null?p(s[1],"label"):s[1],e))!=null?f:"")+'"'+((f=m.call(e,v(s[1]!=null?p(s[1],"toComposite"):s[1],e),{name:"../toComposite",hash:{},fn:t.program(22,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:33,column:32},end:{line:33,column:99}}}))!=null?f:"")+((f=m.call(e,v(s[1]!=null?p(s[1],"color"):s[1],e),{name:"../color",hash:{},fn:t.program(10,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:34,column:32},end:{line:34,column:95}}}))!=null?f:"")+`]
      "i_`+((f=v(e,e))!=null?f:"")+'" -> "'+((f=v(e,e))!=null?f:"")+`" [style=dashed arrowtail=none arrowhead=none weight=0]
      "`+((f=v(e,e))!=null?f:"")+'" [label="'+((f=v(s[1]!=null?p(s[1],"noteFlattened"):s[1],e))!=null?f:"")+`" shape=note fontsize=10 color=black fontcolor=black fillcolor="#ffffcc" penwidth=1.0]
`},20:function(t,e,n,d,l,u,s){var f=t.lookupProperty||function(v,m){if(Object.prototype.hasOwnProperty.call(v,m))return v[m]};return' ltail="cluster_'+((t=t.lambda(s[1]!=null?f(s[1],"from"):s[1],e))!=null?t:"")+'"'},22:function(t,e,n,d,l,u,s){var f=t.lookupProperty||function(v,m){if(Object.prototype.hasOwnProperty.call(v,m))return v[m]};return' lhead="cluster_'+((t=t.lambda(s[1]!=null?f(s[1],"to"):s[1],e))!=null?t:"")+'"'},compiler:[8,">= 4.3.0"],main:function(t,e,n,p,l,u,s){var f=e??(t.nullContext||{}),b=t.hooks.helperMissing,v="function",m=t.lookupProperty||function(I,x){if(Object.prototype.hasOwnProperty.call(I,x))return I[x]},p=`digraph "state transitions" {
  `+((c=typeof(a=(a=m(n,"graphAttributes")||(e!=null?m(e,"graphAttributes"):e))!=null?a:b)==v?a.call(f,{name:"graphAttributes",hash:{},data:l,loc:{start:{line:2,column:2},end:{line:2,column:23}}}):a)!=null?c:"")+`
  node [`+((c=typeof(a=(a=m(n,"nodeAttributes")||(e!=null?m(e,"nodeAttributes"):e))!=null?a:b)==v?a.call(f,{name:"nodeAttributes",hash:{},data:l,loc:{start:{line:3,column:8},end:{line:3,column:28}}}):a)!=null?c:"")+`]
  edge [`+((c=typeof(a=(a=m(n,"edgeAttributes")||(e!=null?m(e,"edgeAttributes"):e))!=null?a:b)==v?a.call(f,{name:"edgeAttributes",hash:{},data:l,loc:{start:{line:4,column:8},end:{line:4,column:28}}}):a)!=null?c:"")+`]

`+((c=t.invokePartial(m(p,"dot.states.template.hbs"),e,{name:"dot.states.template.hbs",data:l,indent:"  ",helpers:n,partials:p,decorators:t.decorators}))!=null?c:"")+`
`,a=(a=m(n,"transitions")||(e!=null?m(e,"transitions"):e))!=null?a:b,b={name:"transitions",hash:{},fn:t.program(1,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:8,column:2},end:{line:38,column:18}}},c=typeof a==v?a.call(f,b):a;return(c=m(n,"transitions")?c:t.hooks.blockHelperMissing.call(e,c,b))!=null&&(p+=c),p+`}
`},usePartial:!0,useData:!0,useDepths:!0})});var Pn=M(()=>{"use strict";var He=require("handlebars/dist/handlebars.runtime"),Qo=He.template,Yo=He.templates=He.templates||{};Yo["dot.states.template.hbs"]=Qo({1:function(t,e,n,d,f){var u=t.lookupProperty||function(m,p){if(Object.prototype.hasOwnProperty.call(m,p))return m[p]},s="",v=(v=u(n,"nestedExternalSelfTransitions")||(e!=null?u(e,"nestedExternalSelfTransitions"):e))!=null?v:t.hooks.helperMissing,f={name:"nestedExternalSelfTransitions",hash:{},fn:t.program(2,f,0),inverse:t.noop,data:f,loc:{start:{line:2,column:2},end:{line:4,column:36}}},v=typeof v=="function"?v.call(e??(t.nullContext||{}),f):v;return(v=u(n,"nestedExternalSelfTransitions")?v:t.hooks.blockHelperMissing.call(e,v,f))!=null&&(s+=v),s},2:function(t,e,n,d,l){return'  "self_'+((t=t.lambda(e,e))!=null?t:"")+`" [shape=point style=invis width=0 height=0 fixedsize=true]
`},4:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:7,column:3},end:{line:7,column:13}}}):s)!=null?u:"")+'" [shape=circle style=filled class="'+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:7,column:49},end:{line:7,column:60}}}):s)!=null?u:"")+'" '+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l,loc:{start:{line:7,column:62},end:{line:7,column:150}}}))!=null?u:"")+((u=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:7,column:150},end:{line:7,column:184}}}))!=null?u:"")+`fixedsize=true height=0.15 label=""]
`},5:function(p,e,n,d,l){var u,s,f=e??(p.nullContext||{}),v=p.hooks.helperMissing,m="function",p=p.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'color="'+((u=typeof(s=(s=p(n,"color")||(e!=null?p(e,"color"):e))!=null?s:v)==m?s.call(f,{name:"color",hash:{},data:l,loc:{start:{line:7,column:82},end:{line:7,column:93}}}):s)!=null?u:"")+'" fillcolor="'+((u=typeof(s=(s=p(n,"color")||(e!=null?p(e,"color"):e))!=null?s:v)==m?s.call(f,{name:"color",hash:{},data:l,loc:{start:{line:7,column:106},end:{line:7,column:117}}}):s)!=null?u:"")+'" '},7:function(t,e,n,d,l){return"fillcolor=black "},9:function(t,e,n,d,l){return"penwidth=3.0 "},11:function(t,e,n,d,l){var u=e??(t.nullContext||{}),p=t.hooks.helperMissing,s="function",f=t.lookupProperty||function(b,c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c]},v='  "'+((a=typeof(m=(m=f(n,"name")||(e!=null?f(e,"name"):e))!=null?m:p)==s?m.call(u,{name:"name",hash:{},data:l,loc:{start:{line:10,column:3},end:{line:10,column:13}}}):m)!=null?a:"")+'" [margin=0 class="'+((a=typeof(m=(m=f(n,"class")||(e!=null?f(e,"class"):e))!=null?m:p)==s?m.call(u,{name:"class",hash:{},data:l,loc:{start:{line:10,column:32},end:{line:10,column:43}}}):m)!=null?a:"")+'" '+((a=f(n,"if").call(u,e!=null?f(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:10,column:45},end:{line:10,column:85}}}))!=null?a:"")+((a=f(n,"if").call(u,e!=null?f(e,"active"):e,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.noop,data:l,loc:{start:{line:10,column:85},end:{line:10,column:134}}}))!=null?a:"")+`label= < 
    <table align="center" cellborder="0" border="2" style="rounded" width="48">
      <tr><td width="48"`+((a=f(n,"if").call(u,e!=null?f(e,"actionStrings"):e,{name:"if",hash:{},fn:t.program(16,l,0),inverse:t.program(18,l,0),data:l,loc:{start:{line:12,column:24},end:{line:12,column:92}}}))!=null?a:"")+">"+((a=f(n,"if").call(u,e!=null?f(e,"active"):e,{name:"if",hash:{},fn:t.program(20,l,0),inverse:t.program(22,l,0),data:l,loc:{start:{line:12,column:93},end:{line:12,column:147}}}))!=null?a:"")+`</td></tr>
`,m=(m=f(n,"actionStrings")||(e!=null?f(e,"actionStrings"):e))!=null?m:p,p={name:"actionStrings",hash:{},fn:t.program(24,l,0),inverse:t.noop,data:l,loc:{start:{line:13,column:6},end:{line:16,column:24}}},a=typeof m==s?m.call(u,p):m;return(a=f(n,"actionStrings")?a:t.hooks.blockHelperMissing.call(e,a,p))!=null&&(v+=a),v+`    </table>
  >]
`},12:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'color="'+((u=typeof(n=(n=u(n,"color")||(e!=null?u(e,"color"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"color",hash:{},data:l,loc:{start:{line:10,column:65},end:{line:10,column:76}}}):n)!=null?u:"")+'" '},14:function(t,e,n,d,l){return"peripheries=1 style=rounded "},16:function(t,e,n,d,l){return' cellpadding="2"'},18:function(t,e,n,d,l){return' cellpadding="7"'},20:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return"<i>"+t.escapeExpression(typeof(n=(n=u(n,"label")||(e!=null?u(e,"label"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"label",hash:{},data:l,loc:{start:{line:12,column:110},end:{line:12,column:119}}}):n)+"</i>"},22:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return t.escapeExpression(typeof(n=(n=u(n,"label")||(e!=null?u(e,"label"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"label",hash:{},data:l,loc:{start:{line:12,column:131},end:{line:12,column:140}}}):n)},24:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return"        "+((n=u(n,"if").call(e??(t.nullContext||{}),l&&u(l,"first"),{name:"if",hash:{},fn:t.program(25,l,0),inverse:t.noop,data:l,loc:{start:{line:14,column:8},end:{line:14,column:34}}}))!=null?n:"")+`
        <tr><td align="left" cellpadding="2">`+t.escapeExpression(t.lambda(e,e))+`</td></tr>
`},25:function(t,e,n,d,l){return"<hr/>"},27:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:21,column:3},end:{line:21,column:13}}}):s)!=null?u:"")+'" [shape=circle class="'+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:21,column:36},end:{line:21,column:47}}}):s)!=null?u:"")+'" '+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:21,column:49},end:{line:21,column:89}}}))!=null?u:"")+((u=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:21,column:89},end:{line:21,column:123}}}))!=null?u:"")+`label="H"]
`},29:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:24,column:3},end:{line:24,column:13}}}):s)!=null?u:"")+'" [shape=circle class="'+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:24,column:36},end:{line:24,column:47}}}):s)!=null?u:"")+'" '+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:24,column:49},end:{line:24,column:89}}}))!=null?u:"")+((u=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:24,column:89},end:{line:24,column:123}}}))!=null?u:"")+`label="H*"]
`},31:function(t,e,n,d,l,u,s){var f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,a=t.lookupProperty||function(V,B){if(Object.prototype.hasOwnProperty.call(V,B))return V[B]},b='  "'+((x=typeof(c=(c=a(n,"name")||(e!=null?a(e,"name"):e))!=null?c:v)==m?c.call(f,{name:"name",hash:{},data:l,loc:{start:{line:27,column:3},end:{line:27,column:13}}}):c)!=null?x:"")+'" [shape=diamond fixedsize=true width=0.35 height=0.35 fontsize=10 class="'+((x=typeof(c=(c=a(n,"class")||(e!=null?a(e,"class"):e))!=null?c:v)==m?c.call(f,{name:"class",hash:{},data:l,loc:{start:{line:27,column:87},end:{line:27,column:98}}}):c)!=null?x:"")+'" '+((x=a(n,"if").call(f,e!=null?a(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:27,column:100},end:{line:27,column:140}}}))!=null?x:"")+((x=a(n,"if").call(f,e!=null?a(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:27,column:140},end:{line:27,column:174}}}))!=null?x:"")+`label=" "]
  "`+((x=typeof(c=(c=a(n,"name")||(e!=null?a(e,"name"):e))!=null?c:v)==m?c.call(f,{name:"name",hash:{},data:l,loc:{start:{line:28,column:3},end:{line:28,column:13}}}):c)!=null?x:"")+'" -> "'+((x=typeof(c=(c=a(n,"name")||(e!=null?a(e,"name"):e))!=null?c:v)==m?c.call(f,{name:"name",hash:{},data:l,loc:{start:{line:28,column:19},end:{line:28,column:29}}}):c)!=null?x:"")+'" [label=<',c=(c=a(n,"actionStrings")||(e!=null?a(e,"actionStrings"):e))!=null?c:v,I={name:"actionStrings",hash:{},fn:t.program(32,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:28,column:39},end:{line:28,column:156}}},x=typeof c==m?c.call(f,I):c;return(x=a(n,"actionStrings")?x:p.call(e,x,I))!=null&&(b+=x),b+='> color="#FFFFFF01"',c=(c=a(n,"color")||(e!=null?a(e,"color"):e))!=null?c:v,I={name:"color",hash:{},fn:t.program(41,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:28,column:175},end:{line:28,column:215}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"color")?x:p.call(e,x,I))!=null&&(b+=x),b+' class="'+((x=typeof(c=(c=a(n,"class")||(e!=null?a(e,"class"):e))!=null?c:v)==m?c.call(f,{name:"class",hash:{},data:l,loc:{start:{line:28,column:223},end:{line:28,column:234}}}):c)!=null?x:"")+`"];
`},32:function(t,v,n,d,l,u,s){var f,v=v??(t.nullContext||{}),m=t.lookupProperty||function(p,a){if(Object.prototype.hasOwnProperty.call(p,a))return p[a]};return((f=m(n,"if").call(v,l&&m(l,"first"),{name:"if",hash:{},fn:t.program(33,l,0,u,s),inverse:t.program(35,l,0,u,s),data:l,loc:{start:{line:28,column:57},end:{line:28,column:88}}}))!=null?f:"")+((f=m(n,"if").call(v,s[1]!=null?m(s[1],"active"):s[1],{name:"if",hash:{},fn:t.program(37,l,0,u,s),inverse:t.program(39,l,0,u,s),data:l,loc:{start:{line:28,column:88},end:{line:28,column:137}}}))!=null?f:"")},33:function(t,e,n,d,l){return""},35:function(t,e,n,d,l){return"\\n"},37:function(t,e,n,d,l){return"<i>"+t.escapeExpression(t.lambda(e,e))+"</i>"},39:function(t,e,n,d,l){return t.escapeExpression(t.lambda(e,e))},41:function(t,e,n,d,l){return' fontcolor="'+((t=t.lambda(e,e))!=null?t:"")+'"'},43:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:31,column:3},end:{line:31,column:13}}}):s)!=null?u:"")+'" [shape=rect class="'+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:31,column:34},end:{line:31,column:45}}}):s)!=null?u:"")+'" '+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l,loc:{start:{line:31,column:47},end:{line:31,column:135}}}))!=null?u:"")+((u=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:31,column:135},end:{line:31,column:169}}}))!=null?u:"")+'label=" " fixedsize=true style=filled '+((u=typeof(s=(s=p(n,"sizingExtras")||(e!=null?p(e,"sizingExtras"):e))!=null?s:v)==m?s.call(f,{name:"sizingExtras",hash:{},data:l,loc:{start:{line:31,column:207},end:{line:31,column:225}}}):s)!=null?u:"")+`]
`},45:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:37,column:3},end:{line:37,column:13}}}):s)!=null?u:"")+`" [label= < 
      <table align="center" cellborder="0" border="0">
        <tr><td cellpadding="0"><font `+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:39,column:38},end:{line:39,column:78}}}))!=null?u:"")+`point-size="20">X</font></td></tr>
        <tr><td cellpadding="0"><font `+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(46,l,0),inverse:t.noop,data:l,loc:{start:{line:40,column:38},end:{line:40,column:77}}}))!=null?u:"")+">"+t.escapeExpression(typeof(s=(s=p(n,"label")||(e!=null?p(e,"label"):e))!=null?s:v)==m?s.call(f,{name:"label",hash:{},data:l,loc:{start:{line:40,column:78},end:{line:40,column:87}}}):s)+`</font></td></tr>
      </table>
    > class="`+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:42,column:13},end:{line:42,column:24}}}):s)!=null?u:"")+`"]
`},46:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'color="'+((u=typeof(n=(n=u(n,"color")||(e!=null?u(e,"color"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"color",hash:{},data:l,loc:{start:{line:40,column:58},end:{line:40,column:69}}}):n)!=null?u:"")+'"'},48:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return'  "'+((u=typeof(s=(s=p(n,"name")||(e!=null?p(e,"name"):e))!=null?s:v)==m?s.call(f,{name:"name",hash:{},data:l,loc:{start:{line:45,column:3},end:{line:45,column:13}}}):s)!=null?u:"")+'" [shape=circle style=filled class="'+((u=typeof(s=(s=p(n,"class")||(e!=null?p(e,"class"):e))!=null?s:v)==m?s.call(f,{name:"class",hash:{},data:l,loc:{start:{line:45,column:49},end:{line:45,column:60}}}):s)!=null?u:"")+'" '+((u=p(n,"if").call(f,e!=null?p(e,"color"):e,{name:"if",hash:{},fn:t.program(5,l,0),inverse:t.program(7,l,0),data:l,loc:{start:{line:45,column:62},end:{line:45,column:150}}}))!=null?u:"")+"fixedsize=true height=0.15 peripheries=2 "+((u=p(n,"if").call(f,e!=null?p(e,"active"):e,{name:"if",hash:{},fn:t.program(9,l,0),inverse:t.noop,data:l,loc:{start:{line:45,column:191},end:{line:45,column:225}}}))!=null?u:"")+`label=""]
`},50:function(t,e,n,d,l){var u=e??(t.nullContext||{}),s=t.hooks.helperMissing,f="function",v=t.lookupProperty||function(c,I){if(Object.prototype.hasOwnProperty.call(c,I))return c[I]},m='  subgraph "cluster_'+((b=typeof(p=(p=v(n,"name")||(e!=null?v(e,"name"):e))!=null?p:s)==f?p.call(u,{name:"name",hash:{},data:l,loc:{start:{line:48,column:20},end:{line:48,column:30}}}):p)!=null?b:"")+`" {
    class="`+((b=typeof(p=(p=v(n,"class")||(e!=null?v(e,"class"):e))!=null?p:s)==f?p.call(u,{name:"class",hash:{},data:l,loc:{start:{line:49,column:11},end:{line:49,column:22}}}):p)!=null?b:"")+'" '+((b=v(n,"if").call(u,e!=null?v(e,"color"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:49,column:24},end:{line:49,column:64}}}))!=null?b:"")+`label= <
    <table cellborder="0" border="0">
      <tr><td>`+((b=v(n,"if").call(u,e!=null?v(e,"active"):e,{name:"if",hash:{},fn:t.program(20,l,0),inverse:t.program(22,l,0),data:l,loc:{start:{line:51,column:14},end:{line:51,column:68}}}))!=null?b:"")+`</td></tr>
`,p=(p=v(n,"actionStrings")||(e!=null?v(e,"actionStrings"):e))!=null?p:s,a={name:"actionStrings",hash:{},fn:t.program(51,l,0),inverse:t.noop,data:l,loc:{start:{line:52,column:6},end:{line:55,column:24}}},b=typeof p==f?p.call(u,a):p;return(b=v(n,"actionStrings")?b:t.hooks.blockHelperMissing.call(e,b,a))!=null&&(m+=b),m+`    </table>
    > `+((b=v(n,"if").call(u,e!=null?v(e,"parentIsParallel"):e,{name:"if",hash:{},fn:t.program(53,l,0),inverse:t.program(55,l,0),data:l,loc:{start:{line:57,column:6},end:{line:57,column:137}}}))!=null?b:"")+`
    "`+((b=typeof(p=(p=v(n,"name")||(e!=null?v(e,"name"):e))!=null?p:s)==f?p.call(u,{name:"name",hash:{},data:l,loc:{start:{line:58,column:5},end:{line:58,column:15}}}):p)!=null?b:"")+`" [shape=point style=invis margin=0 width=0 height=0 fixedsize=true]
    `+((b=(v(n,"stateSection")||e&&v(e,"stateSection")||s).call(u,e!=null?v(e,"statemachine"):e,{name:"stateSection",hash:{},fn:t.program(33,l,0),inverse:t.noop,data:l,loc:{start:{line:59,column:4},end:{line:59,column:51}}}))!=null?b:"")+`
  }
`},51:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return"        "+((n=u(n,"if").call(e??(t.nullContext||{}),l&&u(l,"first"),{name:"if",hash:{},fn:t.program(25,l,0),inverse:t.noop,data:l,loc:{start:{line:53,column:8},end:{line:53,column:34}}}))!=null?n:"")+`
        <tr><td align="left">`+t.escapeExpression(t.lambda(e,e))+`</td></tr>
`},53:function(t,e,n,d,l){return'style="dashed" penwidth=1'},55:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return"style=rounded "+((n=u(n,"if").call(e??(t.nullContext||{}),e!=null?u(e,"active"):e,{name:"if",hash:{},fn:t.program(56,l,0),inverse:t.program(58,l,0),data:l,loc:{start:{line:57,column:77},end:{line:57,column:130}}}))!=null?n:"")},56:function(t,e,n,d,l){return"penwidth=3.0"},58:function(t,e,n,d,l){return"penwidth=2.0"},60:function(t,e,n,d,l,p,a){var f=t.lookupProperty||function(b,c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c]},v="",m=(m=f(n,"noteName")||(e!=null?f(e,"noteName"):e))!=null?m:t.hooks.helperMissing,p={name:"noteName",hash:{},fn:t.program(61,l,0,p,a),inverse:t.noop,data:l,loc:{start:{line:63,column:4},end:{line:66,column:17}}},a=typeof m=="function"?m.call(e??(t.nullContext||{}),p):m;return(a=f(n,"noteName")?a:t.hooks.blockHelperMissing.call(e,a,p))!=null&&(v+=a),v},61:function(m,e,n,d,l,u,s){var f,v=m.lambda,m=m.lookupProperty||function(p,a){if(Object.prototype.hasOwnProperty.call(p,a))return p[a]};return'    "'+((f=v(e,e))!=null?f:"")+'" [color=black fontcolor=black label="'+((f=v(s[1]!=null?m(s[1],"noteFlattened"):s[1],e))!=null?f:"")+`" shape=note fontsize=10 fillcolor="#ffffcc" penwidth=1.0]
    "`+((f=v(s[1]!=null?m(s[1],"name"):s[1],e))!=null?f:"")+'" -> "'+((f=v(e,e))!=null?f:"")+`" [style=dashed arrowtail=none arrowhead=none]
`},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,l,u,s){var f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.hooks.blockHelperMissing,a=t.lookupProperty||function(V,B){if(Object.prototype.hasOwnProperty.call(V,B))return V[B]},b="",c=(c=a(n,"compositeStates")||(e!=null?a(e,"compositeStates"):e))!=null?c:v,I={name:"compositeStates",hash:{},fn:t.program(1,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:1,column:0},end:{line:5,column:20}}},x=typeof c==m?c.call(f,I):c;return(x=a(n,"compositeStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"initialStates")||(e!=null?a(e,"initialStates"):e))!=null?c:v,I={name:"initialStates",hash:{},fn:t.program(4,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:6,column:0},end:{line:8,column:18}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"initialStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"regularStates")||(e!=null?a(e,"regularStates"):e))!=null?c:v,I={name:"regularStates",hash:{},fn:t.program(11,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:9,column:0},end:{line:19,column:18}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"regularStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"historyStates")||(e!=null?a(e,"historyStates"):e))!=null?c:v,I={name:"historyStates",hash:{},fn:t.program(27,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:20,column:0},end:{line:22,column:18}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"historyStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"deepHistoryStates")||(e!=null?a(e,"deepHistoryStates"):e))!=null?c:v,I={name:"deepHistoryStates",hash:{},fn:t.program(29,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:23,column:0},end:{line:25,column:22}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"deepHistoryStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"choiceStates")||(e!=null?a(e,"choiceStates"):e))!=null?c:v,I={name:"choiceStates",hash:{},fn:t.program(31,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:26,column:0},end:{line:29,column:17}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"choiceStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"forkjoinStates")||(e!=null?a(e,"forkjoinStates"):e))!=null?c:v,I={name:"forkjoinStates",hash:{},fn:t.program(43,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:30,column:0},end:{line:32,column:19}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"forkjoinStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"junctionStates")||(e!=null?a(e,"junctionStates"):e))!=null?c:v,I={name:"junctionStates",hash:{},fn:t.program(4,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:33,column:0},end:{line:35,column:19}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"junctionStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"terminateStates")||(e!=null?a(e,"terminateStates"):e))!=null?c:v,I={name:"terminateStates",hash:{},fn:t.program(45,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:36,column:0},end:{line:43,column:20}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"terminateStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"finalStates")||(e!=null?a(e,"finalStates"):e))!=null?c:v,I={name:"finalStates",hash:{},fn:t.program(48,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:44,column:0},end:{line:46,column:16}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"finalStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"compositeStates")||(e!=null?a(e,"compositeStates"):e))!=null?c:v,I={name:"compositeStates",hash:{},fn:t.program(50,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:47,column:0},end:{line:61,column:20}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"compositeStates")?x:p.call(e,x,I))!=null&&(b+=x),c=(c=a(n,"states")||(e!=null?a(e,"states"):e))!=null?c:v,I={name:"states",hash:{},fn:t.program(60,l,0,u,s),inverse:t.noop,data:l,loc:{start:{line:62,column:0},end:{line:67,column:11}}},x=typeof c==m?c.call(f,I):c,(x=a(n,"states")?x:p.call(e,x,I))!=null&&(b+=x),b},useData:!0,useDepths:!0})});var _n=M(($s,jn)=>{"use strict";var se=require("handlebars/dist/handlebars.runtime.js");On();Pn();se.registerPartial("dot.states.template.hbs",se.templates["dot.states.template.hbs"]);se.registerHelper("stateSection",t=>se.templates["dot.states.template.hbs"](Ko(t)));function U(t){return e=>e.type===t}function Zo(t){return e=>t.includes(e.type)}function Ko(t){return t.initialStates=t.states.filter(U("initial")),t.regularStates=t.states.filter(e=>U("regular")(e)&&!e.statemachine),t.historyStates=t.states.filter(U("history")),t.deepHistoryStates=t.states.filter(U("deephistory")),t.choiceStates=t.states.filter(U("choice")),t.forkjoinStates=t.states.filter(Zo(["fork","join","forkjoin"])),t.junctionStates=t.states.filter(U("junction")),t.terminateStates=t.states.filter(U("terminate")),t.finalStates=t.states.filter(U("final")),t.compositeStates=t.states.filter(e=>e.statemachine),t}jn.exports=function(e){return se.templates["dot.template.hbs"](e)}});var Dn=M(()=>{"use strict";var Le=require("handlebars/dist/handlebars.runtime"),ki=Le.template,Ai=Le.templates=Le.templates||{};Ai["scxml.template.hbs"]=ki({1:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'initial="'+t.escapeExpression(typeof(n=(n=u(n,"initial")||(e!=null?u(e,"initial"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"initial",hash:{},data:l,loc:{start:{line:2,column:71},end:{line:2,column:82}}}):n)+'" '},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,l){var u,s=t.lookupProperty||function(f,v){if(Object.prototype.hasOwnProperty.call(f,v))return f[v]};return`<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.w3.org/2005/07/scxml" `+((u=s(n,"if").call(e??(t.nullContext||{}),e!=null?s(e,"initial"):e,{name:"if",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:47},end:{line:2,column:91}}}))!=null?u:"")+`version="1.0">
`+((u=t.invokePartial(s(d,"scxml.states.template.hbs"),e,{name:"scxml.states.template.hbs",data:l,helpers:n,partials:d,decorators:t.decorators}))!=null?u:"")+`</scxml>
`},usePartial:!0,useData:!0})});var Ln=M(()=>{"use strict";var ze=require("handlebars/dist/handlebars.runtime"),wi=ze.template,Si=ze.templates=ze.templates||{};Si["scxml.states.template.hbs"]=wi({1:function(t,e,n,d,l){var u,s,f=e??(t.nullContext||{}),v=t.hooks.helperMissing,m="function",p=t.escapeExpression,a=t.lookupProperty||function(b,c){if(Object.prototype.hasOwnProperty.call(b,c))return b[c]};return"    <"+p(typeof(s=(s=a(n,"kind")||(e!=null?a(e,"kind"):e))!=null?s:v)==m?s.call(f,{name:"kind",hash:{},data:l,loc:{start:{line:2,column:5},end:{line:2,column:13}}}):s)+' id="'+p(typeof(s=(s=a(n,"id")||(e!=null?a(e,"id"):e))!=null?s:v)==m?s.call(f,{name:"id",hash:{},data:l,loc:{start:{line:2,column:18},end:{line:2,column:24}}}):s)+'"'+((u=a(n,"if").call(f,e!=null?a(e,"initial"):e,{name:"if",hash:{},fn:t.program(2,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:25},end:{line:2,column:69}}}))!=null?u:"")+((u=a(n,"if").call(f,e!=null?a(e,"type"):e,{name:"if",hash:{},fn:t.program(4,l,0),inverse:t.noop,data:l,loc:{start:{line:2,column:69},end:{line:2,column:104}}}))!=null?u:"")+`>
`+((u=t.invokePartial(a(d,"scxml.states.template.hbs"),e,{name:"scxml.states.template.hbs",data:l,indent:"    ",helpers:n,partials:d,decorators:t.decorators}))!=null?u:"")+((u=a(n,"each").call(f,e!=null?a(e,"onentries"):e,{name:"each",hash:{},fn:t.program(6,l,0),inverse:t.noop,data:l,loc:{start:{line:4,column:4},end:{line:6,column:13}}}))!=null?u:"")+((u=a(n,"each").call(f,e!=null?a(e,"onexits"):e,{name:"each",hash:{},fn:t.program(8,l,0),inverse:t.noop,data:l,loc:{start:{line:7,column:4},end:{line:9,column:13}}}))!=null?u:"")+((u=a(n,"each").call(f,e!=null?a(e,"transitions"):e,{name:"each",hash:{},fn:t.program(10,l,0),inverse:t.noop,data:l,loc:{start:{line:10,column:4},end:{line:18,column:13}}}))!=null?u:"")+"    </"+p(typeof(s=(s=a(n,"kind")||(e!=null?a(e,"kind"):e))!=null?s:v)==m?s.call(f,{name:"kind",hash:{},data:l,loc:{start:{line:19,column:6},end:{line:19,column:14}}}):s)+`>
`},2:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return' initial="'+t.escapeExpression(typeof(n=(n=u(n,"initial")||(e!=null?u(e,"initial"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"initial",hash:{},data:l,loc:{start:{line:2,column:50},end:{line:2,column:61}}}):n)+'"'},4:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return' type="'+t.escapeExpression(typeof(n=(n=u(n,"type")||(e!=null?u(e,"type"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"type",hash:{},data:l,loc:{start:{line:2,column:88},end:{line:2,column:96}}}):n)+'"'},6:function(t,e,n,d,l){return"        <onentry>"+t.escapeExpression(t.lambda(e,e))+`</onentry>
`},8:function(t,e,n,d,l){return"        <onexit>"+t.escapeExpression(t.lambda(e,e))+`</onexit>
`},10:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return(n=u(n,"if").call(e??(t.nullContext||{}),e!=null?u(e,"action"):e,{name:"if",hash:{},fn:t.program(11,l,0),inverse:t.program(18,l,0),data:l,loc:{start:{line:11,column:8},end:{line:17,column:15}}}))!=null?n:""},11:function(t,e,n,d,l){var u,s=e??(t.nullContext||{}),f=t.hooks.helperMissing,v="function",m=t.escapeExpression,p=t.lookupProperty||function(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};return"        <transition "+((u=p(n,"if").call(s,e!=null?p(e,"event"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:12,column:20},end:{line:12,column:58}}}))!=null?u:"")+((u=p(n,"if").call(s,e!=null?p(e,"cond"):e,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.noop,data:l,loc:{start:{line:12,column:58},end:{line:12,column:93}}}))!=null?u:"")+((u=p(n,"if").call(s,e!=null?p(e,"type"):e,{name:"if",hash:{},fn:t.program(16,l,0),inverse:t.noop,data:l,loc:{start:{line:12,column:93},end:{line:12,column:128}}}))!=null?u:"")+'target="'+m(typeof(t=(t=p(n,"target")||(e!=null?p(e,"target"):e))!=null?t:f)==v?t.call(s,{name:"target",hash:{},data:l,loc:{start:{line:12,column:136},end:{line:12,column:146}}}):t)+`">
            `+m(typeof(t=(t=p(n,"action")||(e!=null?p(e,"action"):e))!=null?t:f)==v?t.call(s,{name:"action",hash:{},data:l,loc:{start:{line:13,column:12},end:{line:13,column:22}}}):t)+`
        </transition>
`},12:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'event="'+t.escapeExpression(typeof(n=(n=u(n,"event")||(e!=null?u(e,"event"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"event",hash:{},data:l,loc:{start:{line:12,column:40},end:{line:12,column:49}}}):n)+'" '},14:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'cond="'+t.escapeExpression(typeof(n=(n=u(n,"cond")||(e!=null?u(e,"cond"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"cond",hash:{},data:l,loc:{start:{line:12,column:76},end:{line:12,column:84}}}):n)+'" '},16:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return'type="'+t.escapeExpression(typeof(n=(n=u(n,"type")||(e!=null?u(e,"type"):e))!=null?n:t.hooks.helperMissing)=="function"?n.call(e??(t.nullContext||{}),{name:"type",hash:{},data:l,loc:{start:{line:12,column:111},end:{line:12,column:119}}}):n)+'" '},18:function(t,e,n,d,l){var u,s=e??(t.nullContext||{}),f=t.lookupProperty||function(v,m){if(Object.prototype.hasOwnProperty.call(v,m))return v[m]};return"        <transition "+((u=f(n,"if").call(s,e!=null?f(e,"event"):e,{name:"if",hash:{},fn:t.program(12,l,0),inverse:t.noop,data:l,loc:{start:{line:16,column:20},end:{line:16,column:58}}}))!=null?u:"")+((u=f(n,"if").call(s,e!=null?f(e,"cond"):e,{name:"if",hash:{},fn:t.program(14,l,0),inverse:t.noop,data:l,loc:{start:{line:16,column:58},end:{line:16,column:93}}}))!=null?u:"")+((u=f(n,"if").call(s,e!=null?f(e,"type"):e,{name:"if",hash:{},fn:t.program(16,l,0),inverse:t.noop,data:l,loc:{start:{line:16,column:93},end:{line:16,column:128}}}))!=null?u:"")+'target="'+t.escapeExpression(typeof(u=(u=f(n,"target")||(e!=null?f(e,"target"):e))!=null?u:t.hooks.helperMissing)=="function"?u.call(s,{name:"target",hash:{},data:l,loc:{start:{line:16,column:136},end:{line:16,column:146}}}):u)+`"/>
`},compiler:[8,">= 4.3.0"],main:function(t,e,n,d,l){var u=t.lookupProperty||function(s,f){if(Object.prototype.hasOwnProperty.call(s,f))return s[f]};return(n=u(n,"each").call(e??(t.nullContext||{}),e!=null?u(e,"states"):e,{name:"each",hash:{},fn:t.program(1,l,0),inverse:t.noop,data:l,loc:{start:{line:1,column:0},end:{line:20,column:9}}}))!=null?n:""},usePartial:!0,useData:!0})});var Mn=M((zs,zn)=>{"use strict";var Me=require("handlebars/dist/handlebars.runtime.js");Dn();Ln();Me.registerPartial("scxml.states.template.hbs",Me.templates["scxml.states.template.hbs"]);zn.exports=function(e){return Me.templates["scxml.template.hbs"](e)}});var ji={};Ba(ji,{default:()=>Pi,getAllowedValues:()=>Zn,render:()=>Qn,version:()=>Yn});module.exports=Ha(ji);var en=Object.freeze({inputType:{default:"smcat",values:[{name:"smcat"},{name:"json"},{name:"scxml"}]},outputType:{default:"svg",values:[{name:"ast"},{name:"dot"},{name:"eps"},{name:"json"},{name:"oldeps"},{name:"oldps"},{name:"oldps2"},{name:"oldsvg"},{name:"pdf"},{name:"png"},{name:"ps"},{name:"ps2"},{name:"scjson"},{name:"scxml"},{name:"smcat"},{name:"svg"}]},engine:{default:"dot",values:[{name:"dot"},{name:"circo"},{name:"fdp"},{name:"neato"},{name:"osage"},{name:"twopi"}]},direction:{default:"top-down",values:[{name:"top-down"},{name:"bottom-top"},{name:"left-right"},{name:"right-left"}]},desugar:{default:!1,values:[{name:!0},{name:!1}]}});function qa(t,e){return(t==null?void 0:t[e])??en[e].default}function Da(){return en}var R={getAllowedValues:Da,getOptionValue:qa};var vn=_(require("ajv"),1);function tn(t,e=!1){let n=[];return t.filter(d=>Boolean(d.statemachine)).forEach(d=>{Object.prototype.hasOwnProperty.call(d.statemachine,"states")&&(n=n.concat(tn(d.statemachine.states,!0)))}),n.concat(t.map(d=>({name:d.name,type:d.type,statemachine:Boolean(d.statemachine),hasParent:e})))}function nn(t){let e=[];return Object.prototype.hasOwnProperty.call(t,"transitions")&&(e=t.transitions),Object.prototype.hasOwnProperty.call(t,"states")&&t.states.filter(n=>Boolean(n.statemachine)).forEach(n=>{e=e.concat(nn(n.statemachine))}),e}var N=class{_flattenedTransitions;_flattenedStates;constructor(e){this._flattenedStates=tn(e.states||[]),this._flattenedTransitions=nn(e)}get flattenedTransitions(){return this._flattenedTransitions}findStateByName(e){return this._flattenedStates.find(n=>n.name===e)}findStatesByTypes(e){return this._flattenedStates.filter(n=>e.includes(n.type))}findExternalSelfTransitions(e){return this._flattenedTransitions.filter(n=>n.from===e&&n.to===e&&n.type!=="internal")}findTransitionsByFrom(e){return this._flattenedTransitions.filter(n=>n.from===e)}findTransitionsByTo(e){return this._flattenedTransitions.filter(n=>n.to===e)}};var La="^(entry|activity|exit)\\s*/\\s*([^\\n$]*)(\\n|$)",za=new RegExp(La);function rn(t,e){return t.includes(e)}var Ma=[{re:/initial/,stateType:"initial"},{re:/final/,stateType:"final"},{re:/parallel/,stateType:"parallel"},{re:/(deep.*history)|(history.*deep)/,stateType:"deephistory"},{re:/history/,stateType:"history"},{re:/^\^.*/,stateType:"choice"},{re:/^].*/,stateType:"forkjoin"}];function Ua(t){return e=>e.re.test(t)}function ln(t){return(Ma.find(Ua(t))||{stateType:"regular"}).stateType}function Se(t){return{name:t,type:ln(t)}}function an(t){return Boolean(t.statemachine)}function on(t){let e=(t==null?void 0:t.states)??[];return e.filter(an).reduce((n,d)=>n.concat(on(d.statemachine)),e.map(({name:n})=>n))}function sn(t,e){e=e||on(t),t.states=(t==null?void 0:t.states)??[];let n=(t==null?void 0:t.transitions)??[];return t.states.filter(an).forEach(d=>{d.statemachine.states=sn(d.statemachine,e)}),n.forEach(d=>{rn(e,d.from)||(e.push(d.from),t.states.push(Se(d.from))),rn(e,d.to)||(e.push(d.to),t.states.push(Se(d.to)))}),t.states}function Ja(t,e){let n="junction";return t<=1&&e>1&&(n="fork"),t>1&&e<=1&&(n="join"),n}function cn(t,e=new N(t)){return t.states=t.states.map(n=>{if(n.type==="forkjoin"&&!n.typeExplicitlySet){let d=e.findTransitionsByTo(n.name).length,l=e.findTransitionsByFrom(n.name).length;n.type=Ja(d,l)}return n.statemachine&&(n.statemachine=cn(n.statemachine,e)),n}),t}function Ga(t,e){return t.name===e.name}function Xa(t,e){return t.reduce((n,d)=>{let l=n.findIndex(u=>e(u,d));return l>-1?(n[l]=d,n):n.concat(d)},[])}function Wa(t){let e=/([^[/]+)?(\[[^\]]+\])?[^/]*(\/.+)?/,n={},d=t.match(e),l=1,u=2,s=3;return d[l]&&(n.event=d[l].trim()),d[u]&&(n.cond=d[u].slice(1,-1).trim()),d[s]&&(n.action=d[s].slice(1,d[s].length).trim()),n}function un(t,e,n,d=Boolean){d(n)&&(t[e]=n)}function Qa(t,e,n){un(t,e,n,d=>d&&d.length>0)}function Ya(t){let e=t.match(za),n=1,d=2;return e?{type:e[n],body:e[d]}:{type:"activity",body:t}}function Za(t){return t.split(/\n\s*/g).map(e=>e.trim()).map(Ya)}var j={initState:Se,extractUndeclaredStates:sn,classifyForkJoins:cn,getStateType:ln,stateEqual:Ga,uniq:Xa,parseTransitionExpression:Wa,extractActions:Za,setIf:un,setIfNotEmpty:Qa};function Ka(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function W(t,e,n,d){var l=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(l,W.prototype),l.expected=e,l.found=n,l.location=d,l.name="SyntaxError",l}Ka(W,Error);function Ce(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}W.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,d;for(d=0;d<t.length;d++)if(t[d].source===this.location.source){n=t[d].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(n){var s=this.location.end,f=Ce("",l.line.toString().length," "),v=n[l.line-1],m=l.line===s.line?s.column:v.length+1,p=m-l.column||1;e+=`
 --> `+u+`
`+f+` |
`+l.line+" | "+v+`
`+f+" | "+Ce("",l.column-1," ")+Ce("",p,"^")}else e+=`
 at `+u}return e};W.buildMessage=function(t,e){var n={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var p=m.parts.map(function(a){return Array.isArray(a)?u(a[0])+"-"+u(a[1]):u(a)});return"["+(m.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function d(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+d(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+d(p)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+d(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+d(p)})}function s(m){return n[m.type](m)}function f(m){var p=m.map(s),a,b;if(p.sort(),p.length>0){for(a=1,b=1;a<p.length;a++)p[a-1]!==p[a]&&(p[b]=p[a],b++);p.length=b}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function v(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+f(t)+" but "+v(e)+" found."};function fn(t,e){e=e!==void 0?e:{};var n={},d=e.grammarSource,l={program:Dt},u=Dt,s=",",f=";",v="[",m="]",p=":",a="{",b="}",c="=",I="label",x="color",V="class",B="active",Je="type",Ge="regular",Xe="initial",We="terminate",Qe="final",Ye="parallel",Ze="history",Ke="deephistory",et="choice",tt="forkjoin",nt="fork",rt="join",lt="junction",Kn="width",at="external",ot="internal",it="->",st="=>>",ct="=>",ut=">>",ft=":>",mt="--",pt="==",dt="<-",ht="<<=",gt="<=",yt="<<",vt="<:",er="#",tr=".",L='"',ce='\\"',bt="/*",ue="*/",xt="//",$t=/^[0-9]/,It=/^[a-zA-Z0-9_\- ]/,Et=/^[^;, "\t\n\r=\-><:{[]/,nr=/^[ \t]/,rr=/^[\r\n]/,lr=/^[^\r\n]/,ar=O("statemachine"),fe=w(",",!1),Y=w(";",!1),or=O("state"),Tt=w("[",!1),kt=w("]",!1),At=w(":",!1),te=w("{",!1),ir=w("}",!1),sr=O("extended state attributes"),cr=O("extended state attribute"),J=w("=",!1),ur=O("state attribute name"),fr=w("label",!0),wt=w("color",!0),mr=O("class attribute"),pr=w("class",!0),dr=O("state flag"),hr=w("active",!0),gr=O("state type"),St=w("type",!0),yr=O("state type type"),vr=w("regular",!1),br=w("initial",!1),xr=w("terminate",!1),$r=w("final",!1),Ir=w("parallel",!1),Er=w("history",!1),Tr=w("deephistory",!1),kr=w("choice",!1),Ar=w("forkjoin",!1),wr=w("fork",!1),Sr=w("join",!1),Cr=w("junction",!1),Or=O("transition"),Pr=O("extended transition attributes"),jr=O("extended transition attribute"),_r=O("transition attribute name"),Fr=O("transition type name"),Rr=O("numeric transition attribute name"),Nr=w("width",!0),Vr=O("transition type value"),Br=w("external",!1),Hr=w("internal",!1),qr=O("left to right arrow"),Dr=w("->",!1),Lr=w("=>>",!1),zr=w("=>",!1),Mr=w(">>",!1),Ur=w(":>",!1),Jr=w("--",!1),Gr=w("==",!1),Xr=O("right to left arrow"),Wr=w("<-",!1),Qr=w("<<=",!1),Yr=w("<=",!1),Zr=w("<<",!1),Kr=w("<:",!1),el=w("#",!1),tl=w(".",!1),Ct=Z([["0","9"]],!1,!1),nl=O("double quoted string"),z=w('"',!1),Ot=w('\\"',!1),G=ea(),rl=O("valid class string"),Pt=Z([["a","z"],["A","Z"],["0","9"],"_","-"," "],!1,!1),ll=O("identifier"),jt=Z([";",","," ",'"',"	",`
`,"\r","=","-",">","<",":","{","["],!0,!1),al=O("whitespace"),ol=Z([" ","	"],!1,!1),il=O("line end"),sl=Z(["\r",`
`],!1,!1),cl=w("/*",!1),_t=w("*/",!1),ul=w("//",!1),fl=Z(["\r",`
`],!0,!1),ml=O("comment"),pl=function(r){return r.states=j.extractUndeclaredStates(r),j.classifyForkJoins(r)},dl=function(r,i){let g={};return j.setIf(g,"states",r),j.setIfNotEmpty(g,"transitions",i),g},Ft=function(r){return r},hl=function(r){return r},gl=function(r){return j.uniq(r[0].concat(r[1]),j.stateEqual)},yl=function(r,i,g){return g},vl=function(r,i,g,h){return h},bl=function(r,i,g,h,E){return E},xl=function(r,i,g,h,E){let A=j.initState(i);return(g||[]).forEach(S=>j.setIf(A,S.name,S.value)),j.setIf(A,"typeExplicitlySet",(g||[]).some(S=>S.typeExplicitlySet)),j.setIf(A,"statemachine",E),j.setIfNotEmpty(A,"note",r),Boolean(h)&&j.setIfNotEmpty(A,"actions",j.extractActions(h)),A},$l=function(r,i){return{name:r,value:i}},Il=function(r,i){return{name:r,value:i}},El=function(r){return{name:r,value:!0}},Tl=function(r,i){return{name:r,value:i,typeExplicitlySet:!0}},kl=function(r){return r.toLowerCase()},Al=function(r){return r.toLowerCase()},wl=function(r){return r.toLowerCase()},Sl=function(r){return r.toLowerCase()},Cl=function(r,i,g){return g},Ol=function(r,i,g,h){return h},Pl=function(r,i,g,h){return h&&(i.label=h,i=Object.assign(i,j.parseTransitionExpression(h))),(g||[]).forEach(E=>j.setIf(i,E.name,E.value)),j.setIfNotEmpty(i,"note",r),i},jl=function(r,i){return{from:r,to:i}},_l=function(r,i){return{from:i,to:r}},Fl=function(r,i){return{name:r,value:i}},Rl=function(r,i){return{name:r,value:i}},Nl=function(r,i){return{name:r,value:i}},Vl=function(r,i){return{name:r,value:i}},Bl=function(r){return r.toLowerCase()},Hl=function(r){return r.toLowerCase()},ql=function(r){return r},Dl=function(r){return r.join("").trim()},Ll=function(r){return parseFloat(r.join(""))},zl=function(r){return parseInt(r.join(""),10)},Ml=function(r){return r.join("").replace(/\\\"/g,'"')},Rt=function(r){return r},Ul=function(r){return r.join("")},Nt=function(r){return r},Jl=function(r){return r.join("").trim()},Gl=function(r){return r.join("").trim()},Vt=function(r){return r},Bt=function(r){return r},Xl=function(r){return r.join("")},Wl=function(r){return r},Ql=function(r){return r},Yl=function(r){return r},Zl=function(r,i,g){return r+i.join("")+g},Kl=function(r,i){return r+i.join("")},o=0,T=0,me=[{line:1,column:1}],H=0,Ee=[],y=0,pe;if("startRule"in e){if(!(e.startRule in l))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');u=l[e.startRule]}function _i(){return t.substring(T,o)}function Fi(){return T}function Ri(){return{source:d,start:T,end:o}}function Ni(){return ne(T,o)}function Vi(r,i){throw i=i!==void 0?i:ne(T,o),qt([O(r)],t.substring(T,o),i)}function Bi(r,i){throw i=i!==void 0?i:ne(T,o),na(r,i)}function w(r,i){return{type:"literal",text:r,ignoreCase:i}}function Z(r,i,g){return{type:"class",parts:r,inverted:i,ignoreCase:g}}function ea(){return{type:"any"}}function ta(){return{type:"end"}}function O(r){return{type:"other",description:r}}function Ht(r){var i=me[r],g;if(i)return i;for(g=r-1;!me[g];)g--;for(i=me[g],i={line:i.line,column:i.column};g<r;)t.charCodeAt(g)===10?(i.line++,i.column=1):i.column++,g++;return me[r]=i,i}function ne(r,i){var g=Ht(r),h=Ht(i);return{source:d,start:{offset:r,line:g.line,column:g.column},end:{offset:i,line:h.line,column:h.column}}}function $(r){o<H||(o>H&&(H=o,Ee=[]),Ee.push(r))}function na(r,i){return new W(r,null,null,i)}function qt(r,i,g){return new W(W.buildMessage(r,i),r,i,g)}function Dt(){var r,i,g,h;return r=o,i=k(),g=Lt(),h=k(),T=r,r=pl(g),r}function Lt(){var r,i,g,h;for(y++,r=o,i=ra(),i===n&&(i=null),g=[],h=Ut();h!==n;)g.push(h),h=Ut();return T=r,r=dl(i,g),y--,i=n,y===0&&$(ar),r}function ra(){var r,i,g,h,E,A;for(r=o,i=o,g=[],h=o,E=Te(),E!==n?(t.charCodeAt(o)===44?(A=s,o++):(A=n,y===0&&$(fe)),A!==n?(T=h,h=Ft(E)):(o=h,h=n)):(o=h,h=n);h!==n;)g.push(h),h=o,E=Te(),E!==n?(t.charCodeAt(o)===44?(A=s,o++):(A=n,y===0&&$(fe)),A!==n?(T=h,h=Ft(E)):(o=h,h=n)):(o=h,h=n);return h=o,E=Te(),E!==n?(t.charCodeAt(o)===59?(A=f,o++):(A=n,y===0&&$(Y)),A!==n?(T=h,h=hl(E)):(o=h,h=n)):(o=h,h=n),h!==n?(g=[g,h],i=g):(o=i,i=n),i!==n&&(T=r,i=gl(i)),r=i,r}function Te(){var r,i,g,h,E,A,S,C,q,F,X,Zt,Ae,ja,we;for(y++,r=o,i=[],g=de();g!==n;)i.push(g),g=de();return g=k(),h=le(),h!==n?(E=k(),A=o,t.charCodeAt(o)===91?(S=v,o++):(S=n,y===0&&$(Tt)),S!==n?(C=la(),t.charCodeAt(o)===93?(q=m,o++):(q=n,y===0&&$(kt)),q!==n?(T=A,A=yl(i,h,C)):(o=A,A=n)):(o=A,A=n),A===n&&(A=null),S=k(),C=o,t.charCodeAt(o)===58?(q=p,o++):(q=n,y===0&&$(At)),q!==n?(F=k(),X=xa(),X!==n?(Zt=k(),T=C,C=vl(i,h,A,X)):(o=C,C=n)):(o=C,C=n),C===n&&(C=null),q=k(),F=o,t.charCodeAt(o)===123?(X=a,o++):(X=n,y===0&&$(te)),X!==n?(Zt=k(),Ae=Lt(),Ae!==n?(ja=k(),t.charCodeAt(o)===125?(we=b,o++):(we=n,y===0&&$(ir)),we!==n?(T=F,F=bl(i,h,A,C,Ae)):(o=F,F=n)):(o=F,F=n)):(o=F,F=n),F===n&&(F=null),X=k(),T=r,r=xl(i,h,A,C,F)):(o=r,r=n),y--,r===n&&(i=n,y===0&&$(or)),r}function la(){var r,i;for(y++,r=[],i=zt();i!==n;)r.push(i),i=zt();return y--,i=n,y===0&&$(sr),r}function zt(){var r,i,g,h,E,A,S,C;return y++,r=o,i=k(),g=aa(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=re(),S!==n?(C=k(),T=r,r=$l(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=Mt(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=Gt(),S!==n?(C=k(),T=r,r=Il(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=oa(),g!==n?(h=k(),T=r,r=El(g)):(o=r,r=n),r===n&&(r=o,i=k(),g=ia(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=sa(),S!==n?(C=k(),T=r,r=Tl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n)))),y--,r===n&&(i=n,y===0&&$(cr)),r}function aa(){var r,i;return y++,r=o,t.substr(o,5).toLowerCase()===I?(i=t.substr(o,5),o+=5):(i=n,y===0&&$(fr)),i===n&&(t.substr(o,5).toLowerCase()===x?(i=t.substr(o,5),o+=5):(i=n,y===0&&$(wt))),i!==n&&(T=r,i=kl(i)),r=i,y--,r===n&&(i=n,y===0&&$(ur)),r}function Mt(){var r,i;return y++,r=o,t.substr(o,5).toLowerCase()===V?(i=t.substr(o,5),o+=5):(i=n,y===0&&$(pr)),i!==n&&(T=r,i=Al(i)),r=i,y--,r===n&&(i=n,y===0&&$(mr)),r}function oa(){var r,i;return y++,r=o,t.substr(o,6).toLowerCase()===B?(i=t.substr(o,6),o+=6):(i=n,y===0&&$(hr)),i!==n&&(T=r,i=wl(i)),r=i,y--,r===n&&(i=n,y===0&&$(dr)),r}function ia(){var r,i;return y++,r=o,t.substr(o,4).toLowerCase()===Je?(i=t.substr(o,4),o+=4):(i=n,y===0&&$(St)),i!==n&&(T=r,i=Sl(i)),r=i,y--,r===n&&(i=n,y===0&&$(gr)),r}function sa(){var r,i;return y++,t.substr(o,7)===Ge?(r=Ge,o+=7):(r=n,y===0&&$(vr)),r===n&&(t.substr(o,7)===Xe?(r=Xe,o+=7):(r=n,y===0&&$(br)),r===n&&(t.substr(o,9)===We?(r=We,o+=9):(r=n,y===0&&$(xr)),r===n&&(t.substr(o,5)===Qe?(r=Qe,o+=5):(r=n,y===0&&$($r)),r===n&&(t.substr(o,8)===Ye?(r=Ye,o+=8):(r=n,y===0&&$(Ir)),r===n&&(t.substr(o,7)===Ze?(r=Ze,o+=7):(r=n,y===0&&$(Er)),r===n&&(t.substr(o,11)===Ke?(r=Ke,o+=11):(r=n,y===0&&$(Tr)),r===n&&(t.substr(o,6)===et?(r=et,o+=6):(r=n,y===0&&$(kr)),r===n&&(t.substr(o,8)===tt?(r=tt,o+=8):(r=n,y===0&&$(Ar)),r===n&&(t.substr(o,4)===nt?(r=nt,o+=4):(r=n,y===0&&$(wr)),r===n&&(t.substr(o,4)===rt?(r=rt,o+=4):(r=n,y===0&&$(Sr)),r===n&&(t.substr(o,8)===lt?(r=lt,o+=8):(r=n,y===0&&$(Cr))))))))))))),y--,r===n&&(i=n,y===0&&$(yr)),r}function Ut(){var r,i,g,h,E,A,S,C,q;for(y++,r=o,i=[],g=de();g!==n;)i.push(g),g=de();return g=ca(),g!==n?(h=o,t.charCodeAt(o)===91?(E=v,o++):(E=n,y===0&&$(Tt)),E!==n?(A=ua(),t.charCodeAt(o)===93?(S=m,o++):(S=n,y===0&&$(kt)),S!==n?(C=k(),T=h,h=Cl(i,g,A)):(o=h,h=n)):(o=h,h=n),h===n&&(h=null),E=o,t.charCodeAt(o)===58?(A=p,o++):(A=n,y===0&&$(At)),A!==n?(S=k(),C=ba(),C!==n?(q=k(),T=E,E=Ol(i,g,h,C)):(o=E,E=n)):(o=E,E=n),E===n&&(E=null),t.charCodeAt(o)===59?(A=f,o++):(A=n,y===0&&$(Y)),A!==n?(T=r,r=Pl(i,g,h,E)):(o=r,r=n)):(o=r,r=n),y--,r===n&&(i=n,y===0&&$(Or)),r}function ca(){var r,i,g,h,E,A,S,C;return r=o,i=k(),g=le(),g!==n?(h=k(),E=ha(),E!==n?(A=k(),S=le(),S!==n?(C=k(),T=r,r=jl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=le(),g!==n?(h=k(),E=ga(),E!==n?(A=k(),S=le(),S!==n?(C=k(),T=r,r=_l(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n)),r}function ua(){var r,i;for(y++,r=[],i=Jt();i!==n;)r.push(i),i=Jt();return y--,i=n,y===0&&$(Pr),r}function Jt(){var r,i,g,h,E,A,S,C;return y++,r=o,i=k(),g=fa(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=re(),S!==n?(C=k(),T=r,r=Fl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=Mt(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=Gt(),S!==n?(C=k(),T=r,r=Rl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=ma(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=da(),S!==n?(C=k(),T=r,r=Nl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n),r===n&&(r=o,i=k(),g=pa(),g!==n?(h=k(),t.charCodeAt(o)===61?(E=c,o++):(E=n,y===0&&$(J)),E!==n?(A=k(),S=ya(),S!==n?(C=k(),T=r,r=Vl(g,S)):(o=r,r=n)):(o=r,r=n)):(o=r,r=n)))),y--,r===n&&(i=n,y===0&&$(jr)),r}function fa(){var r,i;return y++,r=o,t.substr(o,5).toLowerCase()===x?(i=t.substr(o,5),o+=5):(i=n,y===0&&$(wt)),i!==n&&(T=r,i=Bl(i)),r=i,y--,r===n&&(i=n,y===0&&$(_r)),r}function ma(){var r,i;return y++,r=o,t.substr(o,4).toLowerCase()===Je?(i=t.substr(o,4),o+=4):(i=n,y===0&&$(St)),i!==n&&(T=r,i=Hl(i)),r=i,y--,r===n&&(i=n,y===0&&$(Fr)),r}function pa(){var r,i;return y++,r=o,t.substr(o,5).toLowerCase()===Kn?(i=t.substr(o,5),o+=5):(i=n,y===0&&$(Nr)),i!==n&&(T=r,i=ql(i)),r=i,y--,r===n&&(i=n,y===0&&$(Rr)),r}function da(){var r,i;return y++,t.substr(o,8)===at?(r=at,o+=8):(r=n,y===0&&$(Br)),r===n&&(t.substr(o,8)===ot?(r=ot,o+=8):(r=n,y===0&&$(Hr))),y--,r===n&&(i=n,y===0&&$(Vr)),r}function ha(){var r,i;return y++,t.substr(o,2)===it?(r=it,o+=2):(r=n,y===0&&$(Dr)),r===n&&(t.substr(o,3)===st?(r=st,o+=3):(r=n,y===0&&$(Lr)),r===n&&(t.substr(o,2)===ct?(r=ct,o+=2):(r=n,y===0&&$(zr)),r===n&&(t.substr(o,2)===ut?(r=ut,o+=2):(r=n,y===0&&$(Mr)),r===n&&(t.substr(o,2)===ft?(r=ft,o+=2):(r=n,y===0&&$(Ur)),r===n&&(t.substr(o,2)===mt?(r=mt,o+=2):(r=n,y===0&&$(Jr)),r===n&&(t.substr(o,2)===pt?(r=pt,o+=2):(r=n,y===0&&$(Gr)))))))),y--,r===n&&(i=n,y===0&&$(qr)),r}function ga(){var r,i;return y++,t.substr(o,2)===dt?(r=dt,o+=2):(r=n,y===0&&$(Wr)),r===n&&(t.substr(o,3)===ht?(r=ht,o+=3):(r=n,y===0&&$(Qr)),r===n&&(t.substr(o,2)===gt?(r=gt,o+=2):(r=n,y===0&&$(Yr)),r===n&&(t.substr(o,2)===yt?(r=yt,o+=2):(r=n,y===0&&$(Zr)),r===n&&(t.substr(o,2)===vt?(r=vt,o+=2):(r=n,y===0&&$(Kr)))))),y--,r===n&&(i=n,y===0&&$(Xr)),r}function de(){var r,i,g,h,E;if(r=o,i=k(),t.charCodeAt(o)===35?(g=er,o++):(g=n,y===0&&$(el)),g!==n){for(h=[],E=he();E!==n;)h.push(E),E=he();T=r,r=Dl(h)}else o=r,r=n;return r}function ya(){var r;return r=va(),r===n&&(r=ke()),r}function va(){var r,i,g,h,E;return r=o,i=o,g=ke(),g!==n?(t.charCodeAt(o)===46?(h=tr,o++):(h=n,y===0&&$(tl)),h!==n?(E=ke(),E!==n?(g=[g,h,E],i=g):(o=i,i=n)):(o=i,i=n)):(o=i,i=n),i!==n&&(T=r,i=Ll(i)),r=i,r}function ke(){var r,i,g;if(r=o,i=[],$t.test(t.charAt(o))?(g=t.charAt(o),o++):(g=n,y===0&&$(Ct)),g!==n)for(;g!==n;)i.push(g),$t.test(t.charAt(o))?(g=t.charAt(o),o++):(g=n,y===0&&$(Ct));else i=n;return i!==n&&(T=r,i=zl(i)),r=i,r}function ba(){var r;return r=re(),r===n&&(r=Ea()),r}function xa(){var r;return r=re(),r===n&&(r=Ta()),r}function re(){var r,i,g,h;return y++,r=o,t.charCodeAt(o)===34?(i=L,o++):(i=n,y===0&&$(z)),i!==n?(g=$a(),t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),h!==n?(T=r,r=Ml(g)):(o=r,r=n)):(o=r,r=n),y--,r===n&&(i=n,y===0&&$(nl)),r}function $a(){var r,i,g,h;for(r=[],i=o,g=o,y++,t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.substr(o,2)===ce?(h=ce,o+=2):(h=n,y===0&&$(Ot)),h===n&&(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G))),h!==n?(T=i,i=Rt(h)):(o=i,i=n)):(o=i,i=n);i!==n;)r.push(i),i=o,g=o,y++,t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.substr(o,2)===ce?(h=ce,o+=2):(h=n,y===0&&$(Ot)),h===n&&(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G))),h!==n?(T=i,i=Rt(h)):(o=i,i=n)):(o=i,i=n);return r}function Gt(){var r,i,g,h;return y++,r=o,t.charCodeAt(o)===34?(i=L,o++):(i=n,y===0&&$(z)),i!==n?(g=Ia(),t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),h!==n?(T=r,r=Ul(g)):(o=r,r=n)):(o=r,r=n),y--,r===n&&(i=n,y===0&&$(rl)),r}function Ia(){var r,i,g,h;for(r=[],i=o,g=o,y++,t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),y--,h===n?g=void 0:(o=g,g=n),g!==n?(It.test(t.charAt(o))?(h=t.charAt(o),o++):(h=n,y===0&&$(Pt)),h!==n?(T=i,i=Nt(h)):(o=i,i=n)):(o=i,i=n);i!==n;)r.push(i),i=o,g=o,y++,t.charCodeAt(o)===34?(h=L,o++):(h=n,y===0&&$(z)),y--,h===n?g=void 0:(o=g,g=n),g!==n?(It.test(t.charAt(o))?(h=t.charAt(o),o++):(h=n,y===0&&$(Pt)),h!==n?(T=i,i=Nt(h)):(o=i,i=n)):(o=i,i=n);return r}function Ea(){var r,i;return r=o,i=Aa(),T=r,i=Jl(i),r=i,r}function Ta(){var r,i;return r=o,i=ka(),T=r,i=Gl(i),r=i,r}function ka(){var r,i,g,h;for(r=[],i=o,g=o,y++,t.charCodeAt(o)===44?(h=s,o++):(h=n,y===0&&$(fe)),h===n&&(t.charCodeAt(o)===59?(h=f,o++):(h=n,y===0&&$(Y)),h===n&&(t.charCodeAt(o)===123?(h=a,o++):(h=n,y===0&&$(te)))),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G)),h!==n?(T=i,i=Vt(h)):(o=i,i=n)):(o=i,i=n);i!==n;)r.push(i),i=o,g=o,y++,t.charCodeAt(o)===44?(h=s,o++):(h=n,y===0&&$(fe)),h===n&&(t.charCodeAt(o)===59?(h=f,o++):(h=n,y===0&&$(Y)),h===n&&(t.charCodeAt(o)===123?(h=a,o++):(h=n,y===0&&$(te)))),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G)),h!==n?(T=i,i=Vt(h)):(o=i,i=n)):(o=i,i=n);return r}function Aa(){var r,i,g,h;for(r=[],i=o,g=o,y++,t.charCodeAt(o)===59?(h=f,o++):(h=n,y===0&&$(Y)),h===n&&(t.charCodeAt(o)===123?(h=a,o++):(h=n,y===0&&$(te))),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G)),h!==n?(T=i,i=Bt(h)):(o=i,i=n)):(o=i,i=n);i!==n;)r.push(i),i=o,g=o,y++,t.charCodeAt(o)===59?(h=f,o++):(h=n,y===0&&$(Y)),h===n&&(t.charCodeAt(o)===123?(h=a,o++):(h=n,y===0&&$(te))),y--,h===n?g=void 0:(o=g,g=n),g!==n?(t.length>o?(h=t.charAt(o),o++):(h=n,y===0&&$(G)),h!==n?(T=i,i=Bt(h)):(o=i,i=n)):(o=i,i=n);return r}function le(){var r,i,g;if(y++,r=o,i=[],Et.test(t.charAt(o))?(g=t.charAt(o),o++):(g=n,y===0&&$(jt)),g!==n)for(;g!==n;)i.push(g),Et.test(t.charAt(o))?(g=t.charAt(o),o++):(g=n,y===0&&$(jt));else i=n;return i!==n&&(T=r,i=Xl(i)),r=i,r===n&&(r=re()),y--,r===n&&(i=n,y===0&&$(ll)),r}function Xt(){var r,i;return y++,r=o,nr.test(t.charAt(o))?(i=t.charAt(o),o++):(i=n,y===0&&$(ol)),i!==n&&(T=r,i=Wl(i)),r=i,y--,r===n&&(i=n,y===0&&$(al)),r}function Wt(){var r,i;return y++,r=o,rr.test(t.charAt(o))?(i=t.charAt(o),o++):(i=n,y===0&&$(sl)),i!==n&&(T=r,i=Ql(i)),r=i,y--,r===n&&(i=n,y===0&&$(il)),r}function wa(){var r;return t.substr(o,2)===bt?(r=bt,o+=2):(r=n,y===0&&$(cl)),r}function Sa(){var r;return t.substr(o,2)===ue?(r=ue,o+=2):(r=n,y===0&&$(_t)),r}function Qt(){var r,i,g;return r=o,i=o,y++,t.substr(o,2)===ue?(g=ue,o+=2):(g=n,y===0&&$(_t)),y--,g===n?i=void 0:(o=i,i=n),i!==n?(t.length>o?(g=t.charAt(o),o++):(g=n,y===0&&$(G)),g!==n?(T=r,r=Yl(g)):(o=r,r=n)):(o=r,r=n),r}function Ca(){var r,i,g,h;if(r=o,i=wa(),i!==n){for(g=[],h=Qt();h!==n;)g.push(h),h=Qt();h=Sa(),h!==n?(T=r,r=Zl(i,g,h)):(o=r,r=n)}else o=r,r=n;return r}function Oa(){var r;return t.substr(o,2)===xt?(r=xt,o+=2):(r=n,y===0&&$(ul)),r}function he(){var r;return lr.test(t.charAt(o))?(r=t.charAt(o),o++):(r=n,y===0&&$(fl)),r}function Pa(){var r,i,g,h;if(r=o,i=Oa(),i!==n){for(g=[],h=he();h!==n;)g.push(h),h=he();T=r,r=Kl(i,g)}else o=r,r=n;return r}function Yt(){var r,i;return y++,r=Pa(),r===n&&(r=Ca()),y--,r===n&&(i=n,y===0&&$(ml)),r}function k(){var r,i;for(r=[],i=Xt(),i===n&&(i=Wt(),i===n&&(i=Yt()));i!==n;)r.push(i),i=Xt(),i===n&&(i=Wt(),i===n&&(i=Yt()));return r}if(pe=u(),pe!==n&&o===t.length)return pe;throw pe!==n&&o<t.length&&$(ta()),qt(Ee,H<t.length?t.charAt(H):null,H<t.length?ne(H,H+1):ne(H,H))}var Pe=_(require("fast-xml-parser"),1),Q=_(require("he"),1),ve=_(require("lodash/castArray.js"),1);function eo(t,e,n){let d="";return t&&(d+=t),e&&(d+=` [${e}]`),n&&(d+=`/ ${n}`),d.trim()}var ye={formatLabel:eo};var ae=_(require("lodash/castArray.js"),1);function to(t,e){let n={id:e?`${e}.initial`:"initial"};return t.transition&&Object.assign(n,{transition:[t.transition]}),n}function no(t){return{id:"initial",transition:[{target:t}]}}function ro(t){let e=[];return t.initial&&(typeof t.initial=="string"?e.push(no(t.initial)):e.push(to(t.initial,t.id))),e}function mn(t){return{...t,initial:ro(t),state:(0,ae.default)((t==null?void 0:t.state)??[]),parallel:(0,ae.default)((t==null?void 0:t.parallel)??[]),history:(0,ae.default)((t==null?void 0:t.history)??[]),final:(0,ae.default)((t==null?void 0:t.final)??[])}}var lo=ye.formatLabel;function pn(t,e){return(0,ve.default)(t[e]).map(n=>({type:e==="onexit"?"exit":"entry",body:Q.default.decode(n).trim()}))}function ao(t){return(0,ve.default)(t).map(e=>({type:"activity",body:Q.default.decode(e.id||"").trim()||Q.default.decode(e||"").trim()}))}function oo(t){let e=[];return t.onentry&&(e=e.concat(pn(t,"onentry"))),t.invoke&&(e=e.concat(ao(t.invoke))),t.onexit&&(e=e.concat(pn(t,"onexit"))),e}function io(t,e){return t==="history"&&e.type==="deep"?"deephistory":t}function oe(t){return e=>{let n={name:e.id,type:io(t,e)};return j.getStateType(e.id)!==n.type&&(n.typeExplicitlySet=!0),(e.onentry||e.onexit||e.invoke)&&(n.actions=oo(e)),Object.keys(e).some(d=>["initial","state","history","parallel","final"].includes(d))&&(n.statemachine=dn(e)),n}}function so(t){let e={};return t.event&&(e.event=t.event.split(/\s+/).join(`
`)),t.cond&&(e.cond=t.cond),t["#text"]&&(e.action=Q.default.decode(t["#text"]).trim()),t.type&&(e.type=t.type),e}function co(t){let e={};typeof t=="string"?e.action=Q.default.decode(t).trim():Object.assign(e,so(t));let n=lo(e.event,e.cond,e.action);return n&&(e.label=n),e}function uo(t){return(e,n)=>{let d=((n==null?void 0:n.target)??t.id).split(/\s+/),l=co(n);return e.concat(d.map(u=>({from:t.id,to:u,...l})))}}function Oe(t){return t.filter(e=>Object.prototype.hasOwnProperty.call(e,"transition")).reduce((e,n)=>e.concat((0,ve.default)(n.transition).reduce(uo(n),[])),[])}function dn(t){let e=mn(t),n={states:e.initial.map(oe("initial")).concat(e.state.map(oe("regular"))).concat(e.parallel.map(oe("parallel"))).concat(e.history.map(oe("history"))).concat(e.final.map(oe("final")))},d=Oe(e.initial).concat(Oe(e.state)).concat(Oe(e.parallel));return d.length>0&&(n.transitions=d),n}function hn(t){let e=t.trim();if(Pe.default.validate(e)===!0){let n=Pe.default.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,tagValueProcessor:d=>Q.default.decode(d),stopNodes:["onentry","onexit","transition"]});return dn((n==null?void 0:n.scxml)??{xmlns:"http://www.w3.org/2005/07/scxml",version:"1.0"})}throw new Error(`That doesn't look like valid xml ...
`)}var gn={$schema:"http://json-schema.org/draft-07/schema#",title:"state-machine-cat abstract syntax tree schema",$ref:"#/definitions/StateMachineType",$id:"org.js.state-machine-cat/v7.4.0",definitions:{StateType:{type:"string",enum:["regular","initial","terminate","final","parallel","history","deephistory","choice","forkjoin","fork","join","junction"]},TransitionType:{type:"string",enum:["internal","external"]},NoteType:{type:"array",items:{type:"string"}},ActionTypeType:{type:"string",enum:["entry","activity","exit"]},ActionType:{type:"object",required:["type","body"],additionalProperties:!1,properties:{type:{$ref:"#/definitions/ActionTypeType"},body:{type:"string"}}},ClassType:{type:"string",pattern:"^[a-zA-Z0-9_\\- ]*$"},StateMachineType:{type:"object",additionalProperties:!1,required:["states"],properties:{states:{type:"array",items:{type:"object",required:["name","type"],additionalProperties:!1,properties:{name:{description:"The name and identifier of the state. Unique within the root state machine.",type:"string"},type:{description:"What kind of state (or pseudo state) this state is. E.g. 'regular' for normal states or 'initial', 'final', 'choice' etc for pseudo states. Most UML (pseudo-) states are supported.",$ref:"#/definitions/StateType"},label:{description:"The display label of the state. If it's not present, most renderers will use the states' name in stead.",type:"string"},color:{description:'Color to use for rendering the state. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},active:{description:"If true the state is considered to be active and rendered as such.",type:"boolean"},typeExplicitlySet:{description:"The default parser derives the `type` from the `name` with inband signaling. The user can override that behavior by explicitly setting the `type`. This attribute is there to express that (and make sure that on next parses & processing it doesn't get accidentily re-derived from the name again).",type:"boolean"},isComposite:{description:"convenience, derived attribute - set to true if there's a state machine inside the state; false in all other cases. For internal use - @deprecated",type:"boolean"},actions:{type:"array",description:"A series of actions and their types. The type describe when the action takes place (on entry, exit, or otherwise ('activity'))",items:{$ref:"#/definitions/ActionType"}},note:{description:"Comments related to this state. Some renderers will use the note attribute to render a note (i.e. as a post-it) attached to the state.",$ref:"#/definitions/NoteType"},statemachine:{description:"state machine nested within the state.",$ref:"#/definitions/StateMachineType"}}}},transitions:{type:"array",items:{type:"object",required:["from","to"],additionalProperties:!1,properties:{from:{description:"The name of the state this transition transitions from",type:"string"},to:{description:"The name of the state this transition transitions to",type:"string"},label:{description:"A display label to represent this transition. Parsers can parse this label into events conditions and actions.",type:"string"},event:{description:"Event triggering the transition",type:"string"},cond:{description:"Condition for the transition to occur.",type:"string"},action:{description:"Action to execute when the transition occurs.",type:"string"},note:{description:"Comments related to this transition",$ref:"#/definitions/NoteType"},color:{description:'Color to use for rendering the transition. Accepts all css color names ("blue") and hex notation - with ("#0000FF77") or without ("#0000FF") transparency.',type:"string"},width:{description:"The line width to use for rendering the transition",type:"number",minimum:0,maximum:30},class:{description:"Class name to give the state in dot and svg output.",$ref:"#/definitions/ClassType"},type:{description:"Whether the transition is external (default) or internal. See https://www.w3.org/TR/scxml/#transition for details.",$ref:"#/definitions/TransitionType"}}}}}}}};var yn=new vn.default;function fo(t,e){if(!yn.validate(t,e))throw new Error(`The provided JSON is not a valid state-machine-cat AST: ${yn.errorsText()}.
`)}var bn={getAST(t,e){let n=t;return R.getOptionValue(e,"inputType")==="smcat"?n=fn(t):R.getOptionValue(e,"inputType")==="scxml"?n=hn(t):typeof t=="string"&&(n=JSON.parse(t)),fo(gn,n),n}};var _e=_(require("lodash/cloneDeep.js"),1),je=_(require("lodash/reject.js"),1);function mo(t,e,n){return t?`${t}${n}${e}`:e}function po(t,e){let n={...t,...e,from:t.from,to:e.to};return e.action&&(n.action=mo(t.action,e.action,`
`)),(n.event||n.cond||n.action)&&(n.label=ye.formatLabel(n.event,n.cond,n.action)),n}function ho(t,e,n){return t.reduce((d,l)=>(e.forEach((u,s)=>{u===l.to&&n[u]?d=d.concat(n[u].map(f=>po(l,f))):d=s===0?d.concat(l):d}),d),[])}function xn(t,e,n){let d=(0,_e.default)(t);return d.transitions&&e.length>0&&(d.transitions=ho(d.transitions,e,n)),d.states=d.states.map(l=>l.statemachine?{...l,statemachine:xn(l.statemachine,e,n)}:l),d}function $n(t,e){let n=(0,_e.default)(t);return n.transitions&&(n.transitions=(0,je.default)(n.transitions,d=>e.some(l=>l===d.from||l===d.to))),n.states=(0,je.default)(n.states,d=>e.includes(d.name)).map(d=>d.statemachine?{...d,statemachine:$n(d.statemachine,e)}:d),n}var In=(t,e=["fork","junction","choice"])=>{let n=new N(t),d=n.findStatesByTypes(e).map(({name:s})=>s),l=d.reduce((s,f)=>(s[f]=n.findTransitionsByFrom(f),s),{}),u=xn(t,d,l);return $n(u,d)};var Gn=_(require("lodash/has.js"),1),Xn=_(wn(),1);var Fn=_(require("lodash/cloneDeep.js"),1);var Ao=[{name:"fontname",value:'"Helvetica"'},{name:"fontsize",value:"12"},{name:"penwidth",value:"2.0"}],wo={dot:[{name:"splines",value:"true"},{name:"ordering",value:"out"},{name:"compound",value:"true"},{name:"overlap",value:"scale"},{name:"nodesep",value:"0.3"},{name:"ranksep",value:"0.1"}],fdp:[{name:"K",value:"0.9"}],osage:[{name:"pack",value:"42"}],neato:[{name:"epsilon",value:"0.9"}]},So={"bottom-top":[{name:"rankdir",value:"BT"}],"left-right":[{name:"rankdir",value:"LR"}],"right-left":[{name:"rankdir",value:"RL"}]},Co=[{name:"shape",value:"plaintext"},{name:"style",value:"filled"},{name:"fillcolor",value:'"#FFFFFF01"'},{name:"fontname",value:"Helvetica"},{name:"fontsize",value:12},{name:"penwidth",value:"2.0"}],Oo=[{name:"fontname",value:"Helvetica"},{name:"fontsize",value:10}];function Ne(t){return`${t.name}=${t.value}`}var be={buildGraphAttributes:(t,e,n)=>Ao.concat(wo[t]||[]).concat(So[e]||[]).concat(n||[]).map(Ne).join(" "),buildNodeAttributes:t=>Co.concat(t||[]).map(Ne).join(" "),buildEdgeAttributes:t=>Oo.concat(t||[]).map(Ne).join(" ")};var Sn=_(require("lodash/cloneDeep.js"),1);function Po(t){return t.replace(/\\/g,"\\\\").replace(/\n\s*/g,"\\l").replace(/"/g,'\\"').concat("\\l")}function jo(t){return t.replace(/\\/g,"\\\\").replace(/\n\s*/g,"   \\l").replace(/"/g,'\\"').concat("   \\l")}function _o(t){let e=t||"top-down";return e==="top-down"||e==="bottom-top"}function Fo(t,e){return e.from===e.to&&t.findStateByName(e.from).statemachine&&e.type!=="internal"}var D={escapeString:Po,escapeLabelString:jo,isVertical:_o,isCompositeSelf:Fo};function Cn(t){return e=>e.type===t}function Ve(t){return e=>t.includes(e.type)}function Ro(t){let e=(0,Sn.default)(t);return e.label=t.label||t.name,e}function No(t){return t.note?{noteName:`note_${t.name}`,...t}:t}function Vo(t){let e={...t},n=["state",t.type];return t.class&&n.push(t.class.trim().replace(/[ ]{2,}/g," ")),e.class=n.join(" "),e}function Bo(t){return t==="activity"?"":`${t}/ `}function Ho(t){return t.actions?{...t,actionStrings:t.actions.map(e=>`${Bo(e.type)}${e.body}`)}:t}function qo(t){return t.note?{...t,noteFlattened:t.note.join("")}:t}function Do(t){return e=>{var d;let n=(d=(t||[]).find(l=>l.name==="color"))==null?void 0:d.value;return n&&!e.color&&Ve(["initial","fork","join","junction","forkjoin","final"])(e)&&(e.color=n),e}}function Lo(t){return t.note?{...t,note:t.note.map(D.escapeString)}:t}function zo(t){return e=>Ve(["fork","join","forkjoin"])(e)?{sizingExtras:D.isVertical(t)?"height=0.1":"width=0.1",...e}:e}function Mo(t){return t.type==="parallel"&&t.statemachine&&t.statemachine.states&&(t.statemachine.states=t.statemachine.states.map(e=>Cn("regular")(e)?{...e,parentIsParallel:!0}:e)),t}var P={isType:Cn,isOneOfTypes:Ve,setLabel:Ro,classifyState:Vo,nameNote:No,flattenActions:Ho,flattenNote:qo,recolor:Do,escapeStateStrings:Lo,tipForkJoinStates:zo,flagParallelChildren:Mo};function Uo(t){let e={...t};return e.note&&(e.note=e.note.map(D.escapeString)),e.label&&(e.label=D.escapeLabelString(e.label)),e}function Jo(t){return e=>{let n={};return e.isCompositeSelf&&(D.isVertical(t)?n={tailportflags:'tailport="e" headport="e"',headportflags:'tailport="w"'}:e.hasParent?n={tailportflags:'tailport="n" headport="n"',headportflags:'tailport="s"'}:n={tailportflags:'tailport="s" headport="s"',headportflags:'tailport="n"'}),{...e,...n}}}function Go(t){let e=["transition"];return t.type&&e.push(t.type),t.class&&e.push(t.class.trim().replace(/[ ]{2,}/g," ")),t.class=e.join(" "),t}var xe={escapeTransitionStrings:Uo,addPorts:Jo,classifyTransition:Go};var ie=class{COUNTER=0;constructor(){this.reset()}reset(){this.COUNTER=0}next(){return++this.COUNTER}nextAsString(){return this.next().toString(10)}};var Rn=_(_n(),1);function ei(t){return e=>(Object.prototype.hasOwnProperty.call(e,"statemachine")&&(e.nestedExternalSelfTransitions=t.findExternalSelfTransitions(e.name).map(n=>n.name)),e)}function Nn(t,e,n,d){return t.filter(l=>l.statemachine).forEach(l=>{l.statemachine.states=Nn(l.statemachine.states,e,n,d)}),t.map(P.setLabel).map(P.nameNote).map(P.classifyState).map(P.escapeStateStrings).map(P.flattenNote).map(P.flattenActions).map(P.flagParallelChildren).map(P.tipForkJoinStates(e)).map(P.recolor(n)).map(ei(d))}function ti(t){return t.initialStates=t.states.filter(P.isType("initial")),t.regularStates=t.states.filter(e=>P.isType("regular")(e)&&!e.statemachine),t.historyStates=t.states.filter(P.isType("history")),t.deepHistoryStates=t.states.filter(P.isType("deephistory")),t.choiceStates=t.states.filter(P.isType("choice")),t.forkjoinStates=t.states.filter(P.isOneOfTypes(["fork","join","forkjoin"])),t.junctionStates=t.states.filter(P.isType("junction")),t.terminateStates=t.states.filter(P.isType("terminate")),t.finalStates=t.states.filter(P.isType("final")),t.compositeStates=t.states.filter(e=>e.statemachine),t}function ni(t){return e=>(t.findStateByName(e.from).statemachine&&(e.fromComposite=!0),t.findStateByName(e.to).statemachine&&(e.toComposite=!0),e)}function ri(t){return e=>{let n={};return D.isCompositeSelf(t,e)&&(t.findStateByName(e.from).hasParent?n={hasParent:!0,isCompositeSelf:!0}:n={isCompositeSelf:!0}),{...e,...n}}}function li(t){return e=>(e.name=`tr_${e.from}_${e.to}_${t.nextAsString()}`,Boolean(e.note)&&(e.noteName=`note_${e.name}`),e)}function ai(t,e,n){return t.flattenedTransitions.map(li(n)).map(xe.escapeTransitionStrings).map(xe.classifyTransition).map(P.flattenNote).map(ni(t)).map(ri(t)).map(xe.addPorts(e))}var $e=(t,e)=>{e=e||{};let n=(0,Fn.default)(t),d=new N(n);return n.transitions=ai(d,e.direction,new ie),n.states=Nn(n.states,e.direction,e.dotNodeAttrs,d),n=ti(n),n.graphAttributes=be.buildGraphAttributes(R.getOptionValue(e,"engine"),R.getOptionValue(e,"direction"),e.dotGraphAttrs),n.nodeAttributes=be.buildNodeAttributes(e.dotNodeAttrs),n.edgeAttributes=be.buildEdgeAttributes(e.dotEdgeAttrs),(0,Rn.default)(n)};var Vn=_(require("viz.js"),1);var oi={oldsvg:"svg",oldps2:"ps2",oldeps:"eps"},ii=(t,e)=>(0,Vn.default)($e(t,e),{engine:R.getOptionValue(e,"engine"),format:oi[R.getOptionValue(e,"outputType")]||"svg"}),qe=ii;var si=/[\u0000-\u002C|\u002F|\u003B-\u0040|\u005B-\u0060|\u007B-\u00BF|\u00D7|\u00F7|\u0300-\u036F|\u037E|\u2000-\u200B|\u200E-\u206F|\u2190-\u2BFF|\u2FF0-\u3000|\uD800-\uF8FF|\uFDD0-\uFDEF|\uFFFE-\uFFFF]/g,ci=/[-|.|0-9|\u00B7|\u0300-\u036F|\u203F-\u2040]/g;function Bn(t){return t.replace(si,"_")}function ui(t){let e=Bn(t);return e.match(ci)&&(e=`_${t}`),e}var Ie=t=>(t=t||"",t.length===0?"__empty":ui(t[0]).concat(Bn(t.slice(1))));var fi=/[\u00B7|\u0300-\u036F|\u203F-\u2040|\u0000-\u0029|\u002B-\u002C|\u002F|\u003B-\u0040|\u005B-\u0060|\u007B-\u00BF|\u00D7|\u00F7|\u0300-\u036F|\u037E|\u2000-\u200B|\u200E-\u206F|\u2190-\u2BFF|\u2FF0-\u3000|\uD800-\uF8FF|\uFDD0-\uFDEF|\uFFFE-\uFFFF]/g,mi=/[.]/g;function Hn(t){return t.replace(fi,"_")}function pi(t){let e=Hn(t);return e.match(mi)&&(e=`_${t}`),e}function di(t){return t=t.replace(/\s+/g," ").trim(),pi(t[0]).concat(Hn(t.slice(1)))}var qn=t=>{let e=t||"";return e.length===0?"empty":e.split(/[\n\r]+/).filter(n=>n.length>0).map(di).join(" ")};var hi={regular:"state",initial:"initial",final:"final",terminate:"final",parallel:"parallel",history:"history",deephistory:"history"};function gi(t){return hi[t]||"state"}function yi(t){let e={target:Ie(t.to)};return t.event&&(e.event=qn(t.event)),t.cond&&(e.cond=t.cond),t.action&&(e.action=t.action),t.type&&(e.type=t.type),e}function vi(t,e){return t.filter(n=>n.type===e).map(n=>n.body)}function De(t,e,n,d){let l=vi(n,d);l.length>0&&(t[e]=(t[e]||[]).concat(l))}function bi(t,e){e.actions&&(De(t,"onentries",e.actions,"entry"),De(t,"onentries",e.actions,"activity"),De(t,"onexits",e.actions,"exit"))}function xi(t,e,n){let d=n.filter(l=>l.from===e.name).map(yi);d.length>0&&(t.transitions=d)}function $i(t,e,n){if(e.statemachine){let d=ee(e.statemachine,void 0,n);t.states=(t.states||[]).concat(d.states),d.initial&&(t.initial=d.initial)}}function Ii(t){return t=t||[],e=>{let n={kind:gi(e.type),id:Ie(e.name)};return e.type==="deephistory"&&(n.type="deep"),bi(n,e),xi(n,e,t),$i(n,e,t),n}}function Ei(t){let e=t.states.filter(n=>n.type==="initial");if(e.length>0)return e[0].name}function Ti(t,e){let n=e;if(e&&t.transitions){let d=t.transitions.filter(l=>l.from===e);d.length>0&&!d[0].action&&(n=d[0].to)}return n}function ee(t,e,n){let d=Ei(t),l=Ti(t,d),u={states:t.states.filter(s=>l&&l!==d?s.type!=="initial":!0).map(Ii(n||new N(t).flattenedTransitions))};return l&&(u.initial=Ie(l)),u}var Un=_(Mn(),1),Ci=t=>(0,Un.default)(ee(t)),Jn=Ci;var Oi=Xn.default;function Ue(t){let e={smcat:Oi,dot:$e,svg:qe,oldsvg:qe,scjson:ee,scxml:Jn};return(0,Gn.default)(e,t)?e[t]:n=>n}var Wn="10.1.6";function Qn(t,e){let n=bn.getAST(t,e),d=R.getOptionValue(e,"desugar");return Ue(R.getOptionValue(e,"outputType"))(d?In(n):n,e)}var Yn=Wn;function Zn(){return R.getAllowedValues()}var Pi={render:Qn,version:Yn,getAllowedValues:Zn};
